!function(t){t.color={},t.color.make=function(e,n,i,r){var a={};return a.r=e||0,a.g=n||0,a.b=i||0,a.a=null!=r?r:1,a.add=function(t,e){for(var n=0;n<t.length;++n)a[t.charAt(n)]+=e;return a.normalize()},a.scale=function(t,e){for(var n=0;n<t.length;++n)a[t.charAt(n)]*=e;return a.normalize()},a.toString=function(){return a.a>=1?"rgb("+[a.r,a.g,a.b].join(",")+")":"rgba("+[a.r,a.g,a.b,a.a].join(",")+")"},a.normalize=function(){function t(t,e,n){return e<t?t:e>n?n:e}return a.r=t(0,parseInt(a.r),255),a.g=t(0,parseInt(a.g),255),a.b=t(0,parseInt(a.b),255),a.a=t(0,a.a,1),a},a.clone=function(){return t.color.make(a.r,a.b,a.g,a.a)},a.normalize()},t.color.extract=function(e,n){var i;do{if(i=e.css(n).toLowerCase(),""!=i&&"transparent"!=i)break;e=e.parent()}while(e.length&&!t.nodeName(e.get(0),"body"));return"rgba(0, 0, 0, 0)"==i&&(i="transparent"),t.color.parse(i)},t.color.parse=function(n){var i,r=t.color.make;if(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n))return r(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10));if(i=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return r(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),parseFloat(i[4]));if(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(n))return r(2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3]));if(i=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return r(2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3]),parseFloat(i[4]));if(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n))return r(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16));if(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(n))return r(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16));var a=t.trim(n).toLowerCase();return"transparent"==a?r(255,255,255,0):(i=e[a]||[0,0,0],r(i[0],i[1],i[2]))};var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(t){function e(e,n){var i=n.children("."+e)[0];if(null==i&&(i=document.createElement("canvas"),i.className=e,t(i).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(n),!i.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");i=window.G_vmlCanvasManager.initElement(i)}this.element=i;var r=this.context=i.getContext("2d"),a=window.devicePixelRatio||1,o=r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;this.pixelRatio=a/o,this.resize(n.width(),n.height()),this.textContainer=null,this.text={},this._textCache={}}function n(n,r,a,o){function s(t,e){e=[vt].concat(e);for(var n=0;n<t.length;++n)t[n].apply(this,e)}function l(){for(var n={Canvas:e},i=0;i<o.length;++i){var r=o[i];r.init(vt,n),r.options&&t.extend(!0,rt,r.options)}}function u(e){t.extend(!0,rt,e),e&&e.colors&&(rt.colors=e.colors),null==rt.xaxis.color&&(rt.xaxis.color=t.color.parse(rt.grid.color).scale("a",.22).toString()),null==rt.yaxis.color&&(rt.yaxis.color=t.color.parse(rt.grid.color).scale("a",.22).toString()),null==rt.xaxis.tickColor&&(rt.xaxis.tickColor=rt.grid.tickColor||rt.xaxis.color),null==rt.yaxis.tickColor&&(rt.yaxis.tickColor=rt.grid.tickColor||rt.yaxis.color),null==rt.grid.borderColor&&(rt.grid.borderColor=rt.grid.color),null==rt.grid.tickColor&&(rt.grid.tickColor=t.color.parse(rt.grid.color).scale("a",.22).toString());var i,r,a,o=n.css("font-size"),l=o?+o.replace("px",""):13,u={style:n.css("font-style"),size:Math.round(.8*l),variant:n.css("font-variant"),weight:n.css("font-weight"),family:n.css("font-family")};for(a=rt.xaxes.length||1,i=0;i<a;++i)r=rt.xaxes[i],r&&!r.tickColor&&(r.tickColor=r.color),r=t.extend(!0,{},rt.xaxis,r),rt.xaxes[i]=r,r.font&&(r.font=t.extend({},u,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(1.15*r.font.size)));for(a=rt.yaxes.length||1,i=0;i<a;++i)r=rt.yaxes[i],r&&!r.tickColor&&(r.tickColor=r.color),r=t.extend(!0,{},rt.yaxis,r),rt.yaxes[i]=r,r.font&&(r.font=t.extend({},u,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(1.15*r.font.size)));for(rt.xaxis.noTicks&&null==rt.xaxis.ticks&&(rt.xaxis.ticks=rt.xaxis.noTicks),rt.yaxis.noTicks&&null==rt.yaxis.ticks&&(rt.yaxis.ticks=rt.yaxis.noTicks),rt.x2axis&&(rt.xaxes[1]=t.extend(!0,{},rt.xaxis,rt.x2axis),rt.xaxes[1].position="top",null==rt.x2axis.min&&(rt.xaxes[1].min=null),null==rt.x2axis.max&&(rt.xaxes[1].max=null)),rt.y2axis&&(rt.yaxes[1]=t.extend(!0,{},rt.yaxis,rt.y2axis),rt.yaxes[1].position="right",null==rt.y2axis.min&&(rt.yaxes[1].min=null),null==rt.y2axis.max&&(rt.yaxes[1].max=null)),rt.grid.coloredAreas&&(rt.grid.markings=rt.grid.coloredAreas),rt.grid.coloredAreasColor&&(rt.grid.markingsColor=rt.grid.coloredAreasColor),rt.lines&&t.extend(!0,rt.series.lines,rt.lines),rt.points&&t.extend(!0,rt.series.points,rt.points),rt.bars&&t.extend(!0,rt.series.bars,rt.bars),null!=rt.shadowSize&&(rt.series.shadowSize=rt.shadowSize),null!=rt.highlightColor&&(rt.series.highlightColor=rt.highlightColor),i=0;i<rt.xaxes.length;++i)v(ht,i+1).options=rt.xaxes[i];for(i=0;i<rt.yaxes.length;++i)v(ct,i+1).options=rt.yaxes[i];for(var h in gt)rt.hooks[h]&&rt.hooks[h].length&&(gt[h]=gt[h].concat(rt.hooks[h]));s(gt.processOptions,[rt])}function h(t){it=c(t),m(),x()}function c(e){for(var n=[],i=0;i<e.length;++i){var r=t.extend(!0,{},rt.series);null!=e[i].data?(r.data=e[i].data,delete e[i].data,t.extend(!0,r,e[i]),e[i].data=r.data):r.data=e[i],n.push(r)}return n}function f(t,e){var n=t[e+"axis"];return"object"==typeof n&&(n=n.n),"number"!=typeof n&&(n=1),n}function d(){return t.grep(ht.concat(ct),function(t){return t})}function p(t){var e,n,i={};for(e=0;e<ht.length;++e)n=ht[e],n&&n.used&&(i["x"+n.n]=n.c2p(t.left));for(e=0;e<ct.length;++e)n=ct[e],n&&n.used&&(i["y"+n.n]=n.c2p(t.top));return void 0!==i.x1&&(i.x=i.x1),void 0!==i.y1&&(i.y=i.y1),i}function g(t){var e,n,i,r={};for(e=0;e<ht.length;++e)if(n=ht[e],n&&n.used&&(i="x"+n.n,null==t[i]&&1==n.n&&(i="x"),null!=t[i])){r.left=n.p2c(t[i]);break}for(e=0;e<ct.length;++e)if(n=ct[e],n&&n.used&&(i="y"+n.n,null==t[i]&&1==n.n&&(i="y"),null!=t[i])){r.top=n.p2c(t[i]);break}return r}function v(e,n){return e[n-1]||(e[n-1]={n:n,direction:e==ht?"x":"y",options:t.extend(!0,{},e==ht?rt.xaxis:rt.yaxis)}),e[n-1]}function m(){var e,n=it.length,i=-1;for(e=0;e<it.length;++e){var r=it[e].color;null!=r&&(n--,"number"==typeof r&&r>i&&(i=r))}n<=i&&(n=i+1);var a,o=[],s=rt.colors,l=s.length,u=0;for(e=0;e<n;e++)a=t.color.parse(s[e%l]||"#666"),e%l==0&&e&&(u=u>=0?u<.5?-u-.2:0:-u),o[e]=a.scale("rgb",1+u);var h,c=0;for(e=0;e<it.length;++e){if(h=it[e],null==h.color?(h.color=o[c].toString(),++c):"number"==typeof h.color&&(h.color=o[h.color].toString()),null==h.lines.show){var d,p=!0;for(d in h)if(h[d]&&h[d].show){p=!1;break}p&&(h.lines.show=!0)}null==h.lines.zero&&(h.lines.zero=!!h.lines.fill),h.xaxis=v(ht,f(h,"x")),h.yaxis=v(ct,f(h,"y"))}}function x(){function e(t,e,n){e<t.datamin&&e!=-x&&(t.datamin=e),n>t.datamax&&n!=x&&(t.datamax=n)}var n,i,r,a,o,l,u,h,c,f,p,g,v=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,x=Number.MAX_VALUE;for(t.each(d(),function(t,e){e.datamin=v,e.datamax=m,e.used=!1}),n=0;n<it.length;++n)o=it[n],o.datapoints={points:[]},s(gt.processRawData,[o,o.data,o.datapoints]);for(n=0;n<it.length;++n){if(o=it[n],p=o.data,g=o.datapoints.format,!g){if(g=[],g.push({x:!0,number:!0,required:!0}),g.push({y:!0,number:!0,required:!0}),o.bars.show||o.lines.show&&o.lines.fill){var y=!!(o.bars.show&&o.bars.zero||o.lines.show&&o.lines.zero);g.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:y}),o.bars.horizontal&&(delete g[g.length-1].y,g[g.length-1].x=!0)}o.datapoints.format=g}if(null==o.datapoints.pointsize){o.datapoints.pointsize=g.length,u=o.datapoints.pointsize,l=o.datapoints.points;var b=o.lines.show&&o.lines.steps;for(o.xaxis.used=o.yaxis.used=!0,i=r=0;i<p.length;++i,r+=u){f=p[i];var _=null==f;if(!_)for(a=0;a<u;++a)h=f[a],c=g[a],c&&(c.number&&null!=h&&(h=+h,isNaN(h)?h=null:h==1/0?h=x:h==-(1/0)&&(h=-x)),null==h&&(c.required&&(_=!0),null!=c.defaultValue&&(h=c.defaultValue))),l[r+a]=h;if(_)for(a=0;a<u;++a)h=l[r+a],null!=h&&(c=g[a],c.autoscale!==!1&&(c.x&&e(o.xaxis,h,h),c.y&&e(o.yaxis,h,h))),l[r+a]=null;else if(b&&r>0&&null!=l[r-u]&&l[r-u]!=l[r]&&l[r-u+1]!=l[r+1]){for(a=0;a<u;++a)l[r+u+a]=l[r+a];l[r+1]=l[r-u+1],r+=u}}}}for(n=0;n<it.length;++n)o=it[n],s(gt.processDatapoints,[o,o.datapoints]);for(n=0;n<it.length;++n){o=it[n],l=o.datapoints.points,u=o.datapoints.pointsize,g=o.datapoints.format;var w=v,M=v,k=m,S=m;for(i=0;i<l.length;i+=u)if(null!=l[i])for(a=0;a<u;++a)h=l[i+a],c=g[a],c&&c.autoscale!==!1&&h!=x&&h!=-x&&(c.x&&(h<w&&(w=h),h>k&&(k=h)),c.y&&(h<M&&(M=h),h>S&&(S=h)));if(o.bars.show){var T;switch(o.bars.align){case"left":T=0;break;case"right":T=-o.bars.barWidth;break;default:T=-o.bars.barWidth/2}o.bars.horizontal?(M+=T,S+=T+o.bars.barWidth):(w+=T,k+=T+o.bars.barWidth)}e(o.xaxis,w,k),e(o.yaxis,M,S)}t.each(d(),function(t,e){e.datamin==v&&(e.datamin=null),e.datamax==m&&(e.datamax=null)})}function y(){n.css("padding",0).children().filter(function(){return!t(this).hasClass("flot-overlay")&&!t(this).hasClass("flot-base")}).remove(),"static"==n.css("position")&&n.css("position","relative"),at=new e("flot-base",n),ot=new e("flot-overlay",n),lt=at.context,ut=ot.context,st=t(ot.element).unbind();var i=n.data("plot");i&&(i.shutdown(),ot.clear()),n.data("plot",vt)}function b(){rt.grid.hoverable&&(st.mousemove(q),st.bind("mouseleave",V)),rt.grid.clickable&&st.click(G),s(gt.bindEvents,[st])}function _(){xt&&clearTimeout(xt),st.unbind("mousemove",q),st.unbind("mouseleave",V),st.unbind("click",G),s(gt.shutdown,[st])}function w(t){function e(t){return t}var n,i,r=t.options.transform||e,a=t.options.inverseTransform;"x"==t.direction?(n=t.scale=dt/Math.abs(r(t.max)-r(t.min)),i=Math.min(r(t.max),r(t.min))):(n=t.scale=pt/Math.abs(r(t.max)-r(t.min)),n=-n,i=Math.max(r(t.max),r(t.min))),r==e?t.p2c=function(t){return(t-i)*n}:t.p2c=function(t){return(r(t)-i)*n},a?t.c2p=function(t){return a(i+t/n)}:t.c2p=function(t){return i+t/n}}function M(t){for(var e=t.options,n=t.ticks||[],i=e.labelWidth||0,r=e.labelHeight||0,a=i||("x"==t.direction?Math.floor(at.width/(n.length||1)):null),o=t.direction+"Axis "+t.direction+t.n+"Axis",s="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+o,l=e.font||"flot-tick-label tickLabel",u=0;u<n.length;++u){var h=n[u];if(h.label){var c=at.getTextInfo(s,h.label,l,null,a);i=Math.max(i,c.width),r=Math.max(r,c.height)}}t.labelWidth=e.labelWidth||i,t.labelHeight=e.labelHeight||r}function k(e){var n=e.labelWidth,i=e.labelHeight,r=e.options.position,a="x"===e.direction,o=e.options.tickLength,s=rt.grid.axisMargin,l=rt.grid.labelMargin,u=!0,h=!0,c=!0,f=!1;t.each(a?ht:ct,function(t,n){n&&(n.show||n.reserveSpace)&&(n===e?f=!0:n.options.position===r&&(f?h=!1:u=!1),f||(c=!1))}),h&&(s=0),null==o&&(o=c?"full":5),isNaN(+o)||(l+=+o),a?(i+=l,"bottom"==r?(ft.bottom+=i+s,e.box={top:at.height-ft.bottom,height:i}):(e.box={top:ft.top+s,height:i},ft.top+=i+s)):(n+=l,"left"==r?(e.box={left:ft.left+s,width:n},ft.left+=n+s):(ft.right+=n+s,e.box={left:at.width-ft.right,width:n})),e.position=r,e.tickLength=o,e.box.padding=l,e.innermost=u}function S(t){"x"==t.direction?(t.box.left=ft.left-t.labelWidth/2,t.box.width=at.width-ft.left-ft.right+t.labelWidth):(t.box.top=ft.top-t.labelHeight/2,t.box.height=at.height-ft.bottom-ft.top+t.labelHeight)}function T(){var e,n=rt.grid.minBorderMargin;if(null==n)for(n=0,e=0;e<it.length;++e)n=Math.max(n,2*(it[e].points.radius+it[e].points.lineWidth/2));var i={left:n,right:n,top:n,bottom:n};t.each(d(),function(t,e){e.reserveSpace&&e.ticks&&e.ticks.length&&("x"===e.direction?(i.left=Math.max(i.left,e.labelWidth/2),i.right=Math.max(i.right,e.labelWidth/2)):(i.bottom=Math.max(i.bottom,e.labelHeight/2),i.top=Math.max(i.top,e.labelHeight/2)))}),ft.left=Math.ceil(Math.max(i.left,ft.left)),ft.right=Math.ceil(Math.max(i.right,ft.right)),ft.top=Math.ceil(Math.max(i.top,ft.top)),ft.bottom=Math.ceil(Math.max(i.bottom,ft.bottom))}function C(){var e,n=d(),i=rt.grid.show;for(var r in ft){var a=rt.grid.margin||0;ft[r]="number"==typeof a?a:a[r]||0}s(gt.processOffset,[ft]);for(var r in ft)"object"==typeof rt.grid.borderWidth?ft[r]+=i?rt.grid.borderWidth[r]:0:ft[r]+=i?rt.grid.borderWidth:0;if(t.each(n,function(t,e){var n=e.options;e.show=null==n.show?e.used:n.show,e.reserveSpace=null==n.reserveSpace?e.show:n.reserveSpace,A(e)}),i){var o=t.grep(n,function(t){return t.show||t.reserveSpace});for(t.each(o,function(t,e){L(e),E(e),F(e,e.ticks),M(e)}),e=o.length-1;e>=0;--e)k(o[e]);T(),t.each(o,function(t,e){S(e)})}dt=at.width-ft.left-ft.right,pt=at.height-ft.bottom-ft.top,t.each(n,function(t,e){w(e)}),i&&I(),Y()}function A(t){var e=t.options,n=+(null!=e.min?e.min:t.datamin),i=+(null!=e.max?e.max:t.datamax),r=i-n;if(0==r){var a=0==i?1:.01;null==e.min&&(n-=a),null!=e.max&&null==e.min||(i+=a)}else{var o=e.autoscaleMargin;null!=o&&(null==e.min&&(n-=r*o,n<0&&null!=t.datamin&&t.datamin>=0&&(n=0)),null==e.max&&(i+=r*o,i>0&&null!=t.datamax&&t.datamax<=0&&(i=0)))}t.min=n,t.max=i}function L(e){var n,r=e.options;n="number"==typeof r.ticks&&r.ticks>0?r.ticks:.3*Math.sqrt("x"==e.direction?at.width:at.height);var a=(e.max-e.min)/n,o=-Math.floor(Math.log(a)/Math.LN10),s=r.tickDecimals;null!=s&&o>s&&(o=s);var l,u=Math.pow(10,-o),h=a/u;if(h<1.5?l=1:h<3?(l=2,h>2.25&&(null==s||o+1<=s)&&(l=2.5,++o)):l=h<7.5?5:10,l*=u,null!=r.minTickSize&&l<r.minTickSize&&(l=r.minTickSize),e.delta=a,e.tickDecimals=Math.max(0,null!=s?s:o),e.tickSize=r.tickSize||l,"time"==r.mode&&!e.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(e.tickGenerator||(e.tickGenerator=function(t){var e,n=[],r=i(t.min,t.tickSize),a=0,o=Number.NaN;do e=o,o=r+a*t.tickSize,n.push(o),++a;while(o<t.max&&o!=e);return n},e.tickFormatter=function(t,e){var n=e.tickDecimals?Math.pow(10,e.tickDecimals):1,i=""+Math.round(t*n)/n;if(null!=e.tickDecimals){var r=i.indexOf("."),a=r==-1?0:i.length-r-1;if(a<e.tickDecimals)return(a?i:i+".")+(""+n).substr(1,e.tickDecimals-a)}return i}),t.isFunction(r.tickFormatter)&&(e.tickFormatter=function(t,e){return""+r.tickFormatter(t,e)}),null!=r.alignTicksWithAxis){var c=("x"==e.direction?ht:ct)[r.alignTicksWithAxis-1];if(c&&c.used&&c!=e){var f=e.tickGenerator(e);if(f.length>0&&(null==r.min&&(e.min=Math.min(e.min,f[0])),null==r.max&&f.length>1&&(e.max=Math.max(e.max,f[f.length-1]))),e.tickGenerator=function(t){var e,n,i=[];for(n=0;n<c.ticks.length;++n)e=(c.ticks[n].v-c.min)/(c.max-c.min),e=t.min+e*(t.max-t.min),i.push(e);return i},!e.mode&&null==r.tickDecimals){var d=Math.max(0,-Math.floor(Math.log(e.delta)/Math.LN10)+1),p=e.tickGenerator(e);p.length>1&&/\..*0$/.test((p[1]-p[0]).toFixed(d))||(e.tickDecimals=d)}}}}function E(e){var n=e.options.ticks,i=[];null==n||"number"==typeof n&&n>0?i=e.tickGenerator(e):n&&(i=t.isFunction(n)?n(e):n);var r,a;for(e.ticks=[],r=0;r<i.length;++r){var o=null,s=i[r];"object"==typeof s?(a=+s[0],s.length>1&&(o=s[1])):a=+s,null==o&&(o=e.tickFormatter(a,e)),isNaN(a)||e.ticks.push({v:a,label:o})}}function F(t,e){t.options.autoscaleMargin&&e.length>0&&(null==t.options.min&&(t.min=Math.min(t.min,e[0].v)),null==t.options.max&&e.length>1&&(t.max=Math.max(t.max,e[e.length-1].v)))}function R(){at.clear(),s(gt.drawBackground,[lt]);var t=rt.grid;t.show&&t.backgroundColor&&z(),t.show&&!t.aboveData&&D();for(var e=0;e<it.length;++e)s(gt.drawSeries,[lt,it[e]]),N(it[e]);s(gt.draw,[lt]),t.show&&t.aboveData&&D(),at.render(),Z()}function P(t,e){for(var n,i,r,a,o=d(),s=0;s<o.length;++s)if(n=o[s],n.direction==e&&(a=e+n.n+"axis",t[a]||1!=n.n||(a=e+"axis"),t[a])){i=t[a].from,r=t[a].to;break}if(t[a]||(n="x"==e?ht[0]:ct[0],i=t[e+"1"],r=t[e+"2"]),null!=i&&null!=r&&i>r){var l=i;i=r,r=l}return{from:i,to:r,axis:n}}function z(){lt.save(),lt.translate(ft.left,ft.top),lt.fillStyle=nt(rt.grid.backgroundColor,pt,0,"rgba(255, 255, 255, 0)"),lt.fillRect(0,0,dt,pt),lt.restore()}function D(){var e,n,i,r;lt.save(),lt.translate(ft.left,ft.top);var a=rt.grid.markings;if(a)for(t.isFunction(a)&&(n=vt.getAxes(),n.xmin=n.xaxis.min,n.xmax=n.xaxis.max,n.ymin=n.yaxis.min,n.ymax=n.yaxis.max,a=a(n)),e=0;e<a.length;++e){var o=a[e],s=P(o,"x"),l=P(o,"y");if(null==s.from&&(s.from=s.axis.min),null==s.to&&(s.to=s.axis.max),null==l.from&&(l.from=l.axis.min),null==l.to&&(l.to=l.axis.max),!(s.to<s.axis.min||s.from>s.axis.max||l.to<l.axis.min||l.from>l.axis.max)){s.from=Math.max(s.from,s.axis.min),s.to=Math.min(s.to,s.axis.max),l.from=Math.max(l.from,l.axis.min),l.to=Math.min(l.to,l.axis.max);var u=s.from===s.to,h=l.from===l.to;if(!u||!h)if(s.from=Math.floor(s.axis.p2c(s.from)),s.to=Math.floor(s.axis.p2c(s.to)),l.from=Math.floor(l.axis.p2c(l.from)),l.to=Math.floor(l.axis.p2c(l.to)),u||h){var c=o.lineWidth||rt.grid.markingsLineWidth,f=c%2?.5:0;lt.beginPath(),lt.strokeStyle=o.color||rt.grid.markingsColor,lt.lineWidth=c,u?(lt.moveTo(s.to+f,l.from),lt.lineTo(s.to+f,l.to)):(lt.moveTo(s.from,l.to+f),lt.lineTo(s.to,l.to+f)),lt.stroke()}else lt.fillStyle=o.color||rt.grid.markingsColor,lt.fillRect(s.from,l.to,s.to-s.from,l.from-l.to)}}n=d(),i=rt.grid.borderWidth;for(var p=0;p<n.length;++p){var g,v,m,x,y=n[p],b=y.box,_=y.tickLength;if(y.show&&0!=y.ticks.length){for(lt.lineWidth=1,"x"==y.direction?(g=0,v="full"==_?"top"==y.position?0:pt:b.top-ft.top+("top"==y.position?b.height:0)):(v=0,g="full"==_?"left"==y.position?0:dt:b.left-ft.left+("left"==y.position?b.width:0)),y.innermost||(lt.strokeStyle=y.options.color,lt.beginPath(),m=x=0,"x"==y.direction?m=dt+1:x=pt+1,1==lt.lineWidth&&("x"==y.direction?v=Math.floor(v)+.5:g=Math.floor(g)+.5),lt.moveTo(g,v),lt.lineTo(g+m,v+x),lt.stroke()),lt.strokeStyle=y.options.tickColor,lt.beginPath(),e=0;e<y.ticks.length;++e){var w=y.ticks[e].v;m=x=0,isNaN(w)||w<y.min||w>y.max||"full"==_&&("object"==typeof i&&i[y.position]>0||i>0)&&(w==y.min||w==y.max)||("x"==y.direction?(g=y.p2c(w),x="full"==_?-pt:_,"top"==y.position&&(x=-x)):(v=y.p2c(w),m="full"==_?-dt:_,"left"==y.position&&(m=-m)),1==lt.lineWidth&&("x"==y.direction?g=Math.floor(g)+.5:v=Math.floor(v)+.5),lt.moveTo(g,v),lt.lineTo(g+m,v+x))}lt.stroke()}}i&&(r=rt.grid.borderColor,"object"==typeof i||"object"==typeof r?("object"!=typeof i&&(i={top:i,right:i,bottom:i,left:i}),"object"!=typeof r&&(r={top:r,right:r,bottom:r,left:r}),i.top>0&&(lt.strokeStyle=r.top,lt.lineWidth=i.top,lt.beginPath(),lt.moveTo(0-i.left,0-i.top/2),lt.lineTo(dt,0-i.top/2),lt.stroke()),i.right>0&&(lt.strokeStyle=r.right,lt.lineWidth=i.right,lt.beginPath(),lt.moveTo(dt+i.right/2,0-i.top),lt.lineTo(dt+i.right/2,pt),lt.stroke()),i.bottom>0&&(lt.strokeStyle=r.bottom,lt.lineWidth=i.bottom,lt.beginPath(),lt.moveTo(dt+i.right,pt+i.bottom/2),lt.lineTo(0,pt+i.bottom/2),lt.stroke()),i.left>0&&(lt.strokeStyle=r.left,lt.lineWidth=i.left,lt.beginPath(),lt.moveTo(0-i.left/2,pt+i.bottom),lt.lineTo(0-i.left/2,0),lt.stroke())):(lt.lineWidth=i,lt.strokeStyle=rt.grid.borderColor,lt.strokeRect(-i/2,-i/2,dt+i,pt+i))),lt.restore()}function I(){t.each(d(),function(t,e){var n,i,r,a,o,s=e.box,l=e.direction+"Axis "+e.direction+e.n+"Axis",u="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+l,h=e.options.font||"flot-tick-label tickLabel";if(at.removeText(u),e.show&&0!=e.ticks.length)for(var c=0;c<e.ticks.length;++c)n=e.ticks[c],!n.label||n.v<e.min||n.v>e.max||("x"==e.direction?(a="center",i=ft.left+e.p2c(n.v),"bottom"==e.position?r=s.top+s.padding:(r=s.top+s.height-s.padding,o="bottom")):(o="middle",r=ft.top+e.p2c(n.v),"left"==e.position?(i=s.left+s.width-s.padding,a="right"):i=s.left+s.padding),at.addText(u,i,r,n.label,h,null,null,a,o))})}function N(t){t.lines.show&&O(t),t.bars.show&&X(t),t.points.show&&B(t)}function O(t){function e(t,e,n,i,r){var a=t.points,o=t.pointsize,s=null,l=null;lt.beginPath();for(var u=o;u<a.length;u+=o){var h=a[u-o],c=a[u-o+1],f=a[u],d=a[u+1];if(null!=h&&null!=f){if(c<=d&&c<r.min){if(d<r.min)continue;h=(r.min-c)/(d-c)*(f-h)+h,c=r.min}else if(d<=c&&d<r.min){if(c<r.min)continue;f=(r.min-c)/(d-c)*(f-h)+h,d=r.min}if(c>=d&&c>r.max){if(d>r.max)continue;h=(r.max-c)/(d-c)*(f-h)+h,c=r.max}else if(d>=c&&d>r.max){if(c>r.max)continue;f=(r.max-c)/(d-c)*(f-h)+h,d=r.max}if(h<=f&&h<i.min){if(f<i.min)continue;c=(i.min-h)/(f-h)*(d-c)+c,h=i.min}else if(f<=h&&f<i.min){if(h<i.min)continue;d=(i.min-h)/(f-h)*(d-c)+c,f=i.min}if(h>=f&&h>i.max){if(f>i.max)continue;c=(i.max-h)/(f-h)*(d-c)+c,h=i.max}else if(f>=h&&f>i.max){if(h>i.max)continue;d=(i.max-h)/(f-h)*(d-c)+c,f=i.max}h==s&&c==l||lt.moveTo(i.p2c(h)+e,r.p2c(c)+n),s=f,l=d,lt.lineTo(i.p2c(f)+e,r.p2c(d)+n)}}lt.stroke()}function n(t,e,n){for(var i=t.points,r=t.pointsize,a=Math.min(Math.max(0,n.min),n.max),o=0,s=!1,l=1,u=0,h=0;;){if(r>0&&o>i.length+r)break;o+=r;var c=i[o-r],f=i[o-r+l],d=i[o],p=i[o+l];if(s){if(r>0&&null!=c&&null==d){h=o,r=-r,l=2;continue}if(r<0&&o==u+r){lt.fill(),s=!1,r=-r,l=1,o=u=h+r;continue}}if(null!=c&&null!=d){if(c<=d&&c<e.min){if(d<e.min)continue;f=(e.min-c)/(d-c)*(p-f)+f,c=e.min}else if(d<=c&&d<e.min){if(c<e.min)continue;p=(e.min-c)/(d-c)*(p-f)+f,d=e.min}if(c>=d&&c>e.max){if(d>e.max)continue;f=(e.max-c)/(d-c)*(p-f)+f,c=e.max}else if(d>=c&&d>e.max){if(c>e.max)continue;p=(e.max-c)/(d-c)*(p-f)+f,d=e.max}if(s||(lt.beginPath(),lt.moveTo(e.p2c(c),n.p2c(a)),s=!0),f>=n.max&&p>=n.max)lt.lineTo(e.p2c(c),n.p2c(n.max)),lt.lineTo(e.p2c(d),n.p2c(n.max));else if(f<=n.min&&p<=n.min)lt.lineTo(e.p2c(c),n.p2c(n.min)),lt.lineTo(e.p2c(d),n.p2c(n.min));else{var g=c,v=d;f<=p&&f<n.min&&p>=n.min?(c=(n.min-f)/(p-f)*(d-c)+c,f=n.min):p<=f&&p<n.min&&f>=n.min&&(d=(n.min-f)/(p-f)*(d-c)+c,p=n.min),f>=p&&f>n.max&&p<=n.max?(c=(n.max-f)/(p-f)*(d-c)+c,f=n.max):p>=f&&p>n.max&&f<=n.max&&(d=(n.max-f)/(p-f)*(d-c)+c,p=n.max),c!=g&&lt.lineTo(e.p2c(g),n.p2c(f)),lt.lineTo(e.p2c(c),n.p2c(f)),lt.lineTo(e.p2c(d),n.p2c(p)),d!=v&&(lt.lineTo(e.p2c(d),n.p2c(p)),lt.lineTo(e.p2c(v),n.p2c(p)))}}}}lt.save(),lt.translate(ft.left,ft.top),lt.lineJoin="round";var i=t.lines.lineWidth,r=t.shadowSize;if(i>0&&r>0){lt.lineWidth=r,lt.strokeStyle="rgba(0,0,0,0.1)";var a=Math.PI/18;e(t.datapoints,Math.sin(a)*(i/2+r/2),Math.cos(a)*(i/2+r/2),t.xaxis,t.yaxis),lt.lineWidth=r/2,e(t.datapoints,Math.sin(a)*(i/2+r/4),Math.cos(a)*(i/2+r/4),t.xaxis,t.yaxis)}lt.lineWidth=i,lt.strokeStyle=t.color;var o=W(t.lines,t.color,0,pt);o&&(lt.fillStyle=o,n(t.datapoints,t.xaxis,t.yaxis)),i>0&&e(t.datapoints,0,0,t.xaxis,t.yaxis),lt.restore()}function B(t){function e(t,e,n,i,r,a,o,s){for(var l=t.points,u=t.pointsize,h=0;h<l.length;h+=u){var c=l[h],f=l[h+1];null==c||c<a.min||c>a.max||f<o.min||f>o.max||(lt.beginPath(),c=a.p2c(c),f=o.p2c(f)+i,"circle"==s?lt.arc(c,f,e,0,r?Math.PI:2*Math.PI,!1):s(lt,c,f,e,r),lt.closePath(),n&&(lt.fillStyle=n,lt.fill()),lt.stroke())}}lt.save(),lt.translate(ft.left,ft.top);var n=t.points.lineWidth,i=t.shadowSize,r=t.points.radius,a=t.points.symbol;if(0==n&&(n=1e-4),n>0&&i>0){var o=i/2;lt.lineWidth=o,lt.strokeStyle="rgba(0,0,0,0.1)",e(t.datapoints,r,null,o+o/2,!0,t.xaxis,t.yaxis,a),lt.strokeStyle="rgba(0,0,0,0.2)",e(t.datapoints,r,null,o/2,!0,t.xaxis,t.yaxis,a)}lt.lineWidth=n,lt.strokeStyle=t.color,e(t.datapoints,r,W(t.points,t.color),0,!1,t.xaxis,t.yaxis,a),lt.restore()}function H(t,e,n,i,r,a,o,s,l,u,h){var c,f,d,p,g,v,m,x,y;u?(x=v=m=!0,g=!1,c=n,f=t,p=e+i,d=e+r,f<c&&(y=f,f=c,c=y,g=!0,v=!1)):(g=v=m=!0,x=!1,c=t+i,f=t+r,d=n,p=e,p<d&&(y=p,p=d,d=y,x=!0,m=!1)),f<o.min||c>o.max||p<s.min||d>s.max||(c<o.min&&(c=o.min,g=!1),f>o.max&&(f=o.max,v=!1),d<s.min&&(d=s.min,x=!1),p>s.max&&(p=s.max,m=!1),c=o.p2c(c),d=s.p2c(d),f=o.p2c(f),p=s.p2c(p),a&&(l.fillStyle=a(d,p),l.fillRect(c,p,f-c,d-p)),h>0&&(g||v||m||x)&&(l.beginPath(),l.moveTo(c,d),g?l.lineTo(c,p):l.moveTo(c,p),m?l.lineTo(f,p):l.moveTo(f,p),v?l.lineTo(f,d):l.moveTo(f,d),x?l.lineTo(c,d):l.moveTo(c,d),l.stroke()))}function X(t){function e(e,n,i,r,a,o){for(var s=e.points,l=e.pointsize,u=0;u<s.length;u+=l)null!=s[u]&&H(s[u],s[u+1],s[u+2],n,i,r,a,o,lt,t.bars.horizontal,t.bars.lineWidth)}lt.save(),lt.translate(ft.left,ft.top),lt.lineWidth=t.bars.lineWidth,lt.strokeStyle=t.color;var n;switch(t.bars.align){case"left":n=0;break;case"right":n=-t.bars.barWidth;break;default:n=-t.bars.barWidth/2}var i=t.bars.fill?function(e,n){return W(t.bars,t.color,e,n)}:null;e(t.datapoints,n,n+t.bars.barWidth,i,t.xaxis,t.yaxis),lt.restore()}function W(e,n,i,r){var a=e.fill;if(!a)return null;if(e.fillColor)return nt(e.fillColor,i,r,n);var o=t.color.parse(n);return o.a="number"==typeof a?a:.4,o.normalize(),o.toString()}function Y(){if(null!=rt.legend.container?t(rt.legend.container).html(""):n.find(".legend").remove(),rt.legend.show){for(var e,i,r=[],a=[],o=!1,s=rt.legend.labelFormatter,l=0;l<it.length;++l)e=it[l],e.label&&(i=s?s(e.label,e):e.label,i&&a.push({label:i,color:e.color}));if(rt.legend.sorted)if(t.isFunction(rt.legend.sorted))a.sort(rt.legend.sorted);else if("reverse"==rt.legend.sorted)a.reverse();else{var u="descending"!=rt.legend.sorted;a.sort(function(t,e){return t.label==e.label?0:t.label<e.label!=u?1:-1})}for(var l=0;l<a.length;++l){var h=a[l];l%rt.legend.noColumns==0&&(o&&r.push("</tr>"),r.push("<tr>"),o=!0),r.push('<td class="legendColorBox"><div style="border:1px solid '+rt.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+h.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+h.label+"</td>")}if(o&&r.push("</tr>"),0!=r.length){var c='<table style="font-size:smaller;color:'+rt.grid.color+'">'+r.join("")+"</table>";if(null!=rt.legend.container)t(rt.legend.container).html(c);else{var f="",d=rt.legend.position,p=rt.legend.margin;null==p[0]&&(p=[p,p]),"n"==d.charAt(0)?f+="top:"+(p[1]+ft.top)+"px;":"s"==d.charAt(0)&&(f+="bottom:"+(p[1]+ft.bottom)+"px;"),"e"==d.charAt(1)?f+="right:"+(p[0]+ft.right)+"px;":"w"==d.charAt(1)&&(f+="left:"+(p[0]+ft.left)+"px;");var g=t('<div class="legend">'+c.replace('style="','style="position:absolute;'+f+";")+"</div>").appendTo(n);if(0!=rt.legend.backgroundOpacity){var v=rt.legend.backgroundColor;null==v&&(v=rt.grid.backgroundColor,v=v&&"string"==typeof v?t.color.parse(v):t.color.extract(g,"background-color"),v.a=1,v=v.toString());var m=g.children();t('<div style="position:absolute;width:'+m.width()+"px;height:"+m.height()+"px;"+f+"background-color:"+v+';"> </div>').prependTo(g).css("opacity",rt.legend.backgroundOpacity)}}}}}function j(t,e,n){var i,r,a,o=rt.grid.mouseActiveRadius,s=o*o+1,l=null;for(i=it.length-1;i>=0;--i)if(n(it[i])){var u=it[i],h=u.xaxis,c=u.yaxis,f=u.datapoints.points,d=h.c2p(t),p=c.c2p(e),g=o/h.scale,v=o/c.scale;if(a=u.datapoints.pointsize,h.options.inverseTransform&&(g=Number.MAX_VALUE),c.options.inverseTransform&&(v=Number.MAX_VALUE),u.lines.show||u.points.show)for(r=0;r<f.length;r+=a){var m=f[r],x=f[r+1];if(null!=m&&!(m-d>g||m-d<-g||x-p>v||x-p<-v)){var y=Math.abs(h.p2c(m)-t),b=Math.abs(c.p2c(x)-e),_=y*y+b*b;_<s&&(s=_,l=[i,r/a])}}if(u.bars.show&&!l){var w,M;switch(u.bars.align){case"left":w=0;break;case"right":w=-u.bars.barWidth;break;default:w=-u.bars.barWidth/2}for(M=w+u.bars.barWidth,r=0;r<f.length;r+=a){var m=f[r],x=f[r+1],k=f[r+2];null!=m&&(it[i].bars.horizontal?d<=Math.max(k,m)&&d>=Math.min(k,m)&&p>=x+w&&p<=x+M:d>=m+w&&d<=m+M&&p>=Math.min(k,x)&&p<=Math.max(k,x))&&(l=[i,r/a])}}}return l?(i=l[0],r=l[1],a=it[i].datapoints.pointsize,{datapoint:it[i].datapoints.points.slice(r*a,(r+1)*a),dataIndex:r,series:it[i],seriesIndex:i}):null}function q(t){rt.grid.hoverable&&U("plothover",t,function(t){return 0!=t.hoverable})}function V(t){rt.grid.hoverable&&U("plothover",t,function(){return!1})}function G(t){U("plotclick",t,function(t){return 0!=t.clickable})}function U(t,e,i){var r=st.offset(),a=e.pageX-r.left-ft.left,o=e.pageY-r.top-ft.top,s=p({left:a,top:o});s.pageX=e.pageX,s.pageY=e.pageY;var l=j(a,o,i);if(l&&(l.pageX=parseInt(l.series.xaxis.p2c(l.datapoint[0])+r.left+ft.left,10),l.pageY=parseInt(l.series.yaxis.p2c(l.datapoint[1])+r.top+ft.top,10)),rt.grid.autoHighlight){for(var u=0;u<mt.length;++u){var h=mt[u];h.auto!=t||l&&h.series==l.series&&h.point[0]==l.datapoint[0]&&h.point[1]==l.datapoint[1]||J(h.series,h.point)}l&&Q(l.series,l.datapoint,t)}n.trigger(t,[s,l])}function Z(){var t=rt.interaction.redrawOverlayInterval;return t==-1?void $():void(xt||(xt=setTimeout($,t)))}function $(){xt=null,ut.save(),ot.clear(),ut.translate(ft.left,ft.top);var t,e;for(t=0;t<mt.length;++t)e=mt[t],e.series.bars.show?et(e.series,e.point):tt(e.series,e.point);ut.restore(),s(gt.drawOverlay,[ut])}function Q(t,e,n){if("number"==typeof t&&(t=it[t]),"number"==typeof e){var i=t.datapoints.pointsize;e=t.datapoints.points.slice(i*e,i*(e+1))}var r=K(t,e);r==-1?(mt.push({series:t,point:e,auto:n}),Z()):n||(mt[r].auto=!1)}function J(t,e){if(null==t&&null==e)return mt=[],void Z();if("number"==typeof t&&(t=it[t]),"number"==typeof e){var n=t.datapoints.pointsize;e=t.datapoints.points.slice(n*e,n*(e+1))}var i=K(t,e);i!=-1&&(mt.splice(i,1),Z())}function K(t,e){for(var n=0;n<mt.length;++n){var i=mt[n];if(i.series==t&&i.point[0]==e[0]&&i.point[1]==e[1])return n}return-1}function tt(e,n){var i=n[0],r=n[1],a=e.xaxis,o=e.yaxis,s="string"==typeof e.highlightColor?e.highlightColor:t.color.parse(e.color).scale("a",.5).toString();if(!(i<a.min||i>a.max||r<o.min||r>o.max)){var l=e.points.radius+e.points.lineWidth/2;ut.lineWidth=l,ut.strokeStyle=s;var u=1.5*l;i=a.p2c(i),r=o.p2c(r),ut.beginPath(),"circle"==e.points.symbol?ut.arc(i,r,u,0,2*Math.PI,!1):e.points.symbol(ut,i,r,u,!1),ut.closePath(),ut.stroke()}}function et(e,n){var i,r="string"==typeof e.highlightColor?e.highlightColor:t.color.parse(e.color).scale("a",.5).toString(),a=r;switch(e.bars.align){case"left":i=0;break;case"right":i=-e.bars.barWidth;break;default:i=-e.bars.barWidth/2}ut.lineWidth=e.bars.lineWidth,ut.strokeStyle=r,H(n[0],n[1],n[2]||0,i,i+e.bars.barWidth,function(){return a},e.xaxis,e.yaxis,ut,e.bars.horizontal,e.bars.lineWidth)}function nt(e,n,i,r){if("string"==typeof e)return e;for(var a=lt.createLinearGradient(0,i,0,n),o=0,s=e.colors.length;o<s;++o){var l=e.colors[o];if("string"!=typeof l){var u=t.color.parse(r);null!=l.brightness&&(u=u.scale("rgb",l.brightness)),null!=l.opacity&&(u.a*=l.opacity),l=u.toString()}a.addColorStop(o/(s-1),l)}return a}var it=[],rt={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},at=null,ot=null,st=null,lt=null,ut=null,ht=[],ct=[],ft={left:0,right:0,top:0,bottom:0},dt=0,pt=0,gt={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},vt=this;vt.setData=h,vt.setupGrid=C,vt.draw=R,vt.getPlaceholder=function(){return n;
},vt.getCanvas=function(){return at.element},vt.getPlotOffset=function(){return ft},vt.width=function(){return dt},vt.height=function(){return pt},vt.offset=function(){var t=st.offset();return t.left+=ft.left,t.top+=ft.top,t},vt.getData=function(){return it},vt.getAxes=function(){var e={};return t.each(ht.concat(ct),function(t,n){n&&(e[n.direction+(1!=n.n?n.n:"")+"axis"]=n)}),e},vt.getXAxes=function(){return ht},vt.getYAxes=function(){return ct},vt.c2p=p,vt.p2c=g,vt.getOptions=function(){return rt},vt.highlight=Q,vt.unhighlight=J,vt.triggerRedrawOverlay=Z,vt.pointOffset=function(t){return{left:parseInt(ht[f(t,"x")-1].p2c(+t.x)+ft.left,10),top:parseInt(ct[f(t,"y")-1].p2c(+t.y)+ft.top,10)}},vt.shutdown=_,vt.destroy=function(){_(),n.removeData("plot").empty(),it=[],rt=null,at=null,ot=null,st=null,lt=null,ut=null,ht=[],ct=[],gt=null,mt=[],vt=null},vt.resize=function(){var t=n.width(),e=n.height();at.resize(t,e),ot.resize(t,e)},vt.hooks=gt,l(vt),u(a),y(),h(r),C(),R(),b();var mt=[],xt=null}function i(t,e){return e*Math.floor(t/e)}var r=Object.prototype.hasOwnProperty;t.fn.detach||(t.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})}),e.prototype.resize=function(t,e){if(t<=0||e<=0)throw new Error("Invalid dimensions for plot, width = "+t+", height = "+e);var n=this.element,i=this.context,r=this.pixelRatio;this.width!=t&&(n.width=t*r,n.style.width=t+"px",this.width=t),this.height!=e&&(n.height=e*r,n.style.height=e+"px",this.height=e),i.restore(),i.save(),i.scale(r,r)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var t=this._textCache;for(var e in t)if(r.call(t,e)){var n=this.getTextLayer(e),i=t[e];n.hide();for(var a in i)if(r.call(i,a)){var o=i[a];for(var s in o)if(r.call(o,s)){for(var l,u=o[s].positions,h=0;l=u[h];h++)l.active?l.rendered||(n.append(l.element),l.rendered=!0):(u.splice(h--,1),l.rendered&&l.element.detach());0==u.length&&delete o[s]}}n.show()}},e.prototype.getTextLayer=function(e){var n=this.text[e];return null==n&&(null==this.textContainer&&(this.textContainer=t("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),n=this.text[e]=t("<div></div>").addClass(e).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),n},e.prototype.getTextInfo=function(e,n,i,r,a){var o,s,l,u;if(n=""+n,o="object"==typeof i?i.style+" "+i.variant+" "+i.weight+" "+i.size+"px/"+i.lineHeight+"px "+i.family:i,s=this._textCache[e],null==s&&(s=this._textCache[e]={}),l=s[o],null==l&&(l=s[o]={}),u=l[n],null==u){var h=t("<div></div>").html(n).css({position:"absolute","max-width":a,top:-9999}).appendTo(this.getTextLayer(e));"object"==typeof i?h.css({font:o,color:i.color}):"string"==typeof i&&h.addClass(i),u=l[n]={width:h.outerWidth(!0),height:h.outerHeight(!0),element:h,positions:[]},h.detach()}return u},e.prototype.addText=function(t,e,n,i,r,a,o,s,l){var u=this.getTextInfo(t,i,r,a,o),h=u.positions;"center"==s?e-=u.width/2:"right"==s&&(e-=u.width),"middle"==l?n-=u.height/2:"bottom"==l&&(n-=u.height);for(var c,f=0;c=h[f];f++)if(c.x==e&&c.y==n)return void(c.active=!0);c={active:!0,rendered:!1,element:h.length?u.element.clone():u.element,x:e,y:n},h.push(c),c.element.css({top:Math.round(n),left:Math.round(e),"text-align":s})},e.prototype.removeText=function(t,e,n,i,a,o){if(null==i){var s=this._textCache[t];if(null!=s)for(var l in s)if(r.call(s,l)){var u=s[l];for(var h in u)if(r.call(u,h))for(var c,f=u[h].positions,d=0;c=f[d];d++)c.active=!1}}else for(var c,f=this.getTextInfo(t,i,a,o).positions,d=0;c=f[d];d++)c.x==e&&c.y==n&&(c.active=!1)},t.plot=function(e,i,r){var a=new n(t(e),i,r,t.plot.plugins);return a},t.plot.version="0.8.3",t.plot.plugins=[],t.fn.plot=function(e,n){return this.each(function(){t.plot(this,e,n)})}}(jQuery),function(t){var e={tooltip:!1,tooltipOpts:{content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,shifts:{x:10,y:20},defaultTheme:!0,onHover:function(){}}},n=function(t){this.tipPosition={x:0,y:0},this.init(t)};n.prototype.init=function(e){function n(t){var e={};e.x=t.pageX,e.y=t.pageY,r.updateTooltipPosition(e)}function i(t,e,n){var i=r.getDomElement();if(n){var a;a=r.stringFormat(r.tooltipOptions.content,n),i.html(a),r.updateTooltipPosition({x:e.pageX,y:e.pageY}),i.css({left:r.tipPosition.x+r.tooltipOptions.shifts.x,top:r.tipPosition.y+r.tooltipOptions.shifts.y}).show(),"function"==typeof r.tooltipOptions.onHover&&r.tooltipOptions.onHover(n,i)}else i.hide().html("")}var r=this;e.hooks.bindEvents.push(function(e,a){r.plotOptions=e.getOptions(),r.plotOptions.tooltip!==!1&&void 0!==r.plotOptions.tooltip&&(r.tooltipOptions=r.plotOptions.tooltipOpts,r.getDomElement(),t(e.getPlaceholder()).bind("plothover",i),t(a).bind("mousemove",n))}),e.hooks.shutdown.push(function(e,r){t(e.getPlaceholder()).unbind("plothover",i),t(r).unbind("mousemove",n)})},n.prototype.getDomElement=function(){var e;return t("#flotTip").length>0?e=t("#flotTip"):(e=t("<div />").attr("id","flotTip"),e.appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&e.css({background:"#fff","z-index":"100",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"})),e},n.prototype.updateTooltipPosition=function(e){var n=t("#flotTip").outerWidth()+this.tooltipOptions.shifts.x,i=t("#flotTip").outerHeight()+this.tooltipOptions.shifts.y;e.x-t(window).scrollLeft()>t(window).innerWidth()-n&&(e.x-=n),e.y-t(window).scrollTop()>t(window).innerHeight()-i&&(e.y-=i),this.tipPosition.x=e.x,this.tipPosition.y=e.y},n.prototype.stringFormat=function(t,e){var n=/%p\.{0,1}(\d{0,})/,i=/%s/,r=/%x\.{0,1}(?:\d{0,})/,a=/%y\.{0,1}(?:\d{0,})/;return"function"==typeof t&&(t=t(e.series.label,e.series.data[e.dataIndex][0],e.series.data[e.dataIndex][1],e)),void 0!==e.series.percent&&(t=this.adjustValPrecision(n,t,e.series.percent)),void 0!==e.series.label&&(t=t.replace(i,e.series.label)),this.isTimeMode("xaxis",e)&&this.isXDateFormat(e)&&(t=t.replace(r,this.timestampToDate(e.series.data[e.dataIndex][0],this.tooltipOptions.xDateFormat))),this.isTimeMode("yaxis",e)&&this.isYDateFormat(e)&&(t=t.replace(a,this.timestampToDate(e.series.data[e.dataIndex][1],this.tooltipOptions.yDateFormat))),"number"==typeof e.series.data[e.dataIndex][0]&&(t=this.adjustValPrecision(r,t,e.series.data[e.dataIndex][0])),"number"==typeof e.series.data[e.dataIndex][1]&&(t=this.adjustValPrecision(a,t,e.series.data[e.dataIndex][1])),void 0!==e.series.xaxis.tickFormatter&&(t=t.replace(r,e.series.xaxis.tickFormatter(e.series.data[e.dataIndex][0],e.series.xaxis))),void 0!==e.series.yaxis.tickFormatter&&(t=t.replace(a,e.series.yaxis.tickFormatter(e.series.data[e.dataIndex][1],e.series.yaxis))),t},n.prototype.isTimeMode=function(t,e){return void 0!==e.series[t].options.mode&&"time"===e.series[t].options.mode},n.prototype.isXDateFormat=function(){return void 0!==this.tooltipOptions.xDateFormat&&null!==this.tooltipOptions.xDateFormat},n.prototype.isYDateFormat=function(){return void 0!==this.tooltipOptions.yDateFormat&&null!==this.tooltipOptions.yDateFormat},n.prototype.timestampToDate=function(e,n){var i=new Date(e);return t.plot.formatDate(i,n)},n.prototype.adjustValPrecision=function(t,e,n){var i,r=e.match(t);return null!==r&&""!==RegExp.$1&&(i=RegExp.$1,n=n.toFixed(i),e=e.replace(t,n)),e};var i=function(t){new n(t)};t.plot.plugins.push({init:i,options:e,name:"tooltip",version:"0.6.1"})}(jQuery),function(t,e,n){"$:nomunge";function i(n){s===!0&&(s=n||1);for(var l=a.length-1;l>=0;l--){var f=t(a[l]);if(f[0]==e||f.is(":visible")){var d=f.width(),p=f.height(),g=f.data(h);!g||d===g.w&&p===g.h||(f.trigger(u,[g.w=d,g.h=p]),s=n||!0)}else g=f.data(h),g.w=0,g.h=0}null!==r&&(s&&(null==n||n-s<1e3)?r=e.requestAnimationFrame(i):(r=setTimeout(i,o[c]),s=!1))}var r,a=[],o=t.resize=t.extend(t.resize,{}),s=!1,l="setTimeout",u="resize",h=u+"-special-event",c="pendingDelay",f="activeDelay",d="throttleWindow";o[c]=200,o[f]=20,o[d]=!0,t.event.special[u]={setup:function(){if(!o[d]&&this[l])return!1;var e=t(this);a.push(this),e.data(h,{w:e.width(),h:e.height()}),1===a.length&&(r=n,i())},teardown:function(){if(!o[d]&&this[l])return!1;for(var e=t(this),n=a.length-1;n>=0;n--)if(a[n]==this){a.splice(n,1);break}e.removeData(h),a.length||(s?cancelAnimationFrame(r):clearTimeout(r),r=null)},add:function(e){function i(e,i,a){var o=t(this),s=o.data(h)||{};s.w=i!==n?i:o.width(),s.h=a!==n?a:o.height(),r.apply(this,arguments)}if(!o[d]&&this[l])return!1;var r;return t.isFunction(e)?(r=e,i):(r=e.handler,void(e.handler=i))}},e.requestAnimationFrame||(e.requestAnimationFrame=function(){return e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){return e.setTimeout(function(){t((new Date).getTime())},o[f])}}()),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(){return e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||clearTimeout}())}(jQuery,this),function(t){function e(t){function e(){var e=t.getPlaceholder();0!=e.width()&&0!=e.height()&&(t.resize(),t.setupGrid(),t.draw())}function n(t){t.getPlaceholder().resize(e)}function i(t){t.getPlaceholder().unbind("resize",e)}t.hooks.bindEvents.push(n),t.hooks.shutdown.push(i)}var n={};t.plot.plugins.push({init:e,options:n,name:"resize",version:"1.0"})}(jQuery),function(t){function e(e){function r(e){M||(M=!0,m=e.getCanvas(),x=t(m).parent(),y=e.getOptions(),e.setData(a(e.getData())))}function a(e){for(var n=0,i=0,r=0,a=y.series.pie.combine.color,o=[],s=0;s<e.length;++s){var l=e[s].data;t.isArray(l)&&1==l.length&&(l=l[0]),t.isArray(l)?!isNaN(parseFloat(l[1]))&&isFinite(l[1])?l[1]=+l[1]:l[1]=0:l=!isNaN(parseFloat(l))&&isFinite(l)?[1,+l]:[1,0],e[s].data=[l]}for(var s=0;s<e.length;++s)n+=e[s].data[0][1];for(var s=0;s<e.length;++s){var l=e[s].data[0][1];l/n<=y.series.pie.combine.threshold&&(i+=l,r++,a||(a=e[s].color))}for(var s=0;s<e.length;++s){var l=e[s].data[0][1];(r<2||l/n>y.series.pie.combine.threshold)&&o.push(t.extend(e[s],{data:[[1,l]],color:e[s].color,label:e[s].label,angle:l*Math.PI*2/n,percent:l/(n/100)}))}return r>1&&o.push({data:[[1,i]],color:a,label:y.series.pie.combine.label,angle:i*Math.PI*2/n,percent:i/(n/100)}),o}function o(e,r){function a(){k.clearRect(0,0,u,h),x.children().filter(".pieLabel, .pieLabelBackground").remove()}function o(){var t=y.series.pie.shadow.left,e=y.series.pie.shadow.top,n=10,i=y.series.pie.shadow.alpha,r=y.series.pie.radius>1?y.series.pie.radius:b*y.series.pie.radius;if(!(r>=u/2-t||r*y.series.pie.tilt>=h/2-e||r<=n)){k.save(),k.translate(t,e),k.globalAlpha=i,k.fillStyle="#000",k.translate(_,w),k.scale(1,y.series.pie.tilt);for(var a=1;a<=n;a++)k.beginPath(),k.arc(0,0,r,0,2*Math.PI,!1),k.fill(),r-=a;k.restore()}}function l(){function e(t,e,n){t<=0||isNaN(t)||(n?k.fillStyle=e:(k.strokeStyle=e,k.lineJoin="round"),k.beginPath(),Math.abs(t-2*Math.PI)>1e-9&&k.moveTo(0,0),k.arc(0,0,r,a,a+t/2,!1),k.arc(0,0,r,a+t/2,a+t,!1),k.closePath(),a+=t,n?k.fill():k.stroke())}function n(){function e(e,n,i){if(0==e.data[0][1])return!0;var a,o=y.legend.labelFormatter,s=y.series.pie.label.formatter;a=o?o(e.label,e):e.label,s&&(a=s(a,e));var l=(n+e.angle+n)/2,c=_+Math.round(Math.cos(l)*r),f=w+Math.round(Math.sin(l)*r)*y.series.pie.tilt,d="<span class='pieLabel' id='pieLabel"+i+"' style='position:absolute;top:"+f+"px;left:"+c+"px;'>"+a+"</span>";x.append(d);var p=x.children("#pieLabel"+i),g=f-p.height()/2,v=c-p.width()/2;if(p.css("top",g),p.css("left",v),0-g>0||0-v>0||h-(g+p.height())<0||u-(v+p.width())<0)return!1;if(0!=y.series.pie.label.background.opacity){var m=y.series.pie.label.background.color;null==m&&(m=e.color);var b="top:"+g+"px;left:"+v+"px;";t("<div class='pieLabelBackground' style='position:absolute;width:"+p.width()+"px;height:"+p.height()+"px;"+b+"background-color:"+m+";'></div>").css("opacity",y.series.pie.label.background.opacity).insertBefore(p)}return!0}for(var n=i,r=y.series.pie.label.radius>1?y.series.pie.label.radius:b*y.series.pie.label.radius,a=0;a<f.length;++a){if(f[a].percent>=100*y.series.pie.label.threshold&&!e(f[a],n,a))return!1;n+=f[a].angle}return!0}var i=Math.PI*y.series.pie.startAngle,r=y.series.pie.radius>1?y.series.pie.radius:b*y.series.pie.radius;k.save(),k.translate(_,w),k.scale(1,y.series.pie.tilt),k.save();for(var a=i,o=0;o<f.length;++o)f[o].startAngle=a,e(f[o].angle,f[o].color,!0);if(k.restore(),y.series.pie.stroke.width>0){k.save(),k.lineWidth=y.series.pie.stroke.width,a=i;for(var o=0;o<f.length;++o)e(f[o].angle,y.series.pie.stroke.color,!1);k.restore()}return s(k),k.restore(),!y.series.pie.label.show||n()}if(x){var u=e.getPlaceholder().width(),h=e.getPlaceholder().height(),c=x.children().filter(".legend").children().width()||0;k=r,M=!1,b=Math.min(u,h/y.series.pie.tilt)/2,w=h/2+y.series.pie.offset.top,_=u/2,"auto"==y.series.pie.offset.left?(y.legend.position.match("w")?_+=c/2:_-=c/2,_<b?_=b:_>u-b&&(_=u-b)):_+=y.series.pie.offset.left;var f=e.getData(),d=0;do d>0&&(b*=i),d+=1,a(),y.series.pie.tilt<=.8&&o();while(!l()&&d<n);d>=n&&(a(),x.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>")),e.setSeries&&e.insertLegend&&(e.setSeries(f),e.insertLegend())}}function s(t){if(y.series.pie.innerRadius>0){t.save();var e=y.series.pie.innerRadius>1?y.series.pie.innerRadius:b*y.series.pie.innerRadius;t.globalCompositeOperation="destination-out",t.beginPath(),t.fillStyle=y.series.pie.stroke.color,t.arc(0,0,e,0,2*Math.PI,!1),t.fill(),t.closePath(),t.restore(),t.save(),t.beginPath(),t.strokeStyle=y.series.pie.stroke.color,t.arc(0,0,e,0,2*Math.PI,!1),t.stroke(),t.closePath(),t.restore()}}function l(t,e){for(var n=!1,i=-1,r=t.length,a=r-1;++i<r;a=i)(t[i][1]<=e[1]&&e[1]<t[a][1]||t[a][1]<=e[1]&&e[1]<t[i][1])&&e[0]<(t[a][0]-t[i][0])*(e[1]-t[i][1])/(t[a][1]-t[i][1])+t[i][0]&&(n=!n);return n}function u(t,n){for(var i,r,a=e.getData(),o=e.getOptions(),s=o.series.pie.radius>1?o.series.pie.radius:b*o.series.pie.radius,u=0;u<a.length;++u){var h=a[u];if(h.pie.show){if(k.save(),k.beginPath(),k.moveTo(0,0),k.arc(0,0,s,h.startAngle,h.startAngle+h.angle/2,!1),k.arc(0,0,s,h.startAngle+h.angle/2,h.startAngle+h.angle,!1),k.closePath(),i=t-_,r=n-w,k.isPointInPath){if(k.isPointInPath(t-_,n-w))return k.restore(),{datapoint:[h.percent,h.data],dataIndex:0,series:h,seriesIndex:u}}else{var c=s*Math.cos(h.startAngle),f=s*Math.sin(h.startAngle),d=s*Math.cos(h.startAngle+h.angle/4),p=s*Math.sin(h.startAngle+h.angle/4),g=s*Math.cos(h.startAngle+h.angle/2),v=s*Math.sin(h.startAngle+h.angle/2),m=s*Math.cos(h.startAngle+h.angle/1.5),x=s*Math.sin(h.startAngle+h.angle/1.5),y=s*Math.cos(h.startAngle+h.angle),M=s*Math.sin(h.startAngle+h.angle),S=[[0,0],[c,f],[d,p],[g,v],[m,x],[y,M]],T=[i,r];if(l(S,T))return k.restore(),{datapoint:[h.percent,h.data],dataIndex:0,series:h,seriesIndex:u}}k.restore()}}return null}function h(t){f("plothover",t)}function c(t){f("plotclick",t)}function f(t,n){var i=e.offset(),r=parseInt(n.pageX-i.left),a=parseInt(n.pageY-i.top),o=u(r,a);if(y.grid.autoHighlight)for(var s=0;s<S.length;++s){var l=S[s];l.auto!=t||o&&l.series==o.series||p(l.series)}o&&d(o.series,t);var h={pageX:n.pageX,pageY:n.pageY};x.trigger(t,[h,o])}function d(t,n){var i=g(t);i==-1?(S.push({series:t,auto:n}),e.triggerRedrawOverlay()):n||(S[i].auto=!1)}function p(t){null==t&&(S=[],e.triggerRedrawOverlay());var n=g(t);n!=-1&&(S.splice(n,1),e.triggerRedrawOverlay())}function g(t){for(var e=0;e<S.length;++e){var n=S[e];if(n.series==t)return e}return-1}function v(t,e){function n(t){t.angle<=0||isNaN(t.angle)||(e.fillStyle="rgba(255, 255, 255, "+i.series.pie.highlight.opacity+")",e.beginPath(),Math.abs(t.angle-2*Math.PI)>1e-9&&e.moveTo(0,0),e.arc(0,0,r,t.startAngle,t.startAngle+t.angle/2,!1),e.arc(0,0,r,t.startAngle+t.angle/2,t.startAngle+t.angle,!1),e.closePath(),e.fill())}var i=t.getOptions(),r=i.series.pie.radius>1?i.series.pie.radius:b*i.series.pie.radius;e.save(),e.translate(_,w),e.scale(1,i.series.pie.tilt);for(var a=0;a<S.length;++a)n(S[a].series);s(e),e.restore()}var m=null,x=null,y=null,b=null,_=null,w=null,M=!1,k=null,S=[];e.hooks.processOptions.push(function(t,e){e.series.pie.show&&(e.grid.show=!1,"auto"==e.series.pie.label.show&&(e.legend.show?e.series.pie.label.show=!1:e.series.pie.label.show=!0),"auto"==e.series.pie.radius&&(e.series.pie.label.show?e.series.pie.radius=.75:e.series.pie.radius=1),e.series.pie.tilt>1?e.series.pie.tilt=1:e.series.pie.tilt<0&&(e.series.pie.tilt=0))}),e.hooks.bindEvents.push(function(t,e){var n=t.getOptions();n.series.pie.show&&(n.grid.hoverable&&e.unbind("mousemove").mousemove(h),n.grid.clickable&&e.unbind("click").click(c))}),e.hooks.processDatapoints.push(function(t,e,n,i){var a=t.getOptions();a.series.pie.show&&r(t,e,n,i)}),e.hooks.drawOverlay.push(function(t,e){var n=t.getOptions();n.series.pie.show&&v(t,e)}),e.hooks.draw.push(function(t,e){var n=t.getOptions();n.series.pie.show&&o(t,e)})}var n=10,i=.95,r={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(t,e){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+e.color+";'>"+t+"<br/>"+Math.round(e.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};t.plot.plugins.push({init:e,options:r,name:"pie",version:"1.1"})}(jQuery),function(t){function e(t,e){return e*Math.floor(t/e)}function n(t,e,n,i){if("function"==typeof t.strftime)return t.strftime(e);var r=function(t,e){return t=""+t,e=""+(null==e?"0":e),1==t.length?e+t:t},a=[],o=!1,s=t.getHours(),l=s<12;null==n&&(n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==i&&(i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var u;u=s>12?s-12:0==s?12:s;for(var h=0;h<e.length;++h){var c=e.charAt(h);if(o){switch(c){case"a":c=""+i[t.getDay()];break;case"b":c=""+n[t.getMonth()];break;case"d":c=r(t.getDate());break;case"e":c=r(t.getDate()," ");break;case"h":case"H":c=r(s);break;case"I":c=r(u);break;case"l":c=r(u," ");break;case"m":c=r(t.getMonth()+1);break;case"M":c=r(t.getMinutes());break;case"q":c=""+(Math.floor(t.getMonth()/3)+1);break;case"S":c=r(t.getSeconds());break;case"y":c=r(t.getFullYear()%100);break;case"Y":c=""+t.getFullYear();break;case"p":c=l?"am":"pm";break;case"P":c=l?"AM":"PM";break;case"w":c=""+t.getDay()}a.push(c),o=!1}else"%"==c?o=!0:a.push(c)}return a.join("")}function i(t){function e(t,e,n,i){t[e]=function(){return n[i].apply(n,arguments)}}var n={date:t};void 0!=t.strftime&&e(n,"strftime",t,"strftime"),e(n,"getTime",t,"getTime"),e(n,"setTime",t,"setTime");for(var i=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],r=0;r<i.length;r++)e(n,"get"+i[r],t,"getUTC"+i[r]),e(n,"set"+i[r],t,"setUTC"+i[r]);return n}function r(t,e){if("browser"==e.timezone)return new Date(t);if(e.timezone&&"utc"!=e.timezone){if("undefined"!=typeof timezoneJS&&"undefined"!=typeof timezoneJS.Date){var n=new timezoneJS.Date;return n.setTimezone(e.timezone),n.setTime(t),n}return i(new Date(t))}return i(new Date(t))}function a(i){i.hooks.processOptions.push(function(i){t.each(i.getAxes(),function(t,i){var a=i.options;"time"==a.mode&&(i.tickGenerator=function(t){var n=[],i=r(t.min,a),o=0,l=a.tickSize&&"quarter"===a.tickSize[1]||a.minTickSize&&"quarter"===a.minTickSize[1]?h:u;null!=a.minTickSize&&(o="number"==typeof a.tickSize?a.tickSize:a.minTickSize[0]*s[a.minTickSize[1]]);for(var c=0;c<l.length-1&&!(t.delta<(l[c][0]*s[l[c][1]]+l[c+1][0]*s[l[c+1][1]])/2&&l[c][0]*s[l[c][1]]>=o);++c);var f=l[c][0],d=l[c][1];if("year"==d){if(null!=a.minTickSize&&"year"==a.minTickSize[1])f=Math.floor(a.minTickSize[0]);else{var p=Math.pow(10,Math.floor(Math.log(t.delta/s.year)/Math.LN10)),g=t.delta/s.year/p;f=g<1.5?1:g<3?2:g<7.5?5:10,f*=p}f<1&&(f=1)}t.tickSize=a.tickSize||[f,d];var v=t.tickSize[0];d=t.tickSize[1];var m=v*s[d];"second"==d?i.setSeconds(e(i.getSeconds(),v)):"minute"==d?i.setMinutes(e(i.getMinutes(),v)):"hour"==d?i.setHours(e(i.getHours(),v)):"month"==d?i.setMonth(e(i.getMonth(),v)):"quarter"==d?i.setMonth(3*e(i.getMonth()/3,v)):"year"==d&&i.setFullYear(e(i.getFullYear(),v)),i.setMilliseconds(0),m>=s.minute&&i.setSeconds(0),m>=s.hour&&i.setMinutes(0),m>=s.day&&i.setHours(0),m>=4*s.day&&i.setDate(1),m>=2*s.month&&i.setMonth(e(i.getMonth(),3)),m>=2*s.quarter&&i.setMonth(e(i.getMonth(),6)),m>=s.year&&i.setMonth(0);var x,y=0,b=Number.NaN;do if(x=b,b=i.getTime(),n.push(b),"month"==d||"quarter"==d)if(v<1){i.setDate(1);var _=i.getTime();i.setMonth(i.getMonth()+("quarter"==d?3:1));var w=i.getTime();i.setTime(b+y*s.hour+(w-_)*v),y=i.getHours(),i.setHours(0)}else i.setMonth(i.getMonth()+v*("quarter"==d?3:1));else"year"==d?i.setFullYear(i.getFullYear()+v):i.setTime(b+m);while(b<t.max&&b!=x);return n},i.tickFormatter=function(t,e){var i=r(t,e.options);if(null!=a.timeformat)return n(i,a.timeformat,a.monthNames,a.dayNames);var o,l=e.options.tickSize&&"quarter"==e.options.tickSize[1]||e.options.minTickSize&&"quarter"==e.options.minTickSize[1],u=e.tickSize[0]*s[e.tickSize[1]],h=e.max-e.min,c=a.twelveHourClock?" %p":"",f=a.twelveHourClock?"%I":"%H";o=u<s.minute?f+":%M:%S"+c:u<s.day?h<2*s.day?f+":%M"+c:"%b %d "+f+":%M"+c:u<s.month?"%b %d":l&&u<s.quarter||!l&&u<s.year?h<s.year?"%b":"%b %Y":l&&u<s.year?h<s.year?"Q%q":"Q%q %Y":"%Y";var d=n(i,o,a.monthNames,a.dayNames);return d})})})}var o={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},s={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},l=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],u=l.concat([[3,"month"],[6,"month"],[1,"year"]]),h=l.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);t.plot.plugins.push({init:a,options:o,name:"time",version:"1.0"}),t.plot.formatDate=n,t.plot.dateGenerator=r}(jQuery),function(t){"use strict";function e(t,e,n,i,r,a,o){var s,l,u,h,c,f,d,p,g=Math.pow,v=Math.sqrt;return s=v(g(n-t,2)+g(i-e,2)),l=v(g(r-n,2)+g(a-i,2)),u=o*s/(s+l),h=o-u,c=n+u*(t-r),f=i+u*(e-a),d=n-h*(t-r),p=i-h*(e-a),[c,f,d,p]}function n(e,n,i,r,a){var o=t.color.parse(a);o.a="number"==typeof r?r:.3,o.normalize(),o=o.toString(),n.beginPath(),n.moveTo(e[0][0],e[0][1]);for(var s=e.length,l=0;l<s;l++)n[e[l][3]].apply(n,e[l][2]);n.stroke(),n.lineWidth=0,n.lineTo(e[s-1][0],i),n.lineTo(e[0][0],i),n.closePath(),r!==!1&&(n.fillStyle=o,n.fill())}function i(t,e,n,i){(void 0===e||"bezier"!==e&&"quadratic"!==e)&&(e="quadratic"),e+="CurveTo",0==a.length?a.push([n[0],n[1],i.concat(n.slice(2)),e]):"quadraticCurveTo"==e&&2==n.length?(i=i.slice(0,2).concat(n),a.push([n[0],n[1],i,e])):a.push([n[2],n[3],i.concat(n.slice(2)),e])}function r(r,o,s){if(s.splines.show===!0){var l,u,h,c=[],f=s.splines.tension||.5,d=s.datapoints.points,p=s.datapoints.pointsize,g=r.getPlotOffset(),v=d.length,m=[];if(a=[],v/p<4)return void t.extend(s.lines,s.splines);for(l=0;l<v;l+=p)u=d[l],h=d[l+1],null==u||u<s.xaxis.min||u>s.xaxis.max||h<s.yaxis.min||h>s.yaxis.max||m.push(s.xaxis.p2c(u)+g.left,s.yaxis.p2c(h)+g.top);for(v=m.length,l=0;l<v-2;l+=2)c=c.concat(e.apply(this,m.slice(l,l+6).concat([f])));for(o.save(),o.strokeStyle=s.color,o.lineWidth=s.splines.lineWidth,i(o,"quadratic",m.slice(0,4),c.slice(0,2)),l=2;l<v-3;l+=2)i(o,"bezier",m.slice(l,l+4),c.slice(2*l-2,2*l+2));i(o,"quadratic",m.slice(v-2,v),[c[2*v-10],c[2*v-9],m[v-4],m[v-3]]),n(a,o,r.height()+10,s.splines.fill,s.color),o.restore()}}var a=[];t.plot.plugins.push({init:function(t){t.hooks.drawSeries.push(r)},options:{series:{splines:{show:!1,lineWidth:2,tension:.5,fill:!1}}},name:"spline",version:"0.8.2"})}(jQuery),function(t,e,n){!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):jQuery&&!jQuery.fn.sparkline&&t(jQuery)}(function(i){"use strict";var r,a,o,s,l,u,h,c,f,d,p,g,v,m,x,y,b,_,w,M,k,S,T,C,A,L,E,F,R,P,z,D,I={},N=0;r=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:n,normalRangeMax:n,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:n,chartRangeMax:n,chartRangeMinX:n,chartRangeMaxX:n,tooltipFormat:new o('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:n,nullColor:n,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:n,chartRangeMin:n,chartRangeClip:!1,colorMap:n,tooltipFormat:new o('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new o('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:n,thresholdValue:0,chartRangeMax:n,chartRangeMin:n,chartRangeClip:!1,tooltipFormat:new o("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:n,tooltipFormat:new o("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new o('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:n,targetColor:"#4a2",chartRangeMax:n,chartRangeMin:n,tooltipFormat:new o("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},L='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',a=function(){var t,e;return t=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(t.prototype=i.extend(new arguments[0],arguments[arguments.length-1]),t._super=arguments[0].prototype):t.prototype=arguments[arguments.length-1],arguments.length>2&&(e=Array.prototype.slice.call(arguments,1,-1),e.unshift(t.prototype),i.extend.apply(i,e))):t.prototype=arguments[0],t.prototype.cls=t,t},i.SPFormatClass=o=a({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(t,e){this.format=t,this.fclass=e},render:function(t,e,i){var r,a,o,s,l,u=this,h=t;return this.format.replace(this.fre,function(){var t;return a=arguments[1],o=arguments[3],r=u.precre.exec(a),r?(l=r[2],a=r[1]):l=!1,s=h[a],s===n?"":o&&e&&e[o]?(t=e[o],t.get?e[o].get(s)||s:e[o][s]||s):(f(s)&&(s=i.get("numberFormatter")?i.get("numberFormatter")(s):m(s,l,i.get("numberDigitGroupCount"),i.get("numberDigitGroupSep"),i.get("numberDecimalMark"))),s)})}}),i.spformat=function(t,e){return new o(t,e)},s=function(t,e,n){return t<e?e:t>n?n:t},l=function(t,n){var i;return 2===n?(i=e.floor(t.length/2),t.length%2?t[i]:(t[i-1]+t[i])/2):t.length%2?(i=(t.length*n+n)/4,i%1?(t[e.floor(i)]+t[e.floor(i)-1])/2:t[i-1]):(i=(t.length*n+2)/4,i%1?(t[e.floor(i)]+t[e.floor(i)-1])/2:t[i-1])},u=function(t){var e;switch(t){case"undefined":t=n;break;case"null":t=null;break;case"true":t=!0;break;case"false":t=!1;break;default:e=parseFloat(t),t==e&&(t=e)}return t},h=function(t){var e,n=[];for(e=t.length;e--;)n[e]=u(t[e]);return n},c=function(t,e){var n,i,r=[];for(n=0,i=t.length;n<i;n++)t[n]!==e&&r.push(t[n]);return r},f=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},m=function(t,e,n,r,a){var o,s;for(t=(e===!1?parseFloat(t).toString():t.toFixed(e)).split(""),o=(o=i.inArray(".",t))<0?t.length:o,o<t.length&&(t[o]=a),s=o-n;s>0;s-=n)t.splice(s,0,r);return t.join("")},d=function(t,e,n){var i;for(i=e.length;i--;)if((!n||null!==e[i])&&e[i]!==t)return!1;return!0},p=function(t){var e,n=0;for(e=t.length;e--;)n+="number"==typeof t[e]?t[e]:0;return n},v=function(t){return i.isArray(t)?t:[t]},g=function(e){var n;t.createStyleSheet?t.createStyleSheet().cssText=e:(n=t.createElement("style"),n.type="text/css",t.getElementsByTagName("head")[0].appendChild(n),n["string"==typeof t.body.style.WebkitAppearance?"innerText":"innerHTML"]=e)},i.fn.simpledraw=function(e,r,a,o){var s,l;if(a&&(s=this.data("_jqs_vcanvas")))return s;if(i.fn.sparkline.canvas===!1)return!1;if(i.fn.sparkline.canvas===n){var u=t.createElement("canvas");if(u.getContext&&u.getContext("2d"))i.fn.sparkline.canvas=function(t,e,n,i){return new P(t,e,n,i)};else{if(!t.namespaces||t.namespaces.v)return i.fn.sparkline.canvas=!1,!1;t.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),i.fn.sparkline.canvas=function(t,e,n){return new z(t,e,n)}}}return e===n&&(e=i(this).innerWidth()),r===n&&(r=i(this).innerHeight()),s=i.fn.sparkline.canvas(e,r,this,o),l=i(this).data("_jqs_mhandler"),l&&l.registerCanvas(s),s},i.fn.cleardraw=function(){var t=this.data("_jqs_vcanvas");t&&t.reset()},i.RangeMapClass=x=a({init:function(t){var e,n,i=[];for(e in t)t.hasOwnProperty(e)&&"string"==typeof e&&e.indexOf(":")>-1&&(n=e.split(":"),n[0]=0===n[0].length?-(1/0):parseFloat(n[0]),n[1]=0===n[1].length?1/0:parseFloat(n[1]),n[2]=t[e],i.push(n));this.map=t,this.rangelist=i||!1},get:function(t){var e,i,r,a=this.rangelist;if((r=this.map[t])!==n)return r;if(a)for(e=a.length;e--;)if(i=a[e],i[0]<=t&&i[1]>=t)return i[2];return n}}),i.range_map=function(t){return new x(t)},y=a({init:function(t,e){var n=i(t);this.$el=n,this.options=e,this.currentPageX=0,this.currentPageY=0,this.el=t,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!e.get("disableTooltips"),this.highlightEnabled=!e.get("disableHighlight")},registerSparkline:function(t){this.splist.push(t),this.over&&this.updateDisplay()},registerCanvas:function(t){var e=i(t.canvas);this.canvas=t,this.$canvas=e,e.mouseenter(i.proxy(this.mouseenter,this)),e.mouseleave(i.proxy(this.mouseleave,this)),e.click(i.proxy(this.mouseclick,this))},reset:function(t){this.splist=[],this.tooltip&&t&&(this.tooltip.remove(),this.tooltip=n)},mouseclick:function(t){var e=i.Event("sparklineClick");e.originalEvent=t,e.sparklines=this.splist,this.$el.trigger(e)},mouseenter:function(e){i(t.body).unbind("mousemove.jqs"),i(t.body).bind("mousemove.jqs",i.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=e.pageX,this.currentPageY=e.pageY,this.currentEl=e.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new b(this.options),this.tooltip.updatePosition(e.pageX,e.pageY)),this.updateDisplay()},mouseleave:function(){i(t.body).unbind("mousemove.jqs");var e,n,r=this.splist,a=r.length,o=!1;for(this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null),n=0;n<a;n++)e=r[n],e.clearRegionHighlight()&&(o=!0);o&&this.canvas.render()},mousemove:function(t){this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,this.tooltip&&this.tooltip.updatePosition(t.pageX,t.pageY),this.updateDisplay()},updateDisplay:function(){var t,e,n,r,a,o=this.splist,s=o.length,l=!1,u=this.$canvas.offset(),h=this.currentPageX-u.left,c=this.currentPageY-u.top;if(this.over){for(n=0;n<s;n++)e=o[n],r=e.setRegionHighlight(this.currentEl,h,c),r&&(l=!0);if(l){if(a=i.Event("sparklineRegionChange"),a.sparklines=this.splist,this.$el.trigger(a),
this.tooltip){for(t="",n=0;n<s;n++)e=o[n],t+=e.getCurrentRegionTooltip();this.tooltip.setContent(t)}this.disableHighlight||this.canvas.render()}null===r&&this.mouseleave()}}}),b=a({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(e){var n,r=e.get("tooltipClassname","jqstooltip"),a=this.sizeStyle;this.container=e.get("tooltipContainer")||t.body,this.tooltipOffsetX=e.get("tooltipOffsetX",10),this.tooltipOffsetY=e.get("tooltipOffsetY",12),i("#jqssizetip").remove(),i("#jqstooltip").remove(),this.sizetip=i("<div/>",{id:"jqssizetip",style:a,"class":r}),this.tooltip=i("<div/>",{id:"jqstooltip","class":r}).appendTo(this.container),n=this.tooltip.offset(),this.offsetLeft=n.left,this.offsetTop=n.top,this.hidden=!0,i(window).unbind("resize.jqs scroll.jqs"),i(window).bind("resize.jqs scroll.jqs",i.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=i(window).scrollTop(),this.scrollLeft=i(window).scrollLeft(),this.scrollRight=this.scrollLeft+i(window).width(),this.updatePosition()},getSize:function(t){this.sizetip.html(t).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(t){return t?(this.getSize(t),this.tooltip.html(t).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition()),void 0):(this.tooltip.css("visibility","hidden"),void(this.hidden=!0))},updatePosition:function(t,e){if(t===n){if(this.mousex===n)return;t=this.mousex-this.offsetLeft,e=this.mousey-this.offsetTop}else this.mousex=t-=this.offsetLeft,this.mousey=e-=this.offsetTop;this.height&&this.width&&!this.hidden&&(e-=this.height+this.tooltipOffsetY,t+=this.tooltipOffsetX,e<this.scrollTop&&(e=this.scrollTop),t<this.scrollLeft?t=this.scrollLeft:t+this.width>this.scrollRight&&(t=this.scrollRight-this.width),this.tooltip.css({left:t,top:e}))},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=n,i(window).unbind("resize.jqs scroll.jqs")}}),E=function(){g(L)},i(E),D=[],i.fn.sparkline=function(e,r){return this.each(function(){var a,o,s=new i.fn.sparkline.options(this,r),l=i(this);if(a=function(){var r,a,o,u,h,c,f;return"html"===e||e===n?(f=this.getAttribute(s.get("tagValuesAttribute")),f!==n&&null!==f||(f=l.html()),r=f.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")):r=e,a="auto"===s.get("width")?r.length*s.get("defaultPixelsPerValue"):s.get("width"),"auto"===s.get("height")?s.get("composite")&&i.data(this,"_jqs_vcanvas")||(u=t.createElement("span"),u.innerHTML="a",l.html(u),o=i(u).innerHeight()||i(u).height(),i(u).remove(),u=null):o=s.get("height"),s.get("disableInteraction")?h=!1:(h=i.data(this,"_jqs_mhandler"),h?s.get("composite")||h.reset():(h=new y(this,s),i.data(this,"_jqs_mhandler",h))),s.get("composite")&&!i.data(this,"_jqs_vcanvas")?void(i.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),i.data(this,"_jqs_errnotify",!0))):(c=new(i.fn.sparkline[s.get("type")])(this,r,s,a,o),c.render(),h&&h.registerSparkline(c),void 0)},i(this).html()&&!s.get("disableHiddenCheck")&&i(this).is(":hidden")||!i(this).parents("body").length){if(!s.get("composite")&&i.data(this,"_jqs_pending"))for(o=D.length;o;o--)D[o-1][0]==this&&D.splice(o-1,1);D.push([this,a]),i.data(this,"_jqs_pending",!0)}else a.call(this)})},i.fn.sparkline.defaults=r(),i.sparkline_display_visible=function(){var t,e,n,r=[];for(e=0,n=D.length;e<n;e++)t=D[e][0],i(t).is(":visible")&&!i(t).parents().is(":hidden")?(D[e][1].call(t),i.data(D[e][0],"_jqs_pending",!1),r.push(e)):!i(t).closest("html").length&&!i.data(t,"_jqs_pending")&&(i.data(D[e][0],"_jqs_pending",!1),r.push(e));for(e=r.length;e;e--)D.splice(r[e-1],1)},i.fn.sparkline.options=a({init:function(t,e){var n,r,a,o;this.userOptions=e=e||{},this.tag=t,this.tagValCache={},r=i.fn.sparkline.defaults,a=r.common,this.tagOptionsPrefix=e.enableTagOptions&&(e.tagOptionsPrefix||a.tagOptionsPrefix),o=this.getTagSetting("type"),n=o===I?r[e.type||a.type]:r[o],this.mergedOptions=i.extend({},a,n,e)},getTagSetting:function(t){var e,i,r,a,o=this.tagOptionsPrefix;if(o===!1||o===n)return I;if(this.tagValCache.hasOwnProperty(t))e=this.tagValCache.key;else{if(e=this.tag.getAttribute(o+t),e===n||null===e)e=I;else if("["===e.substr(0,1))for(e=e.substr(1,e.length-2).split(","),i=e.length;i--;)e[i]=u(e[i].replace(/(^\s*)|(\s*$)/g,""));else if("{"===e.substr(0,1))for(r=e.substr(1,e.length-2).split(","),e={},i=r.length;i--;)a=r[i].split(":",2),e[a[0].replace(/(^\s*)|(\s*$)/g,"")]=u(a[1].replace(/(^\s*)|(\s*$)/g,""));else e=u(e);this.tagValCache.key=e}return e},get:function(t,e){var i,r=this.getTagSetting(t);return r!==I?r:(i=this.mergedOptions[t])===n?e:i}}),i.fn.sparkline._base=a({disabled:!1,init:function(t,e,r,a,o){this.el=t,this.$el=i(t),this.values=e,this.options=r,this.width=a,this.height=o,this.currentRegion=n},initTarget:function(){var t=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),t))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return!this.disabled||(this.el.innerHTML="",!1)},getRegion:function(){},setRegionHighlight:function(t,e,i){var r,a=this.currentRegion,o=!this.options.get("disableHighlight");return e>this.canvasWidth||i>this.canvasHeight||e<0||i<0?null:(r=this.getRegion(t,e,i),a!==r&&(a!==n&&o&&this.removeHighlight(),this.currentRegion=r,r!==n&&o&&this.renderHighlight(),!0))},clearRegionHighlight:function(){return this.currentRegion!==n&&(this.removeHighlight(),this.currentRegion=n,!0)},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(){},getCurrentRegionTooltip:function(){var t,e,r,a,s,l,u,h,c,f,d,p,g,v,m=this.options,x="",y=[];if(this.currentRegion===n)return"";if(t=this.getCurrentRegionFields(),d=m.get("tooltipFormatter"))return d(this,m,t);if(m.get("tooltipChartTitle")&&(x+='<div class="jqs jqstitle">'+m.get("tooltipChartTitle")+"</div>\n"),e=this.options.get("tooltipFormat"),!e)return"";if(i.isArray(e)||(e=[e]),i.isArray(t)||(t=[t]),u=this.options.get("tooltipFormatFieldlist"),h=this.options.get("tooltipFormatFieldlistKey"),u&&h){for(c=[],l=t.length;l--;)f=t[l][h],(v=i.inArray(f,u))!=-1&&(c[v]=t[l]);t=c}for(r=e.length,g=t.length,l=0;l<r;l++)for(p=e[l],"string"==typeof p&&(p=new o(p)),a=p.fclass||"jqsfield",v=0;v<g;v++)t[v].isNull&&m.get("tooltipSkipNull")||(i.extend(t[v],{prefix:m.get("tooltipPrefix"),suffix:m.get("tooltipSuffix")}),s=p.render(t[v],m.get("tooltipValueLookups"),m),y.push('<div class="'+a+'">'+s+"</div>"));return y.length?x+y.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(t,n){var i,r,a,o,l=n.get("highlightColor"),u=n.get("highlightLighten");if(l)return l;if(u&&(i=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(t))){for(a=[],r=4===t.length?16:1,o=0;o<3;o++)a[o]=s(e.round(parseInt(i[o+1],16)*r*u),0,255);return"rgb("+a.join(",")+")"}return t}}),_={changeHighlight:function(t){var e,n=this.currentRegion,r=this.target,a=this.regionShapes[n];a&&(e=this.renderRegion(n,t),i.isArray(e)||i.isArray(a)?(r.replaceWithShapes(a,e),this.regionShapes[n]=i.map(e,function(t){return t.id})):(r.replaceWithShape(a,e),this.regionShapes[n]=e.id))},render:function(){var t,e,n,r,a=this.values,o=this.target,s=this.regionShapes;if(this.cls._super.render.call(this)){for(n=a.length;n--;)if(t=this.renderRegion(n))if(i.isArray(t)){for(e=[],r=t.length;r--;)t[r].append(),e.push(t[r].id);s[n]=e}else t.append(),s[n]=t.id;else s[n]=null;o.render()}}},i.fn.sparkline.line=w=a(i.fn.sparkline._base,{type:"line",init:function(t,e,n,i,r){w._super.init.call(this,t,e,n,i,r),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(t,e){var i,r=this.regionMap;for(i=r.length;i--;)if(null!==r[i]&&e>=r[i][0]&&e<=r[i][1])return r[i][2];return n},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:null===this.yvalues[t],x:this.xvalues[t],y:this.yvalues[t],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:t}},renderHighlight:function(){var t,e,i=this.currentRegion,r=this.target,a=this.vertices[i],o=this.options,s=o.get("spotRadius"),l=o.get("highlightSpotColor"),u=o.get("highlightLineColor");a&&(s&&l&&(t=r.drawCircle(a[0],a[1],s,n,l),this.highlightSpotId=t.id,r.insertAfterShape(this.lastShapeId,t)),u&&(e=r.drawLine(a[0],this.canvasTop,a[0],this.canvasTop+this.canvasHeight,u),this.highlightLineId=e.id,r.insertAfterShape(this.lastShapeId,e)))},removeHighlight:function(){var t=this.target;this.highlightSpotId&&(t.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(t.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var t,n,i,r,a,o=this.values,s=o.length,l=this.xvalues,u=this.yvalues,h=this.yminmax;for(t=0;t<s;t++)n=o[t],i="string"==typeof o[t],r="object"==typeof o[t]&&o[t]instanceof Array,a=i&&o[t].split(":"),i&&2===a.length?(l.push(Number(a[0])),u.push(Number(a[1])),h.push(Number(a[1]))):r?(l.push(n[0]),u.push(n[1]),h.push(n[1])):(l.push(t),null===o[t]||"null"===o[t]?u.push(null):(u.push(Number(n)),h.push(Number(n))));this.options.get("xvalues")&&(l=this.options.get("xvalues")),this.maxy=this.maxyorg=e.max.apply(e,h),this.miny=this.minyorg=e.min.apply(e,h),this.maxx=e.max.apply(e,l),this.minx=e.min.apply(e,l),this.xvalues=l,this.yvalues=u,this.yminmax=h},processRangeOptions:function(){var t=this.options,e=t.get("normalRangeMin"),i=t.get("normalRangeMax");e!==n&&(e<this.miny&&(this.miny=e),i>this.maxy&&(this.maxy=i)),t.get("chartRangeMin")!==n&&(t.get("chartRangeClip")||t.get("chartRangeMin")<this.miny)&&(this.miny=t.get("chartRangeMin")),t.get("chartRangeMax")!==n&&(t.get("chartRangeClip")||t.get("chartRangeMax")>this.maxy)&&(this.maxy=t.get("chartRangeMax")),t.get("chartRangeMinX")!==n&&(t.get("chartRangeClipX")||t.get("chartRangeMinX")<this.minx)&&(this.minx=t.get("chartRangeMinX")),t.get("chartRangeMaxX")!==n&&(t.get("chartRangeClipX")||t.get("chartRangeMaxX")>this.maxx)&&(this.maxx=t.get("chartRangeMaxX"))},drawNormalRange:function(t,i,r,a,o){var s=this.options.get("normalRangeMin"),l=this.options.get("normalRangeMax"),u=i+e.round(r-r*((l-this.miny)/o)),h=e.round(r*(l-s)/o);this.target.drawRect(t,u,a,h,n,this.options.get("normalRangeColor")).append()},render:function(){var t,r,a,o,s,l,u,h,c,f,d,p,g,v,m,y,b,_,M,k,S,T,C,A,L,E=this.options,F=this.target,R=this.canvasWidth,P=this.canvasHeight,z=this.vertices,D=E.get("spotRadius"),I=this.regionMap;if(w._super.render.call(this)&&(this.scanValues(),this.processRangeOptions(),C=this.xvalues,A=this.yvalues,this.yminmax.length&&!(this.yvalues.length<2))){for(o=s=0,t=this.maxx-this.minx===0?1:this.maxx-this.minx,r=this.maxy-this.miny===0?1:this.maxy-this.miny,a=this.yvalues.length-1,D&&(R<4*D||P<4*D)&&(D=0),D&&(S=E.get("highlightSpotColor")&&!E.get("disableInteraction"),(S||E.get("minSpotColor")||E.get("spotColor")&&A[a]===this.miny)&&(P-=e.ceil(D)),(S||E.get("maxSpotColor")||E.get("spotColor")&&A[a]===this.maxy)&&(P-=e.ceil(D),o+=e.ceil(D)),(S||(E.get("minSpotColor")||E.get("maxSpotColor"))&&(A[0]===this.miny||A[0]===this.maxy))&&(s+=e.ceil(D),R-=e.ceil(D)),(S||E.get("spotColor")||E.get("minSpotColor")||E.get("maxSpotColor")&&(A[a]===this.miny||A[a]===this.maxy))&&(R-=e.ceil(D))),P--,E.get("normalRangeMin")!==n&&!E.get("drawNormalOnTop")&&this.drawNormalRange(s,o,P,R,r),u=[],h=[u],v=m=null,y=A.length,L=0;L<y;L++)c=C[L],d=C[L+1],f=A[L],p=s+e.round((c-this.minx)*(R/t)),g=L<y-1?s+e.round((d-this.minx)*(R/t)):R,m=p+(g-p)/2,I[L]=[v||0,m,L],v=m,null===f?L&&(null!==A[L-1]&&(u=[],h.push(u)),z.push(null)):(f<this.miny&&(f=this.miny),f>this.maxy&&(f=this.maxy),u.length||u.push([p,o+P]),l=[p,o+e.round(P-P*((f-this.miny)/r))],u.push(l),z.push(l));for(b=[],_=[],M=h.length,L=0;L<M;L++)u=h[L],u.length&&(E.get("fillColor")&&(u.push([u[u.length-1][0],o+P]),_.push(u.slice(0)),u.pop()),u.length>2&&(u[0]=[u[0][0],u[1][1]]),b.push(u));for(M=_.length,L=0;L<M;L++)F.drawShape(_[L],E.get("fillColor"),E.get("fillColor")).append();for(E.get("normalRangeMin")!==n&&E.get("drawNormalOnTop")&&this.drawNormalRange(s,o,P,R,r),M=b.length,L=0;L<M;L++)F.drawShape(b[L],E.get("lineColor"),n,E.get("lineWidth")).append();if(D&&E.get("valueSpots"))for(k=E.get("valueSpots"),k.get===n&&(k=new x(k)),L=0;L<y;L++)T=k.get(A[L]),T&&F.drawCircle(s+e.round((C[L]-this.minx)*(R/t)),o+e.round(P-P*((A[L]-this.miny)/r)),D,n,T).append();D&&E.get("spotColor")&&null!==A[a]&&F.drawCircle(s+e.round((C[C.length-1]-this.minx)*(R/t)),o+e.round(P-P*((A[a]-this.miny)/r)),D,n,E.get("spotColor")).append(),this.maxy!==this.minyorg&&(D&&E.get("minSpotColor")&&(c=C[i.inArray(this.minyorg,A)],F.drawCircle(s+e.round((c-this.minx)*(R/t)),o+e.round(P-P*((this.minyorg-this.miny)/r)),D,n,E.get("minSpotColor")).append()),D&&E.get("maxSpotColor")&&(c=C[i.inArray(this.maxyorg,A)],F.drawCircle(s+e.round((c-this.minx)*(R/t)),o+e.round(P-P*((this.maxyorg-this.miny)/r)),D,n,E.get("maxSpotColor")).append())),this.lastShapeId=F.getLastShapeId(),this.canvasTop=o,F.render()}}}),i.fn.sparkline.bar=M=a(i.fn.sparkline._base,_,{type:"bar",init:function(t,r,a,o,l){var f,d,p,g,v,m,y,b,_,w,k,S,T,C,A,L,E,F,R,P,z,D,I=parseInt(a.get("barWidth"),10),N=parseInt(a.get("barSpacing"),10),O=a.get("chartRangeMin"),B=a.get("chartRangeMax"),H=a.get("chartRangeClip"),X=1/0,W=-(1/0);for(M._super.init.call(this,t,r,a,o,l),m=0,y=r.length;m<y;m++)P=r[m],f="string"==typeof P&&P.indexOf(":")>-1,(f||i.isArray(P))&&(A=!0,f&&(P=r[m]=h(P.split(":"))),P=c(P,null),d=e.min.apply(e,P),p=e.max.apply(e,P),d<X&&(X=d),p>W&&(W=p));this.stacked=A,this.regionShapes={},this.barWidth=I,this.barSpacing=N,this.totalBarWidth=I+N,this.width=o=r.length*I+(r.length-1)*N,this.initTarget(),H&&(T=O===n?-(1/0):O,C=B===n?1/0:B),v=[],g=A?[]:v;var Y=[],j=[];for(m=0,y=r.length;m<y;m++)if(A)for(L=r[m],r[m]=R=[],Y[m]=0,g[m]=j[m]=0,E=0,F=L.length;E<F;E++)P=R[E]=H?s(L[E],T,C):L[E],null!==P&&(P>0&&(Y[m]+=P),X<0&&W>0?P<0?j[m]+=e.abs(P):g[m]+=P:g[m]+=e.abs(P-(P<0?W:X)),v.push(P));else P=H?s(r[m],T,C):r[m],P=r[m]=u(P),null!==P&&v.push(P);this.max=S=e.max.apply(e,v),this.min=k=e.min.apply(e,v),this.stackMax=W=A?e.max.apply(e,Y):S,this.stackMin=X=A?e.min.apply(e,v):k,a.get("chartRangeMin")!==n&&(a.get("chartRangeClip")||a.get("chartRangeMin")<k)&&(k=a.get("chartRangeMin")),a.get("chartRangeMax")!==n&&(a.get("chartRangeClip")||a.get("chartRangeMax")>S)&&(S=a.get("chartRangeMax")),this.zeroAxis=_=a.get("zeroAxis",!0),w=k<=0&&S>=0&&_?0:0==_?k:k>0?k:S,this.xaxisOffset=w,b=A?e.max.apply(e,g)+e.max.apply(e,j):S-k,this.canvasHeightEf=_&&k<0?this.canvasHeight-2:this.canvasHeight-1,k<w?(D=A&&S>=0?W:S,z=(D-w)/b*this.canvasHeight,z!==e.ceil(z)&&(this.canvasHeightEf-=2,z=e.ceil(z))):z=this.canvasHeight,this.yoffset=z,i.isArray(a.get("colorMap"))?(this.colorMapByIndex=a.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=a.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===n&&(this.colorMapByValue=new x(this.colorMapByValue))),this.range=b},getRegion:function(t,i){var r=e.floor(i/this.totalBarWidth);return r<0||r>=this.values.length?n:r},getCurrentRegionFields:function(){var t,e,n=this.currentRegion,i=v(this.values[n]),r=[];for(e=i.length;e--;)t=i[e],r.push({isNull:null===t,value:t,color:this.calcColor(e,t,n),offset:n});return r},calcColor:function(t,e,r){var a,o,s=this.colorMapByIndex,l=this.colorMapByValue,u=this.options;return a=this.stacked?u.get("stackedBarColor"):e<0?u.get("negBarColor"):u.get("barColor"),0===e&&u.get("zeroColor")!==n&&(a=u.get("zeroColor")),l&&(o=l.get(e))?a=o:s&&s.length>r&&(a=s[r]),i.isArray(a)?a[t%a.length]:a},renderRegion:function(t,r){var a,o,s,l,u,h,c,f,p,g,v=this.values[t],m=this.options,x=this.xaxisOffset,y=[],b=this.range,_=this.stacked,w=this.target,M=t*this.totalBarWidth,k=this.canvasHeightEf,S=this.yoffset;if(v=i.isArray(v)?v:[v],c=v.length,f=v[0],l=d(null,v),g=d(x,v,!0),l)return m.get("nullColor")?(s=r?m.get("nullColor"):this.calcHighlightColor(m.get("nullColor"),m),a=S>0?S-1:S,w.drawRect(M,a,this.barWidth-1,0,s,s)):n;for(u=S,h=0;h<c;h++){if(f=v[h],_&&f===x){if(!g||p)continue;p=!0}o=b>0?e.floor(k*(e.abs(f-x)/b))+1:1,f<x||f===x&&0===S?(a=u,u+=o):(a=S-o,S-=o),s=this.calcColor(h,f,t),r&&(s=this.calcHighlightColor(s,m)),y.push(w.drawRect(M,a,this.barWidth-1,o-1,s,s))}return 1===y.length?y[0]:y}}),i.fn.sparkline.tristate=k=a(i.fn.sparkline._base,_,{type:"tristate",init:function(t,e,r,a,o){var s=parseInt(r.get("barWidth"),10),l=parseInt(r.get("barSpacing"),10);k._super.init.call(this,t,e,r,a,o),this.regionShapes={},this.barWidth=s,this.barSpacing=l,this.totalBarWidth=s+l,this.values=i.map(e,Number),this.width=a=e.length*s+(e.length-1)*l,i.isArray(r.get("colorMap"))?(this.colorMapByIndex=r.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=r.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===n&&(this.colorMapByValue=new x(this.colorMapByValue))),this.initTarget()},getRegion:function(t,n){return e.floor(n/this.totalBarWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===n,value:this.values[t],color:this.calcColor(this.values[t],t),offset:t}},calcColor:function(t,e){var n,i,r=this.values,a=this.options,o=this.colorMapByIndex,s=this.colorMapByValue;return n=s&&(i=s.get(t))?i:o&&o.length>e?o[e]:r[e]<0?a.get("negBarColor"):r[e]>0?a.get("posBarColor"):a.get("zeroBarColor")},renderRegion:function(t,n){var i,r,a,o,s,l,u=this.values,h=this.options,c=this.target;if(i=c.pixelHeight,a=e.round(i/2),o=t*this.totalBarWidth,u[t]<0?(s=a,r=a-1):u[t]>0?(s=0,r=a-1):(s=a-1,r=2),l=this.calcColor(u[t],t),null!==l)return n&&(l=this.calcHighlightColor(l,h)),c.drawRect(o,s,this.barWidth-1,r-1,l,l)}}),i.fn.sparkline.discrete=S=a(i.fn.sparkline._base,_,{type:"discrete",init:function(t,r,a,o,s){S._super.init.call(this,t,r,a,o,s),this.regionShapes={},this.values=r=i.map(r,Number),this.min=e.min.apply(e,r),this.max=e.max.apply(e,r),this.range=this.max-this.min,this.width=o="auto"===a.get("width")?2*r.length:this.width,this.interval=e.floor(o/r.length),this.itemWidth=o/r.length,a.get("chartRangeMin")!==n&&(a.get("chartRangeClip")||a.get("chartRangeMin")<this.min)&&(this.min=a.get("chartRangeMin")),a.get("chartRangeMax")!==n&&(a.get("chartRangeClip")||a.get("chartRangeMax")>this.max)&&(this.max=a.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight="auto"===a.get("lineHeight")?e.round(.3*this.canvasHeight):a.get("lineHeight"))},getRegion:function(t,n){return e.floor(n/this.itemWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===n,value:this.values[t],offset:t}},renderRegion:function(t,n){var i,r,a,o,l=this.values,u=this.options,h=this.min,c=this.max,f=this.range,d=this.interval,p=this.target,g=this.canvasHeight,v=this.lineHeight,m=g-v;return r=s(l[t],h,c),o=t*d,i=e.round(m-m*((r-h)/f)),a=u.get("thresholdColor")&&r<u.get("thresholdValue")?u.get("thresholdColor"):u.get("lineColor"),n&&(a=this.calcHighlightColor(a,u)),p.drawLine(o,i,o,i+v,a)}}),i.fn.sparkline.bullet=T=a(i.fn.sparkline._base,{type:"bullet",init:function(t,i,r,a,o){var s,l,u;T._super.init.call(this,t,i,r,a,o),this.values=i=h(i),u=i.slice(),u[0]=null===u[0]?u[2]:u[0],u[1]=null===i[1]?u[2]:u[1],s=e.min.apply(e,i),l=e.max.apply(e,i),s=r.get("base")===n?s<0?s:0:r.get("base"),this.min=s,this.max=l,this.range=l-s,this.shapes={},this.valueShapes={},this.regiondata={},this.width=a="auto"===r.get("width")?"4.0em":a,this.target=this.$el.simpledraw(a,o,r.get("composite")),i.length||(this.disabled=!0),this.initTarget()},getRegion:function(t,e,i){var r=this.target.getShapeAt(t,e,i);return r!==n&&this.shapes[r]!==n?this.shapes[r]:n},getCurrentRegionFields:function(){var t=this.currentRegion;return{fieldkey:t.substr(0,1),value:this.values[t.substr(1)],region:t}},changeHighlight:function(t){var e,n=this.currentRegion,i=this.valueShapes[n];switch(delete this.shapes[i],n.substr(0,1)){case"r":e=this.renderRange(n.substr(1),t);break;case"p":e=this.renderPerformance(t);break;case"t":e=this.renderTarget(t)}this.valueShapes[n]=e.id,this.shapes[e.id]=n,this.target.replaceWithShape(i,e)},renderRange:function(t,n){var i=this.values[t],r=e.round(this.canvasWidth*((i-this.min)/this.range)),a=this.options.get("rangeColors")[t-2];return n&&(a=this.calcHighlightColor(a,this.options)),this.target.drawRect(0,0,r-1,this.canvasHeight-1,a,a)},renderPerformance:function(t){var n=this.values[1],i=e.round(this.canvasWidth*((n-this.min)/this.range)),r=this.options.get("performanceColor");return t&&(r=this.calcHighlightColor(r,this.options)),this.target.drawRect(0,e.round(.3*this.canvasHeight),i-1,e.round(.4*this.canvasHeight)-1,r,r)},renderTarget:function(t){var n=this.values[0],i=e.round(this.canvasWidth*((n-this.min)/this.range)-this.options.get("targetWidth")/2),r=e.round(.1*this.canvasHeight),a=this.canvasHeight-2*r,o=this.options.get("targetColor");return t&&(o=this.calcHighlightColor(o,this.options)),this.target.drawRect(i,r,this.options.get("targetWidth")-1,a-1,o,o)},render:function(){var t,e,n=this.values.length,i=this.target;if(T._super.render.call(this)){for(t=2;t<n;t++)e=this.renderRange(t).append(),this.shapes[e.id]="r"+t,this.valueShapes["r"+t]=e.id;null!==this.values[1]&&(e=this.renderPerformance().append(),this.shapes[e.id]="p1",this.valueShapes.p1=e.id),null!==this.values[0]&&(e=this.renderTarget().append(),this.shapes[e.id]="t0",this.valueShapes.t0=e.id),i.render()}}}),i.fn.sparkline.pie=C=a(i.fn.sparkline._base,{type:"pie",init:function(t,n,r,a,o){var s,l=0;if(C._super.init.call(this,t,n,r,a,o),this.shapes={},this.valueShapes={},this.values=n=i.map(n,Number),"auto"===r.get("width")&&(this.width=this.height),n.length>0)for(s=n.length;s--;)l+=n[s];this.total=l,this.initTarget(),this.radius=e.floor(e.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(t,e,i){var r=this.target.getShapeAt(t,e,i);return r!==n&&this.shapes[r]!==n?this.shapes[r]:n},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===n,value:this.values[t],percent:this.values[t]/this.total*100,color:this.options.get("sliceColors")[t%this.options.get("sliceColors").length],offset:t}},changeHighlight:function(t){var e=this.currentRegion,n=this.renderSlice(e,t),i=this.valueShapes[e];delete this.shapes[i],this.target.replaceWithShape(i,n),this.valueShapes[e]=n.id,this.shapes[n.id]=e},renderSlice:function(t,i){var r,a,o,s,l,u=this.target,h=this.options,c=this.radius,f=h.get("borderWidth"),d=h.get("offset"),p=2*e.PI,g=this.values,v=this.total,m=d?2*e.PI*(d/360):0;for(s=g.length,o=0;o<s;o++){if(r=m,a=m,v>0&&(a=m+p*(g[o]/v)),t===o)return l=h.get("sliceColors")[o%h.get("sliceColors").length],i&&(l=this.calcHighlightColor(l,h)),u.drawPieSlice(c,c,c-f,r,a,n,l);m=a}},render:function(){var t,i,r=this.target,a=this.values,o=this.options,s=this.radius,l=o.get("borderWidth");if(C._super.render.call(this)){for(l&&r.drawCircle(s,s,e.floor(s-l/2),o.get("borderColor"),n,l).append(),i=a.length;i--;)a[i]&&(t=this.renderSlice(i).append(),this.valueShapes[i]=t.id,this.shapes[t.id]=i);r.render()}}}),i.fn.sparkline.box=A=a(i.fn.sparkline._base,{type:"box",init:function(t,e,n,r,a){A._super.init.call(this,t,e,n,r,a),this.values=i.map(e,Number),this.width="auto"===n.get("width")?"4.0em":r,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var t=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==n&&t.push({field:"lo",value:this.loutlier}),this.routlier!==n&&t.push({field:"ro",value:this.routlier}),this.lwhisker!==n&&t.push({field:"lw",value:this.lwhisker}),this.rwhisker!==n&&t.push({field:"rw",value:this.rwhisker}),t},render:function(){var t,i,r,a,o,s,u,h,c,f,d,p=this.target,g=this.values,v=g.length,m=this.options,x=this.canvasWidth,y=this.canvasHeight,b=m.get("chartRangeMin")===n?e.min.apply(e,g):m.get("chartRangeMin"),_=m.get("chartRangeMax")===n?e.max.apply(e,g):m.get("chartRangeMax"),w=0;if(A._super.render.call(this)){if(m.get("raw"))m.get("showOutliers")&&g.length>5?(i=g[0],t=g[1],a=g[2],o=g[3],s=g[4],u=g[5],h=g[6]):(t=g[0],a=g[1],o=g[2],s=g[3],u=g[4]);else if(g.sort(function(t,e){return t-e}),a=l(g,1),o=l(g,2),s=l(g,3),r=s-a,m.get("showOutliers")){for(t=u=n,c=0;c<v;c++)t===n&&g[c]>a-r*m.get("outlierIQR")&&(t=g[c]),g[c]<s+r*m.get("outlierIQR")&&(u=g[c]);i=g[0],h=g[v-1]}else t=g[0],u=g[v-1];this.quartiles=[a,o,s],this.lwhisker=t,this.rwhisker=u,this.loutlier=i,this.routlier=h,d=x/(_-b+1),m.get("showOutliers")&&(w=e.ceil(m.get("spotRadius")),x-=2*e.ceil(m.get("spotRadius")),d=x/(_-b+1),i<t&&p.drawCircle((i-b)*d+w,y/2,m.get("spotRadius"),m.get("outlierLineColor"),m.get("outlierFillColor")).append(),h>u&&p.drawCircle((h-b)*d+w,y/2,m.get("spotRadius"),m.get("outlierLineColor"),m.get("outlierFillColor")).append()),p.drawRect(e.round((a-b)*d+w),e.round(.1*y),e.round((s-a)*d),e.round(.8*y),m.get("boxLineColor"),m.get("boxFillColor")).append(),p.drawLine(e.round((t-b)*d+w),e.round(y/2),e.round((a-b)*d+w),e.round(y/2),m.get("lineColor")).append(),p.drawLine(e.round((t-b)*d+w),e.round(y/4),e.round((t-b)*d+w),e.round(y-y/4),m.get("whiskerColor")).append(),p.drawLine(e.round((u-b)*d+w),e.round(y/2),e.round((s-b)*d+w),e.round(y/2),m.get("lineColor")).append(),p.drawLine(e.round((u-b)*d+w),e.round(y/4),e.round((u-b)*d+w),e.round(y-y/4),m.get("whiskerColor")).append(),p.drawLine(e.round((o-b)*d+w),e.round(.1*y),e.round((o-b)*d+w),e.round(.9*y),m.get("medianColor")).append(),m.get("target")&&(f=e.ceil(m.get("spotRadius")),p.drawLine(e.round((m.get("target")-b)*d+w),e.round(y/2-f),e.round((m.get("target")-b)*d+w),e.round(y/2+f),m.get("targetColor")).append(),p.drawLine(e.round((m.get("target")-b)*d+w-f),e.round(y/2),e.round((m.get("target")-b)*d+w+f),e.round(y/2),m.get("targetColor")).append()),p.render()}}}),F=a({init:function(t,e,n,i){this.target=t,this.id=e,this.type=n,this.args=i},append:function(){return this.target.appendShape(this),this}}),R=a({_pxregex:/(\d+)(px)?\s*$/i,init:function(t,e,n){t&&(this.width=t,this.height=e,this.target=n,this.lastShapeId=null,n[0]&&(n=n[0]),i.data(n,"_jqs_vcanvas",this))},drawLine:function(t,e,n,i,r,a){return this.drawShape([[t,e],[n,i]],r,a)},drawShape:function(t,e,n,i){return this._genShape("Shape",[t,e,n,i])},drawCircle:function(t,e,n,i,r,a){return this._genShape("Circle",[t,e,n,i,r,a])},drawPieSlice:function(t,e,n,i,r,a,o){return this._genShape("PieSlice",[t,e,n,i,r,a,o])},drawRect:function(t,e,n,i,r,a){return this._genShape("Rect",[t,e,n,i,r,a])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(t,e){i(e).html(t)},_calculatePixelDims:function(t,e,n){var r;r=this._pxregex.exec(e),r?this.pixelHeight=r[1]:this.pixelHeight=i(n).height(),r=this._pxregex.exec(t),r?this.pixelWidth=r[1]:this.pixelWidth=i(n).width()},_genShape:function(t,e){var n=N++;return e.unshift(n),new F(this,n,t,e)},appendShape:function(){alert("appendShape not implemented")},replaceWithShape:function(){alert("replaceWithShape not implemented")},insertAfterShape:function(){alert("insertAfterShape not implemented")},removeShapeId:function(){alert("removeShapeId not implemented")},getShapeAt:function(){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),P=a(R,{init:function(e,r,a,o){P._super.init.call(this,e,r,a),this.canvas=t.createElement("canvas"),a[0]&&(a=a[0]),i.data(a,"_jqs_vcanvas",this),i(this.canvas).css({display:"inline-block",width:e,height:r,verticalAlign:"top"}),this._insert(this.canvas,a),this._calculatePixelDims(e,r,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=o,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=n,i(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(t,e,i){var r=this.canvas.getContext("2d");return t!==n&&(r.strokeStyle=t),r.lineWidth=i===n?1:i,e!==n&&(r.fillStyle=e),r},reset:function(){var t=this._getContext();t.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=n},_drawShape:function(t,e,i,r,a){var o,s,l=this._getContext(i,r,a);for(l.beginPath(),l.moveTo(e[0][0]+.5,e[0][1]+.5),o=1,s=e.length;o<s;o++)l.lineTo(e[o][0]+.5,e[o][1]+.5);i!==n&&l.stroke(),r!==n&&l.fill(),this.targetX!==n&&this.targetY!==n&&l.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawCircle:function(t,i,r,a,o,s,l){var u=this._getContext(o,s,l);u.beginPath(),u.arc(i,r,a,0,2*e.PI,!1),this.targetX!==n&&this.targetY!==n&&u.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t),o!==n&&u.stroke(),s!==n&&u.fill()},_drawPieSlice:function(t,e,i,r,a,o,s,l){var u=this._getContext(s,l);u.beginPath(),u.moveTo(e,i),u.arc(e,i,r,a,o,!1),u.lineTo(e,i),u.closePath(),s!==n&&u.stroke(),l&&u.fill(),this.targetX!==n&&this.targetY!==n&&u.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawRect:function(t,e,n,i,r,a,o){return this._drawShape(t,[[e,n],[e+i,n],[e+i,n+r],[e,n+r],[e,n]],a,o)},appendShape:function(t){return this.shapes[t.id]=t,this.shapeseq.push(t.id),this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var n,i=this.shapeseq;for(this.shapes[e.id]=e,n=i.length;n--;)i[n]==t&&(i[n]=e.id);delete this.shapes[t]},replaceWithShapes:function(t,e){var n,i,r,a=this.shapeseq,o={};for(i=t.length;i--;)o[t[i]]=!0;for(i=a.length;i--;)n=a[i],o[n]&&(a.splice(i,1),delete this.shapes[n],r=i);for(i=e.length;i--;)a.splice(r,0,e[i].id),this.shapes[e[i].id]=e[i]},insertAfterShape:function(t,e){var n,i=this.shapeseq;for(n=i.length;n--;)if(i[n]===t)return i.splice(n+1,0,e.id),void(this.shapes[e.id]=e)},removeShapeId:function(t){var e,n=this.shapeseq;for(e=n.length;e--;)if(n[e]===t){n.splice(e,1);break}delete this.shapes[t]},getShapeAt:function(t,e,n){return this.targetX=e,this.targetY=n,this.render(),this.currentTargetShapeId},render:function(){var t,e,n,i=this.shapeseq,r=this.shapes,a=i.length,o=this._getContext();for(o.clearRect(0,0,this.pixelWidth,this.pixelHeight),n=0;n<a;n++)t=i[n],e=r[t],this["_draw"+e.type].apply(this,e.args);this.interact||(this.shapes={},this.shapeseq=[])}}),z=a(R,{init:function(e,n,r){var a;z._super.init.call(this,e,n,r),r[0]&&(r=r[0]),i.data(r,"_jqs_vcanvas",this),this.canvas=t.createElement("span"),i(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:e,height:n,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,r),this._calculatePixelDims(e,n,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,a='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",a),this.group=i(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(t,e,i,r,a){var o,s,l,u,h,c,f,d=[];for(f=0,c=e.length;f<c;f++)d[f]=""+e[f][0]+","+e[f][1];return o=d.splice(0,1),a=a===n?1:a,s=i===n?' stroked="false" ':' strokeWeight="'+a+'px" strokeColor="'+i+'" ',l=r===n?' filled="false"':' fillColor="'+r+'" filled="true" ',u=d[0]===d[d.length-1]?"x ":"",h='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+t+'" '+s+l+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+o+" l "+d.join(", ")+" "+u+'e"> </v:shape>'},_drawCircle:function(t,e,i,r,a,o,s){var l,u,h;return e-=r,i-=r,l=a===n?' stroked="false" ':' strokeWeight="'+s+'px" strokeColor="'+a+'" ',u=o===n?' filled="false"':' fillColor="'+o+'" filled="true" ',h='<v:oval  id="jqsshape'+t+'" '+l+u+' style="position:absolute;top:'+i+"px; left:"+e+"px; width:"+2*r+"px; height:"+2*r+'px"></v:oval>'},_drawPieSlice:function(t,i,r,a,o,s,l,u){var h,c,f,d,p,g,v,m;if(o===s)return"";if(s-o===2*e.PI&&(o=0,s=2*e.PI),c=i+e.round(e.cos(o)*a),f=r+e.round(e.sin(o)*a),d=i+e.round(e.cos(s)*a),p=r+e.round(e.sin(s)*a),c===d&&f===p){if(s-o<e.PI)return"";c=d=i+a,f=p=r}return c===d&&f===p&&s-o<e.PI?"":(h=[i-a,r-a,i+a,r+a,c,f,d,p],g=l===n?' stroked="false" ':' strokeWeight="1px" strokeColor="'+l+'" ',
v=u===n?' filled="false"':' fillColor="'+u+'" filled="true" ',m='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+t+'" '+g+v+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+i+","+r+" wa "+h.join(", ")+' x e"> </v:shape>')},_drawRect:function(t,e,n,i,r,a,o){return this._drawShape(t,[[e,n],[e,n+r],[e+i,n+r],[e+i,n],[e,n]],a,o)},reset:function(){this.group.innerHTML=""},appendShape:function(t){var e=this["_draw"+t.type].apply(this,t.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",e):this.prerender+=e,this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var n=i("#jqsshape"+t),r=this["_draw"+e.type].apply(this,e.args);n[0].outerHTML=r},replaceWithShapes:function(t,e){var n,r=i("#jqsshape"+t[0]),a="",o=e.length;for(n=0;n<o;n++)a+=this["_draw"+e[n].type].apply(this,e[n].args);for(r[0].outerHTML=a,n=1;n<t.length;n++)i("#jqsshape"+t[n]).remove()},insertAfterShape:function(t,e){var n=i("#jqsshape"+t),r=this["_draw"+e.type].apply(this,e.args);n[0].insertAdjacentHTML("afterEnd",r)},removeShapeId:function(t){var e=i("#jqsshape"+t);this.group.removeChild(e[0])},getShapeAt:function(t){var e=t.id.substr(8);return e},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})}(document,Math),function(){"use strict";var t=this,e=t.Chart,n=function(t){return this.canvas=t.canvas,this.ctx=t,this.width=t.canvas.width,this.height=t.canvas.height,this.aspectRatio=this.width/this.height,i.retinaScale(this),this};n.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},n.types={};var i=n.helpers={},r=i.each=function(t,e,n){var i=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var r;for(r=0;r<t.length;r++)e.apply(n,[t[r],r].concat(i))}else for(var a in t)e.apply(n,[t[a],a].concat(i))},a=i.clone=function(t){var e={};return r(t,function(n,i){t.hasOwnProperty(i)&&(e[i]=n)}),e},o=i.extend=function(t){return r(Array.prototype.slice.call(arguments,1),function(e){r(e,function(n,i){e.hasOwnProperty(i)&&(t[i]=n)})}),t},s=i.merge=function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift({}),o.apply(null,t)},l=i.indexOf=function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},u=(i.where=function(t,e){var n=[];return i.each(t,function(t){e(t)&&n.push(t)}),n},i.findNextWhere=function(t,e,n){n||(n=-1);for(var i=n+1;i<t.length;i++){var r=t[i];if(e(r))return r}},i.findPreviousWhere=function(t,e,n){n||(n=t.length);for(var i=n-1;i>=0;i--){var r=t[i];if(e(r))return r}},i.inherits=function(t){var e=this,n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},i=function(){this.constructor=n};return i.prototype=e.prototype,n.prototype=new i,n.extend=u,t&&o(n.prototype,t),n.__super__=e.prototype,n}),h=i.noop=function(){},c=i.uid=function(){var t=0;return function(){return"chart-"+t++}}(),f=i.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},d=i.amd="function"==typeof t.define&&t.define.amd,p=i.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},g=i.max=function(t){return Math.max.apply(Math,t)},v=i.min=function(t){return Math.min.apply(Math,t)},m=(i.cap=function(t,e,n){if(p(e)){if(t>e)return e}else if(p(n)&&n>t)return n;return t},i.getDecimalPlaces=function(t){return t%1!==0&&p(t)?t.toString().split(".")[1].length:0}),x=i.radians=function(t){return t*(Math.PI/180)},y=(i.getAngleFromPoint=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i),a=2*Math.PI+Math.atan2(i,n);return 0>n&&0>i&&(a+=2*Math.PI),{angle:a,distance:r}},i.aliasPixel=function(t){return t%2===0?0:.5}),b=(i.splineCurve=function(t,e,n,i){var r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),a=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)),o=i*r/(r+a),s=i*a/(r+a);return{inner:{x:e.x-o*(n.x-t.x),y:e.y-o*(n.y-t.y)},outer:{x:e.x+s*(n.x-t.x),y:e.y+s*(n.y-t.y)}}},i.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),_=(i.calculateScaleRange=function(t,e,n,i,r){var a=2,o=Math.floor(e/(1.5*n)),s=a>=o,l=g(t),u=v(t);l===u&&(l+=.5,u>=.5&&!i?u-=.5:l+=.5);for(var h=Math.abs(l-u),c=b(h),f=Math.ceil(l/(1*Math.pow(10,c)))*Math.pow(10,c),d=i?0:Math.floor(u/(1*Math.pow(10,c)))*Math.pow(10,c),p=f-d,m=Math.pow(10,c),x=Math.round(p/m);(x>o||o>2*x)&&!s;)if(x>o)m*=2,x=Math.round(p/m),x%1!==0&&(s=!0);else if(r&&c>=0){if(m/2%1!==0)break;m/=2,x=Math.round(p/m)}else m/=2,x=Math.round(p/m);return s&&(x=a,m=p/x),{steps:x,stepValue:m,min:d,max:d+x*m}},i.template=function(t,e){function n(t,e){var n=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):i[t]=i[t];return e?n(e):n}if(t instanceof Function)return t(e);var i={};return n(t,e)}),w=(i.generateLabels=function(t,e,n,i){var a=new Array(e);return labelTemplateString&&r(a,function(e,r){a[r]=_(t,{value:n+i*(r+1)})}),a},i.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/n)))},easeOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin(2*(1*t-e)*Math.PI/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:2==(t/=.5)?1:(n||(n=.3*1.5),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),1>t?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/n):i*Math.pow(2,-10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/n)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-w.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*w.easeInBounce(2*t):.5*w.easeOutBounce(2*t-1)+.5}}),M=i.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),k=(i.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)}}(),i.animationLoop=function(t,e,n,i,r,a){var o=0,s=w[n]||w.linear,l=function(){o++;var n=o/e,u=s(n);t.call(a,u,n,o),i.call(a,u,n),e>o?a.animationFrame=M(l):r.apply(a)};M(l)},i.getRelativePosition=function(t){var e,n,i=t.originalEvent||t,r=t.currentTarget||t.srcElement,a=r.getBoundingClientRect();return i.touches?(e=i.touches[0].clientX-a.left,n=i.touches[0].clientY-a.top):(e=i.clientX-a.left,n=i.clientY-a.top),{x:e,y:n}},i.addEvent=function(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}),S=i.removeEvent=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=h},T=(i.bindEvents=function(t,e,n){t.events||(t.events={}),r(e,function(e){t.events[e]=function(){n.apply(t,arguments)},k(t.chart.canvas,e,t.events[e])})},i.unbindEvents=function(t,e){r(e,function(e,n){S(t.chart.canvas,n,e)})}),C=i.getMaximumWidth=function(t){var e=t.parentNode;return e.clientWidth},A=i.getMaximumHeight=function(t){var e=t.parentNode;return e.clientHeight},L=(i.getMaximumSize=i.getMaximumWidth,i.retinaScale=function(t){var e=t.ctx,n=t.canvas.width,i=t.canvas.height;window.devicePixelRatio&&(e.canvas.style.width=n+"px",e.canvas.style.height=i+"px",e.canvas.height=i*window.devicePixelRatio,e.canvas.width=n*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio))}),E=i.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},F=i.fontString=function(t,e,n){return e+" "+t+"px "+n},R=i.longestText=function(t,e,n){t.font=e;var i=0;return r(n,function(e){var n=t.measureText(e).width;i=n>i?n:i}),i},P=i.drawRoundedRectangle=function(t,e,n,i,r,a){t.beginPath(),t.moveTo(e+a,n),t.lineTo(e+i-a,n),t.quadraticCurveTo(e+i,n,e+i,n+a),t.lineTo(e+i,n+r-a),t.quadraticCurveTo(e+i,n+r,e+i-a,n+r),t.lineTo(e+a,n+r),t.quadraticCurveTo(e,n+r,e,n+r-a),t.lineTo(e,n+a),t.quadraticCurveTo(e,n,e+a,n),t.closePath()};n.instances={},n.Type=function(t,e,i){this.options=e,this.chart=i,this.id=c(),n.instances[this.id]=this,e.responsive&&this.resize(),this.initialize.call(this,t)},o(n.Type.prototype,{initialize:function(){return this},clear:function(){return E(this.chart),this},stop:function(){return i.cancelAnimFrame.call(t,this.animationFrame),this},resize:function(t){this.stop();var e=this.chart.canvas,n=C(this.chart.canvas),i=this.options.maintainAspectRatio?n/this.chart.aspectRatio:A(this.chart.canvas);return e.width=this.chart.width=n,e.height=this.chart.height=i,L(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:h,render:function(t){return t&&this.reflow(),this.options.animation&&!t?i.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return _(this.options.legendTemplate,this)},destroy:function(){this.clear(),T(this,this.events),delete n.instances[this.id]},showTooltip:function(t,e){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var a=function(t){var e=!1;return t.length!==this.activeElements.length?e=!0:(r(t,function(t,n){t!==this.activeElements[n]&&(e=!0)},this),e)}.call(this,t);if(a||e){if(this.activeElements=t,this.draw(),t.length>0)if(this.datasets&&this.datasets.length>1){for(var o,s,u=this.datasets.length-1;u>=0&&(o=this.datasets[u].points||this.datasets[u].bars||this.datasets[u].segments,s=l(o,t[0]),-1===s);u--);var h=[],c=[],f=function(){var t,e,n,r,a,o=[],l=[],u=[];return i.each(this.datasets,function(e){t=e.points||e.bars||e.segments,t[s]&&t[s].hasValue()&&o.push(t[s])}),i.each(o,function(t){l.push(t.x),u.push(t.y),h.push(i.template(this.options.multiTooltipTemplate,t)),c.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),a=v(u),n=g(u),r=v(l),e=g(l),{x:r>this.chart.width/2?r:e,y:(a+n)/2}}.call(this,s);new n.MultiTooltip({x:f.x,y:f.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:h,legendColors:c,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx}).draw()}else r(t,function(t){var e=t.tooltipPosition();new n.Tooltip({x:Math.round(e.x),y:Math.round(e.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:_(this.options.tooltipTemplate,t),chart:this.chart}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),n.Type.extend=function(t){var e=this,i=function(){return e.apply(this,arguments)};if(i.prototype=a(e.prototype),o(i.prototype,t),i.extend=n.Type.extend,t.name||e.prototype.name){var r=t.name||e.prototype.name,l=n.defaults[e.prototype.name]?a(n.defaults[e.prototype.name]):{};n.defaults[r]=o(l,t.defaults),n.types[r]=i,n.prototype[r]=function(t,e){var a=s(n.defaults.global,n.defaults[r],e||{});return new i(t,a,this)}}else f("Name not provided for this chart, so it hasn't been registered");return e},n.Element=function(t){o(this,t),this.initialize.apply(this,arguments),this.save()},o(n.Element.prototype,{initialize:function(){},restore:function(t){return t?r(t,function(t){this[t]=this._saved[t]},this):o(this,this._saved),this},save:function(){return this._saved=a(this),delete this._saved._saved,this},update:function(t){return r(t,function(t,e){this._saved[e]=this[e],this[e]=t},this),this},transition:function(t,e){return r(t,function(t,n){this[n]=(t-this._saved[n])*e+this._saved[n]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return p(this.value)}}),n.Element.extend=u,n.Point=n.Element.extend({display:!0,inRange:function(t,e){var n=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(e-this.y,2)<Math.pow(n,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),n.Arc=n.Element.extend({inRange:function(t,e){var n=i.getAngleFromPoint(this,{x:t,y:e}),r=n.angle>=this.startAngle&&n.angle<=this.endAngle,a=n.distance>=this.innerRadius&&n.distance<=this.outerRadius;return r&&a},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,e=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*e,y:this.y+Math.sin(t)*e}},draw:function(){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),t.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.lineJoin="bevel",this.showStroke&&t.stroke()}}),n.Rectangle=n.Element.extend({draw:function(){var t=this.ctx,e=this.width/2,n=this.x-e,i=this.x+e,r=this.base-(this.base-this.y),a=this.strokeWidth/2;this.showStroke&&(n+=a,i-=a,r+=a),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(n,this.base),t.lineTo(n,r),t.lineTo(i,r),t.lineTo(i,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,e){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&e>=this.y&&e<=this.base}}),n.Tooltip=n.Element.extend({draw:function(){var t=this.chart.ctx;t.font=F(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var e=2,n=t.measureText(this.text).width+2*this.xPadding,i=this.fontSize+2*this.yPadding,r=i+this.caretHeight+e;this.x+n/2>this.chart.width?this.xAlign="left":this.x-n/2<0&&(this.xAlign="right"),this.y-r<0&&(this.yAlign="below");var a=this.x-n/2,o=this.y-r;switch(t.fillStyle=this.fillColor,this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-e),t.lineTo(this.x+this.caretHeight,this.y-(e+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(e+this.caretHeight)),t.closePath(),t.fill();break;case"below":o=this.y+e+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+e),t.lineTo(this.x+this.caretHeight,this.y+e+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+e+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":a=this.x-n+(this.cornerRadius+this.caretHeight);break;case"right":a=this.x-(this.cornerRadius+this.caretHeight)}P(t,a,o,n,i,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,a+n/2,o+i/2)}}),n.MultiTooltip=n.Element.extend({initialize:function(){this.font=F(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=F(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,e=R(this.ctx,this.font,this.labels)+this.fontSize+3,n=g([e,t]);this.width=n+2*this.xPadding;var i=this.height/2;this.y-i<0?this.y=i:this.y+i>this.chart.height&&(this.y=this.chart.height-i),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var e=this.y-this.height/2+this.yPadding,n=t-1;return 0===t?e+this.titleFontSize/2:e+(1.5*this.fontSize*n+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){P(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,i.each(this.labels,function(e,n){t.fillStyle=this.textColor,t.fillText(e,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(n+1)),t.fillStyle=this.legendColorBackground,t.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize),t.fillStyle=this.legendColors[n].fill,t.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}),n.Scale=n.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=m(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(_(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?R(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,e=this.endPoint-this.startPoint;for(this.calculateYRange(e),this.buildYLabels(),this.calculateXLabelRotation();e>this.endPoint-this.startPoint;)e=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(e),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,e,n=this.ctx.measureText(this.xLabels[0]).width,i=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=i/2+3,this.xScalePaddingLeft=n/2>this.yLabelWidth+10?n/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var r,a=R(this.ctx,this.font,this.xLabels);this.xLabelWidth=a;for(var o=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>o&&0===this.xLabelRotation||this.xLabelWidth>o&&this.xLabelRotation<=90&&this.xLabelRotation>0;)r=Math.cos(x(this.xLabelRotation)),t=r*n,e=r*i,t+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=r*a;this.xLabelRotation>0&&(this.endPoint-=Math.sin(x(this.xLabelRotation))*a+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:h,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var e=this.drawingArea()/(this.min-this.max);return this.endPoint-e*(t-this.min)},calculateX:function(t){var e=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),n=e/(this.valuesCount-(this.offsetGridLines?0:1)),i=n*t+this.xScalePaddingLeft;return this.offsetGridLines&&(i+=n/2),Math.round(i)},update:function(t){i.extend(this,t),this.fit()},draw:function(){var t=this.ctx,e=(this.endPoint-this.startPoint)/this.steps,n=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,r(this.yLabels,function(r,a){var o=this.endPoint-e*a,s=Math.round(o);t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(r,n-10,o),t.beginPath(),a>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),s+=i.aliasPixel(t.lineWidth),t.moveTo(n,s),t.lineTo(this.width,s),t.stroke(),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(n-5,s),t.lineTo(n,s),t.stroke(),t.closePath()},this),r(this.xLabels,function(e,n){var i=this.calculateX(n)+y(this.lineWidth),r=this.calculateX(n-(this.offsetGridLines?.5:0))+y(this.lineWidth),a=this.xLabelRotation>0;t.beginPath(),n>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),t.moveTo(r,this.endPoint),t.lineTo(r,this.startPoint-3),t.stroke(),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(r,this.endPoint),t.lineTo(r,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(i,a?this.endPoint+12:this.endPoint+8),t.rotate(-1*x(this.xLabelRotation)),t.font=this.font,t.textAlign=a?"right":"center",t.textBaseline=a?"middle":"top",t.fillText(e,0,0),t.restore()},this))}}),n.RadialScale=n.Element.extend({initialize:function(){this.size=v([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var e=this.drawingArea/(this.max-this.min);return(t-this.min)*e},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=m(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(_(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,e,n,i,r,a,o,s,l,u,h,c,f=v([this.height/2-this.pointLabelFontSize-5,this.width/2]),d=this.width,g=0;for(this.ctx.font=F(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e=0;e<this.valuesCount;e++)t=this.getPointPosition(e,f),n=this.ctx.measureText(_(this.templateString,{value:this.labels[e]})).width+5,0===e||e===this.valuesCount/2?(i=n/2,t.x+i>d&&(d=t.x+i,r=e),t.x-i<g&&(g=t.x-i,o=e)):e<this.valuesCount/2?t.x+n>d&&(d=t.x+n,r=e):e>this.valuesCount/2&&t.x-n<g&&(g=t.x-n,o=e);l=g,u=Math.ceil(d-this.width),a=this.getIndexAngle(r),s=this.getIndexAngle(o),h=u/Math.sin(a+Math.PI/2),c=l/Math.sin(s+Math.PI/2),h=p(h)?h:0,c=p(c)?c:0,this.drawingArea=f-(c+h)/2,this.setCenterPoint(c,h)},setCenterPoint:function(t,e){var n=this.width-e-this.drawingArea,i=t+this.drawingArea;this.xCenter=(i+n)/2,this.yCenter=this.height/2},getIndexAngle:function(t){var e=2*Math.PI/this.valuesCount;return t*e-Math.PI/2},getPointPosition:function(t,e){var n=this.getIndexAngle(t);return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter}},draw:function(){if(this.display){var t=this.ctx;if(r(this.yLabels,function(e,n){if(n>0){var i,r=n*(this.drawingArea/this.steps),a=this.yCenter-r;if(this.lineWidth>0)if(t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,this.lineArc)t.beginPath(),t.arc(this.xCenter,this.yCenter,r,0,2*Math.PI),t.closePath(),t.stroke();else{t.beginPath();for(var o=0;o<this.valuesCount;o++)i=this.getPointPosition(o,this.calculateCenterOffset(this.min+n*this.stepValue)),0===o?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y);t.closePath(),t.stroke()}if(this.showLabels){if(t.font=F(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var s=t.measureText(e).width;t.fillStyle=this.backdropColor,t.fillRect(this.xCenter-s/2-this.backdropPaddingX,a-this.fontSize/2-this.backdropPaddingY,s+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.fontColor,t.fillText(e,this.xCenter,a)}}},this),!this.lineArc){t.lineWidth=this.angleLineWidth,t.strokeStyle=this.angleLineColor;for(var e=this.valuesCount-1;e>=0;e--){if(this.angleLineWidth>0){var n=this.getPointPosition(e,this.calculateCenterOffset(this.max));t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(n.x,n.y),t.stroke(),t.closePath()}var i=this.getPointPosition(e,this.calculateCenterOffset(this.max)+5);t.font=F(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t.fillStyle=this.pointLabelFontColor;var a=this.labels.length,o=this.labels.length/2,s=o/2,l=s>e||e>a-s,u=e===s||e===a-s;t.textAlign=0===e?"center":e===o?"center":o>e?"left":"right",t.textBaseline=u?"middle":l?"bottom":"top",t.fillText(this.labels[e],i.x,i.y)}}}}}),i.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){r(n.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}}()),d?define(function(){return n}):"object"==typeof module&&module.exports&&(module.exports=n),t.Chart=n,n.noConflict=function(){return t.Chart=e,n}}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,i={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Bar",defaults:i,initialize:function(t){var i=this.options;this.ScaleClass=e.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,e,n){var r=this.calculateBaseWidth(),a=this.calculateX(n)-r/2,o=this.calculateBarWidth(t);return a+o*e+e*i.barDatasetSpacing+o/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*i.barValueSpacing},calculateBarWidth:function(t){var e=this.calculateBaseWidth()-(t-1)*i.barDatasetSpacing;return e/t}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),this.BarClass=e.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),n.each(t.datasets,function(e){var i={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,bars:[]};this.datasets.push(i),n.each(e.data,function(n,r){i.bars.push(new this.BarClass({value:n,label:t.labels[r],datasetLabel:e.label,strokeColor:e.strokeColor,fillColor:e.fillColor,highlightFill:e.highlightFill||e.fillColor,highlightStroke:e.highlightStroke||e.strokeColor}))},this)},this),this.buildScale(t.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,e,i){n.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,i,e),y:this.scale.endPoint}),t.save()},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachBars(function(t){t.save()}),this.render()},eachBars:function(t){n.each(this.datasets,function(e,i){n.each(e.bars,t,this,i)},this)},getBarsAtEvent:function(t){for(var e,i=[],r=n.getRelativePosition(t),a=function(t){i.push(t.bars[e])},o=0;o<this.datasets.length;o++)for(e=0;e<this.datasets[o].bars.length;e++)if(this.datasets[o].bars[e].inRange(r.x,r.y))return n.each(this.datasets,a),i;return i},buildScale:function(t){var e=this,i=function(){var t=[];return e.eachBars(function(e){t.push(e.value)}),t},r={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=n.calculateScaleRange(i(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,e)},xLabels:t,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(r,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(r)},addData:function(t,e){n.each(t,function(t,n){this.datasets[n].bars.push(new this.BarClass({value:t,label:e,x:this.scale.calculateBarX(this.datasets.length,n,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[n].strokeColor,fillColor:this.datasets[n].fillColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(t){t.bars.shift()},this),this.update()},reflow:function(){n.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=n.extend({height:this.chart.height,width:this.chart.width
});this.scale.update(t)},draw:function(t){var e=t||1;this.clear(),this.chart.ctx,this.scale.draw(e),n.each(this.datasets,function(t,i){n.each(t.bars,function(t,n){t.hasValue()&&(t.base=this.scale.endPoint,t.transition({x:this.scale.calculateBarX(this.datasets.length,i,n),y:this.scale.calculateY(t.value),width:this.scale.calculateBarWidth(this.datasets.length)},e).draw())},this)},this)}})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,i={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Doughnut",defaults:i,initialize:function(t){this.segments=[],this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=e.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(t){t.restore(["fillColor"])}),n.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.calculateTotal(t),n.each(t,function(t,e){this.addData(t,e,!0)},this),this.render()},getSegmentsAtEvent:function(t){var e=[],i=n.getRelativePosition(t);return n.each(this.segments,function(t){t.inRange(i.x,i.y)&&e.push(t)},this),e},addData:function(t,e,n){var i=e||this.segments.length;this.segments.splice(i,0,new this.SegmentArc({value:t.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(t.value),label:t.label})),n||(this.reflow(),this.update())},calculateCircumference:function(t){return 2*Math.PI*(t/this.total)},calculateTotal:function(t){this.total=0,n.each(t,function(t){this.total+=t.value},this)},update:function(){this.calculateTotal(this.segments),n.each(this.activeElements,function(t){t.restore(["fillColor"])}),n.each(this.segments,function(t){t.save()}),this.render()},removeData:function(t){var e=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,n.each(this.segments,function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var e=t?t:1;this.clear(),n.each(this.segments,function(t,n){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},e),t.endAngle=t.startAngle+t.circumference,t.draw(),0===n&&(t.startAngle=1.5*Math.PI),n<this.segments.length-1&&(this.segments[n+1].startAngle=t.endAngle)},this)}}),e.types.Doughnut.extend({name:"Pie",defaults:n.merge(i,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,i={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Line",defaults:i,initialize:function(t){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),n.each(t.datasets,function(e){var i={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(i),n.each(e.data,function(n,r){i.points.push(new this.PointClass({value:n,label:t.labels[r],datasetLabel:e.label,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this),this.buildScale(t.labels),this.eachPoints(function(t,e){n.extend(t,{x:this.scale.calculateX(e),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachPoints(function(t){t.save()}),this.render()},eachPoints:function(t){n.each(this.datasets,function(e){n.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=[],i=n.getRelativePosition(t);return n.each(this.datasets,function(t){n.each(t.points,function(t){t.inRange(i.x,i.y)&&e.push(t)})},this),e},buildScale:function(t){var i=this,r=function(){var t=[];return i.eachPoints(function(e){t.push(e.value)}),t},a={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=n.calculateScaleRange(r(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,e)},xLabels:t,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(a,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new e.Scale(a)},addData:function(t,e){n.each(t,function(t,n){this.datasets[n].points.push(new this.PointClass({value:t,label:e,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[n].pointStrokeColor,fillColor:this.datasets[n].pointColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(t){t.points.shift()},this),this.update()},reflow:function(){var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var e=t||1;this.clear();var i=this.chart.ctx,r=function(t){return null!==t.value},a=function(t,e,i){return n.findNextWhere(e,r,i)||t},o=function(t,e,i){return n.findPreviousWhere(e,r,i)||t};this.scale.draw(e),n.each(this.datasets,function(t){var s=n.where(t.points,r);n.each(t.points,function(t,n){t.hasValue()&&t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(n)},e)},this),this.options.bezierCurve&&n.each(s,function(t,e){var i=e>0&&e<s.length-1?this.options.bezierCurveTension:0;t.controlPoints=n.splineCurve(o(t,s,e),t,a(t,s,e),i),t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint),t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this),i.lineWidth=this.options.datasetStrokeWidth,i.strokeStyle=t.strokeColor,i.beginPath(),n.each(s,function(t,e){if(0===e)i.moveTo(t.x,t.y);else if(this.options.bezierCurve){var n=o(t,s,e);i.bezierCurveTo(n.controlPoints.outer.x,n.controlPoints.outer.y,t.controlPoints.inner.x,t.controlPoints.inner.y,t.x,t.y)}else i.lineTo(t.x,t.y)},this),i.stroke(),this.options.datasetFill&&s.length>0&&(i.lineTo(s[s.length-1].x,this.scale.endPoint),i.lineTo(s[0].x,this.scale.endPoint),i.fillStyle=t.fillColor,i.closePath(),i.fill()),n.each(s,function(t){t.draw()})},this)}})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,i={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"PolarArea",defaults:i,initialize:function(t){this.segments=[],this.SegmentArc=e.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:t.length}),this.updateScaleRange(t),this.scale.update(),n.each(t,function(t,e){this.addData(t,e,!0)},this),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(t){t.restore(["fillColor"])}),n.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.render()},getSegmentsAtEvent:function(t){var e=[],i=n.getRelativePosition(t);return n.each(this.segments,function(t){t.inRange(i.x,i.y)&&e.push(t)},this),e},addData:function(t,e,n){var i=e||this.segments.length;this.segments.splice(i,0,new this.SegmentArc({fillColor:t.color,highlightColor:t.highlight||t.color,label:t.label,value:t.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(t.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),n||(this.reflow(),this.update())},removeData:function(t){var e=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},calculateTotal:function(t){this.total=0,n.each(t,function(t){this.total+=t.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var e=[];n.each(t,function(t){e.push(t.value)});var i=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(e,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,i,{size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),n.each(this.segments,function(t){t.save()}),this.render()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),n.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),n.each(this.segments,function(t){t.update({outerRadius:this.scale.calculateCenterOffset(t.value)})},this)},draw:function(t){var e=t||1;this.clear(),n.each(this.segments,function(t,n){t.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(t.value)},e),t.endAngle=t.startAngle+t.circumference,0===n&&(t.startAngle=1.5*Math.PI),n<this.segments.length-1&&(this.segments[n+1].startAngle=t.endAngle),t.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers;e.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(t){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(t),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),n.each(t.datasets,function(e){var i={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(i),n.each(e.data,function(n,r){var a;this.scale.animation||(a=this.scale.getPointPosition(r,this.scale.calculateCenterOffset(n))),i.points.push(new this.PointClass({value:n,label:t.labels[r],datasetLabel:e.label,x:this.options.animation?this.scale.xCenter:a.x,y:this.options.animation?this.scale.yCenter:a.y,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(t){n.each(this.datasets,function(e){n.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=n.getRelativePosition(t),i=n.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},e),r=2*Math.PI/this.scale.valuesCount,a=Math.round((i.angle-1.5*Math.PI)/r),o=[];return(a>=this.scale.valuesCount||0>a)&&(a=0),i.distance<=this.scale.drawingArea&&n.each(this.datasets,function(t){o.push(t.points[a])}),o},buildScale:function(t){this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:t.labels,valuesCount:t.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(t.datasets),this.scale.buildYLabels()},updateScaleRange:function(t){var e=function(){var e=[];return n.each(t,function(t){t.data?e=e.concat(t.data):n.each(t.points,function(t){e.push(t.value)})}),e}(),i=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(e,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,i)},addData:function(t,e){this.scale.valuesCount++,n.each(t,function(t,n){var i=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(t));this.datasets[n].points.push(new this.PointClass({value:t,label:e,x:i.x,y:i.y,strokeColor:this.datasets[n].pointStrokeColor,fillColor:this.datasets[n].pointColor}))},this),this.scale.labels.push(e),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),n.each(this.datasets,function(t){t.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(t){t.save()}),this.reflow(),this.render()},reflow:function(){n.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(t){var e=t||1,i=this.chart.ctx;this.clear(),this.scale.draw(),n.each(this.datasets,function(t){n.each(t.points,function(t,n){t.hasValue()&&t.transition(this.scale.getPointPosition(n,this.scale.calculateCenterOffset(t.value)),e)},this),i.lineWidth=this.options.datasetStrokeWidth,i.strokeStyle=t.strokeColor,i.beginPath(),n.each(t.points,function(t,e){0===e?i.moveTo(t.x,t.y):i.lineTo(t.x,t.y)},this),i.closePath(),i.stroke(),i.fillStyle=t.fillColor,i.fill(),n.each(t.points,function(t){t.hasValue()&&t.draw()})},this)}})}.call(this),function(t){var e,n,i="0.3.4",r="hasOwnProperty",a=/[\.\/]/,o="*",s=function(){},l=function(t,e){return t-e},u={n:{}},h=function(t,i){var r,a=n,o=Array.prototype.slice.call(arguments,2),s=h.listeners(t),u=0,c=[],f={},d=[],p=e;e=t,n=0;for(var g=0,v=s.length;g<v;g++)"zIndex"in s[g]&&(c.push(s[g].zIndex),s[g].zIndex<0&&(f[s[g].zIndex]=s[g]));for(c.sort(l);c[u]<0;)if(r=f[c[u++]],d.push(r.apply(i,o)),n)return n=a,d;for(g=0;g<v;g++)if(r=s[g],"zIndex"in r)if(r.zIndex==c[u]){if(d.push(r.apply(i,o)),n)break;do if(u++,r=f[c[u]],r&&d.push(r.apply(i,o)),n)break;while(r)}else f[r.zIndex]=r;else if(d.push(r.apply(i,o)),n)break;return n=a,e=p,d.length?d:null};h.listeners=function(t){var e,n,i,r,s,l,h,c,f=t.split(a),d=u,p=[d],g=[];for(r=0,s=f.length;r<s;r++){for(c=[],l=0,h=p.length;l<h;l++)for(d=p[l].n,n=[d[f[r]],d[o]],i=2;i--;)e=n[i],e&&(c.push(e),g=g.concat(e.f||[]));p=c}return g},h.on=function(t,e){for(var n=t.split(a),i=u,r=0,o=n.length;r<o;r++)i=i.n,!i[n[r]]&&(i[n[r]]={n:{}}),i=i[n[r]];for(i.f=i.f||[],r=0,o=i.f.length;r<o;r++)if(i.f[r]==e)return s;return i.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},h.stop=function(){n=1},h.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},h.off=h.unbind=function(t,e){var n,i,s,l,h,c,f,d=t.split(a),p=[u];for(l=0,h=d.length;l<h;l++)for(c=0;c<p.length;c+=s.length-2){if(s=[c,1],n=p[c].n,d[l]!=o)n[d[l]]&&s.push(n[d[l]]);else for(i in n)n[r](i)&&s.push(n[i]);p.splice.apply(p,s)}for(l=0,h=p.length;l<h;l++)for(n=p[l];n.n;){if(e){if(n.f){for(c=0,f=n.f.length;c<f;c++)if(n.f[c]==e){n.f.splice(c,1);break}!n.f.length&&delete n.f}for(i in n.n)if(n.n[r](i)&&n.n[i].f){var g=n.n[i].f;for(c=0,f=g.length;c<f;c++)if(g[c]==e){g.splice(c,1);break}!g.length&&delete n.n[i].f}}else{delete n.f;for(i in n.n)n.n[r](i)&&n.n[i].f&&delete n.n[i].f}n=n.n}},h.once=function(t,e){var n=function(){var i=e.apply(this,arguments);return h.unbind(t,n),i};return h.on(t,n)},h.version=i,h.toString=function(){return"You are running Eve "+i},"undefined"!=typeof module&&module.exports?module.exports=h:"undefined"!=typeof define?define("eve",[],function(){return h}):t.eve=h}(this),function(){function t(t){for(var e=0;e<ae.length;e++)ae[e].el.paper==t&&ae.splice(e--,1)}function e(t,e,n,r,o,s){n=Q(n);var l,u,h,c,f,d,p=t.ms,g={},v={},x={};if(r)for(_=0,w=ae.length;_<w;_++){var y=ae[_];if(y.el.id==e.id&&y.anim==t){y.percent!=n?(ae.splice(_,1),h=1):u=y,e.attr(y.totalOrigin);break}}else r=+v;for(var _=0,w=t.percents.length;_<w;_++){if(t.percents[_]==n||t.percents[_]>r*t.top){n=t.percents[_],f=t.percents[_-1]||0,p=p/t.top*(n-f),c=t.percents[_+1],l=t.anim[n];break}r&&e.attr(t.anim[t.percents[_]])}if(l){if(u)u.initstatus=r,u.start=new Date-u.ms*r;else{for(var k in l)if(l[M](k)&&(et[M](k)||e.paper.customAttributes[M](k)))switch(g[k]=e.attr(k),null==g[k]&&(g[k]=tt[k]),v[k]=l[k],et[k]){case Y:x[k]=(v[k]-g[k])/p;break;case"colour":g[k]=m.getRGB(g[k]);var S=m.getRGB(v[k]);x[k]={r:(S.r-g[k].r)/p,g:(S.g-g[k].g)/p,b:(S.b-g[k].b)/p};break;case"path":var T=zt(g[k],v[k]),C=T[1];for(g[k]=T[0],x[k]=[],_=0,w=g[k].length;_<w;_++){x[k][_]=[0];for(var L=1,E=g[k][_].length;L<E;L++)x[k][_][L]=(C[_][L]-g[k][_][L])/p}break;case"transform":var F=e._,z=Bt(F[k],v[k]);if(z)for(g[k]=z.from,v[k]=z.to,x[k]=[],x[k].real=!0,_=0,w=g[k].length;_<w;_++)for(x[k][_]=[g[k][_][0]],L=1,E=g[k][_].length;L<E;L++)x[k][_][L]=(v[k][_][L]-g[k][_][L])/p;else{var D=e.matrix||new a,I={_:{transform:F.transform},getBBox:function(){return e.getBBox(1)}};g[k]=[D.a,D.b,D.c,D.d,D.e,D.f],Nt(I,v[k]),v[k]=I._.transform,x[k]=[(I.matrix.a-D.a)/p,(I.matrix.b-D.b)/p,(I.matrix.c-D.c)/p,(I.matrix.d-D.d)/p,(I.matrix.e-D.e)/p,(I.matrix.f-D.f)/p]}break;case"csv":var N=R(l[k])[P](b),O=R(g[k])[P](b);if("clip-rect"==k)for(g[k]=O,x[k]=[],_=O.length;_--;)x[k][_]=(N[_]-g[k][_])/p;v[k]=N;break;default:for(N=[][A](l[k]),O=[][A](g[k]),x[k]=[],_=e.paper.customAttributes[k].length;_--;)x[k][_]=((N[_]||0)-(O[_]||0))/p}var B=l.easing,H=m.easing_formulas[B];if(!H)if(H=R(B).match(Z),H&&5==H.length){var X=H;H=function(t){return i(t,+X[1],+X[2],+X[3],+X[4],p)}}else H=ct;if(d=l.start||t.start||+new Date,y={anim:t,percent:n,timestamp:d,start:d+(t.del||0),status:0,initstatus:r||0,stop:!1,ms:p,easing:H,from:g,diff:x,to:v,el:e,callback:l.callback,prev:f,next:c,repeat:s||t.times,origin:e.attr(),totalOrigin:o},ae.push(y),r&&!u&&!h&&(y.stop=!0,y.start=new Date-p*r,1==ae.length))return se();h&&(y.start=new Date-y.ms*r),1==ae.length&&oe(se)}eve("raphael.anim.start."+e.id,e,t)}}function n(t,e){var n=[],i={};if(this.ms=e,this.times=1,t){for(var r in t)t[M](r)&&(i[Q(r)]=t[r],n.push(Q(r)));n.sort(ut)}this.anim=i,this.top=n[n.length-1],this.percents=n}function i(t,e,n,i,r,a){function o(t,e){var n,i,r,a,o,s;for(r=t,s=0;s<8;s++){if(a=l(r)-t,H(a)<e)return r;if(o=(3*c*r+2*h)*r+u,H(o)<1e-6)break;r-=a/o}if(n=0,i=1,r=t,r<n)return n;if(r>i)return i;for(;n<i;){if(a=l(r),H(a-t)<e)return r;t>a?n=r:i=r,r=(i-n)/2+n}return r}function s(t,e){var n=o(t,e);return((p*n+d)*n+f)*n}function l(t){return((c*t+h)*t+u)*t}var u=3*e,h=3*(i-e)-u,c=1-u-h,f=3*n,d=3*(r-n)-f,p=1-f-d;return s(t,1/(200*a))}function r(){return this.x+F+this.y+F+this.width+" \xd7 "+this.height}function a(t,e,n,i,r,a){null!=t?(this.a=+t,this.b=+e,this.c=+n,this.d=+i,this.e=+r,this.f=+a):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function o(t,e,n){t=m._path2curve(t),e=m._path2curve(e);for(var i,r,a,o,l,u,h,c,f,d,p=n?0:[],g=0,v=t.length;g<v;g++){var x=t[g];if("M"==x[0])i=l=x[1],r=u=x[2];else{"C"==x[0]?(f=[i,r].concat(x.slice(1)),i=f[6],r=f[7]):(f=[i,r,i,r,l,u,l,u],i=l,r=u);for(var y=0,b=e.length;y<b;y++){var _=e[y];if("M"==_[0])a=h=_[1],o=c=_[2];else{"C"==_[0]?(d=[a,o].concat(_.slice(1)),a=d[6],o=d[7]):(d=[a,o,a,o,h,c,h,c],a=h,o=c);var w=s(f,d,n);if(n)p+=w;else{for(var M=0,k=w.length;M<k;M++)w[M].segment1=g,w[M].segment2=y,w[M].bez1=f,w[M].bez2=d;p=p.concat(w)}}}}}return p}function s(t,e,n){var i=m.bezierBBox(t),r=m.bezierBBox(e);if(!m.isBBoxIntersect(i,r))return n?0:[];for(var a=h.apply(0,t),o=h.apply(0,e),s=~~(a/5),u=~~(o/5),c=[],f=[],d={},p=n?0:[],g=0;g<s+1;g++){var v=m.findDotsAtSegment.apply(m,t.concat(g/s));c.push({x:v.x,y:v.y,t:g/s})}for(g=0;g<u+1;g++)v=m.findDotsAtSegment.apply(m,e.concat(g/u)),f.push({x:v.x,y:v.y,t:g/u});for(g=0;g<s;g++)for(var x=0;x<u;x++){var y=c[g],b=c[g+1],_=f[x],w=f[x+1],M=H(b.x-y.x)<.001?"y":"x",k=H(w.x-_.x)<.001?"y":"x",S=l(y.x,y.y,b.x,b.y,_.x,_.y,w.x,w.y);if(S){if(d[S.x.toFixed(4)]==S.y.toFixed(4))continue;d[S.x.toFixed(4)]=S.y.toFixed(4);var T=y.t+H((S[M]-y[M])/(b[M]-y[M]))*(b.t-y.t),C=_.t+H((S[k]-_[k])/(w[k]-_[k]))*(w.t-_.t);T>=0&&T<=1&&C>=0&&C<=1&&(n?p++:p.push({x:S.x,y:S.y,t1:T,t2:C}))}}return p}function l(t,e,n,i,r,a,o,s){if(!(O(t,n)<B(r,o)||B(t,n)>O(r,o)||O(e,i)<B(a,s)||B(e,i)>O(a,s))){var l=(t*i-e*n)*(r-o)-(t-n)*(r*s-a*o),u=(t*i-e*n)*(a-s)-(e-i)*(r*s-a*o),h=(t-n)*(a-s)-(e-i)*(r-o);if(!h)return;var c=l/h,f=u/h,d=+c.toFixed(2),p=+f.toFixed(2);if(d<+B(t,n).toFixed(2)||d>+O(t,n).toFixed(2)||d<+B(r,o).toFixed(2)||d>+O(r,o).toFixed(2)||p<+B(e,i).toFixed(2)||p>+O(e,i).toFixed(2)||p<+B(a,s).toFixed(2)||p>+O(a,s).toFixed(2))return;return{x:c,y:f}}}function u(t,e,n,i,r,a,o,s,l){if(!(l<0||h(t,e,n,i,r,a,o,s)<l)){var u,c=1,f=c/2,d=c-f,p=.01;for(u=h(t,e,n,i,r,a,o,s,d);H(u-l)>p;)f/=2,d+=(u<l?1:-1)*f,u=h(t,e,n,i,r,a,o,s,d);return d}}function h(t,e,n,i,r,a,o,s,l){null==l&&(l=1),l=l>1?1:l<0?0:l;for(var u=l/2,h=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,g=0;g<h;g++){var v=u*f[g]+u,m=c(v,t,n,r,o),x=c(v,e,i,a,s),y=m*m+x*x;p+=d[g]*N.sqrt(y)}return u*p}function c(t,e,n,i,r){var a=-3*e+9*n-9*i+3*r,o=t*a+6*e-12*n+6*i;return t*o-3*e+3*n}function f(t,e){for(var n=[],i=0,r=t.length;r-2*!e>i;i+=2){var a=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?r-4==i?a[3]={x:+t[0],y:+t[1]}:r-2==i&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[r-2],y:+t[r-1]}:r-4==i?a[3]=a[2]:i||(a[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n}function d(){return this.hex}function p(t,e,n){function i(){var r=Array.prototype.slice.call(arguments,0),a=r.join("\u2400"),o=i.cache=i.cache||{},s=i.count=i.count||[];return o[M](a)?(g(s,a),n?n(o[a]):o[a]):(s.length>=1e3&&delete o[s.shift()],s.push(a),o[a]=t[C](e,r),n?n(o[a]):o[a])}return i}function g(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return t.push(t.splice(n,1)[0])}function v(t){if(Object(t)!==t)return t;var e=new t.constructor;for(var n in t)t[M](n)&&(e[n]=v(t[n]));return e}function m(t){if(m.is(t,"function"))return x?t():eve.on("raphael.DOMload",t);if(m.is(t,q))return m._engine.create[C](m,t.splice(0,3+m.is(t[0],Y))).add(t);var e=Array.prototype.slice.call(arguments,0);if(m.is(e[e.length-1],"function")){var n=e.pop();return x?n.call(m._engine.create[C](m,e)):eve.on("raphael.DOMload",function(){n.call(m._engine.create[C](m,e))})}return m._engine.create[C](m,arguments)}m.version="2.1.0",m.eve=eve;var x,y,b=/[, ]+/,_={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},w=/\{(\d+)\}/g,M="hasOwnProperty",k={doc:document,win:window},S={was:Object.prototype[M].call(k.win,"Raphael"),is:k.win.Raphael},T=function(){this.ca=this.customAttributes={}},C="apply",A="concat",L="createTouch"in k.doc,E="",F=" ",R=String,P="split",z="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[P](F),D={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},I=R.prototype.toLowerCase,N=Math,O=N.max,B=N.min,H=N.abs,X=N.pow,W=N.PI,Y="number",j="string",q="array",V=Object.prototype.toString,G=(m._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),U={NaN:1,Infinity:1,"-Infinity":1},Z=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,$=N.round,Q=parseFloat,J=parseInt,K=R.prototype.toUpperCase,tt=m._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},et=m._availableAnimAttrs={blur:Y,"clip-rect":"csv",cx:Y,cy:Y,fill:"colour","fill-opacity":Y,"font-size":Y,height:Y,opacity:Y,path:"path",r:Y,rx:Y,ry:Y,stroke:"colour","stroke-opacity":Y,"stroke-width":Y,transform:"transform",width:Y,x:Y,y:Y},nt=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,it={hs:1,rg:1},rt=/,?([achlmqrstvxz]),?/gi,at=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ot=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,st=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,lt=(m._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ut=function(t,e){return Q(t)-Q(e)},ht=function(){},ct=function(t){return t},ft=m._rectPath=function(t,e,n,i,r){return r?[["M",t+r,e],["l",n-2*r,0],["a",r,r,0,0,1,r,r],["l",0,i-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-n,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-i],["a",r,r,0,0,1,r,-r],["z"]]:[["M",t,e],["l",n,0],["l",0,i],["l",-n,0],["z"]]},dt=function(t,e,n,i){return null==i&&(i=n),[["M",t,e],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]]},pt=m._getPath={
path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return dt(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return dt(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return ft(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return ft(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return ft(e.x,e.y,e.width,e.height)}},gt=m.mapPath=function(t,e){if(!e)return t;var n,i,r,a,o,s,l;for(t=zt(t),r=0,o=t.length;r<o;r++)for(l=t[r],a=1,s=l.length;a<s;a+=2)n=e.x(l[a],l[a+1]),i=e.y(l[a],l[a+1]),l[a]=n,l[a+1]=i;return t};if(m._g=k,m.type=k.win.SVGAngle||k.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==m.type){var vt,mt=k.doc.createElement("div");if(mt.innerHTML='<v:shape adj="1"/>',vt=mt.firstChild,vt.style.behavior="url(#default#VML)",!vt||"object"!=typeof vt.adj)return m.type=E;mt=null}m.svg=!(m.vml="VML"==m.type),m._Paper=T,m.fn=y=T.prototype=m.prototype,m._id=0,m._oid=0,m.is=function(t,e){return e=I.call(e),"finite"==e?!U[M](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||V.call(t).slice(8,-1).toLowerCase()==e},m.angle=function(t,e,n,i,r,a){if(null==r){var o=t-n,s=e-i;return o||s?(180+180*N.atan2(-s,-o)/W+360)%360:0}return m.angle(t,e,r,a)-m.angle(n,i,r,a)},m.rad=function(t){return t%360*W/180},m.deg=function(t){return 180*t/W%360},m.snapTo=function(t,e,n){if(n=m.is(n,"finite")?n:10,m.is(t,q)){for(var i=t.length;i--;)if(H(t[i]-e)<=n)return t[i]}else{t=+t;var r=e%t;if(r<n)return e-r;if(r>t-n)return e-r+t}return e};m.createUUID=function(t,e){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,function(t){var e=16*N.random()|0,n="x"==t?e:3&e|8;return n.toString(16)});m.setWindow=function(t){eve("raphael.setWindow",m,k.win,t),k.win=t,k.doc=k.win.document,m._engine.initWin&&m._engine.initWin(k.win)};var xt=function(t){if(m.vml){var e,n=/^\s+|\s+$/g;try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),e=i.body}catch(t){e=createPopup().document.body}var r=e.createTextRange();xt=p(function(t){try{e.style.color=R(t).replace(n,E);var i=r.queryCommandValue("ForeColor");return i=(255&i)<<16|65280&i|(16711680&i)>>>16,"#"+("000000"+i.toString(16)).slice(-6)}catch(t){return"none"}})}else{var a=k.doc.createElement("i");a.title="Rapha\xebl Colour Picker",a.style.display="none",k.doc.body.appendChild(a),xt=p(function(t){return a.style.color=t,k.doc.defaultView.getComputedStyle(a,E).getPropertyValue("color")})}return xt(t)},yt=function(){return"hsb("+[this.h,this.s,this.b]+")"},bt=function(){return"hsl("+[this.h,this.s,this.l]+")"},_t=function(){return this.hex},wt=function(t,e,n){if(null==e&&m.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(n=t.b,e=t.g,t=t.r),null==e&&m.is(t,j)){var i=m.getRGB(t);t=i.r,e=i.g,n=i.b}return(t>1||e>1||n>1)&&(t/=255,e/=255,n/=255),[t,e,n]},Mt=function(t,e,n,i){t*=255,e*=255,n*=255;var r={r:t,g:e,b:n,hex:m.rgb(t,e,n),toString:_t};return m.is(i,"finite")&&(r.opacity=i),r};m.color=function(t){var e;return m.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=m.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):m.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=m.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):(m.is(t,"string")&&(t=m.getRGB(t)),m.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(e=m.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=m.rgb2hsb(t),t.v=e.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=_t,t},m.hsb2rgb=function(t,e,n,i){this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(n=t.b,e=t.s,t=t.h,i=t.o),t*=360;var r,a,o,s,l;return t=t%360/60,l=n*e,s=l*(1-H(t%2-1)),r=a=o=n-l,t=~~t,r+=[l,s,0,0,s,l][t],a+=[s,l,l,s,0,0][t],o+=[0,0,s,l,l,s][t],Mt(r,a,o,i)},m.hsl2rgb=function(t,e,n,i){this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(n=t.l,e=t.s,t=t.h),(t>1||e>1||n>1)&&(t/=360,e/=100,n/=100),t*=360;var r,a,o,s,l;return t=t%360/60,l=2*e*(n<.5?n:1-n),s=l*(1-H(t%2-1)),r=a=o=n-l/2,t=~~t,r+=[l,s,0,0,s,l][t],a+=[s,l,l,s,0,0][t],o+=[0,0,s,l,l,s][t],Mt(r,a,o,i)},m.rgb2hsb=function(t,e,n){n=wt(t,e,n),t=n[0],e=n[1],n=n[2];var i,r,a,o;return a=O(t,e,n),o=a-B(t,e,n),i=0==o?null:a==t?(e-n)/o:a==e?(n-t)/o+2:(t-e)/o+4,i=(i+360)%6*60/360,r=0==o?0:o/a,{h:i,s:r,b:a,toString:yt}},m.rgb2hsl=function(t,e,n){n=wt(t,e,n),t=n[0],e=n[1],n=n[2];var i,r,a,o,s,l;return o=O(t,e,n),s=B(t,e,n),l=o-s,i=0==l?null:o==t?(e-n)/l:o==e?(n-t)/l+2:(t-e)/l+4,i=(i+360)%6*60/360,a=(o+s)/2,r=0==l?0:a<.5?l/(2*a):l/(2-2*a),{h:i,s:r,l:a,toString:bt}},m._path2string=function(){return this.join(",").replace(rt,"$1")};m._preload=function(t,e){var n=k.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){e.call(this),this.onload=null,k.doc.body.removeChild(this)},n.onerror=function(){k.doc.body.removeChild(this)},k.doc.body.appendChild(n),n.src=t};m.getRGB=p(function(t){if(!t||(t=R(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:d};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:d};!it[M](t.toLowerCase().substring(0,2))&&"#"!=t.charAt()&&(t=xt(t));var e,n,i,r,a,o,s=t.match(G);return s?(s[2]&&(i=J(s[2].substring(5),16),n=J(s[2].substring(3,5),16),e=J(s[2].substring(1,3),16)),s[3]&&(i=J((a=s[3].charAt(3))+a,16),n=J((a=s[3].charAt(2))+a,16),e=J((a=s[3].charAt(1))+a,16)),s[4]&&(o=s[4][P](nt),e=Q(o[0]),"%"==o[0].slice(-1)&&(e*=2.55),n=Q(o[1]),"%"==o[1].slice(-1)&&(n*=2.55),i=Q(o[2]),"%"==o[2].slice(-1)&&(i*=2.55),"rgba"==s[1].toLowerCase().slice(0,4)&&(r=Q(o[3])),o[3]&&"%"==o[3].slice(-1)&&(r/=100)),s[5]?(o=s[5][P](nt),e=Q(o[0]),"%"==o[0].slice(-1)&&(e*=2.55),n=Q(o[1]),"%"==o[1].slice(-1)&&(n*=2.55),i=Q(o[2]),"%"==o[2].slice(-1)&&(i*=2.55),("deg"==o[0].slice(-3)||"\xb0"==o[0].slice(-1))&&(e/=360),"hsba"==s[1].toLowerCase().slice(0,4)&&(r=Q(o[3])),o[3]&&"%"==o[3].slice(-1)&&(r/=100),m.hsb2rgb(e,n,i,r)):s[6]?(o=s[6][P](nt),e=Q(o[0]),"%"==o[0].slice(-1)&&(e*=2.55),n=Q(o[1]),"%"==o[1].slice(-1)&&(n*=2.55),i=Q(o[2]),"%"==o[2].slice(-1)&&(i*=2.55),("deg"==o[0].slice(-3)||"\xb0"==o[0].slice(-1))&&(e/=360),"hsla"==s[1].toLowerCase().slice(0,4)&&(r=Q(o[3])),o[3]&&"%"==o[3].slice(-1)&&(r/=100),m.hsl2rgb(e,n,i,r)):(s={r:e,g:n,b:i,toString:d},s.hex="#"+(16777216|i|n<<8|e<<16).toString(16).slice(1),m.is(r,"finite")&&(s.opacity=r),s)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:d}},m),m.hsb=p(function(t,e,n){return m.hsb2rgb(t,e,n).hex}),m.hsl=p(function(t,e,n){return m.hsl2rgb(t,e,n).hex}),m.rgb=p(function(t,e,n){return"#"+(16777216|n|e<<8|t<<16).toString(16).slice(1)}),m.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},n=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),n.hex},m.getColor.reset=function(){delete this.start},m.parsePathString=function(t){if(!t)return null;var e=kt(t);if(e.arr)return Tt(e.arr);var n={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[];return m.is(t,q)&&m.is(t[0],q)&&(i=Tt(t)),i.length||R(t).replace(at,function(t,e,r){var a=[],o=e.toLowerCase();if(r.replace(st,function(t,e){e&&a.push(+e)}),"m"==o&&a.length>2&&(i.push([e][A](a.splice(0,2))),o="l",e="m"==e?"l":"L"),"r"==o)i.push([e][A](a));else for(;a.length>=n[o]&&(i.push([e][A](a.splice(0,n[o]))),n[o]););}),i.toString=m._path2string,e.arr=Tt(i),i},m.parseTransformString=p(function(t){if(!t)return null;var e=[];return m.is(t,q)&&m.is(t[0],q)&&(e=Tt(t)),e.length||R(t).replace(ot,function(t,n,i){var r=[];I.call(n);i.replace(st,function(t,e){e&&r.push(+e)}),e.push([n][A](r))}),e.toString=m._path2string,e});var kt=function(t){var e=kt.ps=kt.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var n in e)e[M](n)&&n!=t&&(e[n].sleep--,!e[n].sleep&&delete e[n])}),e[t]};m.findDotsAtSegment=function(t,e,n,i,r,a,o,s,l){var u=1-l,h=X(u,3),c=X(u,2),f=l*l,d=f*l,p=h*t+3*c*l*n+3*u*l*l*r+d*o,g=h*e+3*c*l*i+3*u*l*l*a+d*s,v=t+2*l*(n-t)+f*(r-2*n+t),m=e+2*l*(i-e)+f*(a-2*i+e),x=n+2*l*(r-n)+f*(o-2*r+n),y=i+2*l*(a-i)+f*(s-2*a+i),b=u*t+l*n,_=u*e+l*i,w=u*r+l*o,M=u*a+l*s,k=90-180*N.atan2(v-x,m-y)/W;return(v>x||m<y)&&(k+=180),{x:p,y:g,m:{x:v,y:m},n:{x:x,y:y},start:{x:b,y:_},end:{x:w,y:M},alpha:k}},m.bezierBBox=function(t,e,n,i,r,a,o,s){m.is(t,"array")||(t=[t,e,n,i,r,a,o,s]);var l=Pt.apply(null,t);return{x:l.min.x,y:l.min.y,x2:l.max.x,y2:l.max.y,width:l.max.x-l.min.x,height:l.max.y-l.min.y}},m.isPointInsideBBox=function(t,e,n){return e>=t.x&&e<=t.x2&&n>=t.y&&n<=t.y2},m.isBBoxIntersect=function(t,e){var n=m.isPointInsideBBox;return n(e,t.x,t.y)||n(e,t.x2,t.y)||n(e,t.x,t.y2)||n(e,t.x2,t.y2)||n(t,e.x,e.y)||n(t,e.x2,e.y)||n(t,e.x,e.y2)||n(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},m.pathIntersection=function(t,e){return o(t,e)},m.pathIntersectionNumber=function(t,e){return o(t,e,1)},m.isPointInsidePath=function(t,e,n){var i=m.pathBBox(t);return m.isPointInsideBBox(i,e,n)&&o(t,[["M",e,n],["H",i.x2+10]],1)%2==1},m._removedFactory=function(t){return function(){eve("raphael.log",null,"Rapha\xebl: you are calling to method \u201c"+t+"\u201d of removed object",t)}};var St=m.pathBBox=function(t){var e=kt(t);if(e.bbox)return e.bbox;if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};t=zt(t);for(var n,i=0,r=0,a=[],o=[],s=0,l=t.length;s<l;s++)if(n=t[s],"M"==n[0])i=n[1],r=n[2],a.push(i),o.push(r);else{var u=Pt(i,r,n[1],n[2],n[3],n[4],n[5],n[6]);a=a[A](u.min.x,u.max.x),o=o[A](u.min.y,u.max.y),i=n[5],r=n[6]}var h=B[C](0,a),c=B[C](0,o),f=O[C](0,a),d=O[C](0,o),p={x:h,y:c,x2:f,y2:d,width:f-h,height:d-c};return e.bbox=v(p),p},Tt=function(t){var e=v(t);return e.toString=m._path2string,e},Ct=m._pathToRelative=function(t){var e=kt(t);if(e.rel)return Tt(e.rel);m.is(t,q)&&m.is(t&&t[0],q)||(t=m.parsePathString(t));var n=[],i=0,r=0,a=0,o=0,s=0;"M"==t[0][0]&&(i=t[0][1],r=t[0][2],a=i,o=r,s++,n.push(["M",i,r]));for(var l=s,u=t.length;l<u;l++){var h=n[l]=[],c=t[l];if(c[0]!=I.call(c[0]))switch(h[0]=I.call(c[0]),h[0]){case"a":h[1]=c[1],h[2]=c[2],h[3]=c[3],h[4]=c[4],h[5]=c[5],h[6]=+(c[6]-i).toFixed(3),h[7]=+(c[7]-r).toFixed(3);break;case"v":h[1]=+(c[1]-r).toFixed(3);break;case"m":a=c[1],o=c[2];default:for(var f=1,d=c.length;f<d;f++)h[f]=+(c[f]-(f%2?i:r)).toFixed(3)}else{h=n[l]=[],"m"==c[0]&&(a=c[1]+i,o=c[2]+r);for(var p=0,g=c.length;p<g;p++)n[l][p]=c[p]}var v=n[l].length;switch(n[l][0]){case"z":i=a,r=o;break;case"h":i+=+n[l][v-1];break;case"v":r+=+n[l][v-1];break;default:i+=+n[l][v-2],r+=+n[l][v-1]}}return n.toString=m._path2string,e.rel=Tt(n),n},At=m._pathToAbsolute=function(t){var e=kt(t);if(e.abs)return Tt(e.abs);if(m.is(t,q)&&m.is(t&&t[0],q)||(t=m.parsePathString(t)),!t||!t.length)return[["M",0,0]];var n=[],i=0,r=0,a=0,o=0,s=0;"M"==t[0][0]&&(i=+t[0][1],r=+t[0][2],a=i,o=r,s++,n[0]=["M",i,r]);for(var l,u,h=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),c=s,d=t.length;c<d;c++){if(n.push(l=[]),u=t[c],u[0]!=K.call(u[0]))switch(l[0]=K.call(u[0]),l[0]){case"A":l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=+(u[6]+i),l[7]=+(u[7]+r);break;case"V":l[1]=+u[1]+r;break;case"H":l[1]=+u[1]+i;break;case"R":for(var p=[i,r][A](u.slice(1)),g=2,v=p.length;g<v;g++)p[g]=+p[g]+i,p[++g]=+p[g]+r;n.pop(),n=n[A](f(p,h));break;case"M":a=+u[1]+i,o=+u[2]+r;default:for(g=1,v=u.length;g<v;g++)l[g]=+u[g]+(g%2?i:r)}else if("R"==u[0])p=[i,r][A](u.slice(1)),n.pop(),n=n[A](f(p,h)),l=["R"][A](u.slice(-2));else for(var x=0,y=u.length;x<y;x++)l[x]=u[x];switch(l[0]){case"Z":i=a,r=o;break;case"H":i=l[1];break;case"V":r=l[1];break;case"M":a=l[l.length-2],o=l[l.length-1];default:i=l[l.length-2],r=l[l.length-1]}}return n.toString=m._path2string,e.abs=Tt(n),n},Lt=function(t,e,n,i){return[t,e,n,i,n,i]},Et=function(t,e,n,i,r,a){var o=1/3,s=2/3;return[o*t+s*n,o*e+s*i,o*r+s*n,o*a+s*i,r,a]},Ft=function(t,e,n,i,r,a,o,s,l,u){var h,c=120*W/180,f=W/180*(+r||0),d=[],g=p(function(t,e,n){var i=t*N.cos(n)-e*N.sin(n),r=t*N.sin(n)+e*N.cos(n);return{x:i,y:r}});if(u)k=u[0],S=u[1],w=u[2],M=u[3];else{h=g(t,e,-f),t=h.x,e=h.y,h=g(s,l,-f),s=h.x,l=h.y;var v=(N.cos(W/180*r),N.sin(W/180*r),(t-s)/2),m=(e-l)/2,x=v*v/(n*n)+m*m/(i*i);x>1&&(x=N.sqrt(x),n=x*n,i=x*i);var y=n*n,b=i*i,_=(a==o?-1:1)*N.sqrt(H((y*b-y*m*m-b*v*v)/(y*m*m+b*v*v))),w=_*n*m/i+(t+s)/2,M=_*-i*v/n+(e+l)/2,k=N.asin(((e-M)/i).toFixed(9)),S=N.asin(((l-M)/i).toFixed(9));k=t<w?W-k:k,S=s<w?W-S:S,k<0&&(k=2*W+k),S<0&&(S=2*W+S),o&&k>S&&(k-=2*W),!o&&S>k&&(S-=2*W)}var T=S-k;if(H(T)>c){var C=S,L=s,E=l;S=k+c*(o&&S>k?1:-1),s=w+n*N.cos(S),l=M+i*N.sin(S),d=Ft(s,l,n,i,r,0,o,L,E,[S,C,w,M])}T=S-k;var F=N.cos(k),R=N.sin(k),z=N.cos(S),D=N.sin(S),I=N.tan(T/4),O=4/3*n*I,B=4/3*i*I,X=[t,e],Y=[t+O*R,e-B*F],j=[s+O*D,l-B*z],q=[s,l];if(Y[0]=2*X[0]-Y[0],Y[1]=2*X[1]-Y[1],u)return[Y,j,q][A](d);d=[Y,j,q][A](d).join()[P](",");for(var V=[],G=0,U=d.length;G<U;G++)V[G]=G%2?g(d[G-1],d[G],f).y:g(d[G],d[G+1],f).x;return V},Rt=function(t,e,n,i,r,a,o,s,l){var u=1-l;return{x:X(u,3)*t+3*X(u,2)*l*n+3*u*l*l*r+X(l,3)*o,y:X(u,3)*e+3*X(u,2)*l*i+3*u*l*l*a+X(l,3)*s}},Pt=p(function(t,e,n,i,r,a,o,s){var l,u=r-2*n+t-(o-2*r+n),h=2*(n-t)-2*(r-n),c=t-n,f=(-h+N.sqrt(h*h-4*u*c))/2/u,d=(-h-N.sqrt(h*h-4*u*c))/2/u,p=[e,s],g=[t,o];return H(f)>"1e12"&&(f=.5),H(d)>"1e12"&&(d=.5),f>0&&f<1&&(l=Rt(t,e,n,i,r,a,o,s,f),g.push(l.x),p.push(l.y)),d>0&&d<1&&(l=Rt(t,e,n,i,r,a,o,s,d),g.push(l.x),p.push(l.y)),u=a-2*i+e-(s-2*a+i),h=2*(i-e)-2*(a-i),c=e-i,f=(-h+N.sqrt(h*h-4*u*c))/2/u,d=(-h-N.sqrt(h*h-4*u*c))/2/u,H(f)>"1e12"&&(f=.5),H(d)>"1e12"&&(d=.5),f>0&&f<1&&(l=Rt(t,e,n,i,r,a,o,s,f),g.push(l.x),p.push(l.y)),d>0&&d<1&&(l=Rt(t,e,n,i,r,a,o,s,d),g.push(l.x),p.push(l.y)),{min:{x:B[C](0,g),y:B[C](0,p)},max:{x:O[C](0,g),y:O[C](0,p)}}}),zt=m._path2curve=p(function(t,e){var n=!e&&kt(t);if(!e&&n.curve)return Tt(n.curve);for(var i=At(t),r=e&&At(e),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=(function(t,e){var n,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][A](Ft[C](0,[e.x,e.y][A](t.slice(1))));break;case"S":n=e.x+(e.x-(e.bx||e.x)),i=e.y+(e.y-(e.by||e.y)),t=["C",n,i][A](t.slice(1));break;case"T":e.qx=e.x+(e.x-(e.qx||e.x)),e.qy=e.y+(e.y-(e.qy||e.y)),t=["C"][A](Et(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][A](Et(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][A](Lt(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][A](Lt(e.x,e.y,t[1],e.y));break;case"V":t=["C"][A](Lt(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][A](Lt(e.x,e.y,e.X,e.Y))}return t}),l=function(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)t.splice(e++,0,["C"][A](n.splice(0,6)));t.splice(e,1),c=O(i.length,r&&r.length||0)}},u=function(t,e,n,a,o){t&&e&&"M"==t[o][0]&&"M"!=e[o][0]&&(e.splice(o,0,["M",a.x,a.y]),n.bx=0,n.by=0,n.x=t[o][1],n.y=t[o][2],c=O(i.length,r&&r.length||0))},h=0,c=O(i.length,r&&r.length||0);h<c;h++){i[h]=s(i[h],a),l(i,h),r&&(r[h]=s(r[h],o)),r&&l(r,h),u(i,r,a,o,h),u(r,i,o,a,h);var f=i[h],d=r&&r[h],p=f.length,g=r&&d.length;a.x=f[p-2],a.y=f[p-1],a.bx=Q(f[p-4])||a.x,a.by=Q(f[p-3])||a.y,o.bx=r&&(Q(d[g-4])||o.x),o.by=r&&(Q(d[g-3])||o.y),o.x=r&&d[g-2],o.y=r&&d[g-1]}return r||(n.curve=Tt(i)),r?[i,r]:i},null,Tt),Dt=(m._parseDots=p(function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r={},a=t[n].match(/^([^:]*):?([\d\.]*)/);if(r.color=m.getRGB(a[1]),r.color.error)return null;r.color=r.color.hex,a[2]&&(r.offset=a[2]+"%"),e.push(r)}for(n=1,i=e.length-1;n<i;n++)if(!e[n].offset){for(var o=Q(e[n-1].offset||0),s=0,l=n+1;l<i;l++)if(e[l].offset){s=e[l].offset;break}s||(s=100,l=i),s=Q(s);for(var u=(s-o)/(l-n+1);n<l;n++)o+=u,e[n].offset=o+"%"}return e}),m._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),It=(m._tofront=function(t,e){e.top!==t&&(Dt(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},m._toback=function(t,e){e.bottom!==t&&(Dt(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},m._insertafter=function(t,e,n){Dt(t,n),e==n.top&&(n.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},m._insertbefore=function(t,e,n){Dt(t,n),e==n.bottom&&(n.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},m.toMatrix=function(t,e){var n=St(t),i={_:{transform:E},getBBox:function(){return n}};return Nt(i,e),i.matrix}),Nt=(m.transformPath=function(t,e){return gt(t,It(t,e))},m._extractTransform=function(t,e){if(null==e)return t._.transform;e=R(e).replace(/\.{3}|\u2026/g,t._.transform||E);var n=m.parseTransformString(e),i=0,r=0,o=0,s=1,l=1,u=t._,h=new a;if(u.transform=n||[],n)for(var c=0,f=n.length;c<f;c++){var d,p,g,v,x,y=n[c],b=y.length,_=R(y[0]).toLowerCase(),w=y[0]!=_,M=w?h.invert():0;"t"==_&&3==b?w?(d=M.x(0,0),p=M.y(0,0),g=M.x(y[1],y[2]),v=M.y(y[1],y[2]),h.translate(g-d,v-p)):h.translate(y[1],y[2]):"r"==_?2==b?(x=x||t.getBBox(1),h.rotate(y[1],x.x+x.width/2,x.y+x.height/2),i+=y[1]):4==b&&(w?(g=M.x(y[2],y[3]),v=M.y(y[2],y[3]),h.rotate(y[1],g,v)):h.rotate(y[1],y[2],y[3]),i+=y[1]):"s"==_?2==b||3==b?(x=x||t.getBBox(1),h.scale(y[1],y[b-1],x.x+x.width/2,x.y+x.height/2),s*=y[1],l*=y[b-1]):5==b&&(w?(g=M.x(y[3],y[4]),v=M.y(y[3],y[4]),h.scale(y[1],y[2],g,v)):h.scale(y[1],y[2],y[3],y[4]),s*=y[1],l*=y[2]):"m"==_&&7==b&&h.add(y[1],y[2],y[3],y[4],y[5],y[6]),u.dirtyT=1,t.matrix=h}t.matrix=h,u.sx=s,u.sy=l,u.deg=i,u.dx=r=h.e,u.dy=o=h.f,1==s&&1==l&&!i&&u.bbox?(u.bbox.x+=+r,u.bbox.y+=+o):u.dirtyT=1}),Ot=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},Bt=m._equaliseTransform=function(t,e){e=R(e).replace(/\.{3}|\u2026/g,t),t=m.parseTransformString(t)||[],e=m.parseTransformString(e)||[];for(var n,i,r,a,o=O(t.length,e.length),s=[],l=[],u=0;u<o;u++){if(r=t[u]||Ot(e[u]),a=e[u]||Ot(r),r[0]!=a[0]||"r"==r[0].toLowerCase()&&(r[2]!=a[2]||r[3]!=a[3])||"s"==r[0].toLowerCase()&&(r[3]!=a[3]||r[4]!=a[4]))return;for(s[u]=[],l[u]=[],n=0,i=O(r.length,a.length);n<i;n++)n in r&&(s[u][n]=r[n]),n in a&&(l[u][n]=a[n])}return{from:s,to:l}};m._getContainer=function(t,e,n,i){var r;if(r=null!=i||m.is(t,"object")?t:k.doc.getElementById(t),null!=r)return r.tagName?null==e?{container:r,width:r.style.pixelWidth||r.offsetWidth,height:r.style.pixelHeight||r.offsetHeight}:{container:r,width:e,height:n}:{container:1,x:t,y:e,width:n,height:i}},m.pathToRelative=Ct,m._engine={},m.path2curve=zt,m.matrix=function(t,e,n,i,r,o){return new a(t,e,n,i,r,o)},function(t){function e(t){var e=N.sqrt(n(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}function n(t){return t[0]*t[0]+t[1]*t[1]}t.add=function(t,e,n,i,r,o){var s,l,u,h,c=[[],[],[]],f=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],d=[[t,n,r],[e,i,o],[0,0,1]];for(t&&t instanceof a&&(d=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),s=0;s<3;s++)for(l=0;l<3;l++){for(h=0,u=0;u<3;u++)h+=f[s][u]*d[u][l];c[s][l]=h}this.a=c[0][0],this.b=c[1][0],this.c=c[0][1],this.d=c[1][1],this.e=c[0][2],this.f=c[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new a(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new a(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,n,i){null==e&&(e=t),(n||i)&&this.add(1,0,0,1,n,i),this.add(t,0,0,e,0,0),(n||i)&&this.add(1,0,0,1,-n,-i)},t.rotate=function(t,e,n){t=m.rad(t),e=e||0,n=n||0;var i=+N.cos(t).toFixed(9),r=+N.sin(t).toFixed(9);this.add(i,r,-r,i,e,n),this.add(1,0,0,1,-e,-n)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[R.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return m.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];t.scalex=N.sqrt(n(i[0])),e(i[0]),t.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*t.shear,i[1][1]-i[0][1]*t.shear],t.scaley=N.sqrt(n(i[1])),e(i[1]),t.shear/=t.scaley;var r=-i[0][1],a=i[1][1];return a<0?(t.rotate=m.deg(N.acos(a)),r<0&&(t.rotate=360-t.rotate)):t.rotate=m.deg(N.asin(r)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[P]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:E)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:E)+(e.rotate?"r"+[e.rotate,0,0]:E)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(a.prototype);var Ht=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(Ht&&Ht[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Ht&&Ht[1]<8?y.safari=function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){t.remove()})}:y.safari=ht;for(var Xt=function(){this.returnValue=!1},Wt=function(){return this.originalEvent.preventDefault()},Yt=function(){this.cancelBubble=!0},jt=function(){return this.originalEvent.stopPropagation()},qt=function(){return k.doc.addEventListener?function(t,e,n,i){var r=L&&D[e]?D[e]:e,a=function(r){var a=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,o=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft,s=r.clientX+o,l=r.clientY+a;if(L&&D[M](e))for(var u=0,h=r.targetTouches&&r.targetTouches.length;u<h;u++)if(r.targetTouches[u].target==t){var c=r;r=r.targetTouches[u],r.originalEvent=c,r.preventDefault=Wt,r.stopPropagation=jt;break}return n.call(i,r,s,l)};return t.addEventListener(r,a,!1),function(){return t.removeEventListener(r,a,!1),!0}}:k.doc.attachEvent?function(t,e,n,i){var r=function(t){t=t||k.win.event;var e=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,r=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft,a=t.clientX+r,o=t.clientY+e;return t.preventDefault=t.preventDefault||Xt,t.stopPropagation=t.stopPropagation||Yt,n.call(i,t,a,o)};t.attachEvent("on"+e,r);var a=function(){return t.detachEvent("on"+e,r),!0};return a}:void 0}(),Vt=[],Gt=function(t){for(var e,n=t.clientX,i=t.clientY,r=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,a=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft,o=Vt.length;o--;){if(e=Vt[o],L){for(var s,l=t.touches.length;l--;)if(s=t.touches[l],s.identifier==e.el._drag.id){n=s.clientX,i=s.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var u,h=e.el.node,c=h.nextSibling,f=h.parentNode,d=h.style.display;k.win.opera&&f.removeChild(h),h.style.display="none",u=e.el.paper.getElementByPoint(n,i),h.style.display=d,k.win.opera&&(c?f.insertBefore(h,c):f.appendChild(h)),u&&eve("raphael.drag.over."+e.el.id,e.el,u),n+=a,i+=r,eve("raphael.drag.move."+e.el.id,e.move_scope||e.el,n-e.el._drag.x,i-e.el._drag.y,n,i,t)}},Ut=function(t){m.unmousemove(Gt).unmouseup(Ut);for(var e,n=Vt.length;n--;)e=Vt[n],e.el._drag={},eve("raphael.drag.end."+e.el.id,e.end_scope||e.start_scope||e.move_scope||e.el,t);Vt=[]},Zt=m.el={},$t=z.length;$t--;)(function(t){m[t]=Zt[t]=function(e,n){return m.is(e,"function")&&(this.events=this.events||[],this.events.push({name:t,f:e,unbind:qt(this.shape||this.node||k.doc,t,e,n||this)})),this},m["un"+t]=Zt["un"+t]=function(e){for(var n=this.events||[],i=n.length;i--;)if(n[i].name==t&&n[i].f==e)return n[i].unbind(),n.splice(i,1),!n.length&&delete this.events,this;return this}})(z[$t]);Zt.data=function(t,e){var n=lt[this.id]=lt[this.id]||{};if(1==arguments.length){if(m.is(t,"object")){for(var i in t)t[M](i)&&this.data(i,t[i]);return this}return eve("raphael.data.get."+this.id,this,n[t],t),n[t]}return n[t]=e,eve("raphael.data.set."+this.id,this,e,t),this},Zt.removeData=function(t){return null==t?lt[this.id]={}:lt[this.id]&&delete lt[this.id][t],this},Zt.hover=function(t,e,n,i){return this.mouseover(t,n).mouseout(e,i||n)},Zt.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var Qt=[];Zt.drag=function(t,e,n,i,r,a){function o(o){(o.originalEvent||o).preventDefault();var s=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,l=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft;this._drag.x=o.clientX+l,this._drag.y=o.clientY+s,this._drag.id=o.identifier,!Vt.length&&m.mousemove(Gt).mouseup(Ut),Vt.push({el:this,move_scope:i,start_scope:r,end_scope:a}),e&&eve.on("raphael.drag.start."+this.id,e),t&&eve.on("raphael.drag.move."+this.id,t),n&&eve.on("raphael.drag.end."+this.id,n),eve("raphael.drag.start."+this.id,r||i||this,o.clientX+l,o.clientY+s,o)}return this._drag={},Qt.push({el:this,start:o}),this.mousedown(o),this},Zt.onDragOver=function(t){t?eve.on("raphael.drag.over."+this.id,t):eve.unbind("raphael.drag.over."+this.id)},Zt.undrag=function(){for(var t=Qt.length;t--;)Qt[t].el==this&&(this.unmousedown(Qt[t].start),Qt.splice(t,1),eve.unbind("raphael.drag.*."+this.id));!Qt.length&&m.unmousemove(Gt).unmouseup(Ut)},y.circle=function(t,e,n){var i=m._engine.circle(this,t||0,e||0,n||0);return this.__set__&&this.__set__.push(i),i},y.rect=function(t,e,n,i,r){var a=m._engine.rect(this,t||0,e||0,n||0,i||0,r||0);return this.__set__&&this.__set__.push(a),a},y.ellipse=function(t,e,n,i){var r=m._engine.ellipse(this,t||0,e||0,n||0,i||0);return this.__set__&&this.__set__.push(r),r},y.path=function(t){t&&!m.is(t,j)&&!m.is(t[0],q)&&(t+=E);var e=m._engine.path(m.format[C](m,arguments),this);return this.__set__&&this.__set__.push(e),e},y.image=function(t,e,n,i,r){var a=m._engine.image(this,t||"about:blank",e||0,n||0,i||0,r||0);return this.__set__&&this.__set__.push(a),a},y.text=function(t,e,n){var i=m._engine.text(this,t||0,e||0,R(n));return this.__set__&&this.__set__.push(i),i},y.set=function(t){!m.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var e=new ue(t);return this.__set__&&this.__set__.push(e),e},y.setStart=function(t){this.__set__=t||this.set()},y.setFinish=function(){var t=this.__set__;return delete this.__set__,t},y.setSize=function(t,e){return m._engine.setSize.call(this,t,e)},y.setViewBox=function(t,e,n,i,r){return m._engine.setViewBox.call(this,t,e,n,i,r)},y.top=y.bottom=null,y.raphael=m;var Jt=function(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,i=n.body,r=n.documentElement,a=r.clientTop||i.clientTop||0,o=r.clientLeft||i.clientLeft||0,s=e.top+(k.win.pageYOffset||r.scrollTop||i.scrollTop)-a,l=e.left+(k.win.pageXOffset||r.scrollLeft||i.scrollLeft)-o;return{y:s,x:l}};y.getElementByPoint=function(t,e){var n=this,i=n.canvas,r=k.doc.elementFromPoint(t,e);if(k.win.opera&&"svg"==r.tagName){var a=Jt(i),o=i.createSVGRect();o.x=t-a.x,o.y=e-a.y,o.width=o.height=1;var s=i.getIntersectionList(o,null);s.length&&(r=s[s.length-1])}if(!r)return null;for(;r.parentNode&&r!=i.parentNode&&!r.raphael;)r=r.parentNode;return r==n.canvas.parentNode&&(r=i),r=r&&r.raphael?n.getById(r.raphaelid):null},y.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},y.forEach=function(t,e){for(var n=this.bottom;n;){if(t.call(e,n)===!1)return this;n=n.next}return this},y.getElementsByPoint=function(t,e){var n=this.set();return this.forEach(function(i){i.isPointInside(t,e)&&n.push(i)}),n},Zt.isPointInside=function(t,e){var n=this.realPath=this.realPath||pt[this.type](this);return m.isPointInsidePath(n,t,e)},Zt.getBBox=function(t){if(this.removed)return{};var e=this._;return t?(!e.dirty&&e.bboxwt||(this.realPath=pt[this.type](this),e.bboxwt=St(this.realPath),e.bboxwt.toString=r,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&(!e.dirty&&this.realPath||(e.bboxwt=0,this.realPath=pt[this.type](this)),e.bbox=St(gt(this.realPath,this.matrix)),e.bbox.toString=r,e.dirty=e.dirtyT=0),e.bbox)},Zt.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},Zt.glow=function(t){if("text"==this.type)return null;t=t||{};var e={width:(t.width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},n=e.width/2,i=this.paper,r=i.set(),a=this.realPath||pt[this.type](this);a=this.matrix?gt(a,this.matrix):a;for(var o=1;o<n+1;o++)r.push(i.path(a).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/n*o).toFixed(3),opacity:+(e.opacity/n).toFixed(3)}));return r.insertBefore(this).translate(e.offsetx,e.offsety)};var Kt=function(t,e,n,i,r,a,o,s,l){return null==l?h(t,e,n,i,r,a,o,s):m.findDotsAtSegment(t,e,n,i,r,a,o,s,u(t,e,n,i,r,a,o,s,l))},te=function(t,e){return function(n,i,r){n=zt(n);for(var a,o,s,l,u,h="",c={},f=0,d=0,p=n.length;d<p;d++){if(s=n[d],"M"==s[0])a=+s[1],o=+s[2];else{if(l=Kt(a,o,s[1],s[2],s[3],s[4],s[5],s[6]),f+l>i){if(e&&!c.start){if(u=Kt(a,o,s[1],s[2],s[3],s[4],s[5],s[6],i-f),h+=["C"+u.start.x,u.start.y,u.m.x,u.m.y,u.x,u.y],r)return h;c.start=h,h=["M"+u.x,u.y+"C"+u.n.x,u.n.y,u.end.x,u.end.y,s[5],s[6]].join(),f+=l,a=+s[5],o=+s[6];continue}if(!t&&!e)return u=Kt(a,o,s[1],s[2],s[3],s[4],s[5],s[6],i-f),{x:u.x,y:u.y,alpha:u.alpha}}f+=l,a=+s[5],o=+s[6]}h+=s.shift()+s}return c.end=h,u=t?f:e?c:m.findDotsAtSegment(a,o,s[0],s[1],s[2],s[3],s[4],s[5],1),u.alpha&&(u={x:u.x,y:u.y,alpha:u.alpha}),u}},ee=te(1),ne=te(),ie=te(0,1);m.getTotalLength=ee,m.getPointAtLength=ne,m.getSubpath=function(t,e,n){if(this.getTotalLength(t)-n<1e-6)return ie(t,e).end;var i=ie(t,n,1);return e?ie(i,e).end:i},Zt.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():ee(this.attrs.path)},Zt.getPointAtLength=function(t){if("path"==this.type)return ne(this.attrs.path,t)},Zt.getSubpath=function(t,e){if("path"==this.type)return m.getSubpath(this.attrs.path,t,e)};var re=m.easing_formulas={linear:function(t){return t},"<":function(t){return X(t,1.7)},">":function(t){return X(t,.48)},"<>":function(t){var e=.48-t/1.04,n=N.sqrt(.1734+e*e),i=n-e,r=X(H(i),1/3)*(i<0?-1:1),a=-n-e,o=X(H(a),1/3)*(a<0?-1:1),s=r+o+.5;return 3*(1-s)*s*s+s*s*s},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:X(2,-10*t)*N.sin(2*(t-.075)*W/.3)+1},bounce:function(t){var e,n=7.5625,i=2.75;return t<1/i?e=n*t*t:t<2/i?(t-=1.5/i,e=n*t*t+.75):t<2.5/i?(t-=2.25/i,e=n*t*t+.9375):(t-=2.625/i,e=n*t*t+.984375),e}};re.easeIn=re["ease-in"]=re["<"],re.easeOut=re["ease-out"]=re[">"],re.easeInOut=re["ease-in-out"]=re["<>"],re["back-in"]=re.backIn,re["back-out"]=re.backOut;var ae=[],oe=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},se=function(){for(var t=+new Date,n=0;n<ae.length;n++){var i=ae[n];if(!i.el.removed&&!i.paused){var r,a,o=t-i.start,s=i.ms,l=i.easing,u=i.from,h=i.diff,c=i.to,f=(i.t,i.el),d={},p={};if(i.initstatus?(o=(i.initstatus*i.anim.top-i.prev)/(i.percent-i.prev)*s,i.status=i.initstatus,delete i.initstatus,i.stop&&ae.splice(n--,1)):i.status=(i.prev+(i.percent-i.prev)*(o/s))/i.anim.top,!(o<0))if(o<s){var g=l(o/s);for(var v in u)if(u[M](v)){switch(et[v]){case Y:r=+u[v]+g*s*h[v];break;case"colour":r="rgb("+[le($(u[v].r+g*s*h[v].r)),le($(u[v].g+g*s*h[v].g)),le($(u[v].b+g*s*h[v].b))].join(",")+")";break;case"path":r=[];for(var x=0,y=u[v].length;x<y;x++){r[x]=[u[v][x][0]];for(var b=1,_=u[v][x].length;b<_;b++)r[x][b]=+u[v][x][b]+g*s*h[v][x][b];r[x]=r[x].join(F)}r=r.join(F);break;case"transform":if(h[v].real)for(r=[],x=0,y=u[v].length;x<y;x++)for(r[x]=[u[v][x][0]],b=1,_=u[v][x].length;b<_;b++)r[x][b]=u[v][x][b]+g*s*h[v][x][b];else{var w=function(t){return+u[v][t]+g*s*h[v][t]};r=[["m",w(0),w(1),w(2),w(3),w(4),w(5)]]}break;case"csv":if("clip-rect"==v)for(r=[],x=4;x--;)r[x]=+u[v][x]+g*s*h[v][x];break;default:var k=[][A](u[v]);for(r=[],x=f.paper.customAttributes[v].length;x--;)r[x]=+k[x]+g*s*h[v][x]}d[v]=r}f.attr(d),function(t,e,n){setTimeout(function(){eve("raphael.anim.frame."+t,e,n)})}(f.id,f,i.anim)}else{if(function(t,e,n){setTimeout(function(){eve("raphael.anim.frame."+e.id,e,n),eve("raphael.anim.finish."+e.id,e,n),m.is(t,"function")&&t.call(e)})}(i.callback,f,i.anim),f.attr(c),
ae.splice(n--,1),i.repeat>1&&!i.next){for(a in c)c[M](a)&&(p[a]=i.totalOrigin[a]);i.el.attr(p),e(i.anim,i.el,i.anim.percents[0],null,i.totalOrigin,i.repeat-1)}i.next&&!i.stop&&e(i.anim,i.el,i.next,null,i.totalOrigin,i.repeat)}}}m.svg&&f&&f.paper&&f.paper.safari(),ae.length&&oe(se)},le=function(t){return t>255?255:t<0?0:t};Zt.animateWith=function(t,i,r,a,o,s){var l=this;if(l.removed)return s&&s.call(l),l;var u=r instanceof n?r:m.animation(r,a,o,s);e(u,l,u.percents[0],null,l.attr());for(var h=0,c=ae.length;h<c;h++)if(ae[h].anim==i&&ae[h].el==t){ae[c-1].start=ae[h].start;break}return l},Zt.onAnimation=function(t){return t?eve.on("raphael.anim.frame."+this.id,t):eve.unbind("raphael.anim.frame."+this.id),this},n.prototype.delay=function(t){var e=new n(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},n.prototype.repeat=function(t){var e=new n(this.anim,this.ms);return e.del=this.del,e.times=N.floor(O(t,0))||1,e},m.animation=function(t,e,i,r){if(t instanceof n)return t;!m.is(i,"function")&&i||(r=r||i||null,i=null),t=Object(t),e=+e||0;var a,o,s={};for(o in t)t[M](o)&&Q(o)!=o&&Q(o)+"%"!=o&&(a=!0,s[o]=t[o]);return a?(i&&(s.easing=i),r&&(s.callback=r),new n({100:s},e)):new n(t,e)},Zt.animate=function(t,i,r,a){var o=this;if(o.removed)return a&&a.call(o),o;var s=t instanceof n?t:m.animation(t,i,r,a);return e(s,o,s.percents[0],null,o.attr()),o},Zt.setTime=function(t,e){return t&&null!=e&&this.status(t,B(e,t.ms)/t.ms),this},Zt.status=function(t,n){var i,r,a=[],o=0;if(null!=n)return e(t,this,-1,B(n,1)),this;for(i=ae.length;o<i;o++)if(r=ae[o],r.el.id==this.id&&(!t||r.anim==t)){if(t)return r.status;a.push({anim:r.anim,status:r.status})}return t?0:a},Zt.pause=function(t){for(var e=0;e<ae.length;e++)ae[e].el.id==this.id&&(!t||ae[e].anim==t)&&eve("raphael.anim.pause."+this.id,this,ae[e].anim)!==!1&&(ae[e].paused=!0);return this},Zt.resume=function(t){for(var e=0;e<ae.length;e++)if(ae[e].el.id==this.id&&(!t||ae[e].anim==t)){var n=ae[e];eve("raphael.anim.resume."+this.id,this,n.anim)!==!1&&(delete n.paused,this.status(n.anim,n.status))}return this},Zt.stop=function(t){for(var e=0;e<ae.length;e++)ae[e].el.id==this.id&&(!t||ae[e].anim==t)&&eve("raphael.anim.stop."+this.id,this,ae[e].anim)!==!1&&ae.splice(e--,1);return this},eve.on("raphael.remove",t),eve.on("raphael.clear",t),Zt.toString=function(){return"Rapha\xebl\u2019s object"};var ue=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,n=t.length;e<n;e++)t[e]&&(t[e].constructor==Zt.constructor||t[e].constructor==ue)&&(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},he=ue.prototype;he.push=function(){for(var t,e,n=0,i=arguments.length;n<i;n++)t=arguments[n],t&&(t.constructor==Zt.constructor||t.constructor==ue)&&(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},he.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},he.forEach=function(t,e){for(var n=0,i=this.items.length;n<i;n++)if(t.call(e,this.items[n],n)===!1)return this;return this};for(var ce in Zt)Zt[M](ce)&&(he[ce]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t][C](n,e)})}}(ce));he.attr=function(t,e){if(t&&m.is(t,q)&&m.is(t[0],"object"))for(var n=0,i=t.length;n<i;n++)this.items[n].attr(t[n]);else for(var r=0,a=this.items.length;r<a;r++)this.items[r].attr(t,e);return this},he.clear=function(){for(;this.length;)this.pop()},he.splice=function(t,e){t=t<0?O(this.length+t,0):t,e=O(0,B(this.length-t,e));var n,i=[],r=[],a=[];for(n=2;n<arguments.length;n++)a.push(arguments[n]);for(n=0;n<e;n++)r.push(this[t+n]);for(;n<this.length-t;n++)i.push(this[t+n]);var o=a.length;for(n=0;n<o+i.length;n++)this.items[t+n]=this[t+n]=n<o?a[n]:i[n-o];for(n=this.items.length=this.length-=e-o;this[n];)delete this[n++];return new ue(r)},he.exclude=function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]==t)return this.splice(e,1),!0},he.animate=function(t,e,n,i){(m.is(n,"function")||!n)&&(i=n||null);var r,a,o=this.items.length,s=o,l=this;if(!o)return this;i&&(a=function(){!--o&&i.call(l)}),n=m.is(n,j)?n:a;var u=m.animation(t,e,n,a);for(r=this.items[--s].animate(u);s--;)this.items[s]&&!this.items[s].removed&&this.items[s].animateWith(r,u,u);return this},he.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},he.getBBox=function(){for(var t=[],e=[],n=[],i=[],r=this.items.length;r--;)if(!this.items[r].removed){var a=this.items[r].getBBox();t.push(a.x),e.push(a.y),n.push(a.x+a.width),i.push(a.y+a.height)}return t=B[C](0,t),e=B[C](0,e),n=O[C](0,n),i=O[C](0,i),{x:t,y:e,x2:n,y2:i,width:n-t,height:i-e}},he.clone=function(t){t=new ue;for(var e=0,n=this.items.length;e<n;e++)t.push(this.items[e].clone());return t},he.toString=function(){return"Rapha\xebl\u2018s set"},m.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},n=t.face["font-family"];for(var i in t.face)t.face[M](i)&&(e.face[i]=t.face[i]);if(this.fonts[n]?this.fonts[n].push(e):this.fonts[n]=[e],!t.svg){e.face["units-per-em"]=J(t.face["units-per-em"],10);for(var r in t.glyphs)if(t.glyphs[M](r)){var a=t.glyphs[r];if(e.glyphs[r]={w:a.w,k:{},d:a.d&&"M"+a.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},a.k)for(var o in a.k)a[M](o)&&(e.glyphs[r].k[o]=a.k[o])}}return t},y.getFont=function(t,e,n,i){if(i=i||"normal",n=n||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400,m.fonts){var r=m.fonts[t];if(!r){var a=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,E)+"(\\s|$)","i");for(var o in m.fonts)if(m.fonts[M](o)&&a.test(o)){r=m.fonts[o];break}}var s;if(r)for(var l=0,u=r.length;l<u&&(s=r[l],s.face["font-weight"]!=e||s.face["font-style"]!=n&&s.face["font-style"]||s.face["font-stretch"]!=i);l++);return s}},y.print=function(t,e,n,i,r,a,o){a=a||"middle",o=O(B(o||0,1),-1);var s,l=R(n)[P](E),u=0,h=0,c=E;if(m.is(i,n)&&(i=this.getFont(i)),i){s=(r||16)/i.face["units-per-em"];for(var f=i.face.bbox[P](b),d=+f[0],p=f[3]-f[1],g=0,v=+f[1]+("baseline"==a?p+ +i.face.descent:p/2),x=0,y=l.length;x<y;x++){if("\n"==l[x])u=0,w=0,h=0,g+=p;else{var _=h&&i.glyphs[l[x-1]]||{},w=i.glyphs[l[x]];u+=h?(_.w||i.w)+(_.k&&_.k[l[x]]||0)+i.w*o:0,h=1}w&&w.d&&(c+=m.transformPath(w.d,["t",u*s,g*s,"s",s,s,d,v,"t",(t-d)/s,(e-v)/s]))}}return this.path(c).attr({fill:"#000",stroke:"none"})},y.add=function(t){if(m.is(t,"array"))for(var e,n=this.set(),i=0,r=t.length;i<r;i++)e=t[i]||{},_[M](e.type)&&n.push(this[e.type]().attr(e));return n},m.format=function(t,e){var n=m.is(e,q)?[0][A](e):arguments;return t&&m.is(t,j)&&n.length-1&&(t=t.replace(w,function(t,e){return null==n[++e]?E:n[e]})),t||E},m.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(t,n,i){var r=i;return n.replace(e,function(t,e,n,i,a){e=e||i,r&&(e in r&&(r=r[e]),"function"==typeof r&&a&&(r=r()))}),r=(null==r||r==i?t:r)+""};return function(e,i){return String(e).replace(t,function(t,e){return n(t,e,i)})}}(),m.ninja=function(){return S.was?k.win.Raphael=S.is:delete Raphael,m},m.st=he,function(t,e,n){function i(){/in/.test(t.readyState)?setTimeout(i,9):m.eve("raphael.DOMload")}null==t.readyState&&t.addEventListener&&(t.addEventListener(e,n=function(){t.removeEventListener(e,n,!1),t.readyState="complete"},!1),t.readyState="loading"),i()}(document,"DOMContentLoaded"),S.was?k.win.Raphael=m:Raphael=m,eve.on("raphael.DOMload",function(){x=!0})}(),window.Raphael.svg&&function(t){var e="hasOwnProperty",n=String,i=parseFloat,r=parseInt,a=Math,o=a.max,s=a.abs,l=a.pow,u=/[, ]+/,h=t.eve,c="",f=" ",d="http://www.w3.org/1999/xlink",p={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},g={};t.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var v=function(i,r){if(r){"string"==typeof i&&(i=v(i));for(var a in r)r[e](a)&&("xlink:"==a.substring(0,6)?i.setAttributeNS(d,a.substring(6),n(r[a])):i.setAttribute(a,n(r[a])))}else i=t._g.doc.createElementNS("http://www.w3.org/2000/svg",i),i.style&&(i.style.webkitTapHighlightColor="rgba(0,0,0,0)");return i},m=function(e,r){var u="linear",h=e.id+r,f=.5,d=.5,p=e.node,g=e.paper,m=p.style,x=t._g.doc.getElementById(h);if(!x){if(r=n(r).replace(t._radial_gradient,function(t,e,n){if(u="radial",e&&n){f=i(e),d=i(n);var r=2*(d>.5)-1;l(f-.5,2)+l(d-.5,2)>.25&&(d=a.sqrt(.25-l(f-.5,2))*r+.5)&&.5!=d&&(d=d.toFixed(5)-1e-5*r)}return c}),r=r.split(/\s*\-\s*/),"linear"==u){var y=r.shift();if(y=-i(y),isNaN(y))return null;var b=[0,0,a.cos(t.rad(y)),a.sin(t.rad(y))],_=1/(o(s(b[2]),s(b[3]))||1);b[2]*=_,b[3]*=_,b[2]<0&&(b[0]=-b[2],b[2]=0),b[3]<0&&(b[1]=-b[3],b[3]=0)}var w=t._parseDots(r);if(!w)return null;if(h=h.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&h!=e.gradient.id&&(g.defs.removeChild(e.gradient),delete e.gradient),!e.gradient){x=v(u+"Gradient",{id:h}),e.gradient=x,v(x,"radial"==u?{fx:f,fy:d}:{x1:b[0],y1:b[1],x2:b[2],y2:b[3],gradientTransform:e.matrix.invert()}),g.defs.appendChild(x);for(var M=0,k=w.length;M<k;M++)x.appendChild(v("stop",{offset:w[M].offset?w[M].offset:M?"100%":"0%","stop-color":w[M].color||"#fff"}))}}return v(p,{fill:"url(#"+h+")",opacity:1,"fill-opacity":1}),m.fill=c,m.opacity=1,m.fillOpacity=1,1},x=function(t){var e=t.getBBox(1);v(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},y=function(i,r,a){if("path"==i.type){for(var o,s,l,u,h,f=n(r).toLowerCase().split("-"),d=i.paper,m=a?"end":"start",x=i.node,y=i.attrs,b=y["stroke-width"],_=f.length,w="classic",M=3,k=3,S=5;_--;)switch(f[_]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":w=f[_];break;case"wide":k=5;break;case"narrow":k=2;break;case"long":M=5;break;case"short":M=2}if("open"==w?(M+=2,k+=2,S+=2,l=1,u=a?4:1,h={fill:"none",stroke:y.stroke}):(u=l=M/2,h={fill:y.stroke,stroke:"none"}),i._.arrows?a?(i._.arrows.endPath&&g[i._.arrows.endPath]--,i._.arrows.endMarker&&g[i._.arrows.endMarker]--):(i._.arrows.startPath&&g[i._.arrows.startPath]--,i._.arrows.startMarker&&g[i._.arrows.startMarker]--):i._.arrows={},"none"!=w){var T="raphael-marker-"+w,C="raphael-marker-"+m+w+M+k;t._g.doc.getElementById(T)?g[T]++:(d.defs.appendChild(v(v("path"),{"stroke-linecap":"round",d:p[w],id:T})),g[T]=1);var A,L=t._g.doc.getElementById(C);L?(g[C]++,A=L.getElementsByTagName("use")[0]):(L=v(v("marker"),{id:C,markerHeight:k,markerWidth:M,orient:"auto",refX:u,refY:k/2}),A=v(v("use"),{"xlink:href":"#"+T,transform:(a?"rotate(180 "+M/2+" "+k/2+") ":c)+"scale("+M/S+","+k/S+")","stroke-width":(1/((M/S+k/S)/2)).toFixed(4)}),L.appendChild(A),d.defs.appendChild(L),g[C]=1),v(A,h);var E=l*("diamond"!=w&&"oval"!=w);a?(o=i._.arrows.startdx*b||0,s=t.getTotalLength(y.path)-E*b):(o=E*b,s=t.getTotalLength(y.path)-(i._.arrows.enddx*b||0)),h={},h["marker-"+m]="url(#"+C+")",(s||o)&&(h.d=Raphael.getSubpath(y.path,o,s)),v(x,h),i._.arrows[m+"Path"]=T,i._.arrows[m+"Marker"]=C,i._.arrows[m+"dx"]=E,i._.arrows[m+"Type"]=w,i._.arrows[m+"String"]=r}else a?(o=i._.arrows.startdx*b||0,s=t.getTotalLength(y.path)-o):(o=0,s=t.getTotalLength(y.path)-(i._.arrows.enddx*b||0)),i._.arrows[m+"Path"]&&v(x,{d:Raphael.getSubpath(y.path,o,s)}),delete i._.arrows[m+"Path"],delete i._.arrows[m+"Marker"],delete i._.arrows[m+"dx"],delete i._.arrows[m+"Type"],delete i._.arrows[m+"String"];for(h in g)if(g[e](h)&&!g[h]){var F=t._g.doc.getElementById(h);F&&F.parentNode.removeChild(F)}}},b={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},_=function(t,e,i){if(e=b[n(e).toLowerCase()]){for(var r=t.attrs["stroke-width"]||"1",a={round:r,square:r,butt:0}[t.attrs["stroke-linecap"]||i["stroke-linecap"]]||0,o=[],s=e.length;s--;)o[s]=e[s]*r+(s%2?1:-1)*a;v(t.node,{"stroke-dasharray":o.join(",")})}},w=function(i,a){var l=i.node,h=i.attrs,f=l.style.visibility;l.style.visibility="hidden";for(var p in a)if(a[e](p)){if(!t._availableAttrs[e](p))continue;var g=a[p];switch(h[p]=g,p){case"blur":i.blur(g);break;case"href":case"title":case"target":var b=l.parentNode;if("a"!=b.tagName.toLowerCase()){var w=v("a");b.insertBefore(w,l),w.appendChild(l),b=w}"target"==p?b.setAttributeNS(d,"show","blank"==g?"new":g):b.setAttributeNS(d,p,g);break;case"cursor":l.style.cursor=g;break;case"transform":i.transform(g);break;case"arrow-start":y(i,g);break;case"arrow-end":y(i,g,1);break;case"clip-rect":var M=n(g).split(u);if(4==M.length){i.clip&&i.clip.parentNode.parentNode.removeChild(i.clip.parentNode);var S=v("clipPath"),T=v("rect");S.id=t.createUUID(),v(T,{x:M[0],y:M[1],width:M[2],height:M[3]}),S.appendChild(T),i.paper.defs.appendChild(S),v(l,{"clip-path":"url(#"+S.id+")"}),i.clip=T}if(!g){var C=l.getAttribute("clip-path");if(C){var A=t._g.doc.getElementById(C.replace(/(^url\(#|\)$)/g,c));A&&A.parentNode.removeChild(A),v(l,{"clip-path":c}),delete i.clip}}break;case"path":"path"==i.type&&(v(l,{d:g?h.path=t._pathToAbsolute(g):"M0,0"}),i._.dirty=1,i._.arrows&&("startString"in i._.arrows&&y(i,i._.arrows.startString),"endString"in i._.arrows&&y(i,i._.arrows.endString,1)));break;case"width":if(l.setAttribute(p,g),i._.dirty=1,!h.fx)break;p="x",g=h.x;case"x":h.fx&&(g=-h.x-(h.width||0));case"rx":if("rx"==p&&"rect"==i.type)break;case"cx":l.setAttribute(p,g),i.pattern&&x(i),i._.dirty=1;break;case"height":if(l.setAttribute(p,g),i._.dirty=1,!h.fy)break;p="y",g=h.y;case"y":h.fy&&(g=-h.y-(h.height||0));case"ry":if("ry"==p&&"rect"==i.type)break;case"cy":l.setAttribute(p,g),i.pattern&&x(i),i._.dirty=1;break;case"r":"rect"==i.type?v(l,{rx:g,ry:g}):l.setAttribute(p,g),i._.dirty=1;break;case"src":"image"==i.type&&l.setAttributeNS(d,"href",g);break;case"stroke-width":1==i._.sx&&1==i._.sy||(g/=o(s(i._.sx),s(i._.sy))||1),i.paper._vbSize&&(g*=i.paper._vbSize),l.setAttribute(p,g),h["stroke-dasharray"]&&_(i,h["stroke-dasharray"],a),i._.arrows&&("startString"in i._.arrows&&y(i,i._.arrows.startString),"endString"in i._.arrows&&y(i,i._.arrows.endString,1));break;case"stroke-dasharray":_(i,g,a);break;case"fill":var L=n(g).match(t._ISURL);if(L){S=v("pattern");var E=v("image");S.id=t.createUUID(),v(S,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),v(E,{x:0,y:0,"xlink:href":L[1]}),S.appendChild(E),function(e){t._preload(L[1],function(){var t=this.offsetWidth,n=this.offsetHeight;v(e,{width:t,height:n}),v(E,{width:t,height:n}),i.paper.safari()})}(S),i.paper.defs.appendChild(S),v(l,{fill:"url(#"+S.id+")"}),i.pattern=S,i.pattern&&x(i);break}var F=t.getRGB(g);if(F.error){if(("circle"==i.type||"ellipse"==i.type||"r"!=n(g).charAt())&&m(i,g)){if("opacity"in h||"fill-opacity"in h){var R=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,c));if(R){var P=R.getElementsByTagName("stop");v(P[P.length-1],{"stop-opacity":("opacity"in h?h.opacity:1)*("fill-opacity"in h?h["fill-opacity"]:1)})}}h.gradient=g,h.fill="none";break}}else delete a.gradient,delete h.gradient,!t.is(h.opacity,"undefined")&&t.is(a.opacity,"undefined")&&v(l,{opacity:h.opacity}),!t.is(h["fill-opacity"],"undefined")&&t.is(a["fill-opacity"],"undefined")&&v(l,{"fill-opacity":h["fill-opacity"]});F[e]("opacity")&&v(l,{"fill-opacity":F.opacity>1?F.opacity/100:F.opacity});case"stroke":F=t.getRGB(g),l.setAttribute(p,F.hex),"stroke"==p&&F[e]("opacity")&&v(l,{"stroke-opacity":F.opacity>1?F.opacity/100:F.opacity}),"stroke"==p&&i._.arrows&&("startString"in i._.arrows&&y(i,i._.arrows.startString),"endString"in i._.arrows&&y(i,i._.arrows.endString,1));break;case"gradient":("circle"==i.type||"ellipse"==i.type||"r"!=n(g).charAt())&&m(i,g);break;case"opacity":h.gradient&&!h[e]("stroke-opacity")&&v(l,{"stroke-opacity":g>1?g/100:g});case"fill-opacity":if(h.gradient){R=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,c)),R&&(P=R.getElementsByTagName("stop"),v(P[P.length-1],{"stop-opacity":g}));break}default:"font-size"==p&&(g=r(g,10)+"px");var z=p.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});l.style[z]=g,i._.dirty=1,l.setAttribute(p,g)}}k(i,a),l.style.visibility=f},M=1.2,k=function(i,a){if("text"==i.type&&(a[e]("text")||a[e]("font")||a[e]("font-size")||a[e]("x")||a[e]("y"))){var o=i.attrs,s=i.node,l=s.firstChild?r(t._g.doc.defaultView.getComputedStyle(s.firstChild,c).getPropertyValue("font-size"),10):10;if(a[e]("text")){for(o.text=a.text;s.firstChild;)s.removeChild(s.firstChild);for(var u,h=n(a.text).split("\n"),f=[],d=0,p=h.length;d<p;d++)u=v("tspan"),d&&v(u,{dy:l*M,x:o.x}),u.appendChild(t._g.doc.createTextNode(h[d])),s.appendChild(u),f[d]=u}else for(f=s.getElementsByTagName("tspan"),d=0,p=f.length;d<p;d++)d?v(f[d],{dy:l*M,x:o.x}):v(f[0],{dy:0});v(s,{x:o.x,y:o.y}),i._.dirty=1;var g=i._getBBox(),m=o.y-(g.y+g.height/2);m&&t.is(m,"finite")&&v(f[0],{dy:m})}},S=function(e,n){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.matrix=t.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},T=t.el;S.prototype=T,T.constructor=S,t._engine.path=function(t,e){var n=v("path");e.canvas&&e.canvas.appendChild(n);var i=new S(n,e);return i.type="path",w(i,{fill:"none",stroke:"#000",path:t}),i},T.rotate=function(t,e,r){if(this.removed)return this;if(t=n(t).split(u),t.length-1&&(e=i(t[1]),r=i(t[2])),t=i(t[0]),null==r&&(e=r),null==e||null==r){var a=this.getBBox(1);e=a.x+a.width/2,r=a.y+a.height/2}return this.transform(this._.transform.concat([["r",t,e,r]])),this},T.scale=function(t,e,r,a){if(this.removed)return this;if(t=n(t).split(u),t.length-1&&(e=i(t[1]),r=i(t[2]),a=i(t[3])),t=i(t[0]),null==e&&(e=t),null==a&&(r=a),null==r||null==a)var o=this.getBBox(1);return r=null==r?o.x+o.width/2:r,a=null==a?o.y+o.height/2:a,this.transform(this._.transform.concat([["s",t,e,r,a]])),this},T.translate=function(t,e){return this.removed?this:(t=n(t).split(u),t.length-1&&(e=i(t[1])),t=i(t[0])||0,e=+e||0,this.transform(this._.transform.concat([["t",t,e]])),this)},T.transform=function(n){var i=this._;if(null==n)return i.transform;if(t._extractTransform(this,n),this.clip&&v(this.clip,{transform:this.matrix.invert()}),this.pattern&&x(this),this.node&&v(this.node,{transform:this.matrix}),1!=i.sx||1!=i.sy){var r=this.attrs[e]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":r})}return this},T.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},T.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},T.remove=function(){if(!this.removed&&this.node.parentNode){var e=this.paper;e.__set__&&e.__set__.exclude(this),h.unbind("raphael.*.*."+this.id),this.gradient&&e.defs.removeChild(this.gradient),t._tear(this,e),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var n in this)this[n]="function"==typeof this[n]?t._removedFactory(n):null;this.removed=!0}},T._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(t){}finally{e=e||{}}return t&&this.hide(),e},T.attr=function(n,i){if(this.removed)return this;if(null==n){var r={};for(var a in this.attrs)this.attrs[e](a)&&(r[a]=this.attrs[a]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==i&&t.is(n,"string")){if("fill"==n&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==n)return this._.transform;for(var o=n.split(u),s={},l=0,c=o.length;l<c;l++)n=o[l],n in this.attrs?s[n]=this.attrs[n]:t.is(this.paper.customAttributes[n],"function")?s[n]=this.paper.customAttributes[n].def:s[n]=t._availableAttrs[n];return c-1?s:s[o[0]]}if(null==i&&t.is(n,"array")){for(s={},l=0,c=n.length;l<c;l++)s[n[l]]=this.attr(n[l]);return s}if(null!=i){var f={};f[n]=i}else null!=n&&t.is(n,"object")&&(f=n);for(var d in f)h("raphael.attr."+d+"."+this.id,this,f[d]);for(d in this.paper.customAttributes)if(this.paper.customAttributes[e](d)&&f[e](d)&&t.is(this.paper.customAttributes[d],"function")){var p=this.paper.customAttributes[d].apply(this,[].concat(f[d]));this.attrs[d]=f[d];for(var g in p)p[e](g)&&(f[g]=p[g])}return w(this,f),this},T.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var e=this.paper;return e.top!=this&&t._tofront(this,e),this},T.toBack=function(){if(this.removed)return this;var e=this.node.parentNode;"a"==e.tagName.toLowerCase()?e.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):e.firstChild!=this.node&&e.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper);this.paper;return this},T.insertAfter=function(e){if(this.removed)return this;var n=e.node||e[e.length-1].node;return n.nextSibling?n.parentNode.insertBefore(this.node,n.nextSibling):n.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this},T.insertBefore=function(e){if(this.removed)return this;var n=e.node||e[0].node;return n.parentNode.insertBefore(this.node,n),t._insertbefore(this,e,this.paper),this},T.blur=function(e){var n=this;if(0!==+e){var i=v("filter"),r=v("feGaussianBlur");n.attrs.blur=e,i.id=t.createUUID(),v(r,{stdDeviation:+e||1.5}),i.appendChild(r),n.paper.defs.appendChild(i),n._blur=i,v(n.node,{filter:"url(#"+i.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter")},t._engine.circle=function(t,e,n,i){var r=v("circle");t.canvas&&t.canvas.appendChild(r);var a=new S(r,t);return a.attrs={cx:e,cy:n,r:i,fill:"none",stroke:"#000"},a.type="circle",v(r,a.attrs),a},t._engine.rect=function(t,e,n,i,r,a){var o=v("rect");t.canvas&&t.canvas.appendChild(o);var s=new S(o,t);return s.attrs={x:e,y:n,width:i,height:r,r:a||0,rx:a||0,ry:a||0,fill:"none",stroke:"#000"},s.type="rect",v(o,s.attrs),s},t._engine.ellipse=function(t,e,n,i,r){var a=v("ellipse");t.canvas&&t.canvas.appendChild(a);var o=new S(a,t);return o.attrs={cx:e,cy:n,rx:i,ry:r,fill:"none",stroke:"#000"},o.type="ellipse",v(a,o.attrs),o},t._engine.image=function(t,e,n,i,r,a){var o=v("image");v(o,{x:n,y:i,width:r,height:a,preserveAspectRatio:"none"}),o.setAttributeNS(d,"href",e),t.canvas&&t.canvas.appendChild(o);var s=new S(o,t);return s.attrs={x:n,y:i,width:r,height:a,src:e},s.type="image",s},t._engine.text=function(e,n,i,r){var a=v("text");e.canvas&&e.canvas.appendChild(a);var o=new S(a,e);return o.attrs={x:n,y:i,"text-anchor":"middle",text:r,font:t._availableAttrs.font,stroke:"none",fill:"#000"},o.type="text",w(o,o.attrs),o},t._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},t._engine.create=function(){var e=t._getContainer.apply(0,arguments),n=e&&e.container,i=e.x,r=e.y,a=e.width,o=e.height;if(!n)throw new Error("SVG container not found.");var s,l=v("svg"),u="overflow:hidden;";return i=i||0,r=r||0,a=a||512,o=o||342,v(l,{height:o,version:1.1,width:a,xmlns:"http://www.w3.org/2000/svg"}),1==n?(l.style.cssText=u+"position:absolute;left:"+i+"px;top:"+r+"px",t._g.doc.body.appendChild(l),s=1):(l.style.cssText=u+"position:relative",n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l)),n=new t._Paper,n.width=a,n.height=o,n.canvas=l,n.clear(),n._left=n._top=0,s&&(n.renderfix=function(){}),n.renderfix(),n},t._engine.setViewBox=function(t,e,n,i,r){h("raphael.setViewBox",this,this._viewBox,[t,e,n,i,r]);var a,s,l=o(n/this.width,i/this.height),u=this.top,c=r?"meet":"xMinYMin";for(null==t?(this._vbSize&&(l=1),delete this._vbSize,a="0 0 "+this.width+f+this.height):(this._vbSize=l,a=t+f+e+f+n+f+i),v(this.canvas,{viewBox:a,preserveAspectRatio:c});l&&u;)s="stroke-width"in u.attrs?u.attrs["stroke-width"]:1,u.attr({"stroke-width":s}),u._.dirty=1,u._.dirtyT=1,u=u.prev;return this._viewBox=[t,e,n,i,!!r],this},t.prototype.renderfix=function(){var t,e=this.canvas,n=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(n){t=e.createSVGMatrix()}var i=-t.e%1,r=-t.f%1;(i||r)&&(i&&(this._left=(this._left+i)%1,n.left=this._left+"px"),r&&(this._top=(this._top+r)%1,n.top=this._top+"px"))},t.prototype.clear=function(){t.eve("raphael.clear",this);for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=v("desc")).appendChild(t._g.doc.createTextNode("Created with Rapha\xebl "+t.version)),e.appendChild(this.desc),e.appendChild(this.defs=v("defs"))},t.prototype.remove=function(){h("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null};var C=t.st;for(var A in T)T[e](A)&&!C[e](A)&&(C[A]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t].apply(n,e)})}}(A))}(window.Raphael),window.Raphael.vml&&function(t){var e="hasOwnProperty",n=String,i=parseFloat,r=Math,a=r.round,o=r.max,s=r.min,l=r.abs,u="fill",h=/[, ]+/,c=t.eve,f=" progid:DXImageTransform.Microsoft",d=" ",p="",g={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},v=/([clmz]),?([^clmz]*)/gi,m=/ progid:\S+Blur\([^\)]+\)/g,x=/-?[^,\s-]+/g,y="position:absolute;left:0;top:0;width:1px;height:1px",b=21600,_={path:1,rect:1,image:1},w={circle:1,ellipse:1},M=function(e){var i=/[ahqstv]/gi,r=t._pathToAbsolute;if(n(e).match(i)&&(r=t._path2curve),i=/[clmz]/g,r==t._pathToAbsolute&&!n(e).match(i)){var o=n(e).replace(v,function(t,e,n){var i=[],r="m"==e.toLowerCase(),o=g[e];return n.replace(x,function(t){r&&2==i.length&&(o+=i+g["m"==e?"l":"L"],i=[]),i.push(a(t*b))}),o+i});return o}var s,l,u=r(e);o=[];for(var h=0,c=u.length;h<c;h++){s=u[h],l=u[h][0].toLowerCase(),"z"==l&&(l="x");for(var f=1,m=s.length;f<m;f++)l+=a(s[f]*b)+(f!=m-1?",":p);o.push(l)}return o.join(d)},k=function(e,n,i){var r=t.matrix();return r.rotate(-e,.5,.5),{dx:r.x(n,i),dy:r.y(n,i)}},S=function(t,e,n,i,r,a){var o=t._,s=t.matrix,h=o.fillpos,c=t.node,f=c.style,p=1,g="",v=b/e,m=b/n;if(f.visibility="hidden",e&&n){if(c.coordsize=l(v)+d+l(m),f.rotation=a*(e*n<0?-1:1),a){var x=k(a,i,r);i=x.dx,r=x.dy}if(e<0&&(g+="x"),n<0&&(g+=" y")&&(p=-1),f.flip=g,c.coordorigin=i*-v+d+r*-m,h||o.fillsize){var y=c.getElementsByTagName(u);y=y&&y[0],c.removeChild(y),h&&(x=k(a,s.x(h[0],h[1]),s.y(h[0],h[1])),y.position=x.dx*p+d+x.dy*p),o.fillsize&&(y.size=o.fillsize[0]*l(e)+d+o.fillsize[1]*l(n)),c.appendChild(y)}f.visibility="visible"}};t.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};var T=function(t,e,i){for(var r=n(e).toLowerCase().split("-"),a=i?"end":"start",o=r.length,s="classic",l="medium",u="medium";o--;)switch(r[o]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":s=r[o];break;case"wide":case"narrow":u=r[o];break;case"long":case"short":l=r[o]}var h=t.node.getElementsByTagName("stroke")[0];h[a+"arrow"]=s,h[a+"arrowlength"]=l,h[a+"arrowwidth"]=u},C=function(r,l){r.attrs=r.attrs||{};var c=r.node,f=r.attrs,g=c.style,v=_[r.type]&&(l.x!=f.x||l.y!=f.y||l.width!=f.width||l.height!=f.height||l.cx!=f.cx||l.cy!=f.cy||l.rx!=f.rx||l.ry!=f.ry||l.r!=f.r),m=w[r.type]&&(f.cx!=l.cx||f.cy!=l.cy||f.r!=l.r||f.rx!=l.rx||f.ry!=l.ry),x=r;for(var y in l)l[e](y)&&(f[y]=l[y]);if(v&&(f.path=t._getPath[r.type](r),r._.dirty=1),l.href&&(c.href=l.href),l.title&&(c.title=l.title),l.target&&(c.target=l.target),l.cursor&&(g.cursor=l.cursor),"blur"in l&&r.blur(l.blur),(l.path&&"path"==r.type||v)&&(c.path=M(~n(f.path).toLowerCase().indexOf("r")?t._pathToAbsolute(f.path):f.path),"image"==r.type&&(r._.fillpos=[f.x,f.y],r._.fillsize=[f.width,f.height],S(r,1,1,0,0,0))),"transform"in l&&r.transform(l.transform),m){var k=+f.cx,C=+f.cy,L=+f.rx||+f.r||0,E=+f.ry||+f.r||0;c.path=t.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",a((k-L)*b),a((C-E)*b),a((k+L)*b),a((C+E)*b),a(k*b))}if("clip-rect"in l){var R=n(l["clip-rect"]).split(h);if(4==R.length){R[2]=+R[2]+ +R[0],R[3]=+R[3]+ +R[1];var P=c.clipRect||t._g.doc.createElement("div"),z=P.style;z.clip=t.format("rect({1}px {2}px {3}px {0}px)",R),c.clipRect||(z.position="absolute",z.top=0,z.left=0,z.width=r.paper.width+"px",z.height=r.paper.height+"px",c.parentNode.insertBefore(P,c),P.appendChild(c),c.clipRect=P)}l["clip-rect"]||c.clipRect&&(c.clipRect.style.clip="auto")}if(r.textpath){var D=r.textpath.style;l.font&&(D.font=l.font),l["font-family"]&&(D.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,p)+'"'),l["font-size"]&&(D.fontSize=l["font-size"]),l["font-weight"]&&(D.fontWeight=l["font-weight"]),l["font-style"]&&(D.fontStyle=l["font-style"])}if("arrow-start"in l&&T(x,l["arrow-start"]),"arrow-end"in l&&T(x,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var I=c.getElementsByTagName(u),N=!1;if(I=I&&I[0],!I&&(N=I=F(u)),"image"==r.type&&l.src&&(I.src=l.src),l.fill&&(I.on=!0),null!=I.on&&"none"!=l.fill&&null!==l.fill||(I.on=!1),I.on&&l.fill){var O=n(l.fill).match(t._ISURL);if(O){I.parentNode==c&&c.removeChild(I),I.rotate=!0,I.src=O[1],I.type="tile";var B=r.getBBox(1);I.position=B.x+d+B.y,r._.fillpos=[B.x,B.y],t._preload(O[1],function(){r._.fillsize=[this.offsetWidth,this.offsetHeight]})}else I.color=t.getRGB(l.fill).hex,I.src=p,I.type="solid",t.getRGB(l.fill).error&&(x.type in{circle:1,ellipse:1}||"r"!=n(l.fill).charAt())&&A(x,l.fill,I)&&(f.fill="none",f.gradient=l.fill,I.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var H=((+f["fill-opacity"]+1||2)-1)*((+f.opacity+1||2)-1)*((+t.getRGB(l.fill).o+1||2)-1);H=s(o(H,0),1),I.opacity=H,I.src&&(I.color="none")}c.appendChild(I);var X=c.getElementsByTagName("stroke")&&c.getElementsByTagName("stroke")[0],W=!1;!X&&(W=X=F("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(X.on=!0),("none"==l.stroke||null===l.stroke||null==X.on||0==l.stroke||0==l["stroke-width"])&&(X.on=!1);var Y=t.getRGB(l.stroke);X.on&&l.stroke&&(X.color=Y.hex),H=((+f["stroke-opacity"]+1||2)-1)*((+f.opacity+1||2)-1)*((+Y.o+1||2)-1);var j=.75*(i(l["stroke-width"])||1);if(H=s(o(H,0),1),null==l["stroke-width"]&&(j=f["stroke-width"]),l["stroke-width"]&&(X.weight=j),j&&j<1&&(H*=j)&&(X.weight=1),X.opacity=H,l["stroke-linejoin"]&&(X.joinstyle=l["stroke-linejoin"]||"miter"),X.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(X.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),l["stroke-dasharray"]){var q={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};X.dashstyle=q[e](l["stroke-dasharray"])?q[l["stroke-dasharray"]]:p}W&&c.appendChild(X)}if("text"==x.type){x.paper.canvas.style.display=p;var V=x.paper.span,G=100,U=f.font&&f.font.match(/\d+(?:\.\d*)?(?=px)/);g=V.style,f.font&&(g.font=f.font),f["font-family"]&&(g.fontFamily=f["font-family"]),f["font-weight"]&&(g.fontWeight=f["font-weight"]),f["font-style"]&&(g.fontStyle=f["font-style"]),U=i(f["font-size"]||U&&U[0])||10,g.fontSize=U*G+"px",x.textpath.string&&(V.innerHTML=n(x.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var Z=V.getBoundingClientRect();x.W=f.w=(Z.right-Z.left)/G,x.H=f.h=(Z.bottom-Z.top)/G,x.X=f.x,x.Y=f.y+x.H/2,("x"in l||"y"in l)&&(x.path.v=t.format("m{0},{1}l{2},{1}",a(f.x*b),a(f.y*b),a(f.x*b)+1));for(var $=["x","y","text","font","font-family","font-weight","font-style","font-size"],Q=0,J=$.length;Q<J;Q++)if($[Q]in l){x._.dirty=1;break}switch(f["text-anchor"]){case"start":x.textpath.style["v-text-align"]="left",x.bbx=x.W/2;break;case"end":x.textpath.style["v-text-align"]="right",x.bbx=-x.W/2;break;default:x.textpath.style["v-text-align"]="center",x.bbx=0}x.textpath.style["v-text-kern"]=!0}},A=function(e,a,o){e.attrs=e.attrs||{};var s=(e.attrs,Math.pow),l="linear",u=".5 .5";if(e.attrs.gradient=a,a=n(a).replace(t._radial_gradient,function(t,e,n){return l="radial",e&&n&&(e=i(e),n=i(n),s(e-.5,2)+s(n-.5,2)>.25&&(n=r.sqrt(.25-s(e-.5,2))*(2*(n>.5)-1)+.5),u=e+d+n),p}),a=a.split(/\s*\-\s*/),"linear"==l){var h=a.shift();if(h=-i(h),isNaN(h))return null}var c=t._parseDots(a);
if(!c)return null;if(e=e.shape||e.node,c.length){e.removeChild(o),o.on=!0,o.method="none",o.color=c[0].color,o.color2=c[c.length-1].color;for(var f=[],g=0,v=c.length;g<v;g++)c[g].offset&&f.push(c[g].offset+d+c[g].color);o.colors=f.length?f.join():"0% "+o.color,"radial"==l?(o.type="gradientTitle",o.focus="100%",o.focussize="0 0",o.focusposition=u,o.angle=0):(o.type="gradient",o.angle=(270-h)%360),e.appendChild(o)}return 1},L=function(e,n){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=n,this.matrix=t.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},E=t.el;L.prototype=E,E.constructor=L,E.transform=function(e){if(null==e)return this._.transform;var i,r=this.paper._viewBoxShift,a=r?"s"+[r.scale,r.scale]+"-1-1t"+[r.dx,r.dy]:p;r&&(i=e=n(e).replace(/\.{3}|\u2026/g,this._.transform||p)),t._extractTransform(this,a+e);var o,s=this.matrix.clone(),l=this.skew,u=this.node,h=~n(this.attrs.fill).indexOf("-"),c=!n(this.attrs.fill).indexOf("url(");if(s.translate(-.5,-.5),c||h||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",o=s.split(),h&&o.noRotation||!o.isSimple){u.style.filter=s.toFilter();var f=this.getBBox(),g=this.getBBox(1),v=f.x-g.x,m=f.y-g.y;u.coordorigin=v*-b+d+m*-b,S(this,1,1,v,m,0)}else u.style.filter=p,S(this,o.scalex,o.scaley,o.dx,o.dy,o.rotate);else u.style.filter=p,l.matrix=n(s),l.offset=s.offset();return i&&(this._.transform=i),this},E.rotate=function(t,e,r){if(this.removed)return this;if(null!=t){if(t=n(t).split(h),t.length-1&&(e=i(t[1]),r=i(t[2])),t=i(t[0]),null==r&&(e=r),null==e||null==r){var a=this.getBBox(1);e=a.x+a.width/2,r=a.y+a.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,e,r]])),this}},E.translate=function(t,e){return this.removed?this:(t=n(t).split(h),t.length-1&&(e=i(t[1])),t=i(t[0])||0,e=+e||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=e),this.transform(this._.transform.concat([["t",t,e]])),this)},E.scale=function(t,e,r,a){if(this.removed)return this;if(t=n(t).split(h),t.length-1&&(e=i(t[1]),r=i(t[2]),a=i(t[3]),isNaN(r)&&(r=null),isNaN(a)&&(a=null)),t=i(t[0]),null==e&&(e=t),null==a&&(r=a),null==r||null==a)var o=this.getBBox(1);return r=null==r?o.x+o.width/2:r,a=null==a?o.y+o.height/2:a,this.transform(this._.transform.concat([["s",t,e,r,a]])),this._.dirtyT=1,this},E.hide=function(){return!this.removed&&(this.node.style.display="none"),this},E.show=function(){return!this.removed&&(this.node.style.display=p),this},E._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},E.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),t.eve.unbind("raphael.*.*."+this.id),t._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;this.removed=!0}},E.attr=function(n,i){if(this.removed)return this;if(null==n){var r={};for(var a in this.attrs)this.attrs[e](a)&&(r[a]=this.attrs[a]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==i&&t.is(n,"string")){if(n==u&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var o=n.split(h),s={},l=0,f=o.length;l<f;l++)n=o[l],n in this.attrs?s[n]=this.attrs[n]:t.is(this.paper.customAttributes[n],"function")?s[n]=this.paper.customAttributes[n].def:s[n]=t._availableAttrs[n];return f-1?s:s[o[0]]}if(this.attrs&&null==i&&t.is(n,"array")){for(s={},l=0,f=n.length;l<f;l++)s[n[l]]=this.attr(n[l]);return s}var d;null!=i&&(d={},d[n]=i),null==i&&t.is(n,"object")&&(d=n);for(var p in d)c("raphael.attr."+p+"."+this.id,this,d[p]);if(d){for(p in this.paper.customAttributes)if(this.paper.customAttributes[e](p)&&d[e](p)&&t.is(this.paper.customAttributes[p],"function")){var g=this.paper.customAttributes[p].apply(this,[].concat(d[p]));this.attrs[p]=d[p];for(var v in g)g[e](v)&&(d[v]=g[v])}d.text&&"text"==this.type&&(this.textpath.string=d.text),C(this,d)}return this},E.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&t._tofront(this,this.paper),this},E.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper)),this)},E.insertAfter=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this)},E.insertBefore=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),t._insertbefore(this,e,this.paper),this)},E.blur=function(e){var n=this.node.runtimeStyle,i=n.filter;i=i.replace(m,p),0!==+e?(this.attrs.blur=e,n.filter=i+d+f+".Blur(pixelradius="+(+e||1.5)+")",n.margin=t.format("-{0}px 0 0 -{0}px",a(+e||1.5))):(n.filter=i,n.margin=0,delete this.attrs.blur)},t._engine.path=function(t,e){var n=F("shape");n.style.cssText=y,n.coordsize=b+d+b,n.coordorigin=e.coordorigin;var i=new L(n,e),r={fill:"none",stroke:"#000"};t&&(r.path=t),i.type="path",i.path=[],i.Path=p,C(i,r),e.canvas.appendChild(n);var a=F("skew");return a.on=!0,n.appendChild(a),i.skew=a,i.transform(p),i},t._engine.rect=function(e,n,i,r,a,o){var s=t._rectPath(n,i,r,a,o),l=e.path(s),u=l.attrs;return l.X=u.x=n,l.Y=u.y=i,l.W=u.width=r,l.H=u.height=a,u.r=o,u.path=s,l.type="rect",l},t._engine.ellipse=function(t,e,n,i,r){var a=t.path();a.attrs;return a.X=e-i,a.Y=n-r,a.W=2*i,a.H=2*r,a.type="ellipse",C(a,{cx:e,cy:n,rx:i,ry:r}),a},t._engine.circle=function(t,e,n,i){var r=t.path();r.attrs;return r.X=e-i,r.Y=n-i,r.W=r.H=2*i,r.type="circle",C(r,{cx:e,cy:n,r:i}),r},t._engine.image=function(e,n,i,r,a,o){var s=t._rectPath(i,r,a,o),l=e.path(s).attr({stroke:"none"}),h=l.attrs,c=l.node,f=c.getElementsByTagName(u)[0];return h.src=n,l.X=h.x=i,l.Y=h.y=r,l.W=h.width=a,l.H=h.height=o,h.path=s,l.type="image",f.parentNode==c&&c.removeChild(f),f.rotate=!0,f.src=n,f.type="tile",l._.fillpos=[i,r],l._.fillsize=[a,o],c.appendChild(f),S(l,1,1,0,0,0),l},t._engine.text=function(e,i,r,o){var s=F("shape"),l=F("path"),u=F("textpath");i=i||0,r=r||0,o=o||"",l.v=t.format("m{0},{1}l{2},{1}",a(i*b),a(r*b),a(i*b)+1),l.textpathok=!0,u.string=n(o),u.on=!0,s.style.cssText=y,s.coordsize=b+d+b,s.coordorigin="0 0";var h=new L(s,e),c={fill:"#000",stroke:"none",font:t._availableAttrs.font,text:o};h.shape=s,h.path=l,h.textpath=u,h.type="text",h.attrs.text=n(o),h.attrs.x=i,h.attrs.y=r,h.attrs.w=1,h.attrs.h=1,C(h,c),s.appendChild(u),s.appendChild(l),e.canvas.appendChild(s);var f=F("skew");return f.on=!0,s.appendChild(f),h.skew=f,h.transform(p),h},t._engine.setSize=function(e,n){var i=this.canvas.style;return this.width=e,this.height=n,e==+e&&(e+="px"),n==+n&&(n+="px"),i.width=e,i.height=n,i.clip="rect(0 "+e+" "+n+" 0)",this._viewBox&&t._engine.setViewBox.apply(this,this._viewBox),this},t._engine.setViewBox=function(e,n,i,r,a){t.eve("raphael.setViewBox",this,this._viewBox,[e,n,i,r,a]);var s,l,u=this.width,h=this.height,c=1/o(i/u,r/h);return a&&(s=h/r,l=u/i,i*s<u&&(e-=(u-i*s)/2/s),r*l<h&&(n-=(h-r*l)/2/l)),this._viewBox=[e,n,i,r,!!a],this._viewBoxShift={dx:-e,dy:-n,scale:c},this.forEach(function(t){t.transform("...")}),this};var F;t._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),F=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(t){F=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},t._engine.initWin(t._g.win),t._engine.create=function(){var e=t._getContainer.apply(0,arguments),n=e.container,i=e.height,r=e.width,a=e.x,o=e.y;if(!n)throw new Error("VML container not found.");var s=new t._Paper,l=s.canvas=t._g.doc.createElement("div"),u=l.style;return a=a||0,o=o||0,r=r||512,i=i||342,s.width=r,s.height=i,r==+r&&(r+="px"),i==+i&&(i+="px"),s.coordsize=1e3*b+d+1e3*b,s.coordorigin="0 0",s.span=t._g.doc.createElement("span"),s.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(s.span),u.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",r,i),1==n?(t._g.doc.body.appendChild(l),u.left=a+"px",u.top=o+"px",u.position="absolute"):n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l),s.renderfix=function(){},s},t.prototype.clear=function(){t.eve("raphael.clear",this),this.canvas.innerHTML=p,this.span=t._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},t.prototype.remove=function(){t.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;return!0};var R=t.st;for(var P in E)E[e](P)&&!R[e](P)&&(R[P]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t].apply(n,e)})}}(P))}(window.Raphael),function(){var t,e,n,i,r=[].slice,a=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};e=window.Morris={},t=jQuery,e.EventEmitter=function(){function t(){}return t.prototype.on=function(t,e){return null==this.handlers&&(this.handlers={}),null==this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this},t.prototype.fire=function(){var t,e,n,i,a,o,s;if(n=arguments[0],t=2<=arguments.length?r.call(arguments,1):[],null!=this.handlers&&null!=this.handlers[n]){for(o=this.handlers[n],s=[],i=0,a=o.length;i<a;i++)e=o[i],s.push(e.apply(null,t));return s}},t}(),e.commas=function(t){var e,n,i,r;return null!=t?(i=t<0?"-":"",e=Math.abs(t),n=Math.floor(e).toFixed(0),i+=n.replace(/(?=(?:\d{3})+$)(?!^)/g,","),r=e.toString(),r.length>n.length&&(i+=r.slice(n.length)),i):"-"},e.pad2=function(t){return(t<10?"0":"")+t},e.Grid=function(n){function i(e){this.resizeHandler=a(this.resizeHandler,this);var n=this;if("string"==typeof e.element?this.el=t(document.getElementById(e.element)):this.el=t(e.element),null==this.el||0===this.el.length)throw new Error("Graph container element not found");"static"===this.el.css("position")&&this.el.css("position","relative"),this.options=t.extend({},this.gridDefaults,this.defaults||{},e),"string"==typeof this.options.units&&(this.options.postUnits=e.units),this.raphael=new Raphael(this.el[0]),this.elementWidth=null,this.elementHeight=null,this.dirty=!1,this.selectFrom=null,this.init&&this.init(),this.setData(this.options.data),this.el.bind("mousemove",function(t){var e,i,r,a,o;return i=n.el.offset(),o=t.pageX-i.left,n.selectFrom?(e=n.data[n.hitTest(Math.min(o,n.selectFrom))]._x,r=n.data[n.hitTest(Math.max(o,n.selectFrom))]._x,a=r-e,n.selectionRect.attr({x:e,width:a})):n.fire("hovermove",o,t.pageY-i.top)}),this.el.bind("mouseleave",function(){return n.selectFrom&&(n.selectionRect.hide(),n.selectFrom=null),n.fire("hoverout")}),this.el.bind("touchstart touchmove touchend",function(t){var e,i;return i=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],e=n.el.offset(),n.fire("hovermove",i.pageX-e.left,i.pageY-e.top)}),this.el.bind("click",function(t){var e;return e=n.el.offset(),n.fire("gridclick",t.pageX-e.left,t.pageY-e.top)}),this.options.rangeSelect&&(this.selectionRect=this.raphael.rect(0,0,0,this.el.innerHeight()).attr({fill:this.options.rangeSelectColor,stroke:!1}).toBack().hide(),this.el.bind("mousedown",function(t){var e;return e=n.el.offset(),n.startRange(t.pageX-e.left)}),this.el.bind("mouseup",function(t){var e;return e=n.el.offset(),n.endRange(t.pageX-e.left),n.fire("hovermove",t.pageX-e.left,t.pageY-e.top)})),this.options.resize&&t(window).bind("resize",function(){return null!=n.timeoutId&&window.clearTimeout(n.timeoutId),n.timeoutId=window.setTimeout(n.resizeHandler,100)}),this.el.css("-webkit-tap-highlight-color","rgba(0,0,0,0)"),this.postInit&&this.postInit()}return s(i,n),i.prototype.gridDefaults={dateFormat:null,axes:!0,grid:!0,gridLineColor:"#aaa",gridStrokeWidth:.5,gridTextColor:"#888",gridTextSize:12,gridTextFamily:"sans-serif",gridTextWeight:"normal",hideHover:!1,yLabelFormat:null,xLabelAngle:0,numLines:5,padding:25,parseTime:!0,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666","#663333"],events:[],eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"],rangeSelect:null,rangeSelectColor:"#eef",resize:!1},i.prototype.setData=function(t,n){var i,r,a,o,s,l,u,h,c,f,d,p,g,v,m;return null==n&&(n=!0),this.options.data=t,null==t||0===t.length?(this.data=[],this.raphael.clear(),void(null!=this.hover&&this.hover.hide())):(p=this.cumulative?0:null,g=this.cumulative?0:null,this.options.goals.length>0&&(s=Math.min.apply(Math,this.options.goals),o=Math.max.apply(Math,this.options.goals),g=null!=g?Math.min(g,s):s,p=null!=p?Math.max(p,o):o),this.data=function(){var n,i,o;for(o=[],a=n=0,i=t.length;n<i;a=++n)u=t[a],l={src:u},l.label=u[this.options.xkey],this.options.parseTime?(l.x=e.parseDate(l.label),this.options.dateFormat?l.label=this.options.dateFormat(l.x):"number"==typeof l.label&&(l.label=new Date(l.label).toString())):(l.x=a,this.options.xLabelFormat&&(l.label=this.options.xLabelFormat(l))),c=0,l.y=function(){var t,e,n,i;for(n=this.options.ykeys,i=[],r=t=0,e=n.length;t<e;r=++t)d=n[r],v=u[d],"string"==typeof v&&(v=parseFloat(v)),null!=v&&"number"!=typeof v&&(v=null),null!=v&&(this.cumulative?c+=v:null!=p?(p=Math.max(v,p),g=Math.min(v,g)):p=g=v),this.cumulative&&null!=c&&(p=Math.max(c,p),g=Math.min(c,g)),i.push(v);return i}.call(this),o.push(l);return o}.call(this),this.options.parseTime&&(this.data=this.data.sort(function(t,e){return(t.x>e.x)-(e.x>t.x)})),this.xmin=this.data[0].x,this.xmax=this.data[this.data.length-1].x,this.events=[],this.options.events.length>0&&(this.options.parseTime?this.events=function(){var t,n,r,a;for(r=this.options.events,a=[],t=0,n=r.length;t<n;t++)i=r[t],a.push(e.parseDate(i));return a}.call(this):this.events=this.options.events,this.xmax=Math.max(this.xmax,Math.max.apply(Math,this.events)),this.xmin=Math.min(this.xmin,Math.min.apply(Math,this.events))),this.xmin===this.xmax&&(this.xmin-=1,this.xmax+=1),this.ymin=this.yboundary("min",g),this.ymax=this.yboundary("max",p),this.ymin===this.ymax&&(g&&(this.ymin-=1),this.ymax+=1),(m=this.options.axes)!==!0&&"both"!==m&&"y"!==m&&this.options.grid!==!0||(this.options.ymax===this.gridDefaults.ymax&&this.options.ymin===this.gridDefaults.ymin?(this.grid=this.autoGridLines(this.ymin,this.ymax,this.options.numLines),this.ymin=Math.min(this.ymin,this.grid[0]),this.ymax=Math.max(this.ymax,this.grid[this.grid.length-1])):(h=(this.ymax-this.ymin)/(this.options.numLines-1),this.grid=function(){var t,e,n,i;for(i=[],f=t=e=this.ymin,n=this.ymax;h>0?t<=n:t>=n;f=t+=h)i.push(f);return i}.call(this))),this.dirty=!0,n?this.redraw():void 0)},i.prototype.yboundary=function(t,e){var n,i;return n=this.options["y"+t],"string"==typeof n?"auto"===n.slice(0,4)?n.length>5?(i=parseInt(n.slice(5),10),null==e?i:Math[t](e,i)):null!=e?e:0:parseInt(n,10):n},i.prototype.autoGridLines=function(t,e,n){var i,r,a,o,s,l,u,h,c;return s=e-t,c=Math.floor(Math.log(s)/Math.log(10)),u=Math.pow(10,c),r=Math.floor(t/u)*u,i=Math.ceil(e/u)*u,l=(i-r)/(n-1),1===u&&l>1&&Math.ceil(l)!==l&&(l=Math.ceil(l),i=r+l*(n-1)),r<0&&i>0&&(r=Math.floor(t/l)*l,i=Math.ceil(e/l)*l),l<1?(o=Math.floor(Math.log(l)/Math.log(10)),a=function(){var t,e;for(e=[],h=t=r;l>0?t<=i:t>=i;h=t+=l)e.push(parseFloat(h.toFixed(1-o)));return e}()):a=function(){var t,e;for(e=[],h=t=r;l>0?t<=i:t>=i;h=t+=l)e.push(h);return e}(),a},i.prototype._calc=function(){var t,e,n,i,r,a,o,s;if(r=this.el.width(),n=this.el.height(),(this.elementWidth!==r||this.elementHeight!==n||this.dirty)&&(this.elementWidth=r,this.elementHeight=n,this.dirty=!1,this.left=this.options.padding,this.right=this.elementWidth-this.options.padding,this.top=this.options.padding,this.bottom=this.elementHeight-this.options.padding,(o=this.options.axes)!==!0&&"both"!==o&&"y"!==o||(a=function(){var t,n,i,r;for(i=this.grid,r=[],t=0,n=i.length;t<n;t++)e=i[t],r.push(this.measureText(this.yAxisFormat(e)).width);return r}.call(this),this.left+=Math.max.apply(Math,a)),(s=this.options.axes)!==!0&&"both"!==s&&"x"!==s||(t=function(){var t,e,n;for(n=[],i=t=0,e=this.data.length;0<=e?t<e:t>e;i=0<=e?++t:--t)n.push(this.measureText(this.data[i].text,-this.options.xLabelAngle).height);return n}.call(this),this.bottom-=Math.max.apply(Math,t)),this.width=Math.max(1,this.right-this.left),this.height=Math.max(1,this.bottom-this.top),this.dx=this.width/(this.xmax-this.xmin),this.dy=this.height/(this.ymax-this.ymin),this.calc))return this.calc()},i.prototype.transY=function(t){return this.bottom-(t-this.ymin)*this.dy},i.prototype.transX=function(t){return 1===this.data.length?(this.left+this.right)/2:this.left+(t-this.xmin)*this.dx},i.prototype.redraw=function(){if(this.raphael.clear(),this._calc(),this.drawGrid(),this.drawGoals(),this.drawEvents(),this.draw)return this.draw()},i.prototype.measureText=function(t,e){var n,i;return null==e&&(e=0),i=this.raphael.text(100,100,t).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).rotate(e),n=i.getBBox(),i.remove(),n},i.prototype.yAxisFormat=function(t){return this.yLabelFormat(t)},i.prototype.yLabelFormat=function(t){return"function"==typeof this.options.yLabelFormat?this.options.yLabelFormat(t):""+this.options.preUnits+e.commas(t)+this.options.postUnits},i.prototype.drawGrid=function(){var t,e,n,i,r,a,o,s;if(this.options.grid!==!1||(r=this.options.axes)===!0||"both"===r||"y"===r){for(a=this.grid,s=[],n=0,i=a.length;n<i;n++)t=a[n],e=this.transY(t),(o=this.options.axes)!==!0&&"both"!==o&&"y"!==o||this.drawYAxisLabel(this.left-this.options.padding/2,e,this.yAxisFormat(t)),this.options.grid?s.push(this.drawGridLine("M"+this.left+","+e+"H"+(this.left+this.width))):s.push(void 0);return s}},i.prototype.drawGoals=function(){var t,e,n,i,r,a,o;for(a=this.options.goals,o=[],n=i=0,r=a.length;i<r;n=++i)e=a[n],t=this.options.goalLineColors[n%this.options.goalLineColors.length],o.push(this.drawGoal(e,t));return o},i.prototype.drawEvents=function(){var t,e,n,i,r,a,o;for(a=this.events,o=[],n=i=0,r=a.length;i<r;n=++i)e=a[n],t=this.options.eventLineColors[n%this.options.eventLineColors.length],o.push(this.drawEvent(e,t));return o},i.prototype.drawGoal=function(t,e){return this.raphael.path("M"+this.left+","+this.transY(t)+"H"+this.right).attr("stroke",e).attr("stroke-width",this.options.goalStrokeWidth)},i.prototype.drawEvent=function(t,e){return this.raphael.path("M"+this.transX(t)+","+this.bottom+"V"+this.top).attr("stroke",e).attr("stroke-width",this.options.eventStrokeWidth)},i.prototype.drawYAxisLabel=function(t,e,n){return this.raphael.text(t,e,n).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor).attr("text-anchor","end")},i.prototype.drawGridLine=function(t){return this.raphael.path(t).attr("stroke",this.options.gridLineColor).attr("stroke-width",this.options.gridStrokeWidth)},i.prototype.startRange=function(t){return this.hover.hide(),this.selectFrom=t,this.selectionRect.attr({x:t,width:0}).show()},i.prototype.endRange=function(t){var e,n;if(this.selectFrom)return n=Math.min(this.selectFrom,t),e=Math.max(this.selectFrom,t),this.options.rangeSelect.call(this.el,{start:this.data[this.hitTest(n)].x,end:this.data[this.hitTest(e)].x}),this.selectFrom=null},i.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},i}(e.EventEmitter),e.parseDate=function(t){var e,n,i,r,a,o,s,l,u,h,c;return"number"==typeof t?t:(n=t.match(/^(\d+) Q(\d)$/),r=t.match(/^(\d+)-(\d+)$/),a=t.match(/^(\d+)-(\d+)-(\d+)$/),s=t.match(/^(\d+) W(\d+)$/),l=t.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/),u=t.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/),n?new Date(parseInt(n[1],10),3*parseInt(n[2],10)-1,1).getTime():r?new Date(parseInt(r[1],10),parseInt(r[2],10)-1,1).getTime():a?new Date(parseInt(a[1],10),parseInt(a[2],10)-1,parseInt(a[3],10)).getTime():s?(h=new Date(parseInt(s[1],10),0,1),4!==h.getDay()&&h.setMonth(0,1+(4-h.getDay()+7)%7),h.getTime()+6048e5*parseInt(s[2],10)):l?l[6]?(o=0,"Z"!==l[6]&&(o=60*parseInt(l[8],10)+parseInt(l[9],10),"+"===l[7]&&(o=0-o)),Date.UTC(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10)+o)):new Date(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10)).getTime():u?(c=parseFloat(u[6]),e=Math.floor(c),i=Math.round(1e3*(c-e)),u[8]?(o=0,"Z"!==u[8]&&(o=60*parseInt(u[10],10)+parseInt(u[11],10),"+"===u[9]&&(o=0-o)),Date.UTC(parseInt(u[1],10),parseInt(u[2],10)-1,parseInt(u[3],10),parseInt(u[4],10),parseInt(u[5],10)+o,e,i)):new Date(parseInt(u[1],10),parseInt(u[2],10)-1,parseInt(u[3],10),parseInt(u[4],10),parseInt(u[5],10),e,i).getTime()):new Date(parseInt(t,10),0,1).getTime())},e.Hover=function(){function n(n){null==n&&(n={}),this.options=t.extend({},e.Hover.defaults,n),this.el=t("<div class='"+this.options["class"]+"'></div>"),this.el.hide(),this.options.parent.append(this.el)}return n.defaults={"class":"morris-hover morris-default-style"},n.prototype.update=function(t,e,n){return t?(this.html(t),this.show(),this.moveTo(e,n)):this.hide()},n.prototype.html=function(t){return this.el.html(t)},n.prototype.moveTo=function(t,e){var n,i,r,a,o,s;return o=this.options.parent.innerWidth(),a=this.options.parent.innerHeight(),i=this.el.outerWidth(),n=this.el.outerHeight(),r=Math.min(Math.max(0,t-i/2),o-i),null!=e?(s=e-n-10,s<0&&(s=e+10,s+n>a&&(s=a/2-n/2))):s=a/2-n/2,this.el.css({left:r+"px",top:parseInt(s)+"px"})},n.prototype.show=function(){return this.el.show()},n.prototype.hide=function(){return this.el.hide()},n}(),e.Line=function(t){function n(t){return this.hilight=a(this.hilight,this),this.onHoverOut=a(this.onHoverOut,this),this.onHoverMove=a(this.onHoverMove,this),this.onGridClick=a(this.onGridClick,this),this instanceof e.Line?void n.__super__.constructor.call(this,t):new e.Line(t)}return s(n,t),n.prototype.init=function(){if("always"!==this.options.hideHover)return this.hover=new e.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)},n.prototype.defaults={lineWidth:3,pointSize:4,lineColors:["#0b62a4","#7A92A3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],pointStrokeWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:!0,xLabels:"auto",xLabelFormat:null,xLabelMargin:24,hideHover:!1},n.prototype.calc=function(){return this.calcPoints(),this.generatePaths()},n.prototype.calcPoints=function(){var t,e,n,i,r,a;for(r=this.data,a=[],n=0,i=r.length;n<i;n++)t=r[n],t._x=this.transX(t.x),t._y=function(){var n,i,r,a;for(r=t.y,a=[],n=0,i=r.length;n<i;n++)e=r[n],null!=e?a.push(this.transY(e)):a.push(e);return a}.call(this),a.push(t._ymax=Math.min.apply(Math,[this.bottom].concat(function(){var n,i,r,a;for(r=t._y,a=[],n=0,i=r.length;n<i;n++)e=r[n],null!=e&&a.push(e);return a}())));return a},n.prototype.hitTest=function(t){var e,n,i,r,a;if(0===this.data.length)return null;for(a=this.data.slice(1),e=i=0,r=a.length;i<r&&(n=a[e],!(t<(n._x+this.data[e]._x)/2));e=++i);return e},n.prototype.onGridClick=function(t,e){var n;return n=this.hitTest(t),this.fire("click",n,this.data[n].src,t,e)},n.prototype.onHoverMove=function(t){var e;return e=this.hitTest(t),this.displayHoverForRow(e)},n.prototype.onHoverOut=function(){if(this.options.hideHover!==!1)return this.displayHoverForRow(null)},n.prototype.displayHoverForRow=function(t){var e;return null!=t?((e=this.hover).update.apply(e,this.hoverContentForRow(t)),this.hilight(t)):(this.hover.hide(),this.hilight())},n.prototype.hoverContentForRow=function(t){var e,n,i,r,a,o,s;for(i=this.data[t],e="<div class='morris-hover-row-label'>"+i.label+"</div>",s=i.y,n=a=0,o=s.length;a<o;n=++a)r=s[n],e+="<div class='morris-hover-point' style='color: "+this.colorFor(i,n,"label")+"'>\n  "+this.options.labels[n]+":\n  "+this.yLabelFormat(r)+"\n</div>";return"function"==typeof this.options.hoverCallback&&(e=this.options.hoverCallback(t,this.options,e,i.src)),[e,i._x,i._ymax]},n.prototype.generatePaths=function(){var t,n,i,r;return this.paths=function(){var a,o,s,u;for(u=[],n=a=0,o=this.options.ykeys.length;0<=o?a<o:a>o;n=0<=o?++a:--a)r="boolean"==typeof this.options.smooth?this.options.smooth:(s=this.options.ykeys[n],l.call(this.options.smooth,s)>=0),t=function(){var t,e,r,a;for(r=this.data,a=[],t=0,e=r.length;t<e;t++)i=r[t],void 0!==i._y[n]&&a.push({x:i._x,y:i._y[n]});return a}.call(this),t.length>1?u.push(e.Line.createPath(t,r,this.bottom)):u.push(null);return u}.call(this)},n.prototype.draw=function(){var t;if((t=this.options.axes)!==!0&&"both"!==t&&"x"!==t||this.drawXAxis(),this.drawSeries(),this.options.hideHover===!1)return this.displayHoverForRow(this.data.length-1)},n.prototype.drawXAxis=function(){var t,n,i,r,a,o,s,l,u,h,c=this;for(s=this.bottom+this.options.padding/2,a=null,r=null,t=function(t,e){var n,i,o,l,u;return n=c.drawXAxisLabel(c.transX(e),s,t),u=n.getBBox(),n.transform("r"+-c.options.xLabelAngle),i=n.getBBox(),n.transform("t0,"+i.height/2+"..."),0!==c.options.xLabelAngle&&(l=-.5*u.width*Math.cos(c.options.xLabelAngle*Math.PI/180),n.transform("t"+l+",0...")),i=n.getBBox(),(null==a||a>=i.x+i.width||null!=r&&r>=i.x)&&i.x>=0&&i.x+i.width<c.el.width()?(0!==c.options.xLabelAngle&&(o=1.25*c.options.gridTextSize/Math.sin(c.options.xLabelAngle*Math.PI/180),r=i.x-o),a=i.x-c.options.xLabelMargin):n.remove()},i=this.options.parseTime?1===this.data.length&&"auto"===this.options.xLabels?[[this.data[0].label,this.data[0].x]]:e.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat):function(){var t,e,n,i;for(n=this.data,i=[],t=0,e=n.length;t<e;t++)o=n[t],i.push([o.label,o.x]);return i}.call(this),i.reverse(),h=[],l=0,u=i.length;l<u;l++)n=i[l],h.push(t(n[0],n[1]));return h},n.prototype.drawSeries=function(){var t,e,n,i,r,a;for(this.seriesPoints=[],t=e=i=this.options.ykeys.length-1;i<=0?e<=0:e>=0;t=i<=0?++e:--e)this._drawLineFor(t);for(a=[],t=n=r=this.options.ykeys.length-1;r<=0?n<=0:n>=0;t=r<=0?++n:--n)a.push(this._drawPointFor(t));return a},n.prototype._drawPointFor=function(t){var e,n,i,r,a,o;for(this.seriesPoints[t]=[],a=this.data,o=[],i=0,r=a.length;i<r;i++)n=a[i],e=null,null!=n._y[t]&&(e=this.drawLinePoint(n._x,n._y[t],this.colorFor(n,t,"point"),t)),o.push(this.seriesPoints[t].push(e));return o},n.prototype._drawLineFor=function(t){var e;if(e=this.paths[t],null!==e)return this.drawLinePath(e,this.colorFor(null,t,"line"),t)},n.createPath=function(t,n,i){var r,a,o,s,l,u,h,c,f,d,p,g,v,m;for(h="",n&&(o=e.Line.gradients(t)),c={y:null},s=v=0,m=t.length;v<m;s=++v)r=t[s],null!=r.y&&(null!=c.y?n?(a=o[s],u=o[s-1],l=(r.x-c.x)/4,f=c.x+l,p=Math.min(i,c.y+l*u),d=r.x-l,g=Math.min(i,r.y-l*a),h+="C"+f+","+p+","+d+","+g+","+r.x+","+r.y):h+="L"+r.x+","+r.y:n&&null==o[s]||(h+="M"+r.x+","+r.y)),c=r;return h},n.gradients=function(t){var e,n,i,r,a,o,s,l;for(n=function(t,e){return(t.y-e.y)/(t.x-e.x)},l=[],i=o=0,s=t.length;o<s;i=++o)e=t[i],null!=e.y?(r=t[i+1]||{y:null},a=t[i-1]||{y:null},null!=a.y&&null!=r.y?l.push(n(a,r)):null!=a.y?l.push(n(a,e)):null!=r.y?l.push(n(e,r)):l.push(null)):l.push(null);return l},n.prototype.hilight=function(t){var e,n,i,r,a;if(null!==this.prevHilight&&this.prevHilight!==t)for(e=n=0,r=this.seriesPoints.length-1;0<=r?n<=r:n>=r;e=0<=r?++n:--n)this.seriesPoints[e][this.prevHilight]&&this.seriesPoints[e][this.prevHilight].animate(this.pointShrinkSeries(e));if(null!==t&&this.prevHilight!==t)for(e=i=0,a=this.seriesPoints.length-1;0<=a?i<=a:i>=a;e=0<=a?++i:--i)this.seriesPoints[e][t]&&this.seriesPoints[e][t].animate(this.pointGrowSeries(e));return this.prevHilight=t},n.prototype.colorFor=function(t,e,n){return"function"==typeof this.options.lineColors?this.options.lineColors.call(this,t,e,n):"point"===n?this.options.pointFillColors[e%this.options.pointFillColors.length]||this.options.lineColors[e%this.options.lineColors.length]:this.options.lineColors[e%this.options.lineColors.length]},n.prototype.drawXAxisLabel=function(t,e,n){return this.raphael.text(t,e,n).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},n.prototype.drawLinePath=function(t,e,n){return this.raphael.path(t).attr("stroke",e).attr("stroke-width",this.lineWidthForSeries(n))},n.prototype.drawLinePoint=function(t,e,n,i){return this.raphael.circle(t,e,this.pointSizeForSeries(i)).attr("fill",n).attr("stroke-width",this.pointStrokeWidthForSeries(i)).attr("stroke",this.pointStrokeColorForSeries(i))},n.prototype.pointStrokeWidthForSeries=function(t){return this.options.pointStrokeWidths[t%this.options.pointStrokeWidths.length]},n.prototype.pointStrokeColorForSeries=function(t){return this.options.pointStrokeColors[t%this.options.pointStrokeColors.length]},n.prototype.lineWidthForSeries=function(t){return this.options.lineWidth instanceof Array?this.options.lineWidth[t%this.options.lineWidth.length]:this.options.lineWidth},n.prototype.pointSizeForSeries=function(t){return this.options.pointSize instanceof Array?this.options.pointSize[t%this.options.pointSize.length]:this.options.pointSize},n.prototype.pointGrowSeries=function(t){return Raphael.animation({r:this.pointSizeForSeries(t)+3},25,"linear")},n.prototype.pointShrinkSeries=function(t){return Raphael.animation({r:this.pointSizeForSeries(t)},25,"linear")},n}(e.Grid),e.labelSeries=function(n,i,r,a,o){var s,l,u,h,c,f,d,p,g,v,m;if(u=200*(i-n)/r,l=new Date(n),d=e.LABEL_SPECS[a],void 0===d)for(m=e.AUTO_LABEL_ORDER,g=0,v=m.length;g<v;g++)if(h=m[g],f=e.LABEL_SPECS[h],u>=f.span){d=f;break}for(void 0===d&&(d=e.LABEL_SPECS.second),o&&(d=t.extend({},d,{fmt:o})),s=d.start(l),c=[];(p=s.getTime())<=i;)p>=n&&c.push([d.fmt(s),p]),d.incr(s);return c},n=function(t){return{span:60*t*1e3,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours())},fmt:function(t){return""+e.pad2(t.getHours())+":"+e.pad2(t.getMinutes())},incr:function(e){return e.setUTCMinutes(e.getUTCMinutes()+t)}}},i=function(t){return{span:1e3*t,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes())},fmt:function(t){return""+e.pad2(t.getHours())+":"+e.pad2(t.getMinutes())+":"+e.pad2(t.getSeconds())},incr:function(e){return e.setUTCSeconds(e.getUTCSeconds()+t)}}},e.LABEL_SPECS={decade:{span:1728e8,start:function(t){return new Date(t.getFullYear()-t.getFullYear()%10,0,1)},fmt:function(t){return""+t.getFullYear()},incr:function(t){return t.setFullYear(t.getFullYear()+10)}},year:{span:1728e7,start:function(t){return new Date(t.getFullYear(),0,1)},fmt:function(t){return""+t.getFullYear()},incr:function(t){return t.setFullYear(t.getFullYear()+1)}},month:{span:24192e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),1)},fmt:function(t){return""+t.getFullYear()+"-"+e.pad2(t.getMonth()+1)},incr:function(t){return t.setMonth(t.getMonth()+1)}},week:{span:6048e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},fmt:function(t){return""+t.getFullYear()+"-"+e.pad2(t.getMonth()+1)+"-"+e.pad2(t.getDate())},incr:function(t){return t.setDate(t.getDate()+7)}},day:{span:864e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},fmt:function(t){return""+t.getFullYear()+"-"+e.pad2(t.getMonth()+1)+"-"+e.pad2(t.getDate())},incr:function(t){return t.setDate(t.getDate()+1)}},hour:n(60),"30min":n(30),"15min":n(15),"10min":n(10),"5min":n(5),minute:n(1),"30sec":i(30),"15sec":i(15),"10sec":i(10),"5sec":i(5),second:i(1)},e.AUTO_LABEL_ORDER=["decade","year","month","week","day","hour","30min","15min","10min","5min","minute","30sec","15sec","10sec","5sec","second"],
e.Area=function(n){function i(n){var a;return this instanceof e.Area?(a=t.extend({},r,n),this.cumulative=!a.behaveLikeLine,"auto"===a.fillOpacity&&(a.fillOpacity=a.behaveLikeLine?.8:1),void i.__super__.constructor.call(this,a)):new e.Area(n)}var r;return s(i,n),r={fillOpacity:"auto",behaveLikeLine:!1},i.prototype.calcPoints=function(){var t,e,n,i,r,a,o;for(a=this.data,o=[],i=0,r=a.length;i<r;i++)t=a[i],t._x=this.transX(t.x),e=0,t._y=function(){var i,r,a,o;for(a=t.y,o=[],i=0,r=a.length;i<r;i++)n=a[i],this.options.behaveLikeLine?o.push(this.transY(n)):(e+=n||0,o.push(this.transY(e)));return o}.call(this),o.push(t._ymax=Math.max.apply(Math,t._y));return o},i.prototype.drawSeries=function(){var t,e,n,i,r,a,o,s;for(this.seriesPoints=[],e=this.options.behaveLikeLine?function(){a=[];for(var t=0,e=this.options.ykeys.length-1;0<=e?t<=e:t>=e;0<=e?t++:t--)a.push(t);return a}.apply(this):function(){o=[];for(var t=r=this.options.ykeys.length-1;r<=0?t<=0:t>=0;r<=0?t++:t--)o.push(t);return o}.apply(this),s=[],n=0,i=e.length;n<i;n++)t=e[n],this._drawFillFor(t),this._drawLineFor(t),s.push(this._drawPointFor(t));return s},i.prototype._drawFillFor=function(t){var e;if(e=this.paths[t],null!==e)return e+="L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+","+this.bottom+"Z",this.drawFilledPath(e,this.fillForSeries(t))},i.prototype.fillForSeries=function(t){var e;return e=Raphael.rgb2hsl(this.colorFor(this.data[t],t,"line")),Raphael.hsl(e.h,this.options.behaveLikeLine?.9*e.s:.75*e.s,Math.min(.98,this.options.behaveLikeLine?1.2*e.l:1.25*e.l))},i.prototype.drawFilledPath=function(t,e){return this.raphael.path(t).attr("fill",e).attr("fill-opacity",this.options.fillOpacity).attr("stroke","none")},i}(e.Line),e.Bar=function(n){function i(n){return this.onHoverOut=a(this.onHoverOut,this),this.onHoverMove=a(this.onHoverMove,this),this.onGridClick=a(this.onGridClick,this),this instanceof e.Bar?void i.__super__.constructor.call(this,t.extend({},n,{parseTime:!1})):new e.Bar(n)}return s(i,n),i.prototype.init=function(){if(this.cumulative=this.options.stacked,"always"!==this.options.hideHover)return this.hover=new e.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)},i.prototype.defaults={barSizeRatio:.75,barGap:3,barColors:["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],barOpacity:1,barRadius:[0,0,0,0],xLabelMargin:50},i.prototype.calc=function(){var t;if(this.calcBars(),this.options.hideHover===!1)return(t=this.hover).update.apply(t,this.hoverContentForRow(this.data.length-1))},i.prototype.calcBars=function(){var t,e,n,i,r,a,o;for(a=this.data,o=[],t=i=0,r=a.length;i<r;t=++i)e=a[t],e._x=this.left+this.width*(t+.5)/this.data.length,o.push(e._y=function(){var t,i,r,a;for(r=e.y,a=[],t=0,i=r.length;t<i;t++)n=r[t],null!=n?a.push(this.transY(n)):a.push(null);return a}.call(this));return o},i.prototype.draw=function(){var t;return(t=this.options.axes)!==!0&&"both"!==t&&"x"!==t||this.drawXAxis(),this.drawSeries()},i.prototype.drawXAxis=function(){var t,e,n,i,r,a,o,s,l,u,h,c,f;for(u=this.bottom+(this.options.xAxisLabelTopPadding||this.options.padding/2),o=null,a=null,f=[],t=h=0,c=this.data.length;0<=c?h<c:h>c;t=0<=c?++h:--h)s=this.data[this.data.length-1-t],e=this.drawXAxisLabel(s._x,u,s.label),l=e.getBBox(),e.transform("r"+-this.options.xLabelAngle),n=e.getBBox(),e.transform("t0,"+n.height/2+"..."),0!==this.options.xLabelAngle&&(r=-.5*l.width*Math.cos(this.options.xLabelAngle*Math.PI/180),e.transform("t"+r+",0...")),(null==o||o>=n.x+n.width||null!=a&&a>=n.x)&&n.x>=0&&n.x+n.width<this.el.width()?(0!==this.options.xLabelAngle&&(i=1.25*this.options.gridTextSize/Math.sin(this.options.xLabelAngle*Math.PI/180),a=n.x-i),f.push(o=n.x-this.options.xLabelMargin)):f.push(e.remove());return f},i.prototype.drawSeries=function(){var t,e,n,i,r,a,o,s,l,u,h,c,f,d,p;return n=this.width/this.options.data.length,s=this.options.stacked?1:this.options.ykeys.length,t=(n*this.options.barSizeRatio-this.options.barGap*(s-1))/s,this.options.barSize&&(t=Math.min(t,this.options.barSize)),c=n-t*s-this.options.barGap*(s-1),o=c/2,p=this.ymin<=0&&this.ymax>=0?this.transY(0):null,this.bars=function(){var s,c,g,v;for(g=this.data,v=[],i=s=0,c=g.length;s<c;i=++s)l=g[i],r=0,v.push(function(){var s,c,g,v;for(g=l._y,v=[],u=s=0,c=g.length;s<c;u=++s)d=g[u],null!==d?(p?(f=Math.min(d,p),e=Math.max(d,p)):(f=d,e=this.bottom),a=this.left+i*n+o,this.options.stacked||(a+=u*(t+this.options.barGap)),h=e-f,this.options.verticalGridCondition&&this.options.verticalGridCondition(l.x)&&this.drawBar(this.left+i*n,this.top,n,Math.abs(this.top-this.bottom),this.options.verticalGridColor,this.options.verticalGridOpacity,this.options.barRadius),this.options.stacked&&(f-=r),this.drawBar(a,f,t,h,this.colorFor(l,u,"bar"),this.options.barOpacity,this.options.barRadius),v.push(r+=h)):v.push(null);return v}.call(this));return v}.call(this)},i.prototype.colorFor=function(t,e,n){var i,r;return"function"==typeof this.options.barColors?(i={x:t.x,y:t.y[e],label:t.label},r={index:e,key:this.options.ykeys[e],label:this.options.labels[e]},this.options.barColors.call(this,i,r,n)):this.options.barColors[e%this.options.barColors.length]},i.prototype.hitTest=function(t){return 0===this.data.length?null:(t=Math.max(Math.min(t,this.right),this.left),Math.min(this.data.length-1,Math.floor((t-this.left)/(this.width/this.data.length))))},i.prototype.onGridClick=function(t,e){var n;return n=this.hitTest(t),this.fire("click",n,this.data[n].src,t,e)},i.prototype.onHoverMove=function(t){var e,n;return e=this.hitTest(t),(n=this.hover).update.apply(n,this.hoverContentForRow(e))},i.prototype.onHoverOut=function(){if(this.options.hideHover!==!1)return this.hover.hide()},i.prototype.hoverContentForRow=function(t){var e,n,i,r,a,o,s,l;for(i=this.data[t],e="<div class='morris-hover-row-label'>"+i.label+"</div>",l=i.y,n=o=0,s=l.length;o<s;n=++o)a=l[n],e+="<div class='morris-hover-point' style='color: "+this.colorFor(i,n,"label")+"'>\n  "+this.options.labels[n]+":\n  "+this.yLabelFormat(a)+"\n</div>";return"function"==typeof this.options.hoverCallback&&(e=this.options.hoverCallback(t,this.options,e,i.src)),r=this.left+(t+.5)*this.width/this.data.length,[e,r]},i.prototype.drawXAxisLabel=function(t,e,n){var i;return i=this.raphael.text(t,e,n).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},i.prototype.drawBar=function(t,e,n,i,r,a,o){var s,l;return s=Math.max.apply(Math,o),l=0===s||s>i?this.raphael.rect(t,e,n,i):this.raphael.path(this.roundedRect(t,e,n,i,o)),l.attr("fill",r).attr("fill-opacity",a).attr("stroke","none")},i.prototype.roundedRect=function(t,e,n,i,r){return null==r&&(r=[0,0,0,0]),["M",t,r[0]+e,"Q",t,e,t+r[0],e,"L",t+n-r[1],e,"Q",t+n,e,t+n,e+r[1],"L",t+n,e+i-r[2],"Q",t+n,e+i,t+n-r[2],e+i,"L",t+r[3],e+i,"Q",t,e+i,t,e+i-r[3],"Z"]},i}(e.Grid),e.Donut=function(n){function i(n){this.resizeHandler=a(this.resizeHandler,this),this.select=a(this.select,this),this.click=a(this.click,this);var i=this;if(!(this instanceof e.Donut))return new e.Donut(n);if(this.options=t.extend({},this.defaults,n),"string"==typeof n.element?this.el=t(document.getElementById(n.element)):this.el=t(n.element),null===this.el||0===this.el.length)throw new Error("Graph placeholder not found.");void 0!==n.data&&0!==n.data.length&&(this.raphael=new Raphael(this.el[0]),this.options.resize&&t(window).bind("resize",function(){return null!=i.timeoutId&&window.clearTimeout(i.timeoutId),i.timeoutId=window.setTimeout(i.resizeHandler,100)}),this.setData(n.data))}return s(i,n),i.prototype.defaults={colors:["#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"],backgroundColor:"#FFFFFF",labelColor:"#000000",formatter:e.commas,resize:!1},i.prototype.redraw=function(){var t,n,i,r,a,o,s,l,u,h,c,f,d,p,g,v,m,x,y,b,_,w,M;for(this.raphael.clear(),n=this.el.width()/2,i=this.el.height()/2,d=(Math.min(n,i)-10)/3,c=0,b=this.values,p=0,m=b.length;p<m;p++)f=b[p],c+=f;for(l=5/(2*d),t=1.9999*Math.PI-l*this.data.length,o=0,a=0,this.segments=[],_=this.values,r=g=0,x=_.length;g<x;r=++g)f=_[r],u=o+l+t*(f/c),h=new e.DonutSegment(n,i,2*d,d,o,u,this.data[r].color||this.options.colors[a%this.options.colors.length],this.options.backgroundColor,a,this.raphael),h.render(),this.segments.push(h),h.on("hover",this.select),h.on("click",this.click),o=u,a+=1;for(this.text1=this.drawEmptyDonutLabel(n,i-10,this.options.labelColor,15,800),this.text2=this.drawEmptyDonutLabel(n,i+10,this.options.labelColor,14),s=Math.max.apply(Math,this.values),a=0,w=this.values,M=[],v=0,y=w.length;v<y;v++){if(f=w[v],f===s){this.select(a);break}M.push(a+=1)}return M},i.prototype.setData=function(t){var e;return this.data=t,this.values=function(){var t,n,i,r;for(i=this.data,r=[],t=0,n=i.length;t<n;t++)e=i[t],r.push(parseFloat(e.value));return r}.call(this),this.redraw()},i.prototype.click=function(t){return this.fire("click",t,this.data[t])},i.prototype.select=function(t){var e,n,i,r,a,o;for(o=this.segments,r=0,a=o.length;r<a;r++)n=o[r],n.deselect();return i=this.segments[t],i.select(),e=this.data[t],this.setLabels(e.label,this.options.formatter(e.value,e))},i.prototype.setLabels=function(t,e){var n,i,r,a,o,s,l,u;return n=2*(Math.min(this.el.width()/2,this.el.height()/2)-10)/3,a=1.8*n,r=n/2,i=n/3,this.text1.attr({text:t,transform:""}),o=this.text1.getBBox(),s=Math.min(a/o.width,r/o.height),this.text1.attr({transform:"S"+s+","+s+","+(o.x+o.width/2)+","+(o.y+o.height)}),this.text2.attr({text:e,transform:""}),l=this.text2.getBBox(),u=Math.min(a/l.width,i/l.height),this.text2.attr({transform:"S"+u+","+u+","+(l.x+l.width/2)+","+l.y})},i.prototype.drawEmptyDonutLabel=function(t,e,n,i,r){var a;return a=this.raphael.text(t,e,"").attr("font-size",i).attr("fill",n),null!=r&&a.attr("font-weight",r),a},i.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},i}(e.EventEmitter),e.DonutSegment=function(t){function e(t,e,n,i,r,o,s,l,u,h){this.cx=t,this.cy=e,this.inner=n,this.outer=i,this.color=s,this.backgroundColor=l,this.index=u,this.raphael=h,this.deselect=a(this.deselect,this),this.select=a(this.select,this),this.sin_p0=Math.sin(r),this.cos_p0=Math.cos(r),this.sin_p1=Math.sin(o),this.cos_p1=Math.cos(o),this.is_long=o-r>Math.PI?1:0,this.path=this.calcSegment(this.inner+3,this.inner+this.outer-5),this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer),this.hilight=this.calcArc(this.inner)}return s(e,t),e.prototype.calcArcPoints=function(t){return[this.cx+t*this.sin_p0,this.cy+t*this.cos_p0,this.cx+t*this.sin_p1,this.cy+t*this.cos_p1]},e.prototype.calcSegment=function(t,e){var n,i,r,a,o,s,l,u,h,c;return h=this.calcArcPoints(t),n=h[0],r=h[1],i=h[2],a=h[3],c=this.calcArcPoints(e),o=c[0],l=c[1],s=c[2],u=c[3],"M"+n+","+r+("A"+t+","+t+",0,"+this.is_long+",0,"+i+","+a)+("L"+s+","+u)+("A"+e+","+e+",0,"+this.is_long+",1,"+o+","+l)+"Z"},e.prototype.calcArc=function(t){var e,n,i,r,a;return a=this.calcArcPoints(t),e=a[0],i=a[1],n=a[2],r=a[3],"M"+e+","+i+("A"+t+","+t+",0,"+this.is_long+",0,"+n+","+r)},e.prototype.render=function(){var t=this;return this.arc=this.drawDonutArc(this.hilight,this.color),this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return t.fire("hover",t.index)},function(){return t.fire("click",t.index)})},e.prototype.drawDonutArc=function(t,e){return this.raphael.path(t).attr({stroke:e,"stroke-width":2,opacity:0})},e.prototype.drawDonutSegment=function(t,e,n,i,r){return this.raphael.path(t).attr({fill:e,stroke:n,"stroke-width":3}).hover(i).click(r)},e.prototype.select=function(){if(!this.selected)return this.seg.animate({path:this.selectedPath},150,"<>"),this.arc.animate({opacity:1},150,"<>"),this.selected=!0},e.prototype.deselect=function(){if(this.selected)return this.seg.animate({path:this.path},150,"<>"),this.arc.animate({opacity:0},150,"<>"),this.selected=!1},e}(e.EventEmitter)}.call(this),d3=function(){function t(t){return null!=t&&!isNaN(t)}function e(t){return t.length}function n(t){for(var e=1;t*e%1;)e*=10;return e}function i(t,e){try{for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}catch(n){t.prototype=e}}function r(){}function a(){}function o(t,e,n){return function(){var i=n.apply(e,arguments);return i===e?t:i}}function s(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.substring(1);for(var n=0,i=Fa.length;i>n;++n){var r=Fa[n]+e;if(r in t)return r}}function l(){}function u(){}function h(t){function e(){for(var e,i=n,r=-1,a=i.length;++r<a;)(e=i[r].on)&&e.apply(this,arguments);return t}var n=[],i=new r;return e.on=function(e,r){var a,o=i.get(e);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),i.remove(e)),r&&n.push(i.set(e,{on:r})),t)},e}function c(){ma.event.preventDefault()}function f(){for(var t,e=ma.event;t=e.sourceEvent;)e=t;return e}function d(t){for(var e=new u,n=0,i=arguments.length;++n<i;)e[arguments[n]]=h(e);return e.of=function(n,i){return function(r){try{var a=r.sourceEvent=ma.event;r.target=t,ma.event=r,e[r.type].apply(n,i)}finally{ma.event=a}}},e}function p(t){return Pa(t,Oa),t}function g(t){return"function"==typeof t?t:function(){return za(t,this)}}function v(t){return"function"==typeof t?t:function(){return Da(t,this)}}function m(t,e){function n(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function a(){this.setAttributeNS(t.space,t.local,e)}function o(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=ma.ns.qualify(t),null==e?t.local?i:n:"function"==typeof e?t.local?s:o:t.local?a:r}function x(t){return t.trim().replace(/\s+/g," ")}function y(t){return new RegExp("(?:^|\\s+)"+ma.requote(t)+"(?:\\s+|$)","g")}function b(t,e){function n(){for(var n=-1;++n<r;)t[n](this,e)}function i(){for(var n=-1,i=e.apply(this,arguments);++n<r;)t[n](this,i)}t=t.trim().split(/\s+/).map(_);var r=t.length;return"function"==typeof e?i:n}function _(t){var e=y(t);return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);var r=n.getAttribute("class")||"";i?(e.lastIndex=0,e.test(r)||n.setAttribute("class",x(r+" "+t))):n.setAttribute("class",x(r.replace(e," ")))}}function w(t,e,n){function i(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,n)}function a(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}return null==e?i:"function"==typeof e?a:r}function M(t,e){function n(){delete this[t]}function i(){this[t]=e}function r(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?r:i}function k(t){return"function"==typeof t?t:(t=ma.ns.qualify(t)).local?function(){return ba.createElementNS(t.space,t.local)}:function(){return ba.createElementNS(this.namespaceURI,t)}}function S(t){return{__data__:t}}function T(t){return function(){return Na(this,t)}}function C(t){return arguments.length||(t=ma.ascending),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function A(t,e){for(var n=0,i=t.length;i>n;n++)for(var r,a=t[n],o=0,s=a.length;s>o;o++)(r=a[o])&&e(r,o,n);return t}function L(t){return Pa(t,Ha),t}function E(t){var e,n;return function(i,r,a){var o,s=t[a].update,l=s.length;for(a!=n&&(n=a,e=0),r>=e&&(e=r+1);!(o=s[e])&&++e<l;);return o}}function F(){var t=this.__transition__;t&&++t.active}function R(t,e,n){function i(){var e=this[o];e&&(this.removeEventListener(t,e,e.$),delete this[o])}function r(){var r=u(e,ya(arguments));i.call(this),this.addEventListener(t,this[o]=r,r.$=n),r._=e}function a(){var e,n=new RegExp("^__on([^.]+)"+ma.requote(t)+"$");for(var i in this)if(e=i.match(n)){var r=this[i];this.removeEventListener(e[1],r,r.$),delete this[i]}}var o="__on"+t,s=t.indexOf("."),u=P;s>0&&(t=t.substring(0,s));var h=Wa.get(t);return h&&(t=h,u=z),s?e?r:i:e?l:a}function P(t,e){return function(n){var i=ma.event;ma.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{ma.event=i}}}function z(t,e){var n=P(t,e);return function(t){var e=this,i=t.relatedTarget;i&&(i===e||8&i.compareDocumentPosition(e))||n.call(e,t)}}function D(){var t=".dragsuppress-"+ ++ja,e="touchmove"+t,n="selectstart"+t,i="dragstart"+t,r="click"+t,a=ma.select(wa).on(e,c).on(n,c).on(i,c),o=_a.style,s=o[Ya];return o[Ya]="none",function(e){function n(){a.on(r,null)}a.on(t,null),o[Ya]=s,e&&(a.on(r,function(){c(),n()},!0),setTimeout(n,0))}}function I(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(0>qa&&(wa.scrollX||wa.scrollY)){n=ma.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var r=n[0][0].getScreenCTM();qa=!(r.f||r.e),n.remove()}return qa?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function N(t){return t>0?1:0>t?-1:0}function O(t){return t>1?0:-1>t?Va:Math.acos(t)}function B(t){return t>1?Ua:-1>t?-Ua:Math.asin(t)}function H(t){return((t=Math.exp(t))-1/t)/2}function X(t){return((t=Math.exp(t))+1/t)/2}function W(t){return((t=Math.exp(2*t))-1)/(t+1)}function Y(t){return(t=Math.sin(t/2))*t}function j(){}function q(t,e,n){return new V(t,e,n)}function V(t,e,n){this.h=t,this.s=e,this.l=n}function G(t,e,n){function i(t){return t>360?t-=360:0>t&&(t+=360),60>t?a+(o-a)*t/60:180>t?o:240>t?a+(o-a)*(240-t)/60:a}function r(t){return Math.round(255*i(t))}var a,o;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+e):n+e-n*e,a=2*n-o,ot(r(t+120),r(t),r(t-120))}function U(t,e,n){return new Z(t,e,n)}function Z(t,e,n){this.h=t,this.c=e,this.l=n}function $(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),Q(n,Math.cos(t*=Qa)*e,Math.sin(t)*e)}function Q(t,e,n){return new J(t,e,n)}function J(t,e,n){this.l=t,this.a=e,this.b=n}function K(t,e,n){var i=(t+16)/116,r=i+e/500,a=i-n/200;return r=et(r)*lo,i=et(i)*uo,a=et(a)*ho,ot(it(3.2404542*r-1.5371385*i-.4985314*a),it(-.969266*r+1.8760108*i+.041556*a),it(.0556434*r-.2040259*i+1.0572252*a))}function tt(t,e,n){return t>0?U(Math.atan2(n,e)*Ja,Math.sqrt(e*e+n*n),t):U(NaN,NaN,t)}function et(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function nt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function it(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function rt(t){return ot(t>>16,255&t>>8,255&t)}function at(t){return rt(t)+""}function ot(t,e,n){return new st(t,e,n)}function st(t,e,n){this.r=t,this.g=e,this.b=n}function lt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ut(t,e,n){var i,r,a,o=0,s=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(t))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(dt(r[0]),dt(r[1]),dt(r[2]))}return(a=po.get(t))?e(a.r,a.g,a.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(o=t.charAt(1),o+=o,s=t.charAt(2),s+=s,l=t.charAt(3),l+=l):7===t.length&&(o=t.substring(1,3),s=t.substring(3,5),l=t.substring(5,7)),o=parseInt(o,16),s=parseInt(s,16),l=parseInt(l,16)),e(o,s,l))}function ht(t,e,n){var i,r,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,l=(o+a)/2;return s?(r=.5>l?s/(o+a):s/(2-o-a),i=t==o?(e-n)/s+(n>e?6:0):e==o?(n-t)/s+2:(t-e)/s+4,i*=60):(i=NaN,r=l>0&&1>l?0:i),q(i,r,l)}function ct(t,e,n){t=ft(t),e=ft(e),n=ft(n);var i=nt((.4124564*t+.3575761*e+.1804375*n)/lo),r=nt((.2126729*t+.7151522*e+.072175*n)/uo),a=nt((.0193339*t+.119192*e+.9503041*n)/ho);return Q(116*r-16,500*(i-r),200*(r-a))}function ft(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function dt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function pt(t){return"function"==typeof t?t:function(){return t}}function gt(t){return t}function vt(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),mt(e,n,t,i)}}function mt(t,e,n,i){function r(){var t,e=l.status;if(!e&&l.responseText||e>=200&&300>e||304===e){try{t=n.call(a,l)}catch(t){return void o.error.call(a,t)}o.load.call(a,t)}else o.error.call(a,l)}var a={},o=ma.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!wa.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(t){var e=ma.event;ma.event=t;try{o.progress.call(a,l)}finally{ma.event=e}},a.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",a)},a.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",a):e},a.responseType=function(t){return arguments.length?(u=t,a):u},a.response=function(t){return n=t,a},["get","post"].forEach(function(t){a[t]=function(){return a.send.apply(a,[t].concat(ya(arguments)))}}),a.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),l.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),l.setRequestHeader)for(var h in s)l.setRequestHeader(h,s[h]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=u&&(l.responseType=u),null!=r&&a.on("error",r).on("load",function(t){r(null,t)}),o.beforesend.call(a,l),l.send(null==i?null:i),a},a.abort=function(){return l.abort(),a},ma.rebind(a,o,"on"),null==i?a:a.get(xt(i))}function xt(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function yt(){var t=_t(),e=wt()-t;e>24?(isFinite(e)&&(clearTimeout(xo),xo=setTimeout(yt,e)),mo=0):(mo=1,bo(yt))}function bt(t,e,n){var i=arguments.length;2>i&&(e=0),3>i&&(n=Date.now()),yo.callback=t,yo.time=n+e}function _t(){var t=Date.now();for(yo=go;yo;)t>=yo.time&&(yo.flush=yo.callback(t-yo.time)),yo=yo.next;return t}function wt(){for(var t,e=go,n=1/0;e;)e.flush?e=t?t.next=e.next:go=e.next:(e.time<n&&(n=e.time),e=(t=e).next);return vo=t,n}function Mt(t,e){var n=Math.pow(10,3*Math.abs(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function kt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function St(t){return t+""}function Tt(){}function Ct(t,e,n){var i=n.s=t+e,r=i-t,a=i-r;n.t=t-a+(e-r)}function At(t,e){t&&Ro.hasOwnProperty(t.type)&&Ro[t.type](t,e)}function Lt(t,e,n){var i,r=-1,a=t.length-n;for(e.lineStart();++r<a;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function Et(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Lt(t[n],e,1);e.polygonEnd()}function Ft(){function t(t,e){t*=Qa,e=e*Qa/2+Va/4;var n=t-i,o=Math.cos(e),s=Math.sin(e),l=a*s,u=r*o+l*Math.cos(n),h=l*Math.sin(n);zo.add(Math.atan2(h,u)),i=t,r=o,a=s}var e,n,i,r,a;Do.point=function(o,s){Do.point=t,i=(e=o)*Qa,r=Math.cos(s=(n=s)*Qa/2+Va/4),a=Math.sin(s)},Do.lineEnd=function(){t(e,n)}}function Rt(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function Pt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function zt(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Dt(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function It(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Nt(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Ot(t){return[Math.atan2(t[1],t[0]),B(t[2])]}function Bt(t,e){return Math.abs(t[0]-e[0])<Za&&Math.abs(t[1]-e[1])<Za}function Ht(t,e){t*=Qa;var n=Math.cos(e*=Qa);Xt(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Xt(t,e,n){++Io,Oo+=(t-Oo)/Io,Bo+=(e-Bo)/Io,Ho+=(n-Ho)/Io}function Wt(){function t(t,r){t*=Qa;var a=Math.cos(r*=Qa),o=a*Math.cos(t),s=a*Math.sin(t),l=Math.sin(r),u=Math.atan2(Math.sqrt((u=n*l-i*s)*u+(u=i*o-e*l)*u+(u=e*s-n*o)*u),e*o+n*s+i*l);No+=u,Xo+=u*(e+(e=o)),Wo+=u*(n+(n=s)),Yo+=u*(i+(i=l)),Xt(e,n,i)}var e,n,i;Go.point=function(r,a){r*=Qa;var o=Math.cos(a*=Qa);e=o*Math.cos(r),n=o*Math.sin(r),i=Math.sin(a),Go.point=t,Xt(e,n,i)}}function Yt(){Go.point=Ht}function jt(){function t(t,e){t*=Qa;var n=Math.cos(e*=Qa),o=n*Math.cos(t),s=n*Math.sin(t),l=Math.sin(e),u=r*l-a*s,h=a*o-i*l,c=i*s-r*o,f=Math.sqrt(u*u+h*h+c*c),d=i*o+r*s+a*l,p=f&&-O(d)/f,g=Math.atan2(f,d);jo+=p*u,qo+=p*h,Vo+=p*c,No+=g,Xo+=g*(i+(i=o)),Wo+=g*(r+(r=s)),Yo+=g*(a+(a=l)),Xt(i,r,a)}var e,n,i,r,a;Go.point=function(o,s){e=o,n=s,Go.point=t,o*=Qa;var l=Math.cos(s*=Qa);i=l*Math.cos(o),r=l*Math.sin(o),a=Math.sin(s),Xt(i,r,a)},Go.lineEnd=function(){t(e,n),Go.lineEnd=Yt,Go.point=Ht}}function qt(){return!0}function Vt(t,e,n,i,r){var a=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(Bt(n,i)){r.lineStart();for(var s=0;e>s;++s)r.point((n=t[s])[0],n[1]);return void r.lineEnd()}var l={point:n,points:t,other:null,visited:!1,entry:!0,subject:!0},u={point:n,points:[n],other:l,visited:!1,entry:!1,subject:!1};l.other=u,a.push(l),o.push(u),l={point:i,points:[i],other:null,visited:!1,entry:!1,subject:!0},u={point:i,points:[i],other:l,visited:!1,entry:!0,subject:!1},l.other=u,a.push(l),o.push(u)}}),o.sort(e),Gt(a),Gt(o),a.length){for(var s=0,l=n,u=o.length;u>s;++s)o[s].entry=l=!l;for(var h,c,f,d=a[0];;){for(h=d;h.visited;)if((h=h.next)===d)return;c=h.points,r.lineStart();do{if(h.visited=h.other.visited=!0,h.entry){if(h.subject)for(var s=0;s<c.length;s++)r.point((f=c[s])[0],f[1]);else i(h.point,h.next.point,1,r);h=h.next}else{if(h.subject){c=h.prev.points;for(var s=c.length;--s>=0;)r.point((f=c[s])[0],f[1])}else i(h.point,h.prev.point,-1,r);h=h.prev}h=h.other,c=h.points}while(!h.visited);r.lineEnd()}}}function Gt(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.next=n=t[i],n.prev=r,r=n;r.next=n=t[0],n.prev=r}}function Ut(t,e,n,i){return function(r,a){function o(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&a.point(e,n)}function s(t,e){var n=r(t,e);v.point(n[0],n[1])}function l(){x.point=s,v.lineStart()}function u(){x.point=o,v.lineEnd()}function h(t,e){g.push([t,e]);var n=r(t,e);b.point(n[0],n[1])}function c(){b.lineStart(),g=[]}function f(){h(g[0][0],g[0][1]),b.lineEnd();var t,e=b.clean(),n=y.buffer(),i=n.length;if(g.pop(),p.push(g),g=null,i){if(1&e){t=n[0];var r,i=t.length-1,o=-1;for(a.lineStart();++o<i;)a.point((r=t[o])[0],r[1]);return void a.lineEnd()}i>1&&2&e&&n.push(n.pop().concat(n.shift())),d.push(n.filter(Zt))}}var d,p,g,v=e(a),m=r.invert(i[0],i[1]),x={point:o,lineStart:l,lineEnd:u,polygonStart:function(){x.point=h,x.lineStart=c,x.lineEnd=f,d=[],p=[],a.polygonStart()},polygonEnd:function(){x.point=o,x.lineStart=l,x.lineEnd=u,d=ma.merge(d);var t=Jt(m,p);d.length?Vt(d,Qt,t,n,a):t&&(a.lineStart(),n(null,null,1,a),a.lineEnd()),a.polygonEnd(),d=p=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},y=$t(),b=e(y);return x}}function Zt(t){return t.length>1}function $t(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:l,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Qt(t,e){return((t=t.point)[0]<0?t[1]-Ua-Za:Ua-t[1])-((e=e.point)[0]<0?e[1]-Ua-Za:Ua-e[1])}function Jt(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],a=0,o=0;zo.reset();for(var s=0,l=e.length;l>s;++s){var u=e[s],h=u.length;if(h)for(var c=u[0],f=c[0],d=c[1]/2+Va/4,p=Math.sin(d),g=Math.cos(d),v=1;;){v===h&&(v=0),t=u[v];var m=t[0],x=t[1]/2+Va/4,y=Math.sin(x),b=Math.cos(x),_=m-f,w=Math.abs(_)>Va,M=p*y;if(zo.add(Math.atan2(M*Math.sin(_),g*b+M*Math.cos(_))),a+=w?_+(_>=0?2:-2)*Va:_,w^f>=n^m>=n){var k=zt(Rt(c),Rt(t));Nt(k);var S=zt(r,k);Nt(S);var T=(w^_>=0?-1:1)*B(S[2]);(i>T||i===T&&(k[0]||k[1]))&&(o+=w^_>=0?1:-1)}if(!v++)break;f=m,p=y,g=b,c=t}}return(-Za>a||Za>a&&0>zo)^1&o}function Kt(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?Va:-Va,l=Math.abs(a-n);Math.abs(l-Va)<Za?(t.point(n,i=(i+o)/2>0?Ua:-Ua),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(a,i),e=0):r!==s&&l>=Va&&(Math.abs(n-r)<Za&&(n-=r*Za),Math.abs(a-s)<Za&&(a-=s*Za),i=te(n,i,a,o),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=a,i=o),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}function te(t,e,n,i){var r,a,o=Math.sin(t-n);return Math.abs(o)>Za?Math.atan((Math.sin(e)*(a=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*a*o)):(e+i)/2}function ee(t,e,n,i){var r;if(null==t)r=n*Ua,i.point(-Va,r),i.point(0,r),i.point(Va,r),i.point(Va,0),i.point(Va,-r),i.point(0,-r),i.point(-Va,-r),i.point(-Va,0),i.point(-Va,r);else if(Math.abs(t[0]-e[0])>Za){var a=(t[0]<e[0]?1:-1)*Va;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(e[0],e[1])}function ne(t){function e(t,e){return Math.cos(t)*Math.cos(e)>a}function n(t){var n,a,l,u,h;return{lineStart:function(){u=l=!1,h=1},point:function(c,f){var d,p=[c,f],g=e(c,f),v=o?g?0:r(c,f):g?r(c+(0>c?Va:-Va),f):0;if(!n&&(u=l=g)&&t.lineStart(),g!==l&&(d=i(n,p),(Bt(n,d)||Bt(p,d))&&(p[0]+=Za,p[1]+=Za,g=e(p[0],p[1]))),g!==l)h=0,g?(t.lineStart(),d=i(p,n),t.point(d[0],d[1])):(d=i(n,p),t.point(d[0],d[1]),t.lineEnd()),n=d;else if(s&&n&&o^g){var m;v&a||!(m=i(p,n,!0))||(h=0,o?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||n&&Bt(n,p)||t.point(p[0],p[1]),n=p,l=g,a=v},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return h|(u&&l)<<1}}}function i(t,e,n){var i=Rt(t),r=Rt(e),o=[1,0,0],s=zt(i,r),l=Pt(s,s),u=s[0],h=l-u*u;if(!h)return!n&&t;var c=a*l/h,f=-a*u/h,d=zt(o,s),p=It(o,c),g=It(s,f);Dt(p,g);var v=d,m=Pt(p,v),x=Pt(v,v),y=m*m-x*(Pt(p,p)-1);if(!(0>y)){var b=Math.sqrt(y),_=It(v,(-m-b)/x);if(Dt(_,p),_=Ot(_),!n)return _;var w,M=t[0],k=e[0],S=t[1],T=e[1];M>k&&(w=M,M=k,k=w);var C=k-M,A=Math.abs(C-Va)<Za,L=A||Za>C;if(!A&&S>T&&(w=S,S=T,T=w),L?A?S+T>0^_[1]<(Math.abs(_[0]-M)<Za?S:T):S<=_[1]&&_[1]<=T:C>Va^(M<=_[0]&&_[0]<=k)){var E=It(v,(-m+b)/x);return Dt(E,p),[_,Ot(E)]}}}function r(e,n){var i=o?t:Va-t,r=0;return-i>e?r|=1:e>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var a=Math.cos(t),o=a>0,s=Math.abs(a)>Za,l=Le(t,6*Qa);return Ut(e,n,l,o?[0,-t]:[-Va,t-Va])}function ie(t,e,n,i){function r(i,r){return Math.abs(i[0]-t)<Za?r>0?0:3:Math.abs(i[0]-n)<Za?r>0?2:1:Math.abs(i[1]-e)<Za?r>0?1:0:r>0?3:2}function a(t,e){return o(t.point,e.point)}function o(t,e){var n=r(t,1),i=r(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}function s(r,a){var o=a[0]-r[0],s=a[1]-r[1],l=[0,1];return Math.abs(o)<Za&&Math.abs(s)<Za?t<=r[0]&&r[0]<=n&&e<=r[1]&&r[1]<=i:!!(re(t-r[0],o,l)&&re(r[0]-n,-o,l)&&re(e-r[1],s,l)&&re(r[1]-i,-s,l))&&(l[1]<1&&(a[0]=r[0]+l[1]*o,a[1]=r[1]+l[1]*s),l[0]>0&&(r[0]+=l[0]*o,r[1]+=l[0]*s),!0)}return function(l){function u(t){for(var e=0,n=x.length,i=t[1],r=0;n>r;++r)for(var a,o=1,s=x[r],l=s.length,u=s[0];l>o;++o)a=s[o],u[1]<=i?a[1]>i&&h(u,a,t)>0&&++e:a[1]<=i&&h(u,a,t)<0&&--e,u=a;return 0!==e}function h(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function c(a,s,l,u){var h=0,c=0;if(null==a||(h=r(a,l))!==(c=r(s,l))||o(a,s)<0^l>0){do u.point(0===h||3===h?t:n,h>1?i:e);while((h=(h+l+4)%4)!==c)}else u.point(s[0],s[1])}function f(r,a){return r>=t&&n>=r&&a>=e&&i>=a}function d(t,e){f(t,e)&&l.point(t,e)}function p(){E.point=v,x&&x.push(y=[]),T=!0,S=!1,M=k=NaN}function g(){m&&(v(b,_),w&&S&&L.rejoin(),m.push(L.buffer())),E.point=d,S&&l.lineEnd()}function v(t,e){t=Math.max(-Zo,Math.min(Zo,t)),e=Math.max(-Zo,Math.min(Zo,e));var n=f(t,e);if(x&&y.push([t,e]),T)b=t,_=e,w=n,T=!1,n&&(l.lineStart(),l.point(t,e));else if(n&&S)l.point(t,e);else{var i=[M,k],r=[t,e];s(i,r)?(S||(l.lineStart(),l.point(i[0],i[1])),l.point(r[0],r[1]),n||l.lineEnd(),C=!1):n&&(l.lineStart(),l.point(t,e),C=!1)}M=t,k=e,S=n}var m,x,y,b,_,w,M,k,S,T,C,A=l,L=$t(),E={point:d,lineStart:p,lineEnd:g,polygonStart:function(){l=L,m=[],x=[],C=!0},polygonEnd:function(){l=A,m=ma.merge(m);var e=u([t,i]),n=C&&e,r=m.length;(n||r)&&(l.polygonStart(),n&&(l.lineStart(),c(null,null,1,l),l.lineEnd()),r&&Vt(m,a,e,c,l),l.polygonEnd()),m=x=y=null}};return E}}function re(t,e,n){if(Math.abs(e)<Za)return 0>=t;var i=t/e;if(e>0){if(i>n[1])return!1;i>n[0]&&(n[0]=i)}else{if(i<n[0])return!1;i<n[1]&&(n[1]=i)}return!0}function ae(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return n=e.invert(n,i),n&&t.invert(n[0],n[1])}),n}function oe(t){var e=0,n=Va/3,i=_e(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Va/180,n=t[1]*Va/180):[180*(e/Va),180*(n/Va)];
},r}function se(t,e){function n(t,e){var n=Math.sqrt(a-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),o-n*Math.cos(t)]}var i=Math.sin(t),r=(i+Math.sin(e))/2,a=1+i*(2*r-i),o=Math.sqrt(a)/r;return n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,B((a-(t*t+n*n)*r*r)/(2*r))]},n}function le(){function t(t,e){Qo+=r*t-i*e,i=t,r=e}var e,n,i,r;ns.point=function(a,o){ns.point=t,e=i=a,n=r=o},ns.lineEnd=function(){t(e,n)}}function ue(t,e){Jo>t&&(Jo=t),t>ts&&(ts=t),Ko>e&&(Ko=e),e>es&&(es=e)}function he(){function t(t,e){o.push("M",t,",",e,a)}function e(t,e){o.push("M",t,",",e),s.point=n}function n(t,e){o.push("L",t,",",e)}function i(){s.point=t}function r(){o.push("Z")}var a=ce(4.5),o=[],s={point:t,lineStart:function(){s.point=e},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(t){return a=ce(t),s},result:function(){if(o.length){var t=o.join("");return o=[],t}}};return s}function ce(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function fe(t,e){Oo+=t,Bo+=e,++Ho}function de(){function t(t,i){var r=t-e,a=i-n,o=Math.sqrt(r*r+a*a);Xo+=o*(e+t)/2,Wo+=o*(n+i)/2,Yo+=o,fe(e=t,n=i)}var e,n;rs.point=function(i,r){rs.point=t,fe(e=i,n=r)}}function pe(){rs.point=fe}function ge(){function t(t,e){var n=t-i,a=e-r,o=Math.sqrt(n*n+a*a);Xo+=o*(i+t)/2,Wo+=o*(r+e)/2,Yo+=o,o=r*t-i*e,jo+=o*(i+t),qo+=o*(r+e),Vo+=3*o,fe(i=t,r=e)}var e,n,i,r;rs.point=function(a,o){rs.point=t,fe(e=i=a,n=r=o)},rs.lineEnd=function(){t(e,n)}}function ve(t){function e(e,n){t.moveTo(e,n),t.arc(e,n,o,0,Ga)}function n(e,n){t.moveTo(e,n),s.point=i}function i(e,n){t.lineTo(e,n)}function r(){s.point=e}function a(){t.closePath()}var o=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:r,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(t){return o=t,s},result:l};return s}function me(t){function e(e){function i(n,i){n=t(n,i),e.point(n[0],n[1])}function r(){y=NaN,k.point=o,e.lineStart()}function o(i,r){var o=Rt([i,r]),s=t(i,r);n(y,b,x,_,w,M,y=s[0],b=s[1],x=i,_=o[0],w=o[1],M=o[2],a,e),e.point(y,b)}function s(){k.point=i,e.lineEnd()}function l(){r(),k.point=u,k.lineEnd=h}function u(t,e){o(c=t,f=e),d=y,p=b,g=_,v=w,m=M,k.point=o}function h(){n(y,b,x,_,w,M,d,p,c,g,v,m,a,e),k.lineEnd=s,s()}var c,f,d,p,g,v,m,x,y,b,_,w,M,k={point:i,lineStart:r,lineEnd:s,polygonStart:function(){e.polygonStart(),k.lineStart=l},polygonEnd:function(){e.polygonEnd(),k.lineStart=r}};return k}function n(e,a,o,s,l,u,h,c,f,d,p,g,v,m){var x=h-e,y=c-a,b=x*x+y*y;if(b>4*i&&v--){var _=s+d,w=l+p,M=u+g,k=Math.sqrt(_*_+w*w+M*M),S=Math.asin(M/=k),T=Math.abs(Math.abs(M)-1)<Za?(o+f)/2:Math.atan2(w,_),C=t(T,S),A=C[0],L=C[1],E=A-e,F=L-a,R=y*E-x*F;(R*R/b>i||Math.abs((x*E+y*F)/b-.5)>.3||r>s*d+l*p+u*g)&&(n(e,a,o,s,l,u,A,L,T,_/=k,w/=k,M,v,m),m.point(A,L),n(A,L,T,_,w,M,h,c,f,d,p,g,v,m))}}var i=.5,r=Math.cos(30*Qa),a=16;return e.precision=function(t){return arguments.length?(a=(i=t*t)>0&&16,e):Math.sqrt(i)},e}function xe(t){this.stream=t}function ye(t){var e=me(function(e,n){return t([e*Ja,n*Ja])});return function(t){var n=new xe(t=e(t));return n.point=function(e,n){t.point(e*Qa,n*Qa)},n}}function be(t){return _e(function(){return t})()}function _e(t){function e(t){return t=s(t[0]*Qa,t[1]*Qa),[t[0]*f+l,u-t[1]*f]}function n(t){return t=s.invert((t[0]-l)/f,(u-t[1])/f),t&&[t[0]*Ja,t[1]*Ja]}function i(){s=ae(o=Se(m,x,y),a);var t=a(g,v);return l=d-t[0]*f,u=p+t[1]*f,r()}function r(){return h&&(h.valid=!1,h=null),e}var a,o,s,l,u,h,c=me(function(t,e){return t=a(t,e),[t[0]*f+l,u-t[1]*f]}),f=150,d=480,p=250,g=0,v=0,m=0,x=0,y=0,b=Uo,_=gt,w=null,M=null;return e.stream=function(t){return h&&(h.valid=!1),h=we(b(o,c(_(t)))),h.valid=!0,h},e.clipAngle=function(t){return arguments.length?(b=null==t?(w=t,Uo):ne((w=+t)*Qa),r()):w},e.clipExtent=function(t){return arguments.length?(M=t,_=t?ie(t[0][0],t[0][1],t[1][0],t[1][1]):gt,r()):M},e.scale=function(t){return arguments.length?(f=+t,i()):f},e.translate=function(t){return arguments.length?(d=+t[0],p=+t[1],i()):[d,p]},e.center=function(t){return arguments.length?(g=t[0]%360*Qa,v=t[1]%360*Qa,i()):[g*Ja,v*Ja]},e.rotate=function(t){return arguments.length?(m=t[0]%360*Qa,x=t[1]%360*Qa,y=t.length>2?t[2]%360*Qa:0,i()):[m*Ja,x*Ja,y*Ja]},ma.rebind(e,c,"precision"),function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,i()}}function we(t){var e=new xe(t);return e.point=function(e,n){t.point(e*Qa,n*Qa)},e}function Me(t,e){return[t,e]}function ke(t,e){return[t>Va?t-Ga:-Va>t?t+Ga:t,e]}function Se(t,e,n){return t?e||n?ae(Ce(t),Ae(e,n)):Ce(t):e||n?Ae(e,n):ke}function Te(t){return function(e,n){return e+=t,[e>Va?e-Ga:-Va>e?e+Ga:e,n]}}function Ce(t){var e=Te(t);return e.invert=Te(-t),e}function Ae(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),h=u*i+s*r;return[Math.atan2(l*a-h*o,s*i-u*r),B(h*a+l*o)]}var i=Math.cos(t),r=Math.sin(t),a=Math.cos(e),o=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),h=u*a-l*o;return[Math.atan2(l*a+u*o,s*i+h*r),B(h*i-s*r)]},n}function Le(t,e){var n=Math.cos(t),i=Math.sin(t);return function(r,a,o,s){var l=o*e;null!=r?(r=Ee(n,r),a=Ee(n,a),(o>0?a>r:r>a)&&(r+=o*Ga)):(r=t+o*Ga,a=t-.5*l);for(var u,h=r;o>0?h>a:a>h;h-=l)s.point((u=Ot([n,-i*Math.cos(h),-i*Math.sin(h)]))[0],u[1])}}function Ee(t,e){var n=Rt(e);n[0]-=t,Nt(n);var i=O(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-Za)%(2*Math.PI)}function Fe(t,e,n){var i=ma.range(t,e-Za,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function Re(t,e,n){var i=ma.range(t,e-Za,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function Pe(t){return t.source}function ze(t){return t.target}function De(t,e,n,i){var r=Math.cos(e),a=Math.sin(e),o=Math.cos(i),s=Math.sin(i),l=r*Math.cos(t),u=r*Math.sin(t),h=o*Math.cos(n),c=o*Math.sin(n),f=2*Math.asin(Math.sqrt(Y(i-e)+r*o*Y(n-t))),d=1/Math.sin(f),p=f?function(t){var e=Math.sin(t*=f)*d,n=Math.sin(f-t)*d,i=n*l+e*h,r=n*u+e*c,o=n*a+e*s;return[Math.atan2(r,i)*Ja,Math.atan2(o,Math.sqrt(i*i+r*r))*Ja]}:function(){return[t*Ja,e*Ja]};return p.distance=f,p}function Ie(){function t(t,r){var a=Math.sin(r*=Qa),o=Math.cos(r),s=Math.abs((t*=Qa)-e),l=Math.cos(s);as+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=i*a-n*o*l)*s),n*a+i*o*l),e=t,n=a,i=o}var e,n,i;os.point=function(r,a){e=r*Qa,n=Math.sin(a*=Qa),i=Math.cos(a),os.point=t},os.lineEnd=function(){os.point=os.lineEnd=l}}function Ne(t,e){function n(e,n){var i=Math.cos(e),r=Math.cos(n),a=t(i*r);return[a*r*Math.sin(e),a*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),r=e(i),a=Math.sin(r),o=Math.cos(r);return[Math.atan2(t*a,i*o),Math.asin(i&&n*a/i)]},n}function Oe(t,e){function n(t,e){var n=Math.abs(Math.abs(e)-Ua)<Za?0:o/Math.pow(r(e),a);return[n*Math.sin(a*t),o-n*Math.cos(a*t)]}var i=Math.cos(t),r=function(t){return Math.tan(Va/4+t/2)},a=t===e?Math.sin(t):Math.log(i/Math.cos(e))/Math.log(r(e)/r(t)),o=i*Math.pow(r(t),a)/a;return a?(n.invert=function(t,e){var n=o-e,i=N(a)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/a,2*Math.atan(Math.pow(o/i,1/a))-Ua]},n):He}function Be(t,e){function n(t,e){var n=a-e;return[n*Math.sin(r*t),a-n*Math.cos(r*t)]}var i=Math.cos(t),r=t===e?Math.sin(t):(i-Math.cos(e))/(e-t),a=i/r+t;return Math.abs(r)<Za?Me:(n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/r,a-N(r)*Math.sqrt(t*t+n*n)]},n)}function He(t,e){return[t,Math.log(Math.tan(Va/4+e/2))]}function Xe(t){var e,n=be(t),i=n.scale,r=n.translate,a=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var o=a.apply(n,arguments);if(o===n){if(e=null==t){var s=Va*i(),l=r();a([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(o=null);return o},n.clipExtent(null)}function We(t,e){var n=Math.cos(e)*Math.sin(t);return[Math.log((1+n)/(1-n))/2,Math.atan2(Math.tan(e),Math.cos(t))]}function Ye(t){function e(e){function o(){u.push("M",a(t(h),s))}for(var l,u=[],h=[],c=-1,f=e.length,d=pt(n),p=pt(i);++c<f;)r.call(this,l=e[c],c)?h.push([+d.call(this,l,c),+p.call(this,l,c)]):h.length&&(o(),h=[]);return h.length&&o(),u.length?u.join(""):null}var n=je,i=qe,r=qt,a=Ve,o=a.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(o="function"==typeof t?a=t:(a=fs.get(t)||Ve).key,e):o},e.tension=function(t){return arguments.length?(s=t,e):s},e}function je(t){return t[0]}function qe(t){return t[1]}function Ve(t){return t.join("L")}function Ge(t){return Ve(t)+"Z"}function Ue(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);return n>1&&r.push("H",i[0]),r.join("")}function Ze(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function $e(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function Qe(t,e){return t.length<4?Ve(t):t[1]+tn(t.slice(1,t.length-1),en(t,e))}function Je(t,e){return t.length<3?Ve(t):t[0]+tn((t.push(t[0]),t),en([t[t.length-2]].concat(t,[t[1]]),e))}function Ke(t,e){return t.length<3?Ve(t):t[0]+tn(t,en(t,e))}function tn(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Ve(t);var n=t.length!=e.length,i="",r=t[0],a=t[1],o=e[0],s=o,l=1;if(n&&(i+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],r=t[1],l=2),e.length>1){s=e[1],a=t[l],l++,i+="C"+(r[0]+o[0])+","+(r[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var u=2;u<e.length;u++,l++)a=t[l],s=e[u],i+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var h=t[l];i+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+h[0]+","+h[1]}return i}function en(t,e){for(var n,i=[],r=(1-e)/2,a=t[0],o=t[1],s=1,l=t.length;++s<l;)n=a,a=o,o=t[s],i.push([r*(o[0]-n[0]),r*(o[1]-n[1])]);return i}function nn(t){if(t.length<3)return Ve(t);var e=1,n=t.length,i=t[0],r=i[0],a=i[1],o=[r,r,r,(i=t[1])[0]],s=[a,a,a,i[1]],l=[r,",",a,"L",sn(gs,o),",",sn(gs,s)];for(t.push(t[n-1]);++e<=n;)i=t[e],o.shift(),o.push(i[0]),s.shift(),s.push(i[1]),ln(l,o,s);return t.pop(),l.push("L",i),l.join("")}function rn(t){if(t.length<4)return Ve(t);for(var e,n=[],i=-1,r=t.length,a=[0],o=[0];++i<3;)e=t[i],a.push(e[0]),o.push(e[1]);for(n.push(sn(gs,a)+","+sn(gs,o)),--i;++i<r;)e=t[i],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),ln(n,a,o);return n.join("")}function an(t){for(var e,n,i=-1,r=t.length,a=r+4,o=[],s=[];++i<4;)n=t[i%r],o.push(n[0]),s.push(n[1]);for(e=[sn(gs,o),",",sn(gs,s)],--i;++i<a;)n=t[i%r],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),ln(e,o,s);return e.join("")}function on(t,e){var n=t.length-1;if(n)for(var i,r,a=t[0][0],o=t[0][1],s=t[n][0]-a,l=t[n][1]-o,u=-1;++u<=n;)i=t[u],r=u/n,i[0]=e*i[0]+(1-e)*(a+r*s),i[1]=e*i[1]+(1-e)*(o+r*l);return nn(t)}function sn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function ln(t,e,n){t.push("C",sn(ds,e),",",sn(ds,n),",",sn(ps,e),",",sn(ps,n),",",sn(gs,e),",",sn(gs,n))}function un(t,e){return(e[1]-t[1])/(e[0]-t[0])}function hn(t){for(var e=0,n=t.length-1,i=[],r=t[0],a=t[1],o=i[0]=un(r,a);++e<n;)i[e]=(o+(o=un(r=a,a=t[e+1])))/2;return i[e]=o,i}function cn(t){for(var e,n,i,r,a=[],o=hn(t),s=-1,l=t.length-1;++s<l;)e=un(t[s],t[s+1]),Math.abs(e)<Za?o[s]=o[s+1]=0:(n=o[s]/e,i=o[s+1]/e,r=n*n+i*i,r>9&&(r=3*e/Math.sqrt(r),o[s]=r*n,o[s+1]=r*i));for(s=-1;++s<=l;)r=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([r||0,o[s]*r||0]);return a}function fn(t){return t.length<3?Ve(t):t[0]+tn(t,cn(t))}function dn(t,e,n,i){var r,a,o,s,l,u,h;return r=i[t],a=r[0],o=r[1],r=i[e],s=r[0],l=r[1],r=i[n],u=r[0],h=r[1],(h-o)*(s-a)-(l-o)*(u-a)>0}function pn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function gn(t,e,n,i){var r=t[0],a=n[0],o=e[0]-r,s=i[0]-a,l=t[1],u=n[1],h=e[1]-l,c=i[1]-u,f=(s*(l-u)-c*(r-a))/(c*o-s*h);return[r+f*o,l+f*h]}function vn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function mn(t,e){var n={list:t.map(function(t,e){return{index:e,x:t[0],y:t[1]}}).sort(function(t,e){return t.y<e.y?-1:t.y>e.y?1:t.x<e.x?-1:t.x>e.x?1:0}),bottomSite:null},i={list:[],leftEnd:null,rightEnd:null,init:function(){i.leftEnd=i.createHalfEdge(null,"l"),i.rightEnd=i.createHalfEdge(null,"l"),i.leftEnd.r=i.rightEnd,i.rightEnd.l=i.leftEnd,i.list.unshift(i.leftEnd,i.rightEnd)},createHalfEdge:function(t,e){return{edge:t,side:e,vertex:null,l:null,r:null}},insert:function(t,e){e.l=t,e.r=t.r,t.r.l=e,t.r=e},leftBound:function(t){var e=i.leftEnd;do e=e.r;while(e!=i.rightEnd&&r.rightOf(e,t));return e=e.l},del:function(t){t.l.r=t.r,t.r.l=t.l,t.edge=null},right:function(t){return t.r},left:function(t){return t.l},leftRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[t.side]},rightRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[ms[t.side]]}},r={bisect:function(t,e){var n={region:{l:t,r:e},ep:{l:null,r:null}},i=e.x-t.x,r=e.y-t.y,a=i>0?i:-i,o=r>0?r:-r;return n.c=t.x*i+t.y*r+.5*(i*i+r*r),a>o?(n.a=1,n.b=r/i,n.c/=i):(n.b=1,n.a=i/r,n.c/=r),n},intersect:function(t,e){var n=t.edge,i=e.edge;if(!n||!i||n.region.r==i.region.r)return null;var r=n.a*i.b-n.b*i.a;if(Math.abs(r)<1e-10)return null;var a,o,s=(n.c*i.b-i.c*n.b)/r,l=(i.c*n.a-n.c*i.a)/r,u=n.region.r,h=i.region.r;u.y<h.y||u.y==h.y&&u.x<h.x?(a=t,o=n):(a=e,o=i);var c=s>=o.region.r.x;return c&&"l"===a.side||!c&&"r"===a.side?null:{x:s,y:l}},rightOf:function(t,e){var n=t.edge,i=n.region.r,r=e.x>i.x;if(r&&"l"===t.side)return 1;if(!r&&"r"===t.side)return 0;if(1===n.a){var a=e.y-i.y,o=e.x-i.x,s=0,l=0;if(!r&&n.b<0||r&&n.b>=0?l=s=a>=n.b*o:(l=e.x+e.y*n.b>n.c,n.b<0&&(l=!l),l||(s=1)),!s){var u=i.x-n.region.l.x;l=n.b*(o*o-a*a)<u*a*(1+2*o/u+n.b*n.b),n.b<0&&(l=!l)}}else{var h=n.c-n.a*e.x,c=e.y-h,f=e.x-i.x,d=h-i.y;l=c*c>f*f+d*d}return"l"===t.side?l:!l},endPoint:function(t,n,i){t.ep[n]=i,t.ep[ms[n]]&&e(t)},distance:function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}},a={list:[],insert:function(t,e,n){t.vertex=e,t.ystar=e.y+n;for(var i=0,r=a.list,o=r.length;o>i;i++){var s=r[i];if(!(t.ystar>s.ystar||t.ystar==s.ystar&&e.x>s.vertex.x))break}r.splice(i,0,t)},del:function(t){for(var e=0,n=a.list,i=n.length;i>e&&n[e]!=t;++e);n.splice(e,1)},empty:function(){return 0===a.list.length},nextEvent:function(t){for(var e=0,n=a.list,i=n.length;i>e;++e)if(n[e]==t)return n[e+1];return null},min:function(){var t=a.list[0];return{x:t.vertex.x,y:t.ystar}},extractMin:function(){return a.list.shift()}};i.init(),n.bottomSite=n.list.shift();for(var o,s,l,u,h,c,f,d,p,g,v,m,x,y=n.list.shift();;)if(a.empty()||(o=a.min()),y&&(a.empty()||y.y<o.y||y.y==o.y&&y.x<o.x))s=i.leftBound(y),l=i.right(s),f=i.rightRegion(s),m=r.bisect(f,y),c=i.createHalfEdge(m,"l"),i.insert(s,c),g=r.intersect(s,c),g&&(a.del(s),a.insert(s,g,r.distance(g,y))),s=c,c=i.createHalfEdge(m,"r"),i.insert(s,c),g=r.intersect(c,l),g&&a.insert(c,g,r.distance(g,y)),y=n.list.shift();else{if(a.empty())break;s=a.extractMin(),u=i.left(s),l=i.right(s),h=i.right(l),f=i.leftRegion(s),d=i.rightRegion(l),v=s.vertex,r.endPoint(s.edge,s.side,v),r.endPoint(l.edge,l.side,v),i.del(s),a.del(l),i.del(l),x="l",f.y>d.y&&(p=f,f=d,d=p,x="r"),m=r.bisect(f,d),c=i.createHalfEdge(m,x),i.insert(u,c),r.endPoint(m,ms[x],v),g=r.intersect(u,c),g&&(a.del(u),a.insert(u,g,r.distance(g,f))),g=r.intersect(c,h),g&&a.insert(c,g,r.distance(g,f))}for(s=i.right(i.leftEnd);s!=i.rightEnd;s=i.right(s))e(s.edge)}function xn(t){return t.x}function yn(t){return t.y}function bn(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function _n(t,e,n,i,r,a){if(!t(e,n,i,r,a)){var o=.5*(n+r),s=.5*(i+a),l=e.nodes;l[0]&&_n(t,l[0],n,i,o,s),l[1]&&_n(t,l[1],o,i,r,s),l[2]&&_n(t,l[2],n,s,o,a),l[3]&&_n(t,l[3],o,s,r,a)}}function wn(t,e){t=ma.rgb(t),e=ma.rgb(e);var n=t.r,i=t.g,r=t.b,a=e.r-n,o=e.g-i,s=e.b-r;return function(t){return"#"+lt(Math.round(n+a*t))+lt(Math.round(i+o*t))+lt(Math.round(r+s*t))}}function Mn(t,e){var n,i={},r={};for(n in t)n in e?i[n]=Tn(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function kn(t,e){return e-=t=+t,function(n){return t+e*n}}function Sn(t,e){var n,i,r,a,o,s=0,l=0,u=[],h=[];for(t+="",e+="",xs.lastIndex=0,i=0;n=xs.exec(e);++i)n.index&&u.push(e.substring(s,l=n.index)),h.push({i:u.length,x:n[0]}),u.push(null),s=xs.lastIndex;for(s<e.length&&u.push(e.substring(s)),i=0,a=h.length;(n=xs.exec(t))&&a>i;++i)if(o=h[i],o.x==n[0]){if(o.i)if(null==u[o.i+1])for(u[o.i-1]+=o.x,u.splice(o.i,1),r=i+1;a>r;++r)h[r].i--;else for(u[o.i-1]+=o.x+u[o.i+1],u.splice(o.i,2),r=i+1;a>r;++r)h[r].i-=2;else if(null==u[o.i+1])u[o.i]=o.x;else for(u[o.i]=o.x+u[o.i+1],u.splice(o.i+1,1),r=i+1;a>r;++r)h[r].i--;h.splice(i,1),a--,i--}else o.x=kn(parseFloat(n[0]),parseFloat(o.x));for(;a>i;)o=h.pop(),null==u[o.i+1]?u[o.i]=o.x:(u[o.i]=o.x+u[o.i+1],u.splice(o.i+1,1)),a--;return 1===u.length?null==u[0]?(o=h[0].x,function(t){return o(t)+""}):function(){return e}:function(t){for(i=0;a>i;++i)u[(o=h[i]).i]=o.x(t);return u.join("")}}function Tn(t,e){for(var n,i=ma.interpolators.length;--i>=0&&!(n=ma.interpolators[i](t,e)););return n}function Cn(t,e){var n,i=[],r=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)i.push(Tn(t[n],e[n]));for(;a>n;++n)r[n]=t[n];for(;o>n;++n)r[n]=e[n];return function(t){for(n=0;s>n;++n)r[n]=i[n](t);return r}}function An(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function Ln(t){return function(e){return 1-t(1-e)}}function En(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Fn(t){return t*t}function Rn(t){return t*t*t}function Pn(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function zn(t){return function(e){return Math.pow(e,t)}}function Dn(t){return 1-Math.cos(t*Ua)}function In(t){return Math.pow(2,10*(t-1))}function Nn(t){return 1-Math.sqrt(1-t*t)}function On(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Ga*Math.asin(1/t):(t=1,n=e/4),function(i){return 1+t*Math.pow(2,-10*i)*Math.sin((i-n)*Ga/e)}}function Bn(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Hn(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Xn(t,e){t=ma.hcl(t),e=ma.hcl(e);var n=t.h,i=t.c,r=t.l,a=e.h-n,o=e.c-i,s=e.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?e.c:i),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:-180>a&&(a+=360),function(t){return $(n+a*t,i+o*t,r+s*t)+""}}function Wn(t,e){t=ma.hsl(t),e=ma.hsl(e);var n=t.h,i=t.s,r=t.l,a=e.h-n,o=e.s-i,s=e.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?e.s:i),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:-180>a&&(a+=360),function(t){return G(n+a*t,i+o*t,r+s*t)+""}}function Yn(t,e){t=ma.lab(t),e=ma.lab(e);var n=t.l,i=t.a,r=t.b,a=e.l-n,o=e.a-i,s=e.b-r;return function(t){return K(n+a*t,i+o*t,r+s*t)+""}}function jn(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function qn(t){var e=[t.a,t.b],n=[t.c,t.d],i=Gn(e),r=Vn(e,n),a=Gn(Un(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Ja,this.translate=[t.e,t.f],this.scale=[i,a],this.skew=a?Math.atan2(r,a)*Ja:0}function Vn(t,e){return t[0]*e[0]+t[1]*e[1]}function Gn(t){var e=Math.sqrt(Vn(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Un(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Zn(t,e){var n,i=[],r=[],a=ma.transform(t),o=ma.transform(e),s=a.translate,l=o.translate,u=a.rotate,h=o.rotate,c=a.skew,f=o.skew,d=a.scale,p=o.scale;return s[0]!=l[0]||s[1]!=l[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:kn(s[0],l[0])},{i:3,x:kn(s[1],l[1])})):l[0]||l[1]?i.push("translate("+l+")"):i.push(""),u!=h?(u-h>180?h+=360:h-u>180&&(u+=360),r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:kn(u,h)})):h&&i.push(i.pop()+"rotate("+h+")"),c!=f?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:kn(c,f)}):f&&i.push(i.pop()+"skewX("+f+")"),d[0]!=p[0]||d[1]!=p[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:kn(d[0],p[0])},{i:n-2,x:kn(d[1],p[1])})):(1!=p[0]||1!=p[1])&&i.push(i.pop()+"scale("+p+")"),n=r.length,function(t){for(var e,a=-1;++a<n;)i[(e=r[a]).i]=e.x(t);return i.join("")}}function $n(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return(n-t)*e}}function Qn(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return Math.max(0,Math.min(1,(n-t)*e))}}function Jn(t){for(var e=t.source,n=t.target,i=ti(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var a=r.length;n!==i;)r.splice(a,0,n),n=n.parent;return r}function Kn(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function ti(t,e){if(t===e)return t;for(var n=Kn(t),i=Kn(e),r=n.pop(),a=i.pop(),o=null;r===a;)o=r,r=n.pop(),a=i.pop();return o}function ei(t){t.fixed|=2}function ni(t){t.fixed&=-7}function ii(t){t.fixed|=4,t.px=t.x,t.py=t.y}function ri(t){t.fixed&=-5}function ai(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var a,o=t.nodes,s=o.length,l=-1;++l<s;)a=o[l],null!=a&&(ai(a,e,n),t.charge+=a.charge,i+=a.charge*a.cx,r+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,i+=u*t.point.x,r+=u*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function oi(t,e){return ma.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=hi,t}function si(t){return t.children}function li(t){return t.value}function ui(t,e){return e.value-t.value}function hi(t){return ma.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function ci(t){return t.x}function fi(t){return t.y}function di(t,e,n){t.y0=e,t.y=n}function pi(t){return ma.range(t.length)}function gi(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function vi(t){for(var e,n=1,i=0,r=t[0][1],a=t.length;a>n;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function mi(t){return t.reduce(xi,0)}function xi(t,e){return t+e[1]}function yi(t,e){return bi(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function bi(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,a=[];++n<=e;)a[n]=r*n+i;return a}function _i(t){return[ma.min(t),ma.max(t)]}function wi(t,e){return t.parent==e.parent?1:2}function Mi(t){var e=t.children;return e&&e.length?e[0]:t._tree.thread}function ki(t){var e,n=t.children;return n&&(e=n.length)?n[e-1]:t._tree.thread}function Si(t,e){var n=t.children;if(n&&(r=n.length))for(var i,r,a=-1;++a<r;)e(i=Si(n[a],e),t)>0&&(t=i);return t}function Ti(t,e){return t.x-e.x}function Ci(t,e){return e.x-t.x}function Ai(t,e){return t.depth-e.depth}function Li(t,e){function n(t,i){var r=t.children;if(r&&(o=r.length))for(var a,o,s=null,l=-1;++l<o;)a=r[l],n(a,s),s=a;e(t,i)}n(t,null)}function Ei(t){for(var e,n=0,i=0,r=t.children,a=r.length;--a>=0;)e=r[a]._tree,e.prelim+=n,e.mod+=n,n+=e.shift+(i+=e.change)}function Fi(t,e,n){t=t._tree,e=e._tree;var i=n/(e.number-t.number);t.change+=i,e.change-=i,e.shift+=n,e.prelim+=n,e.mod+=n}function Ri(t,e,n){return t._tree.ancestor.parent==e.parent?t._tree.ancestor:n}function Pi(t,e){return t.value-e.value}function zi(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Di(t,e){t._pack_next=e,e._pack_prev=t}function Ii(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return.999*r*r>n*n+i*i}function Ni(t){function e(t){h=Math.min(t.x-t.r,h),c=Math.max(t.x+t.r,c),f=Math.min(t.y-t.r,f),d=Math.max(t.y+t.r,d)}if((n=t.children)&&(u=n.length)){var n,i,r,a,o,s,l,u,h=1/0,c=-1/0,f=1/0,d=-1/0;if(n.forEach(Oi),i=n[0],i.x=-i.r,i.y=0,e(i),u>1&&(r=n[1],r.x=r.r,r.y=0,e(r),u>2))for(a=n[2],Xi(i,r,a),e(a),zi(i,a),i._pack_prev=a,zi(a,r),r=i._pack_next,o=3;u>o;o++){Xi(i,r,a=n[o]);var p=0,g=1,v=1;for(s=r._pack_next;s!==r;s=s._pack_next,g++)if(Ii(s,a)){p=1;break}if(1==p)for(l=i._pack_prev;l!==s._pack_prev&&!Ii(l,a);l=l._pack_prev,v++);p?(v>g||g==v&&r.r<i.r?Di(i,r=s):Di(i=l,r),o--):(zi(i,a),r=a,e(a))}var m=(h+c)/2,x=(f+d)/2,y=0;for(o=0;u>o;o++)a=n[o],a.x-=m,a.y-=x,y=Math.max(y,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=y,n.forEach(Bi)}}function Oi(t){t._pack_next=t._pack_prev=t}function Bi(t){delete t._pack_next,delete t._pack_prev}function Hi(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var a=-1,o=r.length;++a<o;)Hi(r[a],e,n,i)}function Xi(t,e,n){var i=t.r+n.r,r=e.x-t.x,a=e.y-t.y;if(i&&(r||a)){var o=e.r+n.r,s=r*r+a*a;o*=o,i*=i;var l=.5+(i-o)/(2*s),u=Math.sqrt(Math.max(0,2*o*(i+s)-(i-=s)*i-o*o))/(2*s);n.x=t.x+l*r+u*a,n.y=t.y+l*a-u*r}else n.x=t.x+i,n.y=t.y}function Wi(t){return 1+ma.max(t,function(t){return t.y})}function Yi(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function ji(t){var e=t.children;return e&&e.length?ji(e[0]):t}function qi(t){var e,n=t.children;return n&&(e=n.length)?qi(n[e-1]):t}function Vi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Gi(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return 0>r&&(n+=r/2,r=0),0>a&&(i+=a/2,a=0),{x:n,y:i,dx:r,dy:a}}function Ui(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Zi(t){return t.rangeExtent?t.rangeExtent():Ui(t.range())}function $i(t,e,n,i){var r=n(t[0],t[1]),a=i(e[0],e[1]);return function(t){return a(r(t))}}function Qi(t,e){var n,i=0,r=t.length-1,a=t[i],o=t[r];return a>o&&(n=i,i=r,r=n,n=a,a=o,o=n),t[i]=e.floor(a),t[r]=e.ceil(o),t}function Ji(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:As}function Ki(t,e,n,i){var r=[],a=[],o=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<=s;)r.push(n(t[o-1],t[o])),a.push(i(e[o-1],e[o]));return function(e){var n=ma.bisect(t,e,1,s)-1;return a[n](r[n](e))}}function tr(t,e,n,i){function r(){var r=Math.min(t.length,e.length)>2?Ki:$i,l=i?Qn:$n;return o=r(t,e,l,n),s=r(e,t,l,Tn),a}function a(t){return o(t)}var o,s;return a.invert=function(t){return s(t)},a.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},a.range=function(t){return arguments.length?(e=t,r()):e},a.rangeRound=function(t){return a.range(t).interpolate(jn)},a.clamp=function(t){return arguments.length?(i=t,r()):i},a.interpolate=function(t){return arguments.length?(n=t,r()):n},a.ticks=function(e){return rr(t,e)},a.tickFormat=function(e,n){return ar(t,e,n)},a.nice=function(e){return nr(t,e),r()},a.copy=function(){return tr(t,e,n,i)},r()}function er(t,e){return ma.rebind(t,e,"range","rangeRound","interpolate","clamp")}function nr(t,e){return Qi(t,Ji(ir(t,e)[2]))}function ir(t,e){null==e&&(e=10);var n=Ui(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),a=e/i*r;return.15>=a?r*=10:.35>=a?r*=5:.75>=a&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function rr(t,e){return ma.range.apply(ma,ir(t,e))}function ar(t,e,n){var i=-Math.floor(Math.log(ir(t,e)[2])/Math.LN10+.01);return ma.format(n?n.replace(To,function(t,e,n,r,a,o,s,l,u,h){return[e,n,r,a,o,s,l,u||"."+(i-2*("%"===h)),h].join("")}):",."+i+"f")}function or(t,e,n,i){function r(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function a(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function o(e){return t(r(e))}return o.invert=function(e){return a(t.invert(e))},o.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((i=e.map(Number)).map(r)),o):i},o.base=function(n){return arguments.length?(e=+n,t.domain(i.map(r)),o):e},o.nice=function(){var e=Qi(i.map(r),n?Math:Es);return t.domain(e),i=e.map(a),o},o.ticks=function(){var t=Ui(i),o=[],s=t[0],l=t[1],u=Math.floor(r(s)),h=Math.ceil(r(l)),c=e%1?2:e;if(isFinite(h-u)){if(n){for(;h>u;u++)for(var f=1;c>f;f++)o.push(a(u)*f);o.push(a(u))}else for(o.push(a(u));u++<h;)for(var f=c-1;f>0;f--)o.push(a(u)*f);for(u=0;o[u]<s;u++);for(h=o.length;o[h-1]>l;h--);o=o.slice(u,h)}return o},o.tickFormat=function(t,e){if(!arguments.length)return Ls;arguments.length<2?e=Ls:"function"!=typeof e&&(e=ma.format(e));var i,s=Math.max(.1,t/o.ticks().length),l=n?(i=1e-12,Math.ceil):(i=-1e-12,Math.floor);return function(t){return t/a(l(r(t)+i))<=s?e(t):""}},o.copy=function(){return or(t.copy(),e,n,i)},er(o,t)}function sr(t,e,n){function i(e){return t(r(e))}var r=lr(e),a=lr(1/e);return i.invert=function(e){return a(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),i):n},i.ticks=function(t){return rr(n,t)},i.tickFormat=function(t,e){return ar(n,t,e)},i.nice=function(t){return i.domain(nr(n,t))},i.exponent=function(o){return arguments.length?(r=lr(e=o),a=lr(1/e),t.domain(n.map(r)),i):e},i.copy=function(){return sr(t.copy(),e,n)},er(i,t)}function lr(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function ur(t,e){function n(n){return o[((a.get(n)||"range"===e.t&&a.set(n,t.push(n)))-1)%o.length]}function i(e,n){return ma.range(t.length).map(function(t){return e+n*t})}var a,o,s;return n.domain=function(i){if(!arguments.length)return t;t=[],a=new r;for(var o,s=-1,l=i.length;++s<l;)a.has(o=i[s])||a.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,s=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(r,a){arguments.length<2&&(a=0);var l=r[0],u=r[1],h=(u-l)/(Math.max(1,t.length-1)+a);return o=i(t.length<2?(l+u)/2:l+h*a/2,h),s=0,e={t:"rangePoints",a:arguments},n},n.rangeBands=function(r,a,l){arguments.length<2&&(a=0),arguments.length<3&&(l=a);var u=r[1]<r[0],h=r[u-0],c=r[1-u],f=(c-h)/(t.length-a+2*l);return o=i(h+f*l,f),u&&o.reverse(),s=f*(1-a),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,a,l){arguments.length<2&&(a=0),arguments.length<3&&(l=a);var u=r[1]<r[0],h=r[u-0],c=r[1-u],f=Math.floor((c-h)/(t.length-a+2*l)),d=c-h-(t.length-a)*f;return o=i(h+Math.round(d/2),f),u&&o.reverse(),s=Math.round(f*(1-a)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return s},n.rangeExtent=function(){return Ui(e.a[0])},n.copy=function(){return ur(t,e)},n.domain(t)}function hr(t,e){function n(){var n=0,a=e.length;for(r=[];++n<a;)r[n-1]=ma.quantile(t,n/a);return i}function i(t){return isNaN(t=+t)?void 0:e[ma.bisect(r,t)]}var r;return i.domain=function(e){return arguments.length?(t=e.filter(function(t){return!isNaN(t)}).sort(ma.ascending),n()):t},i.range=function(t){return arguments.length?(e=t,n()):e},i.quantiles=function(){return r},i.invertExtent=function(n){return n=e.indexOf(n),0>n?[NaN,NaN]:[n>0?r[n-1]:t[0],n<r.length?r[n]:t[t.length-1]]},i.copy=function(){return hr(t,e)},n()}function cr(t,e,n){function i(e){return n[Math.max(0,Math.min(o,Math.floor(a*(e-t))))]}function r(){return a=n.length/(e-t),o=n.length-1,i}var a,o;return i.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],r()):[t,e]},i.range=function(t){return arguments.length?(n=t,r()):n},i.invertExtent=function(e){return e=n.indexOf(e),e=0>e?NaN:e/a+t,[e,e+1/a]},i.copy=function(){return cr(t,e,n)},r()}function fr(t,e){function n(n){return n>=n?e[ma.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return fr(t,e)},n}function dr(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return rr(t,e)},e.tickFormat=function(e,n){return ar(t,e,n)},e.copy=function(){return dr(t)},e}function pr(t){return t.innerRadius}function gr(t){return t.outerRadius}function vr(t){return t.startAngle}function mr(t){return t.endAngle}function xr(t){for(var e,n,i,r=-1,a=t.length;++r<a;)e=t[r],n=e[0],i=e[1]+Ds,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function yr(t){function e(e){function l(){g.push("M",s(t(m),c),h,u(t(v.reverse()),c),"Z")}for(var f,d,p,g=[],v=[],m=[],x=-1,y=e.length,b=pt(n),_=pt(r),w=n===i?function(){return d}:pt(i),M=r===a?function(){return p}:pt(a);++x<y;)o.call(this,f=e[x],x)?(v.push([d=+b.call(this,f,x),p=+_.call(this,f,x)]),m.push([+w.call(this,f,x),+M.call(this,f,x)])):v.length&&(l(),v=[],m=[]);return v.length&&l(),g.length?g.join(""):null}var n=je,i=je,r=0,a=qe,o=qt,s=Ve,l=s.key,u=s,h="L",c=.7;return e.x=function(t){return arguments.length?(n=i=t,e):i},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(r=a=t,e):a},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(a=t,e):a},e.defined=function(t){return arguments.length?(o=t,e):o},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?s=t:(s=fs.get(t)||Ve).key,u=s.reverse||s,h=s.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(c=t,e):c},e}function br(t){return t.radius}function _r(t){return[t.x,t.y]}function wr(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]+Ds;
return[n*Math.cos(i),n*Math.sin(i)]}}function Mr(){return 64}function kr(){return"circle"}function Sr(t){var e=Math.sqrt(t/Va);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Tr(t,e){return Pa(t,Ws),t.id=e,t}function Cr(t,e,n,i){var r=t.id;return A(t,"function"==typeof n?function(t,a,o){t.__transition__[r].tween.set(e,i(n.call(t,t.__data__,a,o)))}:(n=i(n),function(t){t.__transition__[r].tween.set(e,n)}))}function Ar(t){return null==t&&(t=""),function(){this.textContent=t}}function Lr(t,e,n,i){var a=t.__transition__||(t.__transition__={active:0,count:0}),o=a[n];if(!o){var s=i.time;o=a[n]={tween:new r,time:s,ease:i.ease,delay:i.delay,duration:i.duration},++a.count,ma.timer(function(i){function r(i){return a.active>n?u():(a.active=n,o.event&&o.event.start.call(t,h,e),o.tween.forEach(function(n,i){(i=i.call(t,h,e))&&p.push(i)}),l(i||1)?1:void bt(l,f,s))}function l(i){if(a.active!==n)return u();for(var r=i/d,s=c(r),l=p.length;l>0;)p[--l].call(t,s);return r>=1?(o.event&&o.event.end.call(t,h,e),u()):void 0}function u(){return--a.count?delete a[n]:delete t.__transition__,1}var h=t.__data__,c=o.ease,f=o.delay,d=o.duration,p=[];return i>=f?r(i-f):void bt(r,f,s)},0,s)}}function Er(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function Fr(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function Rr(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Pr(t,e,n){function i(e){var n=t(e),i=a(n,1);return i-e>e-n?n:i}function r(n){return e(n=t(new Zs(n-1)),1),n}function a(t,n){return e(t=new Zs(+t),n),t}function o(t,i,a){var o=r(t),s=[];if(a>1)for(;i>o;)n(o)%a||s.push(new Date(+o)),e(o,1);else for(;i>o;)s.push(new Date(+o)),e(o,1);return s}function s(t,e,n){try{Zs=Rr;var i=new Rr;return i._=t,o(i,e,n)}finally{Zs=Date}}t.floor=t,t.round=i,t.ceil=r,t.offset=a,t.range=o;var l=t.utc=zr(t);return l.floor=l,l.round=zr(i),l.ceil=zr(r),l.offset=zr(a),l.range=s,t}function zr(t){return function(e,n){try{Zs=Rr;var i=new Rr;return i._=e,t(i,n)._}finally{Zs=Date}}}function Dr(t){function e(e){for(var i,r,a,o=[],s=-1,l=0;++s<n;)37===t.charCodeAt(s)&&(o.push(t.substring(l,s)),null!=(r=pl[i=t.charAt(++s)])&&(i=t.charAt(++s)),(a=gl[i])&&(i=a(e,null==r?"e"===i?" ":"0":r)),o.push(i),l=s+1);return o.push(t.substring(l,s)),o.join("")}var n=t.length;return e.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=Ir(n,t,e,0);if(i!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&Zs!==Rr,a=new(r?Rr:Zs);return"j"in n?a.setFullYear(n.y,0,n.j):"w"in n&&("W"in n||"U"in n)?(a.setFullYear(n.y,0,1),a.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(a.getDay()+5)%7:n.w+7*n.U-(a.getDay()+6)%7)):a.setFullYear(n.y,n.m,n.d),a.setHours(n.H+Math.floor(n.Z/100),n.M+n.Z%100,n.S,n.L),r?a._:a},e.toString=function(){return t},e}function Ir(t,e,n,i){for(var r,a,o,s=0,l=e.length,u=n.length;l>s;){if(i>=u)return-1;if(r=e.charCodeAt(s++),37===r){if(o=e.charAt(s++),a=vl[o in pl?e.charAt(s++):o],!a||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function Nr(t){return new RegExp("^(?:"+t.map(ma.requote).join("|")+")","i")}function Or(t){for(var e=new r,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Br(t,e,n){var i=0>t?"-":"",r=(i?-t:t)+"",a=r.length;return i+(n>a?new Array(n-a+1).join(e)+r:r)}function Hr(t,e,n){sl.lastIndex=0;var i=sl.exec(e.substring(n));return i?(t.w=ll.get(i[0].toLowerCase()),n+i[0].length):-1}function Xr(t,e,n){al.lastIndex=0;var i=al.exec(e.substring(n));return i?(t.w=ol.get(i[0].toLowerCase()),n+i[0].length):-1}function Wr(t,e,n){ml.lastIndex=0;var i=ml.exec(e.substring(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Yr(t,e,n){ml.lastIndex=0;var i=ml.exec(e.substring(n));return i?(t.U=+i[0],n+i[0].length):-1}function jr(t,e,n){ml.lastIndex=0;var i=ml.exec(e.substring(n));return i?(t.W=+i[0],n+i[0].length):-1}function qr(t,e,n){cl.lastIndex=0;var i=cl.exec(e.substring(n));return i?(t.m=fl.get(i[0].toLowerCase()),n+i[0].length):-1}function Vr(t,e,n){ul.lastIndex=0;var i=ul.exec(e.substring(n));return i?(t.m=hl.get(i[0].toLowerCase()),n+i[0].length):-1}function Gr(t,e,n){return Ir(t,gl.c.toString(),e,n)}function Ur(t,e,n){return Ir(t,gl.x.toString(),e,n)}function Zr(t,e,n){return Ir(t,gl.X.toString(),e,n)}function $r(t,e,n){ml.lastIndex=0;var i=ml.exec(e.substring(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Qr(t,e,n){ml.lastIndex=0;var i=ml.exec(e.substring(n,n+2));return i?(t.y=Kr(+i[0]),n+i[0].length):-1}function Jr(t,e,n){return/^[+-]\d{4}$/.test(e=e.substring(n,n+5))?(t.Z=+e,n+5):-1}function Kr(t){return t+(t>68?1900:2e3)}function ta(t,e,n){ml.lastIndex=0;var i=ml.exec(e.substring(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function ea(t,e,n){ml.lastIndex=0;var i=ml.exec(e.substring(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function na(t,e,n){ml.lastIndex=0;var i=ml.exec(e.substring(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function ia(t,e,n){ml.lastIndex=0;var i=ml.exec(e.substring(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function ra(t,e,n){ml.lastIndex=0;var i=ml.exec(e.substring(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function aa(t,e,n){ml.lastIndex=0;var i=ml.exec(e.substring(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function oa(t,e,n){ml.lastIndex=0;var i=ml.exec(e.substring(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function sa(t,e,n){var i=xl.get(e.substring(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)}function la(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=~~(Math.abs(e)/60),r=Math.abs(e)%60;return n+Br(i,"0",2)+Br(r,"0",2)}function ua(t,e,n){dl.lastIndex=0;var i=dl.exec(e.substring(n,n+1));return i?n+i[0].length:-1}function ha(t){function e(t){try{Zs=Rr;var e=new Zs;return e._=t,n(e)}finally{Zs=Date}}var n=Dr(t);return e.parse=function(t){try{Zs=Rr;var e=n.parse(t);return e&&e._}finally{Zs=Date}},e.toString=n.toString,e}function ca(t){return t.toISOString()}function fa(t,e,n){function i(e){return t(e)}function r(t,n){var i=t[1]-t[0],r=i/n,a=ma.bisect(bl,r);return a==bl.length?[e.year,ir(t.map(function(t){return t/31536e6}),n)[2]]:a?e[r/bl[a-1]<bl[a]/r?a-1:a]:[kl,ir(t,n)[2]]}return i.invert=function(e){return da(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(da)},i.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,da(+n+1),e).length}var a=i.domain(),o=Ui(a),s=null==t?r(o,10):"number"==typeof t&&r(o,t);return s&&(t=s[0],e=s[1]),i.domain(Qi(a,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=da(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=da(+e+1);return e}}:t))},i.ticks=function(t,e){var n=Ui(i.domain()),a=null==t?r(n,10):"number"==typeof t?r(n,t):!t.range&&[{range:t},e];return a&&(t=a[0],e=a[1]),t.range(n[0],da(+n[1]+1),1>e?1:e)},i.tickFormat=function(){return n},i.copy=function(){return fa(t.copy(),e,n)},er(i,t)}function da(t){return new Date(t)}function pa(t){return function(e){for(var n=t.length-1,i=t[n];!i[1](e);)i=t[--n];return i[0](e)}}function ga(t){return JSON.parse(t.responseText)}function va(t){var e=ba.createRange();return e.selectNode(ba.body),e.createContextualFragment(t.responseText)}var ma={version:"3.3.6"};Date.now||(Date.now=function(){return+new Date});var xa=[].slice,ya=function(t){return xa.call(t)},ba=document,_a=ba.documentElement,wa=window;try{ya(_a.childNodes)[0].nodeType}catch(t){ya=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}try{ba.createElement("div").style.setProperty("opacity",0,"")}catch(t){var Ma=wa.Element.prototype,ka=Ma.setAttribute,Sa=Ma.setAttributeNS,Ta=wa.CSSStyleDeclaration.prototype,Ca=Ta.setProperty;Ma.setAttribute=function(t,e){ka.call(this,t,e+"")},Ma.setAttributeNS=function(t,e,n){Sa.call(this,t,e,n+"")},Ta.setProperty=function(t,e,n){Ca.call(this,t,e+"",n)}}ma.ascending=function(t,e){return e>t?-1:t>e?1:t>=e?0:NaN},ma.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},ma.min=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a&&!(null!=(n=t[r])&&n>=n);)n=void 0;for(;++r<a;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<a&&!(null!=(n=e.call(t,t[r],r))&&n>=n);)n=void 0;for(;++r<a;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},ma.max=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a&&!(null!=(n=t[r])&&n>=n);)n=void 0;for(;++r<a;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<a&&!(null!=(n=e.call(t,t[r],r))&&n>=n);)n=void 0;for(;++r<a;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},ma.extent=function(t,e){var n,i,r,a=-1,o=t.length;if(1===arguments.length){for(;++a<o&&!(null!=(n=r=t[a])&&n>=n);)n=r=void 0;for(;++a<o;)null!=(i=t[a])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++a<o&&!(null!=(n=r=e.call(t,t[a],a))&&n>=n);)n=void 0;for(;++a<o;)null!=(i=e.call(t,t[a],a))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},ma.sum=function(t,e){var n,i=0,r=t.length,a=-1;if(1===arguments.length)for(;++a<r;)isNaN(n=+t[a])||(i+=n);else for(;++a<r;)isNaN(n=+e.call(t,t[a],a))||(i+=n);return i},ma.mean=function(e,n){var i,r=e.length,a=0,o=-1,s=0;if(1===arguments.length)for(;++o<r;)t(i=e[o])&&(a+=(i-a)/++s);else for(;++o<r;)t(i=n.call(e,e[o],o))&&(a+=(i-a)/++s);return s?a:void 0},ma.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],a=n-i;return a?r+a*(t[i]-r):r},ma.median=function(e,n){return arguments.length>1&&(e=e.map(n)),e=e.filter(t),e.length?ma.quantile(e.sort(ma.ascending),.5):void 0},ma.bisector=function(t){return{left:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var a=i+r>>>1;t.call(e,e[a],a)<n?i=a+1:r=a}return i},right:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var a=i+r>>>1;n<t.call(e,e[a],a)?r=a:i=a+1}return i}}};var Aa=ma.bisector(function(t){return t});ma.bisectLeft=Aa.left,ma.bisect=ma.bisectRight=Aa.right,ma.shuffle=function(t){for(var e,n,i=t.length;i;)n=0|Math.random()*i--,e=t[i],t[i]=t[n],t[n]=e;return t},ma.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},ma.pairs=function(t){for(var e,n=0,i=t.length-1,r=t[0],a=new Array(0>i?0:i);i>n;)a[n]=[e=r,r=t[++n]];return a},ma.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,n=ma.min(arguments,e),i=new Array(n);++t<n;)for(var r,a=-1,o=i[t]=new Array(r);++a<r;)o[a]=arguments[a][t];return i},ma.transpose=function(t){return ma.zip.apply(ma,t)},ma.keys=function(t){var e=[];for(var n in t)e.push(n);return e},ma.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},ma.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},ma.merge=function(t){return Array.prototype.concat.apply([],t)},ma.range=function(t,e,i){if(arguments.length<3&&(i=1,arguments.length<2&&(e=t,t=0)),1/0===(e-t)/i)throw new Error("infinite range");var r,a=[],o=n(Math.abs(i)),s=-1;if(t*=o,e*=o,i*=o,0>i)for(;(r=t+i*++s)>e;)a.push(r/o);else for(;(r=t+i*++s)<e;)a.push(r/o);return a},ma.map=function(t){var e=new r;if(t instanceof r)t.forEach(function(t,n){e.set(t,n)});else for(var n in t)e.set(n,t[n]);return e},i(r,{has:function(t){return La+t in this},get:function(t){return this[La+t]},set:function(t,e){return this[La+t]=e},remove:function(t){return t=La+t,t in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},values:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},entries:function(){var t=[];return this.forEach(function(e,n){t.push({key:e,value:n})}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===Ea&&t.call(this,e.substring(1),this[e])}});var La="\0",Ea=La.charCodeAt(0);ma.nest=function(){function t(e,s,l){if(l>=o.length)return i?i.call(a,s):n?s.sort(n):s;for(var u,h,c,f,d=-1,p=s.length,g=o[l++],v=new r;++d<p;)(f=v.get(u=g(h=s[d])))?f.push(h):v.set(u,[h]);return e?(h=e(),c=function(n,i){h.set(n,t(e,i,l))}):(h={},c=function(n,i){h[n]=t(e,i,l)}),v.forEach(c),h}function e(t,n){if(n>=o.length)return t;var i=[],r=s[n++];return t.forEach(function(t,r){i.push({key:t,values:e(r,n)})}),r?i.sort(function(t,e){return r(t.key,e.key)}):i}var n,i,a={},o=[],s=[];return a.map=function(e,n){return t(n,e,0)},a.entries=function(n){return e(t(ma.map,n,0),0)},a.key=function(t){return o.push(t),a},a.sortKeys=function(t){return s[o.length-1]=t,a},a.sortValues=function(t){return n=t,a},a.rollup=function(t){return i=t,a},a},ma.set=function(t){var e=new a;if(t)for(var n=0,i=t.length;i>n;++n)e.add(t[n]);return e},i(a,{has:function(t){return La+t in this},add:function(t){return this[La+t]=!0,t},remove:function(t){return t=La+t,t in this&&delete this[t]},values:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===Ea&&t.call(this,e.substring(1))}}),ma.behavior={},ma.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=o(t,e,e[n]);return t};var Fa=["webkit","ms","moz","Moz","o","O"];ma.dispatch=function(){for(var t=new u,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=h(t);return t},u.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(n>=0&&(i=t.substring(n+1),t=t.substring(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},ma.event=null,ma.requote=function(t){return t.replace(Ra,"\\$&")};var Ra=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Pa={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},za=function(t,e){return e.querySelector(t)},Da=function(t,e){return e.querySelectorAll(t)},Ia=_a[s(_a,"matchesSelector")],Na=function(t,e){return Ia.call(t,e)};"function"==typeof Sizzle&&(za=function(t,e){return Sizzle(t,e)[0]||null},Da=function(t,e){return Sizzle.uniqueSort(Sizzle(t,e))},Na=Sizzle.matchesSelector),ma.selection=function(){return Xa};var Oa=ma.selection.prototype=[];Oa.select=function(t){var e,n,i,r,a=[];t=g(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(i=this[o]).parentNode;for(var l=-1,u=i.length;++l<u;)(r=i[l])?(e.push(n=t.call(r,r.__data__,l,o)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return p(a)},Oa.selectAll=function(t){var e,n,i=[];t=v(t);for(var r=-1,a=this.length;++r<a;)for(var o=this[r],s=-1,l=o.length;++s<l;)(n=o[s])&&(i.push(e=ya(t.call(n,n.__data__,s,r))),e.parentNode=n);return p(i)};var Ba={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ma.ns={prefix:Ba,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.substring(0,e),t=t.substring(e+1)),Ba.hasOwnProperty(n)?{space:Ba[n],local:t}:t}},Oa.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=ma.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(m(e,t[e]));return this}return this.each(m(t,e))},Oa.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=t.trim().split(/^|\s+/g)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!y(t[r]).test(e))return!1;return!0}for(e in t)this.each(b(e,t[e]));return this}return this.each(b(t,e))},Oa.style=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(n in t)this.each(w(n,t[n],e));return this}if(2>i)return wa.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(w(t,e,n))},Oa.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(M(e,t[e]));return this}return this.each(M(t,e))},Oa.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Oa.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Oa.append=function(t){return t=k(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Oa.insert=function(t,e){return t=k(t),e=g(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments))})},Oa.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},Oa.data=function(t,e){function n(t,n){var i,a,o,s=t.length,c=n.length,f=Math.min(s,c),d=new Array(c),p=new Array(c),g=new Array(s);if(e){var v,m=new r,x=new r,y=[];for(i=-1;++i<s;)v=e.call(a=t[i],a.__data__,i),m.has(v)?g[i]=a:m.set(v,a),y.push(v);for(i=-1;++i<c;)v=e.call(n,o=n[i],i),(a=m.get(v))?(d[i]=a,a.__data__=o):x.has(v)||(p[i]=S(o)),x.set(v,o),m.remove(v);for(i=-1;++i<s;)m.has(y[i])&&(g[i]=t[i])}else{for(i=-1;++i<f;)a=t[i],o=n[i],a?(a.__data__=o,d[i]=a):p[i]=S(o);for(;c>i;++i)p[i]=S(n[i]);for(;s>i;++i)g[i]=t[i]}p.update=d,p.parentNode=d.parentNode=g.parentNode=t.parentNode,l.push(p),u.push(d),h.push(g)}var i,a,o=-1,s=this.length;if(!arguments.length){for(t=new Array(s=(i=this[0]).length);++o<s;)(a=i[o])&&(t[o]=a.__data__);return t}var l=L([]),u=p([]),h=p([]);if("function"==typeof t)for(;++o<s;)n(i=this[o],t.call(i,i.parentNode.__data__,o));else for(;++o<s;)n(i=this[o],t);return u.enter=function(){return l},u.exit=function(){return h},u},Oa.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Oa.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=T(t));for(var a=0,o=this.length;o>a;a++){r.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;l>s;s++)(i=n[s])&&t.call(i,i.__data__,s)&&e.push(i)}return p(r)},Oa.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,a=i[r];--r>=0;)(n=i[r])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Oa.sort=function(t){t=C.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Oa.each=function(t){return A(this,function(e,n,i){t.call(e,e.__data__,n,i)})},Oa.call=function(t){var e=ya(arguments);return t.apply(e[0]=this,e),this},Oa.empty=function(){return!this.node()},Oa.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],i=0,r=n.length;r>i;i++){var a=n[i];if(a)return a}return null},Oa.size=function(){var t=0;return this.each(function(){++t}),t};var Ha=[];ma.selection.enter=L,ma.selection.enter.prototype=Ha,Ha.append=Oa.append,Ha.empty=Oa.empty,Ha.node=Oa.node,Ha.call=Oa.call,Ha.size=Oa.size,Ha.select=function(t){for(var e,n,i,r,a,o=[],s=-1,l=this.length;++s<l;){i=(r=this[s]).update,o.push(e=[]),e.parentNode=r.parentNode;for(var u=-1,h=r.length;++u<h;)(a=r[u])?(e.push(i[u]=n=t.call(r.parentNode,a.__data__,u,s)),n.__data__=a.__data__):e.push(null)}return p(o)},Ha.insert=function(t,e){return arguments.length<2&&(e=E(this)),Oa.insert.call(this,t,e)},Oa.transition=function(){for(var t,e,n=Os||++Ys,i=[],r=Bs||{time:Date.now(),ease:Pn,delay:0,duration:250},a=-1,o=this.length;++a<o;){i.push(t=[]);for(var s=this[a],l=-1,u=s.length;++l<u;)(e=s[l])&&Lr(e,l,n,r),t.push(e)}return Tr(i,n)},Oa.interrupt=function(){return this.each(F)},ma.select=function(t){var e=["string"==typeof t?za(t,ba):t];return e.parentNode=_a,p([e])},ma.selectAll=function(t){var e=ya("string"==typeof t?Da(t,ba):t);return e.parentNode=_a,p([e])};var Xa=ma.select(_a);Oa.on=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e=!1);for(n in t)this.each(R(n,t[n],e));return this}if(2>i)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(R(t,e,n))};var Wa=ma.map({mouseenter:"mouseover",mouseleave:"mouseout"});Wa.forEach(function(t){"on"+t in ba&&Wa.remove(t)});var Ya=s(_a.style,"userSelect"),ja=0;ma.mouse=function(t){return I(t,f())};var qa=/WebKit/.test(wa.navigator.userAgent)?-1:0;ma.touches=function(t,e){return arguments.length<2&&(e=f().touches),e?ya(e).map(function(e){var n=I(t,e);return n.identifier=e.identifier,n}):[]},ma.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",s)}function e(){return ma.event.changedTouches[0].identifier}function n(t,e){return ma.touches(t).filter(function(t){return t.identifier===e})[0]}function i(t,e,n,i){return function(){function o(){var t=e(h,d),n=t[0]-g[0],i=t[1]-g[1];v|=n|i,g=t,c({type:"drag",x:t[0]+l[0],y:t[1]+l[1],dx:n,dy:i})}function s(){m.on(n+"."+p,null).on(i+"."+p,null),x(v&&ma.event.target===f),c({type:"dragend"})}var l,u=this,h=u.parentNode,c=r.of(u,arguments),f=ma.event.target,d=t(),p=null==d?"drag":"drag-"+d,g=e(h,d),v=0,m=ma.select(wa).on(n+"."+p,o).on(i+"."+p,s),x=D();a?(l=a.apply(u,arguments),l=[l.x-g[0],l.y-g[1]]):l=[0,0],c({type:"dragstart"})}}var r=d(t,"drag","dragstart","dragend"),a=null,o=i(l,ma.mouse,"mousemove","mouseup"),s=i(e,n,"touchmove","touchend");return t.origin=function(e){return arguments.length?(a=e,t):a},ma.rebind(t,r,"on")};var Va=Math.PI,Ga=2*Va,Ua=Va/2,Za=1e-6,$a=Za*Za,Qa=Va/180,Ja=180/Va,Ka=Math.SQRT2,to=2,eo=4;ma.interpolateZoom=function(t,e){function n(t){var e=t*x;if(m){var n=X(g),o=a/(to*f)*(n*W(Ka*e+g)-H(g));return[i+o*u,r+o*h,a*n/X(Ka*e+g)]}return[i+t*u,r+t*h,a*Math.exp(Ka*e)]}var i=t[0],r=t[1],a=t[2],o=e[0],s=e[1],l=e[2],u=o-i,h=s-r,c=u*u+h*h,f=Math.sqrt(c),d=(l*l-a*a+eo*c)/(2*a*to*f),p=(l*l-a*a-eo*c)/(2*l*to*f),g=Math.log(Math.sqrt(d*d+1)-d),v=Math.log(Math.sqrt(p*p+1)-p),m=v-g,x=(m||Math.log(l/a))/Ka;return n.duration=1e3*x,n},ma.behavior.zoom=function(){function t(t){t.on(C,u).on(ro+".zoom",f).on(A,p).on("dblclick.zoom",g).on(E,h)}function e(t){return[(t[0]-k.x)/k.k,(t[1]-k.y)/k.k]}function n(t){return[t[0]*k.k+k.x,t[1]*k.k+k.y]}function i(t){k.k=Math.max(T[0],Math.min(T[1],t))}function r(t,e){e=n(e),k.x+=t[0]-e[0],k.y+=t[1]-e[1]}function a(){_&&_.domain(b.range().map(function(t){return(t-k.x)/k.k}).map(b.invert)),M&&M.domain(w.range().map(function(t){return(t-k.y)/k.k}).map(w.invert))}function o(t){t({type:"zoomstart"})}function s(t){a(),t({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function l(t){t({type:"zoomend"})}function u(){function t(){h=1,r(ma.mouse(i),f),s(a)}function n(){c.on(A,wa===i?p:null).on(L,null),d(h&&ma.event.target===u),l(a)}var i=this,a=R.of(i,arguments),u=ma.event.target,h=0,c=ma.select(wa).on(A,t).on(L,n),f=e(ma.mouse(i)),d=D();F.call(i),o(a)}function h(){function t(){var t=ma.touches(p);return d=k.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=e(t))}),t}function n(){for(var e=ma.event.changedTouches,n=0,a=e.length;a>n;++n)v[e[n].identifier]=null;var o=t(),l=Date.now();if(1===o.length){if(500>l-y){var u=o[0],h=v[u.identifier];i(2*k.k),r(u,h),c(),s(g)}y=l}else if(o.length>1){var u=o[0],f=o[1],d=u[0]-f[0],p=u[1]-f[1];m=d*d+p*p}}function a(){for(var t,e,n,a,o=ma.touches(p),l=0,u=o.length;u>l;++l,a=null)if(n=o[l],a=v[n.identifier]){if(e)break;t=n,e=a}if(a){var h=(h=n[0]-t[0])*h+(h=n[1]-t[1])*h,c=m&&Math.sqrt(h/m);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+a[0])/2,(e[1]+a[1])/2],i(c*d)}y=null,r(t,e),s(g)}function f(){if(ma.event.touches.length){for(var e=ma.event.changedTouches,n=0,i=e.length;i>n;++n)delete v[e[n].identifier];for(var r in v)return void t()}w.on(b,null).on(_,null),M.on(C,u).on(E,h),S(),l(g)}var d,p=this,g=R.of(p,arguments),v={},m=0,x=ma.event.changedTouches[0].identifier,b="touchmove.zoom-"+x,_="touchend.zoom-"+x,w=ma.select(wa).on(b,a).on(_,f),M=ma.select(p).on(C,null).on(E,n),S=D();F.call(p),n(),o(g)}function f(){var t=R.of(this,arguments);x?clearTimeout(x):(F.call(this),o(t)),x=setTimeout(function(){x=null,l(t)},50),c();var n=m||ma.mouse(this);v||(v=e(n)),i(Math.pow(2,.002*no())*k.k),r(n,v),s(t)}function p(){v=null}function g(){var t=R.of(this,arguments),n=ma.mouse(this),a=e(n),u=Math.log(k.k)/Math.LN2;o(t),i(Math.pow(2,ma.event.shiftKey?Math.ceil(u)-1:Math.floor(u)+1)),r(n,a),s(t),l(t)}var v,m,x,y,b,_,w,M,k={x:0,y:0,k:1},S=[960,500],T=io,C="mousedown.zoom",A="mousemove.zoom",L="mouseup.zoom",E="touchstart.zoom",R=d(t,"zoomstart","zoom","zoomend");return t.event=function(t){t.each(function(){var t=R.of(this,arguments),e=k;Os?ma.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},o(t)}).tween("zoom:zoom",function(){var n=S[0],i=S[1],r=n/2,a=i/2,o=ma.interpolateZoom([(r-k.x)/k.k,(a-k.y)/k.k,n/k.k],[(r-e.x)/e.k,(a-e.y)/e.k,n/e.k]);return function(e){var i=o(e),l=n/i[2];this.__chart__=k={x:r-i[0]*l,y:a-i[1]*l,k:l},s(t)}}).each("end.zoom",function(){l(t)}):(this.__chart__=k,o(t),s(t),l(t))})},t.translate=function(e){return arguments.length?(k={x:+e[0],y:+e[1],k:k.k},a(),t):[k.x,k.y]},t.scale=function(e){return arguments.length?(k={x:k.x,y:k.y,k:+e},a(),t):k.k},t.scaleExtent=function(e){return arguments.length?(T=null==e?io:[+e[0],+e[1]],t):T},t.center=function(e){return arguments.length?(m=e&&[+e[0],+e[1]],t):m},t.size=function(e){return arguments.length?(S=e&&[+e[0],+e[1]],t):S},t.x=function(e){return arguments.length?(_=e,b=e.copy(),k={x:0,y:0,k:1},t):_},t.y=function(e){return arguments.length?(M=e,w=e.copy(),k={x:0,y:0,k:1},t):M},ma.rebind(t,R,"on")};var no,io=[0,1/0],ro="onwheel"in ba?(no=function(){return-ma.event.deltaY*(ma.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ba?(no=function(){return ma.event.wheelDelta},"mousewheel"):(no=function(){return-ma.event.detail},"MozMousePixelScroll");j.prototype.toString=function(){return this.rgb()+""},ma.hsl=function(t,e,n){return 1===arguments.length?t instanceof V?q(t.h,t.s,t.l):ut(""+t,ht,q):q(+t,+e,+n)};var ao=V.prototype=new j;ao.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),q(this.h,this.s,this.l/t)},ao.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),q(this.h,this.s,t*this.l)},ao.rgb=function(){return G(this.h,this.s,this.l)},ma.hcl=function(t,e,n){return 1===arguments.length?t instanceof Z?U(t.h,t.c,t.l):t instanceof J?tt(t.l,t.a,t.b):tt((t=ct((t=ma.rgb(t)).r,t.g,t.b)).l,t.a,t.b):U(+t,+e,+n)};var oo=Z.prototype=new j;oo.brighter=function(t){return U(this.h,this.c,Math.min(100,this.l+so*(arguments.length?t:1)))},oo.darker=function(t){return U(this.h,this.c,Math.max(0,this.l-so*(arguments.length?t:1)))},oo.rgb=function(){return $(this.h,this.c,this.l).rgb()},ma.lab=function(t,e,n){return 1===arguments.length?t instanceof J?Q(t.l,t.a,t.b):t instanceof Z?$(t.l,t.c,t.h):ct((t=ma.rgb(t)).r,t.g,t.b):Q(+t,+e,+n)};var so=18,lo=.95047,uo=1,ho=1.08883,co=J.prototype=new j;co.brighter=function(t){return Q(Math.min(100,this.l+so*(arguments.length?t:1)),this.a,this.b)},co.darker=function(t){return Q(Math.max(0,this.l-so*(arguments.length?t:1)),this.a,this.b)},co.rgb=function(){return K(this.l,this.a,this.b)},ma.rgb=function(t,e,n){return 1===arguments.length?t instanceof st?ot(t.r,t.g,t.b):ut(""+t,ot,G):ot(~~t,~~e,~~n)};var fo=st.prototype=new j;fo.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,r=30;return e||n||i?(e&&r>e&&(e=r),n&&r>n&&(n=r),i&&r>i&&(i=r),ot(Math.min(255,~~(e/t)),Math.min(255,~~(n/t)),Math.min(255,~~(i/t)))):ot(r,r,r)},fo.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),ot(~~(t*this.r),~~(t*this.g),~~(t*this.b))},fo.hsl=function(){return ht(this.r,this.g,this.b)},fo.toString=function(){return"#"+lt(this.r)+lt(this.g)+lt(this.b)};var po=ma.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});po.forEach(function(t,e){po.set(t,rt(e))}),ma.functor=pt,ma.xhr=vt(gt),ma.dsv=function(t,e){function n(t,n,a){arguments.length<3&&(a=n,n=null);var o=ma.xhr(t,e,a);return o.row=function(t){return arguments.length?o.response(null==(n=t)?i:r(t)):n},o.row(n)}function i(t){return n.parse(t.responseText)}function r(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(s).join(t)}function s(t){return l.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var l=new RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return n.parse=function(t,e){var i;return n.parseRows(t,function(t,n){if(i)return i(t,n-1);var r=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");i=e?function(t,n){return e(r(t),n)}:r})},n.parseRows=function(t,e){function n(){if(h>=l)return o;if(r)return r=!1,a;var e=h;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}h=n+2;var i=t.charCodeAt(n+1);return 13===i?(r=!0,10===t.charCodeAt(n+2)&&++h):10===i&&(r=!0),t.substring(e+1,n).replace(/""/g,'"')}for(;l>h;){var i=t.charCodeAt(h++),s=1;if(10===i)r=!0;else if(13===i)r=!0,10===t.charCodeAt(h)&&(++h,++s);else if(i!==u)continue;return t.substring(e,h-s)}return t.substring(e)}for(var i,r,a={},o={},s=[],l=t.length,h=0,c=0;(i=n())!==o;){for(var f=[];i!==a&&i!==o;)f.push(i),i=n();(!e||(f=e(f,c++)))&&s.push(f)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var i=new a,r=[];return e.forEach(function(t){for(var e in t)i.has(e)||r.push(i.add(e))}),[r.map(s).join(t)].concat(e.map(function(e){return r.map(function(t){return s(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},ma.csv=ma.dsv(",","text/csv"),ma.tsv=ma.dsv("\t","text/tab-separated-values");var go,vo,mo,xo,yo,bo=wa[s(wa,"requestAnimationFrame")]||function(t){setTimeout(t,17)};ma.timer=function(t,e,n){var i=arguments.length;2>i&&(e=0),3>i&&(n=Date.now());var r=n+e,a={callback:t,time:r,next:null};vo?vo.next=a:go=a,vo=a,mo||(xo=clearTimeout(xo),mo=1,bo(yt))},ma.timer.flush=function(){_t(),wt()};var _o=".",wo=",",Mo=[3,3],ko="$",So=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(Mt);ma.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=ma.round(t,kt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),So[8+n/3]},ma.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},ma.format=function(t){var e=To.exec(t),n=e[1]||" ",i=e[2]||">",r=e[3]||"",a=e[4]||"",o=e[5],s=+e[6],l=e[7],u=e[8],h=e[9],c=1,f="",d=!1;switch(u&&(u=+u.substring(1)),(o||"0"===n&&"="===i)&&(o=n="0",i="=",l&&(s-=Math.floor((s-1)/4))),h){case"n":l=!0,h="g";break;case"%":c=100,f="%",h="f";break;case"p":
c=100,f="%",h="r";break;case"b":case"o":case"x":case"X":"#"===a&&(a="0"+h.toLowerCase());case"c":case"d":d=!0,u=0;break;case"s":c=-1,h="r"}"#"===a?a="":"$"===a&&(a=ko),"r"!=h||u||(h="g"),null!=u&&("g"==h?u=Math.max(1,Math.min(21,u)):("e"==h||"f"==h)&&(u=Math.max(0,Math.min(20,u)))),h=Co.get(h)||St;var p=o&&l;return function(t){if(d&&t%1)return"";var e=0>t||0===t&&0>1/t?(t=-t,"-"):r;if(0>c){var g=ma.formatPrefix(t,u);t=g.scale(t),f=g.symbol}else t*=c;t=h(t,u);var v=t.lastIndexOf("."),m=0>v?t:t.substring(0,v),x=0>v?"":_o+t.substring(v+1);!o&&l&&(m=Ao(m));var y=a.length+m.length+x.length+(p?0:e.length),b=s>y?new Array(y=s-y+1).join(n):"";return p&&(m=Ao(b+m)),e+=a,t=m+x,("<"===i?e+t+b:">"===i?b+e+t:"^"===i?b.substring(0,y>>=1)+e+t+b.substring(y):e+(p?t:b+t))+f}};var To=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Co=ma.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=ma.round(t,kt(t,e))).toFixed(Math.max(0,Math.min(20,kt(t*(1+1e-15),e))))}}),Ao=gt;if(Mo){var Lo=Mo.length;Ao=function(t){for(var e=t.length,n=[],i=0,r=Mo[0];e>0&&r>0;)n.push(t.substring(e-=r,e+r)),r=Mo[i=(i+1)%Lo];return n.reverse().join(wo)}}ma.geo={},Tt.prototype={s:0,t:0,add:function(t){Ct(t,this.t,Eo),Ct(Eo.s,this.s,this),this.s?this.t+=Eo.t:this.s=Eo.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Eo=new Tt;ma.geo.stream=function(t,e){t&&Fo.hasOwnProperty(t.type)?Fo[t.type](t,e):At(t,e)};var Fo={Feature:function(t,e){At(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)At(n[i].geometry,e)}},Ro={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Lt(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Lt(n[i],e,0)},Polygon:function(t,e){Et(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Et(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)At(n[i],e)}};ma.geo.area=function(t){return Po=0,ma.geo.stream(t,Do),Po};var Po,zo=new Tt,Do={sphere:function(){Po+=4*Va},point:l,lineStart:l,lineEnd:l,polygonStart:function(){zo.reset(),Do.lineStart=Ft},polygonEnd:function(){var t=2*zo;Po+=0>t?4*Va+t:t,Do.lineStart=Do.lineEnd=Do.point=l}};ma.geo.bounds=function(){function t(t,e){y.push(b=[h=t,f=t]),c>e&&(c=e),e>d&&(d=e)}function e(e,n){var i=Rt([e*Qa,n*Qa]);if(m){var r=zt(m,i),a=[r[1],-r[0],0],o=zt(a,r);Nt(o),o=Ot(o);var l=e-p,u=l>0?1:-1,g=o[0]*Ja*u,v=Math.abs(l)>180;if(v^(g>u*p&&u*e>g)){var x=o[1]*Ja;x>d&&(d=x)}else if(g=(g+360)%360-180,v^(g>u*p&&u*e>g)){var x=-o[1]*Ja;c>x&&(c=x)}else c>n&&(c=n),n>d&&(d=n);v?p>e?s(h,e)>s(h,f)&&(f=e):s(e,f)>s(h,f)&&(h=e):f>=h?(h>e&&(h=e),e>f&&(f=e)):e>p?s(h,e)>s(h,f)&&(f=e):s(e,f)>s(h,f)&&(h=e)}else t(e,n);m=i,p=e}function n(){_.point=e}function i(){b[0]=h,b[1]=f,_.point=t,m=null}function r(t,n){if(m){var i=t-p;x+=Math.abs(i)>180?i+(i>0?360:-360):i}else g=t,v=n;Do.point(t,n),e(t,n)}function a(){Do.lineStart()}function o(){r(g,v),Do.lineEnd(),Math.abs(x)>Za&&(h=-(f=180)),b[0]=h,b[1]=f,m=null}function s(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var h,c,f,d,p,g,v,m,x,y,b,_={point:t,lineStart:n,lineEnd:i,polygonStart:function(){_.point=r,_.lineStart=a,_.lineEnd=o,x=0,Do.polygonStart()},polygonEnd:function(){Do.polygonEnd(),_.point=t,_.lineStart=n,_.lineEnd=i,0>zo?(h=-(f=180),c=-(d=90)):x>Za?d=90:-Za>x&&(c=-90),b[0]=h,b[1]=f}};return function(t){d=f=-(h=c=1/0),y=[],ma.geo.stream(t,_);var e=y.length;if(e){y.sort(l);for(var n,i=1,r=y[0],a=[r];e>i;++i)n=y[i],u(n[0],r)||u(n[1],r)?(s(r[0],n[1])>s(r[0],r[1])&&(r[1]=n[1]),s(n[0],r[1])>s(r[0],r[1])&&(r[0]=n[0])):a.push(r=n);for(var o,n,p=-1/0,e=a.length-1,i=0,r=a[e];e>=i;r=n,++i)n=a[i],(o=s(r[1],n[0]))>p&&(p=o,h=n[0],f=r[1])}return y=b=null,1/0===h||1/0===c?[[NaN,NaN],[NaN,NaN]]:[[h,c],[f,d]]}}(),ma.geo.centroid=function(t){Io=No=Oo=Bo=Ho=Xo=Wo=Yo=jo=qo=Vo=0,ma.geo.stream(t,Go);var e=jo,n=qo,i=Vo,r=e*e+n*n+i*i;return $a>r&&(e=Xo,n=Wo,i=Yo,Za>No&&(e=Oo,n=Bo,i=Ho),r=e*e+n*n+i*i,$a>r)?[NaN,NaN]:[Math.atan2(n,e)*Ja,B(i/Math.sqrt(r))*Ja]};var Io,No,Oo,Bo,Ho,Xo,Wo,Yo,jo,qo,Vo,Go={sphere:l,point:Ht,lineStart:Wt,lineEnd:Yt,polygonStart:function(){Go.lineStart=jt},polygonEnd:function(){Go.lineStart=Wt}},Uo=Ut(qt,Kt,ee,[-Va,-Va/2]),Zo=1e9;ma.geo.clipExtent=function(){var t,e,n,i,r,a,o={stream:function(t){return r&&(r.valid=!1),r=a(t),r.valid=!0,r},extent:function(s){return arguments.length?(a=ie(t=+s[0][0],e=+s[0][1],n=+s[1][0],i=+s[1][1]),r&&(r.valid=!1,r=null),o):[[t,e],[n,i]]}};return o.extent([[0,0],[960,500]])},(ma.geo.conicEqualArea=function(){return oe(se)}).raw=se,ma.geo.albers=function(){return ma.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ma.geo.albersUsa=function(){function t(t){var a=t[0],o=t[1];return e=null,n(a,o),e||(i(a,o),e)||r(a,o),e}var e,n,i,r,a=ma.geo.albers(),o=ma.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=ma.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?o:r>=.166&&.234>r&&i>=-.214&&-.115>i?s:a).invert(t)},t.stream=function(t){var e=a.stream(t),n=o.stream(t),i=s.stream(t);return{point:function(t,r){e.point(t,r),n.point(t,r),i.point(t,r)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},t.precision=function(e){return arguments.length?(a.precision(e),o.precision(e),s.precision(e),t):a.precision()},t.scale=function(e){return arguments.length?(a.scale(e),o.scale(.35*e),s.scale(e),t.translate(a.translate())):a.scale()},t.translate=function(e){if(!arguments.length)return a.translate();var u=a.scale(),h=+e[0],c=+e[1];return n=a.translate(e).clipExtent([[h-.455*u,c-.238*u],[h+.455*u,c+.238*u]]).stream(l).point,i=o.translate([h-.307*u,c+.201*u]).clipExtent([[h-.425*u+Za,c+.12*u+Za],[h-.214*u-Za,c+.234*u-Za]]).stream(l).point,r=s.translate([h-.205*u,c+.212*u]).clipExtent([[h-.214*u+Za,c+.166*u+Za],[h-.115*u-Za,c+.234*u-Za]]).stream(l).point,t},t.scale(1070)};var $o,Qo,Jo,Ko,ts,es,ns={point:l,lineStart:l,lineEnd:l,polygonStart:function(){Qo=0,ns.lineStart=le},polygonEnd:function(){ns.lineStart=ns.lineEnd=ns.point=l,$o+=Math.abs(Qo/2)}},is={point:ue,lineStart:l,lineEnd:l,polygonStart:l,polygonEnd:l},rs={point:fe,lineStart:de,lineEnd:pe,polygonStart:function(){rs.lineStart=ge},polygonEnd:function(){rs.point=fe,rs.lineStart=de,rs.lineEnd=pe}};ma.geo.transform=function(t){return{stream:function(e){var n=new xe(e);for(var i in t)n[i]=t[i];return n}}},xe.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ma.geo.path=function(){function t(t){return t&&("function"==typeof s&&a.pointRadius(+s.apply(this,arguments)),o&&o.valid||(o=r(a)),ma.geo.stream(t,o)),a.result()}function e(){return o=null,t}var n,i,r,a,o,s=4.5;return t.area=function(t){return $o=0,ma.geo.stream(t,r(ns)),$o},t.centroid=function(t){return Oo=Bo=Ho=Xo=Wo=Yo=jo=qo=Vo=0,ma.geo.stream(t,r(rs)),Vo?[jo/Vo,qo/Vo]:Yo?[Xo/Yo,Wo/Yo]:Ho?[Oo/Ho,Bo/Ho]:[NaN,NaN]},t.bounds=function(t){return ts=es=-(Jo=Ko=1/0),ma.geo.stream(t,r(is)),[[Jo,Ko],[ts,es]]},t.projection=function(t){return arguments.length?(r=(n=t)?t.stream||ye(t):gt,e()):n},t.context=function(t){return arguments.length?(a=null==(i=t)?new he:new ve(t),"function"!=typeof s&&a.pointRadius(s),e()):i},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(a.pointRadius(+e),+e),t):s},t.projection(ma.geo.albersUsa()).context(null)},ma.geo.projection=be,ma.geo.projectionMutator=_e,(ma.geo.equirectangular=function(){return be(Me)}).raw=Me.invert=Me,ma.geo.rotation=function(t){function e(e){return e=t(e[0]*Qa,e[1]*Qa),e[0]*=Ja,e[1]*=Ja,e}return t=Se(t[0]%360*Qa,t[1]*Qa,t.length>2?t[2]*Qa:0),e.invert=function(e){return e=t.invert(e[0]*Qa,e[1]*Qa),e[0]*=Ja,e[1]*=Ja,e},e},ke.invert=Me,ma.geo.circle=function(){function t(){var t="function"==typeof i?i.apply(this,arguments):i,e=Se(-t[0]*Qa,-t[1]*Qa,0).invert,r=[];return n(null,null,1,{point:function(t,n){r.push(t=e(t,n)),t[0]*=Ja,t[1]*=Ja}}),{type:"Polygon",coordinates:[r]}}var e,n,i=[0,0],r=6;return t.origin=function(e){return arguments.length?(i=e,t):i},t.angle=function(i){return arguments.length?(n=Le((e=+i)*Qa,r*Qa),t):e},t.precision=function(i){return arguments.length?(n=Le(e*Qa,(r=+i)*Qa),t):r},t.angle(90)},ma.geo.distance=function(t,e){var n,i=(e[0]-t[0])*Qa,r=t[1]*Qa,a=e[1]*Qa,o=Math.sin(i),s=Math.cos(i),l=Math.sin(r),u=Math.cos(r),h=Math.sin(a),c=Math.cos(a);return Math.atan2(Math.sqrt((n=c*o)*n+(n=u*h-l*c*s)*n),l*h+u*c*s)},ma.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return ma.range(Math.ceil(a/v)*v,r,v).map(f).concat(ma.range(Math.ceil(u/m)*m,l,m).map(d)).concat(ma.range(Math.ceil(i/p)*p,n,p).filter(function(t){return Math.abs(t%v)>Za}).map(h)).concat(ma.range(Math.ceil(s/g)*g,o,g).filter(function(t){return Math.abs(t%m)>Za}).map(c))}var n,i,r,a,o,s,l,u,h,c,f,d,p=10,g=p,v=90,m=360,x=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[f(a).concat(d(l).slice(1),f(r).reverse().slice(1),d(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(a=+e[0][0],r=+e[1][0],u=+e[0][1],l=+e[1][1],a>r&&(e=a,a=r,r=e),u>l&&(e=u,u=l,l=e),t.precision(x)):[[a,u],[r,l]]},t.minorExtent=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],s=+e[0][1],o=+e[1][1],i>n&&(e=i,i=n,n=e),s>o&&(e=s,s=o,o=e),t.precision(x)):[[i,s],[n,o]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(v=+e[0],m=+e[1],t):[v,m]},t.minorStep=function(e){return arguments.length?(p=+e[0],g=+e[1],t):[p,g]},t.precision=function(e){return arguments.length?(x=+e,h=Fe(s,o,90),c=Re(i,n,x),f=Fe(u,l,90),d=Re(a,r,x),t):x},t.majorExtent([[-180,-90+Za],[180,90-Za]]).minorExtent([[-180,-80-Za],[180,80+Za]])},ma.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}var e,n,i=Pe,r=ze;return t.distance=function(){return ma.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.target=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},ma.geo.interpolate=function(t,e){return De(t[0]*Qa,t[1]*Qa,e[0]*Qa,e[1]*Qa)},ma.geo.length=function(t){return as=0,ma.geo.stream(t,os),as};var as,os={sphere:l,point:l,lineStart:Ie,lineEnd:l,polygonStart:l,polygonEnd:l},ss=Ne(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(ma.geo.azimuthalEqualArea=function(){return be(ss)}).raw=ss;var ls=Ne(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},gt);(ma.geo.azimuthalEquidistant=function(){return be(ls)}).raw=ls,(ma.geo.conicConformal=function(){return oe(Oe)}).raw=Oe,(ma.geo.conicEquidistant=function(){return oe(Be)}).raw=Be;var us=Ne(function(t){return 1/t},Math.atan);(ma.geo.gnomonic=function(){return be(us)}).raw=us,He.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ua]},(ma.geo.mercator=function(){return Xe(He)}).raw=He;var hs=Ne(function(){return 1},Math.asin);(ma.geo.orthographic=function(){return be(hs)}).raw=hs;var cs=Ne(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(ma.geo.stereographic=function(){return be(cs)}).raw=cs,We.invert=function(t,e){return[Math.atan2(H(t),Math.cos(e)),B(Math.sin(e)/X(t))]},(ma.geo.transverseMercator=function(){return Xe(We)}).raw=We,ma.geom={},ma.svg={},ma.svg.line=function(){return Ye(gt)};var fs=ma.map({linear:Ve,"linear-closed":Ge,step:Ue,"step-before":Ze,"step-after":$e,basis:nn,"basis-open":rn,"basis-closed":an,bundle:on,cardinal:Ke,"cardinal-open":Qe,"cardinal-closed":Je,monotone:fn});fs.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var ds=[0,2/3,1/3,0],ps=[0,1/3,2/3,0],gs=[0,1/6,2/3,1/6];ma.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,r,a,o,s,l,u,h,c,f,d,p,g=pt(n),v=pt(i),m=t.length,x=m-1,y=[],b=[],_=0;if(g===je&&i===qe)e=t;else for(a=0,e=[];m>a;++a)e.push([+g.call(this,r=t[a],a),+v.call(this,r,a)]);for(a=1;m>a;++a)(e[a][1]<e[_][1]||e[a][1]==e[_][1]&&e[a][0]<e[_][0])&&(_=a);for(a=0;m>a;++a)a!==_&&(l=e[a][1]-e[_][1],s=e[a][0]-e[_][0],y.push({angle:Math.atan2(l,s),index:a}));for(y.sort(function(t,e){return t.angle-e.angle}),d=y[0].angle,f=y[0].index,c=0,a=1;x>a;++a){if(o=y[a].index,d==y[a].angle){if(s=e[f][0]-e[_][0],l=e[f][1]-e[_][1],u=e[o][0]-e[_][0],h=e[o][1]-e[_][1],s*s+l*l>=u*u+h*h){y[a].index=-1;continue}y[c].index=-1}d=y[a].angle,c=a,f=o}for(b.push(_),a=0,o=0;2>a;++o)y[o].index>-1&&(b.push(y[o].index),a++);for(p=b.length;x>o;++o)if(!(y[o].index<0)){for(;!dn(b[p-2],b[p-1],y[o].index,e);)--p;b[p++]=y[o].index}var w=[];for(a=p-1;a>=0;--a)w.push(t[b[a]]);return w}var n=je,i=qe;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e)},ma.geom.polygon=function(t){return Pa(t,vs),t};var vs=ma.geom.polygon.prototype=[];vs.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},vs.centroid=function(t){var e,n,i=-1,r=this.length,a=0,o=0,s=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=s,s=this[i],n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a*t,o*t]},vs.clip=function(t){for(var e,n,i,r,a,o,s=vn(t),l=-1,u=this.length-vn(this),h=this[u-1];++l<u;){for(e=t.slice(),t.length=0,r=this[l],a=e[(i=e.length-s)-1],n=-1;++n<i;)o=e[n],pn(o,h,r)?(pn(a,h,r)||t.push(gn(a,o,h,r)),t.push(o)):pn(a,h,r)&&t.push(gn(a,o,h,r)),a=o;s&&t.push(t[0]),h=r}return t},ma.geom.delaunay=function(t){var e=t.map(function(){return[]}),n=[];return mn(t,function(n){e[n.region.l.index].push(t[n.region.r.index])}),e.forEach(function(e,i){var r=t[i],a=r[0],o=r[1];e.forEach(function(t){t.angle=Math.atan2(t[0]-a,t[1]-o)}),e.sort(function(t,e){return t.angle-e.angle});for(var s=0,l=e.length-1;l>s;s++)n.push([r,e[s],e[s+1]])}),n},ma.geom.voronoi=function(t){function e(t){var e,a,o,s=t.map(function(){return[]}),l=pt(n),u=pt(i),h=t.length,c=1e6;if(l===je&&u===qe)e=t;else for(e=new Array(h),o=0;h>o;++o)e[o]=[+l.call(this,a=t[o],o),+u.call(this,a,o)];if(mn(e,function(t){var e,n,i,r,a,o;1===t.a&&t.b>=0?(e=t.ep.r,n=t.ep.l):(e=t.ep.l,n=t.ep.r),1===t.a?(a=e?e.y:-c,i=t.c-t.b*a,o=n?n.y:c,r=t.c-t.b*o):(i=e?e.x:-c,a=t.c-t.a*i,r=n?n.x:c,o=t.c-t.a*r);var l=[i,a],u=[r,o];s[t.region.l.index].push(l,u),s[t.region.r.index].push(l,u)}),s=s.map(function(t,n){var i=e[n][0],r=e[n][1],a=t.map(function(t){return Math.atan2(t[0]-i,t[1]-r)}),o=ma.range(t.length).sort(function(t,e){return a[t]-a[e]});return o.filter(function(t,e){return!e||a[t]-a[o[e-1]]>Za}).map(function(e){return t[e]})}),s.forEach(function(t,n){var i=t.length;if(!i)return t.push([-c,-c],[-c,c],[c,c],[c,-c]);if(!(i>2)){var r=e[n],a=t[0],o=t[1],s=r[0],l=r[1],u=a[0],h=a[1],f=o[0],d=o[1],p=Math.abs(f-u),g=d-h;if(Math.abs(g)<Za){var v=h>l?-c:c;t.push([-c,v],[c,v])}else if(Za>p){var m=u>s?-c:c;t.push([m,-c],[m,c])}else{var v=(u-s)*(d-h)>(f-u)*(h-l)?c:-c,x=Math.abs(g)-p;Math.abs(x)<Za?t.push([0>g?v:-v,v]):(x>0&&(v*=-1),t.push([-c,v],[c,v]))}}}),r)for(o=0;h>o;++o)r.clip(s[o]);for(o=0;h>o;++o)s[o].point=t[o];return s}var n=je,i=qe,r=null;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.clipExtent=function(t){if(!arguments.length)return r&&[r[0],r[2]];if(null==t)r=null;else{var n=+t[0][0],i=+t[0][1],a=+t[1][0],o=+t[1][1];r=ma.geom.polygon([[n,i],[n,o],[a,o],[a,i]])}return e},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):r&&r[2]},e.links=function(t){var e,r,a,o=t.map(function(){return[]}),s=[],l=pt(n),u=pt(i),h=t.length;if(l===je&&u===qe)e=t;else for(e=new Array(h),a=0;h>a;++a)e[a]=[+l.call(this,r=t[a],a),+u.call(this,r,a)];return mn(e,function(e){var n=e.region.l.index,i=e.region.r.index;o[n][i]||(o[n][i]=o[i][n]=!0,s.push({source:t[n],target:t[i]}))}),s},e.triangles=function(t){if(n===je&&i===qe)return ma.geom.delaunay(t);for(var e,r=new Array(l),a=pt(n),o=pt(i),s=-1,l=t.length;++s<l;)(r[s]=[+a.call(this,e=t[s],s),+o.call(this,e,s)]).data=e;return ma.geom.delaunay(r).map(function(t){return t.map(function(t){return t.data})})},e)};var ms={l:"r",r:"l"};ma.geom.quadtree=function(t,e,n,i,r){function a(t){function a(t,e,n,i,r,a,o,s){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var l=t.x,h=t.y;if(null!=l)if(Math.abs(l-n)+Math.abs(h-i)<.01)u(t,e,n,i,r,a,o,s);else{var c=t.point;t.x=t.y=t.point=null,u(t,c,l,h,r,a,o,s),u(t,e,n,i,r,a,o,s)}else t.x=n,t.y=i,t.point=e}else u(t,e,n,i,r,a,o,s)}function u(t,e,n,i,r,o,s,l){var u=.5*(r+s),h=.5*(o+l),c=n>=u,f=i>=h,d=(f<<1)+c;t.leaf=!1,t=t.nodes[d]||(t.nodes[d]=bn()),c?r=u:s=u,f?o=h:l=h,a(t,e,n,i,r,o,s,l)}var h,c,f,d,p,g,v,m,x,y=pt(s),b=pt(l);if(null!=e)g=e,v=n,m=i,x=r;else if(m=x=-(g=v=1/0),c=[],f=[],p=t.length,o)for(d=0;p>d;++d)h=t[d],h.x<g&&(g=h.x),h.y<v&&(v=h.y),h.x>m&&(m=h.x),h.y>x&&(x=h.y),c.push(h.x),f.push(h.y);else for(d=0;p>d;++d){var _=+y(h=t[d],d),w=+b(h,d);g>_&&(g=_),v>w&&(v=w),_>m&&(m=_),w>x&&(x=w),c.push(_),f.push(w)}var M=m-g,k=x-v;M>k?x=v+M:m=g+k;var S=bn();if(S.add=function(t){a(S,t,+y(t,++d),+b(t,d),g,v,m,x)},S.visit=function(t){_n(t,S,g,v,m,x)},d=-1,null==e){for(;++d<p;)a(S,t[d],c[d],f[d],g,v,m,x);--d}else t.forEach(S.add);return c=f=t=h=null,S}var o,s=je,l=qe;return(o=arguments.length)?(s=xn,l=yn,3===o&&(r=n,i=e,n=e=0),a(t)):(a.x=function(t){return arguments.length?(s=t,a):s},a.y=function(t){return arguments.length?(l=t,a):l},a.extent=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),a):null==e?null:[[e,n],[i,r]]},a.size=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=n=0,i=+t[0],r=+t[1]),a):null==e?null:[i-e,r-n]},a)},ma.interpolateRgb=wn,ma.interpolateObject=Mn,ma.interpolateNumber=kn,ma.interpolateString=Sn;var xs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;ma.interpolate=Tn,ma.interpolators=[function(t,e){var n=typeof e;return("string"===n?po.has(e)||/^(#|rgb\(|hsl\()/.test(e)?wn:Sn:e instanceof j?wn:"object"===n?Array.isArray(e)?Cn:Mn:kn)(t,e)}],ma.interpolateArray=Cn;var ys=function(){return gt},bs=ma.map({linear:ys,poly:zn,quad:function(){return Fn},cubic:function(){return Rn},sin:function(){return Dn},exp:function(){return In},circle:function(){return Nn},elastic:On,back:Bn,bounce:function(){return Hn}}),_s=ma.map({"in":gt,out:Ln,"in-out":En,"out-in":function(t){return En(Ln(t))}});ma.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.substring(0,e):t,i=e>=0?t.substring(e+1):"in";return n=bs.get(n)||ys,i=_s.get(i)||gt,An(i(n.apply(null,Array.prototype.slice.call(arguments,1))))},ma.interpolateHcl=Xn,ma.interpolateHsl=Wn,ma.interpolateLab=Yn,ma.interpolateRound=jn,ma.transform=function(t){var e=ba.createElementNS(ma.ns.prefix.svg,"g");return(ma.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new qn(n?n.matrix:ws)})(t)},qn.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ws={a:1,b:0,c:0,d:1,e:0,f:0};ma.interpolateTransform=Zn,ma.layout={},ma.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(Jn(t[n]));return e}},ma.layout.chord=function(){function t(){var t,u,c,f,d,p={},g=[],v=ma.range(a),m=[];for(n=[],i=[],t=0,f=-1;++f<a;){for(u=0,d=-1;++d<a;)u+=r[f][d];g.push(u),m.push(ma.range(a)),t+=u}for(o&&v.sort(function(t,e){return o(g[t],g[e])}),s&&m.forEach(function(t,e){t.sort(function(t,n){return s(r[e][t],r[e][n])})}),t=(Ga-h*a)/t,u=0,f=-1;++f<a;){for(c=u,d=-1;++d<a;){var x=v[f],y=m[x][d],b=r[x][y],_=u,w=u+=b*t;p[x+"-"+y]={index:x,subindex:y,startAngle:_,endAngle:w,value:b}}i[x]={index:x,startAngle:c,endAngle:u,value:(u-c)/t},u+=h}for(f=-1;++f<a;)for(d=f-1;++d<a;){var M=p[f+"-"+d],k=p[d+"-"+f];(M.value||k.value)&&n.push(M.value<k.value?{source:k,target:M}:{source:M,target:k})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,r,a,o,s,l,u={},h=0;return u.matrix=function(t){return arguments.length?(a=(r=t)&&r.length,n=i=null,u):r},u.padding=function(t){return arguments.length?(h=t,n=i=null,u):h},u.sortGroups=function(t){return arguments.length?(o=t,n=i=null,u):o},u.sortSubgroups=function(t){return arguments.length?(s=t,n=null,u):s},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return i||t(),i},u},ma.layout.force=function(){function t(t){return function(e,n,i,r){if(e.point!==t){var a=e.cx-t.x,o=e.cy-t.y,s=1/Math.sqrt(a*a+o*o);if(g>(r-n)*s){var l=e.charge*s*s;return t.px-=a*l,t.py-=o*l,!0}if(e.point&&isFinite(s)){var l=e.pointCharge*s*s;t.px-=a*l,t.py-=o*l}}return!e.charge}}function e(t){t.px=ma.event.x,t.py=ma.event.y,s.resume()}var n,i,r,a,o,s={},l=ma.dispatch("start","tick","end"),u=[1,1],h=.9,c=Ms,f=ks,d=-30,p=.1,g=.8,v=[],m=[];return s.tick=function(){if((i*=.99)<.005)return l.end({type:"end",alpha:i=0}),!0;var e,n,s,c,f,g,x,y,b,_=v.length,w=m.length;for(n=0;w>n;++n)s=m[n],c=s.source,f=s.target,y=f.x-c.x,b=f.y-c.y,(g=y*y+b*b)&&(g=i*a[n]*((g=Math.sqrt(g))-r[n])/g,y*=g,b*=g,f.x-=y*(x=c.weight/(f.weight+c.weight)),f.y-=b*x,c.x+=y*(x=1-x),c.y+=b*x);if((x=i*p)&&(y=u[0]/2,b=u[1]/2,n=-1,x))for(;++n<_;)s=v[n],s.x+=(y-s.x)*x,s.y+=(b-s.y)*x;if(d)for(ai(e=ma.geom.quadtree(v),i,o),n=-1;++n<_;)(s=v[n]).fixed||e.visit(t(s));for(n=-1;++n<_;)s=v[n],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*h,s.y-=(s.py-(s.py=s.y))*h);l.tick({type:"tick",alpha:i})},s.nodes=function(t){return arguments.length?(v=t,s):v},s.links=function(t){return arguments.length?(m=t,s):m},s.size=function(t){return arguments.length?(u=t,s):u},s.linkDistance=function(t){return arguments.length?(c="function"==typeof t?t:+t,s):c},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.friction=function(t){return arguments.length?(h=+t,s):h},s.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.gravity=function(t){return arguments.length?(p=+t,s):p},s.theta=function(t){return arguments.length?(g=+t,s):g},s.alpha=function(t){return arguments.length?(t=+t,i?i=t>0?t:0:t>0&&(l.start({type:"start",alpha:i=t}),ma.timer(s.tick)),s):i},s.start=function(){function t(t,i){for(var r,a=e(n),o=-1,s=a.length;++o<s;)if(!isNaN(r=a[o][t]))return r;return Math.random()*i}function e(){if(!l){for(l=[],i=0;p>i;++i)l[i]=[];for(i=0;g>i;++i){var t=m[i];l[t.source.index].push(t.target),l[t.target.index].push(t.source)}}return l[n]}var n,i,l,h,p=v.length,g=m.length,x=u[0],y=u[1];for(n=0;p>n;++n)(h=v[n]).index=n,h.weight=0;for(n=0;g>n;++n)h=m[n],"number"==typeof h.source&&(h.source=v[h.source]),"number"==typeof h.target&&(h.target=v[h.target]),++h.source.weight,++h.target.weight;for(n=0;p>n;++n)h=v[n],isNaN(h.x)&&(h.x=t("x",x)),isNaN(h.y)&&(h.y=t("y",y)),isNaN(h.px)&&(h.px=h.x),isNaN(h.py)&&(h.py=h.y);if(r=[],"function"==typeof c)for(n=0;g>n;++n)r[n]=+c.call(this,m[n],n);else for(n=0;g>n;++n)r[n]=c;if(a=[],"function"==typeof f)for(n=0;g>n;++n)a[n]=+f.call(this,m[n],n);else for(n=0;g>n;++n)a[n]=f;if(o=[],"function"==typeof d)for(n=0;p>n;++n)o[n]=+d.call(this,v[n],n);else for(n=0;p>n;++n)o[n]=d;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return n||(n=ma.behavior.drag().origin(gt).on("dragstart.force",ei).on("drag.force",e).on("dragend.force",ni)),arguments.length?void this.on("mouseover.force",ii).on("mouseout.force",ri).call(n):n},ma.rebind(s,l,"on")};var Ms=20,ks=1;ma.layout.hierarchy=function(){function t(e,o,s){var l=r.call(n,e,o);if(e.depth=o,s.push(e),l&&(u=l.length)){for(var u,h,c=-1,f=e.children=[],d=0,p=o+1;++c<u;)h=t(l[c],p,s),h.parent=e,f.push(h),d+=h.value;i&&f.sort(i),a&&(e.value=d)}else a&&(e.value=+a.call(n,e,o)||0);return e}function e(t,i){var r=t.children,o=0;if(r&&(s=r.length))for(var s,l=-1,u=i+1;++l<s;)o+=e(r[l],u);else a&&(o=+a.call(n,t,i)||0);return a&&(t.value=o),o}function n(e){var n=[];return t(e,0,n),n}var i=ui,r=si,a=li;return n.sort=function(t){return arguments.length?(i=t,n):i},n.children=function(t){return arguments.length?(r=t,n):r},n.value=function(t){return arguments.length?(a=t,n):a},n.revalue=function(t){return e(t,0),t},n},ma.layout.partition=function(){function t(e,n,i,r){var a=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,a&&(o=a.length)){var o,s,l,u=-1;for(i=e.value?i/e.value:0;++u<o;)t(s=a[u],n,l=s.value*i,r),n+=l}}function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,a=-1;++a<r;)i=Math.max(i,e(n[a]));return 1+i}function n(n,a){var o=i.call(this,n,a);return t(o[0],0,r[0],r[1]/e(o[0])),o}var i=ma.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},oi(n,i)},ma.layout.pie=function(){function t(a){var o=a.map(function(n,i){return+e.call(t,n,i)}),s=+("function"==typeof i?i.apply(this,arguments):i),l=(("function"==typeof r?r.apply(this,arguments):r)-s)/ma.sum(o),u=ma.range(a.length);null!=n&&u.sort(n===Ss?function(t,e){return o[e]-o[t]}:function(t,e){return n(a[t],a[e])});var h=[];return u.forEach(function(t){var e;h[t]={data:a[t],value:e=o[t],startAngle:s,endAngle:s+=e*l}}),h}var e=Number,n=Ss,i=0,r=Ga;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(r=e,t):r},t};var Ss={};ma.layout.stack=function(){function t(s,l){var u=s.map(function(n,i){return e.call(t,n,i)}),h=u.map(function(e){return e.map(function(e,n){return[a.call(t,e,n),o.call(t,e,n)]})}),c=n.call(t,h,l);u=ma.permute(u,c),h=ma.permute(h,c);var f,d,p,g=i.call(t,h,l),v=u.length,m=u[0].length;for(d=0;m>d;++d)for(r.call(t,u[0][d],p=g[d],h[0][d][1]),f=1;v>f;++f)r.call(t,u[f][d],p+=h[f-1][d][1],h[f][d][1]);return s}var e=gt,n=pi,i=gi,r=di,a=ci,o=fi;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:Ts.get(e)||pi,t):n},t.offset=function(e){return arguments.length?(i="function"==typeof e?e:Cs.get(e)||gi,t):i},t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(o=e,t):o},t.out=function(e){return arguments.length?(r=e,t):r},t};var Ts=ma.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(vi),a=t.map(mi),o=ma.range(i).sort(function(t,e){return r[t]-r[e]}),s=0,l=0,u=[],h=[];for(e=0;i>e;++e)n=o[e],l>s?(s+=a[n],u.push(n)):(l+=a[n],h.push(n));return h.reverse().concat(u)},reverse:function(t){return ma.range(t.length).reverse()},"default":pi}),Cs=ma.map({silhouette:function(t){var e,n,i,r=t.length,a=t[0].length,o=[],s=0,l=[];for(n=0;a>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];i>s&&(s=i),o.push(i)}for(n=0;a>n;++n)l[n]=(s-o[n])/2;return l},wiggle:function(t){var e,n,i,r,a,o,s,l,u,h=t.length,c=t[0],f=c.length,d=[];for(d[0]=l=u=0,n=1;f>n;++n){for(e=0,r=0;h>e;++e)r+=t[e][n][1];for(e=0,a=0,s=c[n][0]-c[n-1][0];h>e;++e){for(i=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);e>i;++i)o+=(t[i][n][1]-t[i][n-1][1])/s;a+=o*t[e][n][1]}d[n]=l-=r?a/r*s:0,u>l&&(u=l)}for(n=0;f>n;++n)d[n]-=u;return d},expand:function(t){var e,n,i,r=t.length,a=t[0].length,o=1/r,s=[];for(n=0;a>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];if(i)for(e=0;r>e;e++)t[e][n][1]/=i;else for(e=0;r>e;e++)t[e][n][1]=o}for(n=0;a>n;++n)s[n]=0;return s},zero:gi});ma.layout.histogram=function(){function t(t,a){for(var o,s,l=[],u=t.map(n,this),h=i.call(this,u,a),c=r.call(this,h,u,a),a=-1,f=u.length,d=c.length-1,p=e?1:1/f;++a<d;)o=l[a]=[],o.dx=c[a+1]-(o.x=c[a]),o.y=0;if(d>0)for(a=-1;++a<f;)s=u[a],s>=h[0]&&s<=h[1]&&(o=l[ma.bisect(c,s,1,d)-1],o.y+=p,o.push(t[a]));return l}var e=!0,n=Number,i=_i,r=yi;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=pt(e),t):i},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return bi(t,e)}:pt(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},ma.layout.tree=function(){function t(t,a){function o(t,e){var i=t.children,r=t._tree;if(i&&(a=i.length)){for(var a,s,u,h=i[0],c=h,f=-1;++f<a;)u=i[f],o(u,s),c=l(u,s,c),s=u;Ei(t);var d=.5*(h._tree.prelim+u._tree.prelim);e?(r.prelim=e._tree.prelim+n(t,e),r.mod=r.prelim-d):r.prelim=d}else e&&(r.prelim=e._tree.prelim+n(t,e))}function s(t,e){t.x=t._tree.prelim+e;var n=t.children;if(n&&(i=n.length)){var i,r=-1;for(e+=t._tree.mod;++r<i;)s(n[r],e)}}function l(t,e,i){if(e){for(var r,a=t,o=t,s=e,l=t.parent.children[0],u=a._tree.mod,h=o._tree.mod,c=s._tree.mod,f=l._tree.mod;s=ki(s),a=Mi(a),s&&a;)l=Mi(l),o=ki(o),o._tree.ancestor=t,r=s._tree.prelim+c-a._tree.prelim-u+n(s,a),r>0&&(Fi(Ri(s,t,i),t,r),u+=r,h+=r),c+=s._tree.mod,u+=a._tree.mod,f+=l._tree.mod,h+=o._tree.mod;s&&!ki(o)&&(o._tree.thread=s,o._tree.mod+=c-h),a&&!Mi(l)&&(l._tree.thread=a,l._tree.mod+=u-f,i=t)}return i}var u=e.call(this,t,a),h=u[0];Li(h,function(t,e){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:e?e._tree.number+1:0}}),o(h),s(h,-h._tree.prelim);var c=Si(h,Ci),f=Si(h,Ti),d=Si(h,Ai),p=c.x-n(c,f)/2,g=f.x+n(f,c)/2,v=d.depth||1;return Li(h,r?function(t){t.x*=i[0],t.y=t.depth*i[1],delete t._tree}:function(t){t.x=(t.x-p)/(g-p)*i[0],t.y=t.depth/v*i[1],delete t._tree}),u}var e=ma.layout.hierarchy().sort(null).value(null),n=wi,i=[1,1],r=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=null==(i=e),t):r?null:i},t.nodeSize=function(e){return arguments.length?(r=null!=(i=e),t):r?i:null},oi(t,e)},ma.layout.pack=function(){function t(t,a){var o=n.call(this,t,a),s=o[0],l=r[0],u=r[1],h=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,Li(s,function(t){t.r=+h(t.value)}),Li(s,Ni),i){var c=i*(e?1:Math.max(2*s.r/l,2*s.r/u))/2;Li(s,function(t){t.r+=c}),Li(s,Ni),Li(s,function(t){t.r-=c})}return Hi(s,l/2,u/2,e?1:1/Math.max(2*s.r/l,2*s.r/u)),o}var e,n=ma.layout.hierarchy().sort(Pi),i=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(i=+e,t):i},oi(t,n)},ma.layout.cluster=function(){function t(t,a){var o,s=e.call(this,t,a),l=s[0],u=0;Li(l,function(t){var e=t.children;e&&e.length?(t.x=Yi(e),t.y=Wi(e)):(t.x=o?u+=n(t,o):0,t.y=0,o=t)});var h=ji(l),c=qi(l),f=h.x-n(h,c)/2,d=c.x+n(c,h)/2;return Li(l,r?function(t){t.x=(t.x-l.x)*i[0],t.y=(l.y-t.y)*i[1]}:function(t){t.x=(t.x-f)/(d-f)*i[0],t.y=(1-(l.y?t.y/l.y:1))*i[1]}),s}var e=ma.layout.hierarchy().sort(null).value(null),n=wi,i=[1,1],r=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=null==(i=e),t):r?null:i},t.nodeSize=function(e){return arguments.length?(r=null!=(i=e),t):r?i:null},oi(t,e)},ma.layout.treemap=function(){function t(t,e){for(var n,i,r=-1,a=t.length;++r<a;)i=(n=t[r]).value*(0>e?0:e),n.area=isNaN(i)||0>=i?0:i}function e(n){var a=n.children;if(a&&a.length){var o,s,l,u=c(n),h=[],f=a.slice(),p=1/0,g="slice"===d?u.dx:"dice"===d?u.dy:"slice-dice"===d?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(t(f,u.dx*u.dy/n.value),h.area=0;(l=f.length)>0;)h.push(o=f[l-1]),h.area+=o.area,"squarify"!==d||(s=i(h,g))<=p?(f.pop(),p=s):(h.area-=h.pop().area,r(h,g,u,!1),
g=Math.min(u.dx,u.dy),h.length=h.area=0,p=1/0);h.length&&(r(h,g,u,!0),h.length=h.area=0),a.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var a,o=c(e),s=i.slice(),l=[];for(t(s,o.dx*o.dy/e.value),l.area=0;a=s.pop();)l.push(a),l.area+=a.area,null!=a.z&&(r(l,a.z?o.dx:o.dy,o,!s.length),l.length=l.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,r=0,a=1/0,o=-1,s=t.length;++o<s;)(n=t[o].area)&&(a>n&&(a=n),n>r&&(r=n));return i*=i,e*=e,i?Math.max(e*r*p/i,i/(e*a*p)):1/0}function r(t,e,n,i){var r,a=-1,o=t.length,s=n.x,u=n.y,h=e?l(t.area/e):0;if(e==n.dx){for((i||h>n.dy)&&(h=n.dy);++a<o;)r=t[a],r.x=s,r.y=u,r.dy=h,s+=r.dx=Math.min(n.x+n.dx-s,h?l(r.area/h):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=h,n.dy-=h}else{for((i||h>n.dx)&&(h=n.dx);++a<o;)r=t[a],r.x=s,r.y=u,r.dx=h,u+=r.dy=Math.min(n.y+n.dy-u,h?l(r.area/h):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=h,n.dx-=h}}function a(i){var r=o||s(i),a=r[0];return a.x=0,a.y=0,a.dx=u[0],a.dy=u[1],o&&s.revalue(a),t([a],a.dx*a.dy/a.value),(o?n:e)(a),f&&(o=r),r}var o,s=ma.layout.hierarchy(),l=Math.round,u=[1,1],h=null,c=Vi,f=!1,d="squarify",p=.5*(1+Math.sqrt(5));return a.size=function(t){return arguments.length?(u=t,a):u},a.padding=function(t){function e(e){var n=t.call(a,e,e.depth);return null==n?Vi(e):Gi(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Gi(e,t)}if(!arguments.length)return h;var i;return c=null==(h=t)?Vi:"function"==(i=typeof t)?e:"number"===i?(t=[t,t,t,t],n):n,a},a.round=function(t){return arguments.length?(l=t?Math.round:Number,a):l!=Number},a.sticky=function(t){return arguments.length?(f=t,o=null,a):f},a.ratio=function(t){return arguments.length?(p=t,a):p},a.mode=function(t){return arguments.length?(d=t+"",a):d},oi(a,s)},ma.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=ma.random.normal.apply(ma,arguments);return function(){return Math.exp(t())}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e/t}}},ma.scale={};var As={floor:gt,ceil:gt};ma.scale.linear=function(){return tr([0,1],[0,1],Tn,!1)},ma.scale.log=function(){return or(ma.scale.linear().domain([0,1]),10,!0,[1,10])};var Ls=ma.format(".0e"),Es={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};ma.scale.pow=function(){return sr(ma.scale.linear(),1,[0,1])},ma.scale.sqrt=function(){return ma.scale.pow().exponent(.5)},ma.scale.ordinal=function(){return ur([],{t:"range",a:[[]]})},ma.scale.category10=function(){return ma.scale.ordinal().range(Fs)},ma.scale.category20=function(){return ma.scale.ordinal().range(Rs)},ma.scale.category20b=function(){return ma.scale.ordinal().range(Ps)},ma.scale.category20c=function(){return ma.scale.ordinal().range(zs)};var Fs=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(at),Rs=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(at),Ps=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(at),zs=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(at);ma.scale.quantile=function(){return hr([],[])},ma.scale.quantize=function(){return cr(0,1,[0,1])},ma.scale.threshold=function(){return fr([.5],[0,1])},ma.scale.identity=function(){return dr([0,1])},ma.svg.arc=function(){function t(){var t=e.apply(this,arguments),a=n.apply(this,arguments),o=i.apply(this,arguments)+Ds,s=r.apply(this,arguments)+Ds,l=(o>s&&(l=o,o=s,s=l),s-o),u=Va>l?"0":"1",h=Math.cos(o),c=Math.sin(o),f=Math.cos(s),d=Math.sin(s);return l>=Is?t?"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z":t?"M"+a*h+","+a*c+"A"+a+","+a+" 0 "+u+",1 "+a*f+","+a*d+"L"+t*f+","+t*d+"A"+t+","+t+" 0 "+u+",0 "+t*h+","+t*c+"Z":"M"+a*h+","+a*c+"A"+a+","+a+" 0 "+u+",1 "+a*f+","+a*d+"L0,0Z"}var e=pr,n=gr,i=vr,r=mr;return t.innerRadius=function(n){return arguments.length?(e=pt(n),t):e},t.outerRadius=function(e){return arguments.length?(n=pt(e),t):n},t.startAngle=function(e){return arguments.length?(i=pt(e),t):i},t.endAngle=function(e){return arguments.length?(r=pt(e),t):r},t.centroid=function(){var t=(e.apply(this,arguments)+n.apply(this,arguments))/2,a=(i.apply(this,arguments)+r.apply(this,arguments))/2+Ds;return[Math.cos(a)*t,Math.sin(a)*t]},t};var Ds=-Ua,Is=Ga-Za;ma.svg.line.radial=function(){var t=Ye(xr);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Ze.reverse=$e,$e.reverse=Ze,ma.svg.area=function(){return yr(gt)},ma.svg.area.radial=function(){var t=yr(xr);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},ma.svg.chord=function(){function t(t,s){var l=e(this,a,t,s),u=e(this,o,t,s);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,u)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,u.r,u.p0)+i(u.r,u.p1,u.a1-u.a0)+r(u.r,u.p1,l.r,l.p0))+"Z"}function e(t,e,n,i){var r=e.call(t,n,i),a=s.call(t,r,i),o=l.call(t,r,i)+Ds,h=u.call(t,r,i)+Ds;return{r:a,a0:o,a1:h,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(h),a*Math.sin(h)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function i(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Va)+",1 "+e}function r(t,e,n,i){return"Q 0,0 "+i}var a=Pe,o=ze,s=br,l=vr,u=mr;return t.radius=function(e){return arguments.length?(s=pt(e),t):s},t.source=function(e){return arguments.length?(a=pt(e),t):a},t.target=function(e){return arguments.length?(o=pt(e),t):o},t.startAngle=function(e){return arguments.length?(l=pt(e),t):l},t.endAngle=function(e){return arguments.length?(u=pt(e),t):u},t},ma.svg.diagonal=function(){function t(t,r){var a=e.call(this,t,r),o=n.call(this,t,r),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=Pe,n=ze,i=_r;return t.source=function(n){return arguments.length?(e=pt(n),t):e},t.target=function(e){return arguments.length?(n=pt(e),t):n},t.projection=function(e){return arguments.length?(i=e,t):i},t},ma.svg.diagonal.radial=function(){var t=ma.svg.diagonal(),e=_r,n=t.projection;return t.projection=function(t){return arguments.length?n(wr(e=t)):e},t},ma.svg.symbol=function(){function t(t,i){return(Ns.get(e.call(this,t,i))||Sr)(n.call(this,t,i))}var e=kr,n=Mr;return t.type=function(n){return arguments.length?(e=pt(n),t):e},t.size=function(e){return arguments.length?(n=pt(e),t):n},t};var Ns=ma.map({circle:Sr,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Xs)),n=e*Xs;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Hs),n=e*Hs/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Hs),n=e*Hs/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});ma.svg.symbolTypes=Ns.keys();var Os,Bs,Hs=Math.sqrt(3),Xs=Math.tan(30*Qa),Ws=[],Ys=0;Ws.call=Oa.call,Ws.empty=Oa.empty,Ws.node=Oa.node,Ws.size=Oa.size,ma.transition=function(t){return arguments.length?Os?t.transition():t:Xa.transition()},ma.transition.prototype=Ws,Ws.select=function(t){var e,n,i,r=this.id,a=[];t=g(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]);for(var l=this[o],u=-1,h=l.length;++u<h;)(i=l[u])&&(n=t.call(i,i.__data__,u,o))?("__data__"in i&&(n.__data__=i.__data__),Lr(n,u,r,i.__transition__[r]),e.push(n)):e.push(null)}return Tr(a,r)},Ws.selectAll=function(t){var e,n,i,r,a,o=this.id,s=[];t=v(t);for(var l=-1,u=this.length;++l<u;)for(var h=this[l],c=-1,f=h.length;++c<f;)if(i=h[c]){a=i.__transition__[o],n=t.call(i,i.__data__,c,l),s.push(e=[]);for(var d=-1,p=n.length;++d<p;)(r=n[d])&&Lr(r,d,o,a),e.push(r)}return Tr(s,o)},Ws.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=T(t));for(var a=0,o=this.length;o>a;a++){r.push(e=[]);for(var n=this[a],s=0,l=n.length;l>s;s++)(i=n[s])&&t.call(i,i.__data__,s)&&e.push(i)}return Tr(r,this.id)},Ws.tween=function(t,e){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(t):A(this,null==e?function(e){e.__transition__[n].tween.remove(t)}:function(i){i.__transition__[n].tween.set(t,e)})},Ws.attr=function(t,e){function n(){this.removeAttribute(s)}function i(){this.removeAttributeNS(s.space,s.local)}function r(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(s);return n!==t&&(e=o(n,t),function(t){this.setAttribute(s,e(t))})})}function a(t){return null==t?i:(t+="",function(){var e,n=this.getAttributeNS(s.space,s.local);return n!==t&&(e=o(n,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var o="transform"==t?Zn:Tn,s=ma.ns.qualify(t);return Cr(this,"attr."+t,e,s.local?a:r)},Ws.attrTween=function(t,e){function n(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}}function i(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}var r=ma.ns.qualify(t);return this.tween("attr."+t,r.local?i:n)},Ws.style=function(t,e,n){function i(){this.style.removeProperty(t)}function r(e){return null==e?i:(e+="",function(){var i,r=wa.getComputedStyle(this,null).getPropertyValue(t);return r!==e&&(i=Tn(r,e),function(e){this.style.setProperty(t,i(e),n)})})}var a=arguments.length;if(3>a){if("string"!=typeof t){2>a&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}return Cr(this,"style."+t,e,r)},Ws.styleTween=function(t,e,n){function i(i,r){var a=e.call(this,i,r,wa.getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,i)},Ws.text=function(t){return Cr(this,"text",t,Ar)},Ws.remove=function(){return this.each("end.transition",function(){var t;this.__transition__.count<2&&(t=this.parentNode)&&t.removeChild(this)})},Ws.ease=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].ease:("function"!=typeof t&&(t=ma.ease.apply(ma,arguments)),A(this,function(n){n.__transition__[e].ease=t}))},Ws.delay=function(t){var e=this.id;return A(this,"function"==typeof t?function(n,i,r){n.__transition__[e].delay=+t.call(n,n.__data__,i,r)}:(t=+t,function(n){n.__transition__[e].delay=t}))},Ws.duration=function(t){var e=this.id;return A(this,"function"==typeof t?function(n,i,r){n.__transition__[e].duration=Math.max(1,t.call(n,n.__data__,i,r))}:(t=Math.max(1,t),function(n){n.__transition__[e].duration=t}))},Ws.each=function(t,e){var n=this.id;if(arguments.length<2){var i=Bs,r=Os;Os=n,A(this,function(e,i,r){Bs=e.__transition__[n],t.call(e,e.__data__,i,r)}),Bs=i,Os=r}else A(this,function(i){var r=i.__transition__[n];(r.event||(r.event=ma.dispatch("start","end"))).on(t,e)});return this},Ws.transition=function(){for(var t,e,n,i,r=this.id,a=++Ys,o=[],s=0,l=this.length;l>s;s++){o.push(t=[]);for(var e=this[s],u=0,h=e.length;h>u;u++)(n=e[u])&&(i=Object.create(n.__transition__[r]),i.delay+=i.duration,Lr(n,u,a,i)),t.push(n)}return Tr(o,a)},ma.svg.axis=function(){function t(t){t.each(function(){var t,u=ma.select(this),h=this.__chart__||n,c=this.__chart__=n.copy(),f=null==l?c.ticks?c.ticks.apply(c,s):c.domain():l,d=null==e?c.tickFormat?c.tickFormat.apply(c,s):gt:e,p=u.selectAll(".tick").data(f,c),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Za),v=ma.transition(p.exit()).style("opacity",Za).remove(),m=ma.transition(p).style("opacity",1),x=Zi(c),y=u.selectAll(".domain").data([0]),b=(y.enter().append("path").attr("class","domain"),ma.transition(y));g.append("line"),g.append("text");var _=g.select("line"),w=m.select("line"),M=p.select("text").text(d),k=g.select("text"),S=m.select("text");switch(i){case"bottom":t=Er,_.attr("y2",r),k.attr("y",Math.max(r,0)+o),w.attr("x2",0).attr("y2",r),S.attr("x",0).attr("y",Math.max(r,0)+o),M.attr("dy",".71em").style("text-anchor","middle"),b.attr("d","M"+x[0]+","+a+"V0H"+x[1]+"V"+a);break;case"top":t=Er,_.attr("y2",-r),k.attr("y",-(Math.max(r,0)+o)),w.attr("x2",0).attr("y2",-r),S.attr("x",0).attr("y",-(Math.max(r,0)+o)),M.attr("dy","0em").style("text-anchor","middle"),b.attr("d","M"+x[0]+","+-a+"V0H"+x[1]+"V"+-a);break;case"left":t=Fr,_.attr("x2",-r),k.attr("x",-(Math.max(r,0)+o)),w.attr("x2",-r).attr("y2",0),S.attr("x",-(Math.max(r,0)+o)).attr("y",0),M.attr("dy",".32em").style("text-anchor","end"),b.attr("d","M"+-a+","+x[0]+"H0V"+x[1]+"H"+-a);break;case"right":t=Fr,_.attr("x2",r),k.attr("x",Math.max(r,0)+o),w.attr("x2",r).attr("y2",0),S.attr("x",Math.max(r,0)+o).attr("y",0),M.attr("dy",".32em").style("text-anchor","start"),b.attr("d","M"+a+","+x[0]+"H0V"+x[1]+"H"+a)}if(c.rangeBand){var T=c.rangeBand()/2,C=function(t){return c(t)+T};g.call(t,C),m.call(t,C)}else g.call(t,h),m.call(t,c),v.call(t,c)})}var e,n=ma.scale.linear(),i=js,r=6,a=6,o=3,s=[10],l=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(i=e in qs?e+"":js,t):i},t.ticks=function(){return arguments.length?(s=arguments,t):s},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(r=+e,a=+arguments[n-1],t):r},t.innerTickSize=function(e){return arguments.length?(r=+e,t):r},t.outerTickSize=function(e){return arguments.length?(a=+e,t):a},t.tickPadding=function(e){return arguments.length?(o=+e,t):o},t.tickSubdivide=function(){return arguments.length&&t},t};var js="bottom",qs={top:1,right:1,bottom:1,left:1};ma.svg.brush=function(){function t(a){a.each(function(){var a=ma.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",r).on("touchstart.brush",r),o=a.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),a.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=a.selectAll(".resize").data(v,gt);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Vs[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var h,c=ma.transition(a),f=ma.transition(o);l&&(h=Zi(l),f.attr("x",h[0]).attr("width",h[1]-h[0]),n(c)),u&&(h=Zi(u),f.attr("y",h[0]).attr("height",h[1]-h[0]),i(c)),e(c)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+h[+/e$/.test(t)]+","+f[+/^s/.test(t)]+")"})}function n(t){t.select(".extent").attr("x",h[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1]-h[0])}function i(t){t.select(".extent").attr("y",f[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function r(){function r(){32==ma.event.keyCode&&(A||(y=null,E[0]-=h[1],E[1]-=f[1],A=2),c())}function d(){32==ma.event.keyCode&&2==A&&(E[0]+=h[1],E[1]+=f[1],A=0,c())}function v(){var t=ma.mouse(_),r=!1;b&&(t[0]+=b[0],t[1]+=b[1]),A||(ma.event.altKey?(y||(y=[(h[0]+h[1])/2,(f[0]+f[1])/2]),E[0]=h[+(t[0]<y[0])],E[1]=f[+(t[1]<y[1])]):y=null),T&&m(t,l,0)&&(n(k),r=!0),C&&m(t,u,1)&&(i(k),r=!0),r&&(e(k),M({type:"brush",mode:A?"move":"resize"}))}function m(t,e,n){var i,r,s=Zi(e),l=s[0],u=s[1],c=E[n],d=n?f:h,v=d[1]-d[0];return A&&(l-=c,u-=v+c),i=(n?g:p)?Math.max(l,Math.min(u,t[n])):t[n],A?r=(i+=c)+v:(y&&(c=Math.max(l,Math.min(u,2*y[n]-i))),i>c?(r=i,i=c):r=c),d[0]!=i||d[1]!=r?(n?o=null:a=null,d[0]=i,d[1]=r,!0):void 0}function x(){v(),k.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),ma.select("body").style("cursor",null),F.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),L(),M({type:"brushend"})}var y,b,_=this,w=ma.select(ma.event.target),M=s.of(_,arguments),k=ma.select(_),S=w.datum(),T=!/^(n|s)$/.test(S)&&l,C=!/^(e|w)$/.test(S)&&u,A=w.classed("extent"),L=D(),E=ma.mouse(_),F=ma.select(wa).on("keydown.brush",r).on("keyup.brush",d);if(ma.event.changedTouches?F.on("touchmove.brush",v).on("touchend.brush",x):F.on("mousemove.brush",v).on("mouseup.brush",x),k.interrupt().selectAll("*").interrupt(),A)E[0]=h[0]-E[0],E[1]=f[0]-E[1];else if(S){var R=+/w$/.test(S),P=+/^n/.test(S);b=[h[1-R]-E[0],f[1-P]-E[1]],E[0]=h[R],E[1]=f[P]}else ma.event.altKey&&(y=E.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),ma.select("body").style("cursor",w.style("cursor")),M({type:"brushstart"}),v()}var a,o,s=d(t,"brushstart","brush","brushend"),l=null,u=null,h=[0,0],f=[0,0],p=!0,g=!0,v=Gs[0];return t.event=function(t){t.each(function(){var t=s.of(this,arguments),e={x:h,y:f,i:a,j:o},n=this.__chart__||e;this.__chart__=e,Os?ma.select(this).transition().each("start.brush",function(){a=n.i,o=n.j,h=n.x,f=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=Cn(h,e.x),i=Cn(f,e.y);return a=o=null,function(r){h=e.x=n(r),f=e.y=i(r),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=e.i,o=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(l=e,v=Gs[!l<<1|!u],t):l},t.y=function(e){return arguments.length?(u=e,v=Gs[!l<<1|!u],t):u},t.clamp=function(e){return arguments.length?(l&&u?(p=!!e[0],g=!!e[1]):l?p=!!e:u&&(g=!!e),t):l&&u?[p,g]:l?p:u?g:null},t.extent=function(e){var n,i,r,s,c;return arguments.length?(l&&(n=e[0],i=e[1],u&&(n=n[0],i=i[0]),a=[n,i],l.invert&&(n=l(n),i=l(i)),n>i&&(c=n,n=i,i=c),(n!=h[0]||i!=h[1])&&(h=[n,i])),u&&(r=e[0],s=e[1],l&&(r=r[1],s=s[1]),o=[r,s],u.invert&&(r=u(r),s=u(s)),r>s&&(c=r,r=s,s=c),(r!=f[0]||s!=f[1])&&(f=[r,s])),t):(l&&(a?(n=a[0],i=a[1]):(n=h[0],i=h[1],l.invert&&(n=l.invert(n),i=l.invert(i)),n>i&&(c=n,n=i,i=c))),u&&(o?(r=o[0],s=o[1]):(r=f[0],s=f[1],u.invert&&(r=u.invert(r),s=u.invert(s)),r>s&&(c=r,r=s,s=c))),l&&u?[[n,r],[i,s]]:l?[n,i]:u&&[r,s])},t.clear=function(){return t.empty()||(h=[0,0],f=[0,0],a=o=null),t},t.empty=function(){return!!l&&h[0]==h[1]||!!u&&f[0]==f[1]},ma.rebind(t,s,"on")};var Vs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Gs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Us=ma.time={},Zs=Date,$s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Rr.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Qs.setUTCDate.apply(this._,arguments)},setDay:function(){Qs.setUTCDay.apply(this._,arguments)},setFullYear:function(){Qs.setUTCFullYear.apply(this._,arguments)},setHours:function(){Qs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Qs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Qs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Qs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Qs.setUTCSeconds.apply(this._,arguments)},setTime:function(){Qs.setTime.apply(this._,arguments)}};var Qs=Date.prototype,Js="%a %b %e %X %Y",Ks="%m/%d/%Y",tl="%H:%M:%S",el=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],nl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],il=["January","February","March","April","May","June","July","August","September","October","November","December"],rl=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Us.year=Pr(function(t){return t=Us.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Us.years=Us.year.range,Us.years.utc=Us.year.utc.range,Us.day=Pr(function(t){var e=new Zs(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Us.days=Us.day.range,Us.days.utc=Us.day.utc.range,Us.dayOfYear=function(t){var e=Us.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},$s.forEach(function(t,e){t=t.toLowerCase(),e=7-e;var n=Us[t]=Pr(function(t){return(t=Us.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=Us.year(t).getDay();return Math.floor((Us.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});Us[t+"s"]=n.range,Us[t+"s"].utc=n.utc.range,Us[t+"OfYear"]=function(t){var n=Us.year(t).getDay();return Math.floor((Us.dayOfYear(t)+(n+e)%7)/7)}}),Us.week=Us.sunday,Us.weeks=Us.sunday.range,Us.weeks.utc=Us.sunday.utc.range,Us.weekOfYear=Us.sundayOfYear,Us.format=Dr;var al=Nr(el),ol=Or(el),sl=Nr(nl),ll=Or(nl),ul=Nr(il),hl=Or(il),cl=Nr(rl),fl=Or(rl),dl=/^%/,pl={"-":"",_:" ",0:"0"},gl={a:function(t){return nl[t.getDay()]},A:function(t){return el[t.getDay()]},b:function(t){return rl[t.getMonth()]},B:function(t){return il[t.getMonth()]},c:Dr(Js),d:function(t,e){return Br(t.getDate(),e,2)},e:function(t,e){return Br(t.getDate(),e,2)},H:function(t,e){return Br(t.getHours(),e,2)},I:function(t,e){return Br(t.getHours()%12||12,e,2)},j:function(t,e){return Br(1+Us.dayOfYear(t),e,3)},L:function(t,e){return Br(t.getMilliseconds(),e,3)},m:function(t,e){return Br(t.getMonth()+1,e,2)},M:function(t,e){return Br(t.getMinutes(),e,2)},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t,e){return Br(t.getSeconds(),e,2)},U:function(t,e){return Br(Us.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Br(Us.mondayOfYear(t),e,2)},x:Dr(Ks),X:Dr(tl),y:function(t,e){return Br(t.getFullYear()%100,e,2)},Y:function(t,e){return Br(t.getFullYear()%1e4,e,4)},Z:la,"%":function(){return"%"}},vl={a:Hr,A:Xr,b:qr,B:Vr,c:Gr,d:ea,e:ea,H:ia,I:ia,j:na,L:oa,m:ta,M:ra,p:sa,S:aa,U:Yr,w:Wr,W:jr,x:Ur,X:Zr,y:Qr,Y:$r,Z:Jr,"%":ua},ml=/^\s*\d+/,xl=ma.map({am:0,pm:1});Dr.utc=ha;var yl=ha("%Y-%m-%dT%H:%M:%S.%LZ");Dr.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ca:yl,ca.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},ca.toString=yl.toString,Us.second=Pr(function(t){return new Zs(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Us.seconds=Us.second.range,Us.seconds.utc=Us.second.utc.range,Us.minute=Pr(function(t){return new Zs(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Us.minutes=Us.minute.range,Us.minutes.utc=Us.minute.utc.range,Us.hour=Pr(function(t){var e=t.getTimezoneOffset()/60;return new Zs(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Us.hours=Us.hour.range,Us.hours.utc=Us.hour.utc.range,Us.month=Pr(function(t){return t=Us.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Us.months=Us.month.range,Us.months.utc=Us.month.utc.range;var bl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],_l=[[Us.second,1],[Us.second,5],[Us.second,15],[Us.second,30],[Us.minute,1],[Us.minute,5],[Us.minute,15],[Us.minute,30],[Us.hour,1],[Us.hour,3],[Us.hour,6],[Us.hour,12],[Us.day,1],[Us.day,2],[Us.week,1],[Us.month,1],[Us.month,3],[Us.year,1]],wl=[[Dr("%Y"),qt],[Dr("%B"),function(t){return t.getMonth()}],[Dr("%b %d"),function(t){return 1!=t.getDate()}],[Dr("%a %d"),function(t){return t.getDay()&&1!=t.getDate()}],[Dr("%I %p"),function(t){return t.getHours()}],[Dr("%I:%M"),function(t){return t.getMinutes()}],[Dr(":%S"),function(t){return t.getSeconds()}],[Dr(".%L"),function(t){return t.getMilliseconds()}]],Ml=pa(wl);_l.year=Us.year,Us.scale=function(){return fa(ma.scale.linear(),_l,Ml)};var kl={range:function(t,e,n){return ma.range(+t,+e,n).map(da)}},Sl=_l.map(function(t){return[t[0].utc,t[1]]}),Tl=[[ha("%Y"),qt],[ha("%B"),function(t){return t.getUTCMonth()}],[ha("%b %d"),function(t){return 1!=t.getUTCDate()}],[ha("%a %d"),function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[ha("%I %p"),function(t){return t.getUTCHours()}],[ha("%I:%M"),function(t){return t.getUTCMinutes()}],[ha(":%S"),function(t){return t.getUTCSeconds()}],[ha(".%L"),function(t){return t.getUTCMilliseconds()}]],Cl=pa(Tl);return Sl.year=Us.year.utc,Us.scale.utc=function(){return fa(ma.scale.linear(),Sl,Cl)},ma.text=vt(function(t){return t.responseText}),ma.json=function(t,e){return mt(t,"application/json",ga,e)},ma.html=function(t,e){return mt(t,"text/html",va,e)},ma.xml=vt(function(t){return t.responseXML}),ma}(),function(t,e){"function"==typeof define&&define.amd?define(["d3"],function(n){return t.Rickshaw=e(n)}):"object"==typeof exports?module.exports=e(require("d3")):t.Rickshaw=e(d3)}(this,function(t){var e={namespace:function(t){for(var n=t.split("."),i=e,r=1,a=n.length;r<a;r++){var o=n[r];i[o]=i[o]||{},i=i[o]}return i},keys:function(t){var e=[];for(var n in t)e.push(n);return e},extend:function(t,e){for(var n in e)t[n]=e[n];return t},clone:function(t){return JSON.parse(JSON.stringify(t))}};return function(t){function e(t){return c.call(t)===x}function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function i(t){if(r(t)!==m)throw new TypeError;var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function r(t){switch(t){case null:return f;case void 0:return d}var e=typeof t;switch(e){case"boolean":return p;case"number":return g;case"string":return v}return m}function a(t){return"undefined"==typeof t}function o(t){var e=t.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=e.length||e[0]?e:[]}function s(t,e){var n=t;return function(){var t=l([h(n,this)],arguments);return e.apply(this,t)}}function l(t,e){for(var n=t.length,i=e.length;i--;)t[n+i]=e[i];return t}function u(t,e){return t=y.call(t,0),l(t,e)}function h(t,e){if(arguments.length<2&&a(arguments[0]))return this;var n=t,i=y.call(arguments,2);return function(){var t=u(i,arguments);return n.apply(e,t)}}var c=Object.prototype.toString,f="Null",d="Undefined",p="Boolean",g="Number",v="String",m="Object",x="[object Function]",y=Array.prototype.slice,b=function(){},_=function(){function t(){}function r(){function i(){this.initialize.apply(this,arguments)}var r=null,a=[].slice.apply(arguments);if(e(a[0])&&(r=a.shift()),n(i,_.Methods),i.superclass=r,i.subclasses=[],r){t.prototype=r.prototype,i.prototype=new t;try{r.subclasses.push(i)}catch(t){}}for(var o=0,s=a.length;o<s;o++)i.addMethods(a[o]);return i.prototype.initialize||(i.prototype.initialize=b),i.prototype.constructor=i,i}function a(t){var n=this.superclass&&this.superclass.prototype,r=i(t);l&&(t.toString!=Object.prototype.toString&&r.push("toString"),t.valueOf!=Object.prototype.valueOf&&r.push("valueOf"));for(var a=0,u=r.length;a<u;a++){var c=r[a],f=t[c];if(n&&e(f)&&"$super"==o(f)[0]){var d=f;f=s(function(t){return function(){return n[t].apply(this,arguments)}}(c),d),f.valueOf=h(d.valueOf,d),f.toString=h(d.toString,d)}this.prototype[c]=f}return this}var l=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}();return{create:r,Methods:{addMethods:a}}}();t.exports?t.exports.Class=_:t.Class=_}(e),e.namespace("Rickshaw.Compat.ClassList"),e.Compat.ClassList=function(){"undefined"==typeof document||"classList"in document.createElement("a")||!function(t){"use strict";var e="classList",n="prototype",i=(t.HTMLElement||t.Element)[n],r=Object,a=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},s=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(t,e)},u=function(t){for(var e=a.call(t.className),n=e?e.split(/\s+/):[],i=0,r=n.length;i<r;i++)this.push(n[i]);this._updateClassName=function(){t.className=this.toString()}},h=u[n]=[],c=function(){return new u(this)};if(s[n]=Error[n],h.item=function(t){return this[t]||null},h.contains=function(t){return t+="",l(this,t)!==-1},h.add=function(t){t+="",l(this,t)===-1&&(this.push(t),this._updateClassName())},h.remove=function(t){t+="";var e=l(this,t);e!==-1&&(this.splice(e,1),this._updateClassName())},h.toggle=function(t){t+="",l(this,t)===-1?this.add(t):this.remove(t)},h.toString=function(){return this.join(" ")},r.defineProperty){var f={get:c,enumerable:!0,configurable:!0};try{r.defineProperty(i,e,f)}catch(t){t.number===-2146823252&&(f.enumerable=!1,r.defineProperty(i,e,f))}}else r[n].__defineGetter__&&i.__defineGetter__(e,c)}(window)},("undefined"!=typeof RICKSHAW_NO_COMPAT&&!RICKSHAW_NO_COMPAT||"undefined"==typeof RICKSHAW_NO_COMPAT)&&new e.Compat.ClassList,e.namespace("Rickshaw.Graph"),e.Graph=function(n){var i=this;this.initialize=function(e){if(!e.element)throw"Rickshaw.Graph needs a reference to an element";if(1!==e.element.nodeType)throw"Rickshaw.Graph element was defined but not an HTML element";this.element=e.element,this.series=e.series,this.window={},this.updateCallbacks=[],this.configureCallbacks=[],this.defaults={interpolation:"cardinal",offset:"zero",min:void 0,max:void 0,preserve:!1,xScale:void 0,yScale:void 0,stack:!0},this._loadRenderers(),this.configure(e),this.validateSeries(e.series),this.series.active=function(){return i.series.filter(function(t){return!t.disabled})},this.setSize({width:e.width,height:e.height}),this.element.classList.add("rickshaw_graph"),this.vis=t.select(this.element).append("svg:svg").attr("width",this.width).attr("height",this.height),this.discoverRange()},this._loadRenderers=function(){for(var t in e.Graph.Renderer)if(t&&e.Graph.Renderer.hasOwnProperty(t)){var n=e.Graph.Renderer[t];n&&n.prototype&&n.prototype.render&&i.registerRenderer(new n({graph:i}))}},this.validateSeries=function(t){if(!(Array.isArray(t)||t instanceof e.Series)){var n=Object.prototype.toString.apply(t);throw"series is not an array: "+n}t.forEach(function(t){if(!(t instanceof Object))throw"series element is not an object: "+t;if(!t.data)throw"series has no data: "+JSON.stringify(t);if(!Array.isArray(t.data))throw"series data is not an array: "+JSON.stringify(t.data);if(t.data.length>0){var e=t.data[0].x,n=t.data[0].y;if("number"!=typeof e||"number"!=typeof n&&null!==n)throw"x and y properties of points should be numbers instead of "+typeof e+" and "+typeof n}if(t.data.length>=3&&(t.data[2].x<t.data[1].x||t.data[1].x<t.data[0].x||t.data[t.data.length-1].x<t.data[0].x))throw"series data needs to be sorted on x values for series name: "+t.name},this)},this.dataDomain=function(){var e=this.series.map(function(t){return t.data}),n=t.min(e.map(function(t){return t[0].x})),i=t.max(e.map(function(t){return t[t.length-1].x}));return[n,i]},this.discoverRange=function(){var e=this.renderer.domain();this.x=(this.xScale||t.scale.linear()).copy().domain(e.x).range([0,this.width]),this.y=(this.yScale||t.scale.linear()).copy().domain(e.y).range([this.height,0]),this.x.magnitude=t.scale.linear().domain([e.x[0]-e.x[0],e.x[1]-e.x[0]]).range([0,this.width]),this.y.magnitude=t.scale.linear().domain([e.y[0]-e.y[0],e.y[1]-e.y[0]]).range([0,this.height])},this.render=function(){this.stackData();this.discoverRange(),this.renderer.render(),this.updateCallbacks.forEach(function(t){t()})},this.update=this.render,this.stackData=function(){var n=this.series.active().map(function(t){return t.data}).map(function(t){return t.filter(function(t){return this._slice(t)},this)},this),r=this.preserve;
r||this.series.forEach(function(t){t.scale&&(r=!0)}),n=r?e.clone(n):n,this.series.active().forEach(function(t,e){if(t.scale){var i=n[e];i&&i.forEach(function(e){e.y=t.scale(e.y)})}}),this.stackData.hooks.data.forEach(function(t){n=t.f.apply(i,[n])});var a;if(!this.renderer.unstack){this._validateStackable();var o=t.layout.stack();o.offset(i.offset),a=o(n)}a=a||n,this.renderer.unstack&&a.forEach(function(t){t.forEach(function(t){t.y0=void 0===t.y0?0:t.y0})}),this.stackData.hooks.after.forEach(function(t){a=t.f.apply(i,[n])});var s=0;return this.series.forEach(function(t){t.disabled||(t.stack=a[s++])}),this.stackedData=a,a},this._validateStackable=function(){var t,e=this.series;e.forEach(function(e){if(t=t||e.data.length,t&&e.data.length!=t)throw"stacked series cannot have differing numbers of points: "+t+" vs "+e.data.length+"; see Rickshaw.Series.fill()"},this)},this.stackData.hooks={data:[],after:[]},this._slice=function(t){if(this.window.xMin||this.window.xMax){var e=!0;return this.window.xMin&&t.x<this.window.xMin&&(e=!1),this.window.xMax&&t.x>this.window.xMax&&(e=!1),e}return!0},this.onUpdate=function(t){this.updateCallbacks.push(t)},this.onConfigure=function(t){this.configureCallbacks.push(t)},this.registerRenderer=function(t){this._renderers=this._renderers||{},this._renderers[t.name]=t},this.configure=function(t){this.config=this.config||{},(t.width||t.height)&&this.setSize(t),e.keys(this.defaults).forEach(function(e){this.config[e]=e in t?t[e]:e in this?this[e]:this.defaults[e]},this),e.keys(this.config).forEach(function(t){this[t]=this.config[t]},this),"stack"in t&&(t.unstack=!t.stack);var n=t.renderer||this.renderer&&this.renderer.name||"stack";this.setRenderer(n,t),this.configureCallbacks.forEach(function(e){e(t)})},this.setRenderer=function(t,e){if("function"==typeof t)this.renderer=new t({graph:i}),this.registerRenderer(this.renderer);else{if(!this._renderers[t])throw"couldn't find renderer "+t;this.renderer=this._renderers[t]}"object"==typeof e&&this.renderer.configure(e)},this.setSize=function(t){if(t=t||{},void 0!==typeof window)var e=window.getComputedStyle(this.element,null),n=parseInt(e.getPropertyValue("width"),10),i=parseInt(e.getPropertyValue("height"),10);this.width=t.width||n||400,this.height=t.height||i||250,this.vis&&this.vis.attr("width",this.width).attr("height",this.height)},this.initialize(n)},e.namespace("Rickshaw.Fixtures.Color"),e.Fixtures.Color=function(){this.schemes={},this.schemes.spectrum14=["#ecb796","#dc8f70","#b2a470","#92875a","#716c49","#d2ed82","#bbe468","#a1d05d","#e7cbe6","#d8aad6","#a888c2","#9dc2d3","#649eb9","#387aa3"].reverse(),this.schemes.spectrum2000=["#57306f","#514c76","#646583","#738394","#6b9c7d","#84b665","#a7ca50","#bfe746","#e2f528","#fff726","#ecdd00","#d4b11d","#de8800","#de4800","#c91515","#9a0000","#7b0429","#580839","#31082b"],this.schemes.spectrum2001=["#2f243f","#3c2c55","#4a3768","#565270","#6b6b7c","#72957f","#86ad6e","#a1bc5e","#b8d954","#d3e04e","#ccad2a","#cc8412","#c1521d","#ad3821","#8a1010","#681717","#531e1e","#3d1818","#320a1b"],this.schemes.classic9=["#423d4f","#4a6860","#848f39","#a2b73c","#ddcb53","#c5a32f","#7d5836","#963b20","#7c2626","#491d37","#2f254a"].reverse(),this.schemes.httpStatus={503:"#ea5029",502:"#d23f14",500:"#bf3613",410:"#efacea",409:"#e291dc",403:"#f457e8",408:"#e121d2",401:"#b92dae",405:"#f47ceb",404:"#a82a9f",400:"#b263c6",301:"#6fa024",302:"#87c32b",307:"#a0d84c",304:"#28b55c",200:"#1a4f74",206:"#27839f",201:"#52adc9",202:"#7c979f",203:"#a5b8bd",204:"#c1cdd1"},this.schemes.colorwheel=["#b5b6a9","#858772","#785f43","#96557e","#4682b4","#65b9ac","#73c03a","#cb513a"].reverse(),this.schemes.cool=["#5e9d2f","#73c03a","#4682b4","#7bc3b8","#a9884e","#c1b266","#a47493","#c09fb5"],this.schemes.munin=["#00cc00","#0066b3","#ff8000","#ffcc00","#330099","#990099","#ccff00","#ff0000","#808080","#008f00","#00487d","#b35a00","#b38f00","#6b006b","#8fb300","#b30000","#bebebe","#80ff80","#80c9ff","#ffc080","#ffe680","#aa80ff","#ee00cc","#ff8080","#666600","#ffbfff","#00ffcc","#cc6699","#999900"]},e.namespace("Rickshaw.Fixtures.RandomData"),e.Fixtures.RandomData=function(t){t=t||1;var e=200,n=Math.floor((new Date).getTime()/1e3);this.addData=function(i){var r=100*Math.random()+15+e,a=i[0].length,o=1;i.forEach(function(e){var i=20*Math.random(),s=r/25+o++ +15*(Math.cos(a*o*11/960)+2)+7*(Math.cos(a/7)+2)+1*(Math.cos(a/17)+2);e.push({x:a*t+n,y:s+i})}),e=.85*r},this.removeData=function(e){e.forEach(function(t){t.shift()}),n+=t}},e.namespace("Rickshaw.Fixtures.Time"),e.Fixtures.Time=function(){var e=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(t){return 10*parseInt(t.getUTCFullYear()/10,10)}},{name:"year",seconds:31557600,formatter:function(t){return t.getUTCFullYear()}},{name:"month",seconds:2635200,formatter:function(t){return e.months[t.getUTCMonth()]}},{name:"week",seconds:604800,formatter:function(t){return e.formatDate(t)}},{name:"day",seconds:86400,formatter:function(t){return t.getUTCDate()}},{name:"6 hour",seconds:21600,formatter:function(t){return e.formatTime(t)}},{name:"hour",seconds:3600,formatter:function(t){return e.formatTime(t)}},{name:"15 minute",seconds:900,formatter:function(t){return e.formatTime(t)}},{name:"minute",seconds:60,formatter:function(t){return t.getUTCMinutes()}},{name:"15 second",seconds:15,formatter:function(t){return t.getUTCSeconds()+"s"}},{name:"second",seconds:1,formatter:function(t){return t.getUTCSeconds()+"s"}},{name:"decisecond",seconds:.1,formatter:function(t){return t.getUTCMilliseconds()+"ms"}},{name:"centisecond",seconds:.01,formatter:function(t){return t.getUTCMilliseconds()+"ms"}}],this.unit=function(t){return this.units.filter(function(e){return t==e.name}).shift()},this.formatDate=function(e){return t.time.format("%b %e")(e)},this.formatTime=function(t){return t.toUTCString().match(/(\d+:\d+):/)[1]},this.ceil=function(t,e){var n,i,r;if("month"==e.name){if(n=new Date(1e3*t),i=Date.UTC(n.getUTCFullYear(),n.getUTCMonth())/1e3,i==t)return t;r=n.getUTCFullYear();var a=n.getUTCMonth();return 11==a?(a=0,r+=1):a+=1,Date.UTC(r,a)/1e3}return"year"==e.name?(n=new Date(1e3*t),i=Date.UTC(n.getUTCFullYear(),0)/1e3,i==t?t:(r=n.getUTCFullYear()+1,Date.UTC(r,0)/1e3)):Math.ceil(t/e.seconds)*e.seconds}},e.namespace("Rickshaw.Fixtures.Time.Local"),e.Fixtures.Time.Local=function(){var e=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(t){return 10*parseInt(t.getFullYear()/10,10)}},{name:"year",seconds:31557600,formatter:function(t){return t.getFullYear()}},{name:"month",seconds:2635200,formatter:function(t){return e.months[t.getMonth()]}},{name:"week",seconds:604800,formatter:function(t){return e.formatDate(t)}},{name:"day",seconds:86400,formatter:function(t){return t.getDate()}},{name:"6 hour",seconds:21600,formatter:function(t){return e.formatTime(t)}},{name:"hour",seconds:3600,formatter:function(t){return e.formatTime(t)}},{name:"15 minute",seconds:900,formatter:function(t){return e.formatTime(t)}},{name:"minute",seconds:60,formatter:function(t){return t.getMinutes()}},{name:"15 second",seconds:15,formatter:function(t){return t.getSeconds()+"s"}},{name:"second",seconds:1,formatter:function(t){return t.getSeconds()+"s"}},{name:"decisecond",seconds:.1,formatter:function(t){return t.getMilliseconds()+"ms"}},{name:"centisecond",seconds:.01,formatter:function(t){return t.getMilliseconds()+"ms"}}],this.unit=function(t){return this.units.filter(function(e){return t==e.name}).shift()},this.formatDate=function(e){return t.time.format("%b %e")(e)},this.formatTime=function(t){return t.toString().match(/(\d+:\d+):/)[1]},this.ceil=function(t,e){var n,i,r;if("day"==e.name){var a=new Date(1e3*(t+e.seconds-1)),o=new Date(0);return o.setMilliseconds(0),o.setSeconds(0),o.setMinutes(0),o.setHours(0),o.setDate(a.getDate()),o.setMonth(a.getMonth()),o.setFullYear(a.getFullYear()),o.getTime()/1e3}if("month"==e.name){if(n=new Date(1e3*t),i=new Date(n.getFullYear(),n.getMonth()).getTime()/1e3,i==t)return t;r=n.getFullYear();var s=n.getMonth();return 11==s?(s=0,r+=1):s+=1,new Date(r,s).getTime()/1e3}return"year"==e.name?(n=new Date(1e3*t),i=new Date(n.getUTCFullYear(),0).getTime()/1e3,i==t?t:(r=n.getFullYear()+1,new Date(r,0).getTime()/1e3)):Math.ceil(t/e.seconds)*e.seconds}},e.namespace("Rickshaw.Fixtures.Number"),e.Fixtures.Number.formatKMBT=function(t){var e=Math.abs(t);return e>=1e12?t/1e12+"T":e>=1e9?t/1e9+"B":e>=1e6?t/1e6+"M":e>=1e3?t/1e3+"K":e<1&&t>0?t.toFixed(2):0===e?"":t},e.Fixtures.Number.formatBase1024KMGTP=function(t){var e=Math.abs(t);return e>=0x4000000000000?t/0x4000000000000+"P":e>=1099511627776?t/1099511627776+"T":e>=1073741824?t/1073741824+"G":e>=1048576?t/1048576+"M":e>=1024?t/1024+"K":e<1&&t>0?t.toFixed(2):0===e?"":t},e.namespace("Rickshaw.Color.Palette"),e.Color.Palette=function(n){var i=new e.Fixtures.Color;if(n=n||{},this.schemes={},this.scheme=i.schemes[n.scheme]||n.scheme||i.schemes.colorwheel,this.runningIndex=0,this.generatorIndex=0,n.interpolatedStopCount){var r,a,o=this.scheme.length-1,s=[];for(r=0;r<o;r++){s.push(this.scheme[r]);var l=t.interpolateHsl(this.scheme[r],this.scheme[r+1]);for(a=1;a<n.interpolatedStopCount;a++)s.push(l(1/n.interpolatedStopCount*a))}s.push(this.scheme[this.scheme.length-1]),this.scheme=s}this.rotateCount=this.scheme.length,this.color=function(t){return this.scheme[t]||this.scheme[this.runningIndex++]||this.interpolateColor()||"#808080"},this.interpolateColor=function(){if(Array.isArray(this.scheme)){var e;return this.generatorIndex==2*this.rotateCount-1?(e=t.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[0])(.5),this.generatorIndex=0,this.rotateCount*=2):(e=t.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[this.generatorIndex+1])(.5),this.generatorIndex++),this.scheme.push(e),e}}},e.namespace("Rickshaw.Graph.Ajax"),e.Graph.Ajax=e.Class.create({initialize:function(t){this.dataURL=t.dataURL,this.onData=t.onData||function(t){return t},this.onComplete=t.onComplete||function(){},this.onError=t.onError||function(){},this.args=t,this.request()},request:function(){jQuery.ajax({url:this.dataURL,dataType:"json",success:this.success.bind(this),error:this.error.bind(this)})},error:function(){console.log("error loading dataURL: "+this.dataURL),this.onError(this)},success:function(t){t=this.onData(t),this.args.series=this._splice({data:t,series:this.args.series}),this.graph=this.graph||new e.Graph(this.args),this.graph.render(),this.onComplete(this)},_splice:function(t){var e=t.data,n=t.series;return t.series?(n.forEach(function(t){var n=t.key||t.name;if(!n)throw"series needs a key or a name";e.forEach(function(e){var i=e.key||e.name;if(!i)throw"data needs a key or a name";if(n==i){var r=["color","name","data"];r.forEach(function(n){e[n]&&(t[n]=e[n])})}})}),n):e}}),e.namespace("Rickshaw.Graph.Annotate"),e.Graph.Annotate=function(t){this.graph=t.graph;this.elements={intimeline:t.element};var n=this;this.data={},this.elements.intimeline.classList.add("rickshaw_annotation_intimeline"),this.add=function(t,e,i){n.data[t]=n.data[t]||{boxes:[]},n.data[t].boxes.push({content:e,end:i})},this.update=function(){e.keys(n.data).forEach(function(t){var e=n.data[t],i=n.graph.x(t);if(i<0||i>n.graph.x.range()[1])return e.element&&(e.line.classList.add("offscreen"),e.element.style.display="none"),void e.boxes.forEach(function(t){t.rangeElement&&t.rangeElement.classList.add("offscreen")});if(!e.element){var r=e.element=document.createElement("div");r.classList.add("annotation"),this.elements.intimeline.appendChild(r),r.addEventListener("click",function(){r.classList.toggle("active"),e.line.classList.toggle("active"),e.boxes.forEach(function(t){t.rangeElement&&t.rangeElement.classList.toggle("active")})},!1)}e.element.style.left=i+"px",e.element.style.display="block",e.boxes.forEach(function(t){var r=t.element;if(r||(r=t.element=document.createElement("div"),r.classList.add("content"),r.innerHTML=t.content,e.element.appendChild(r),e.line=document.createElement("div"),e.line.classList.add("annotation_line"),n.graph.element.appendChild(e.line),t.end&&(t.rangeElement=document.createElement("div"),t.rangeElement.classList.add("annotation_range"),n.graph.element.appendChild(t.rangeElement))),t.end){var a=i,o=Math.min(n.graph.x(t.end),n.graph.x.range()[1]);a>o&&(o=i,a=Math.max(n.graph.x(t.end),n.graph.x.range()[0]));var s=o-a;t.rangeElement.style.left=a+"px",t.rangeElement.style.width=s+"px",t.rangeElement.classList.remove("offscreen")}e.line.classList.remove("offscreen"),e.line.style.left=i+"px"})},this)},this.graph.onUpdate(function(){n.update()})},e.namespace("Rickshaw.Graph.Axis.Time"),e.Graph.Axis.Time=function(t){var n=this;this.graph=t.graph,this.elements=[],this.ticksTreatment=t.ticksTreatment||"plain",this.fixedTimeUnit=t.timeUnit;var i=t.timeFixture||new e.Fixtures.Time;this.appropriateTimeUnit=function(){var t,e=i.units,n=this.graph.x.domain(),r=n[1]-n[0];return e.forEach(function(e){Math.floor(r/e.seconds)>=2&&(t=t||e)}),t||i.units[i.units.length-1]},this.tickOffsets=function(){for(var t=this.graph.x.domain(),e=this.fixedTimeUnit||this.appropriateTimeUnit(),n=Math.ceil((t[1]-t[0])/e.seconds),r=t[0],a=[],o=0;o<n;o++){var s=i.ceil(r,e);r=s+e.seconds/2,a.push({value:s,unit:e})}return a},this.render=function(){this.elements.forEach(function(t){t.parentNode.removeChild(t)}),this.elements=[];var t=this.tickOffsets();t.forEach(function(t){if(!(n.graph.x(t.value)>n.graph.x.range()[1])){var e=document.createElement("div");e.style.left=n.graph.x(t.value)+"px",e.classList.add("x_tick"),e.classList.add(n.ticksTreatment);var i=document.createElement("div");i.classList.add("title"),i.innerHTML=t.unit.formatter(new Date(1e3*t.value)),e.appendChild(i),n.graph.element.appendChild(e),n.elements.push(e)}})},this.graph.onUpdate(function(){n.render()})},e.namespace("Rickshaw.Graph.Axis.X"),e.Graph.Axis.X=function(e){var n=this,i=.1;this.initialize=function(e){this.graph=e.graph,this.orientation=e.orientation||"top",this.pixelsPerTick=e.pixelsPerTick||75,e.ticks&&(this.staticTicks=e.ticks),e.tickValues&&(this.tickValues=e.tickValues),this.tickSize=e.tickSize||4,this.ticksTreatment=e.ticksTreatment||"plain",e.element?(this.element=e.element,this._discoverSize(e.element,e),this.vis=t.select(e.element).append("svg:svg").attr("height",this.height).attr("width",this.width).attr("class","rickshaw_graph x_axis_d3"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:e.width,height:e.height})):this.vis=this.graph.vis,this.graph.onUpdate(function(){n.render()})},this.setSize=function(t){if(t=t||{},this.element){this._discoverSize(this.element.parentNode,t),this.vis.attr("height",this.height).attr("width",this.width*(1+i));var e=Math.floor(this.width*i/2);this.element.style.left=-1*e+"px"}},this.render=function(){void 0!==this._renderWidth&&this.graph.width!==this._renderWidth&&this.setSize({auto:!0});var n=t.svg.axis().scale(this.graph.x).orient(this.orientation);n.tickFormat(e.tickFormat||function(t){return t}),this.tickValues&&n.tickValues(this.tickValues),this.ticks=this.staticTicks||Math.floor(this.graph.width/this.pixelsPerTick);var r,a=Math.floor(this.width*i/2)||0;if("top"==this.orientation){var o=this.height||this.graph.height;r="translate("+a+","+o+")"}else r="translate("+a+", 0)";this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["x_ticks_d3",this.ticksTreatment].join(" ")).attr("transform",r).call(n.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));var s=("bottom"==this.orientation?1:-1)*this.graph.height;this.graph.vis.append("svg:g").attr("class","x_grid_d3").call(n.ticks(this.ticks).tickSubdivide(0).tickSize(s)).selectAll("text").each(function(){this.parentNode.setAttribute("data-x-value",this.textContent)}),this._renderHeight=this.graph.height},this._discoverSize=function(t,e){if("undefined"!=typeof window){var n=window.getComputedStyle(t,null),r=parseInt(n.getPropertyValue("height"),10);if(!e.auto)var a=parseInt(n.getPropertyValue("width"),10)}this.width=(e.width||a||this.graph.width)*(1+i),this.height=e.height||r||40},this.initialize(e)},e.namespace("Rickshaw.Graph.Axis.Y"),e.Graph.Axis.Y=e.Class.create({initialize:function(e){this.graph=e.graph,this.orientation=e.orientation||"right",this.pixelsPerTick=e.pixelsPerTick||75,e.ticks&&(this.staticTicks=e.ticks),e.tickValues&&(this.tickValues=e.tickValues),this.tickSize=e.tickSize||4,this.ticksTreatment=e.ticksTreatment||"plain",this.tickFormat=e.tickFormat||function(t){return t},this.berthRate=.1,e.element?(this.element=e.element,this.vis=t.select(e.element).append("svg:svg").attr("class","rickshaw_graph y_axis"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:e.width,height:e.height})):this.vis=this.graph.vis;var n=this;this.graph.onUpdate(function(){n.render()})},setSize:function(t){if(t=t||{},this.element){if("undefined"!=typeof window){var e=window.getComputedStyle(this.element.parentNode,null),n=parseInt(e.getPropertyValue("width"),10);if(!t.auto)var i=parseInt(e.getPropertyValue("height"),10)}this.width=t.width||n||this.graph.width*this.berthRate,this.height=t.height||i||this.graph.height,this.vis.attr("width",this.width).attr("height",this.height*(1+this.berthRate));var r=this.height*this.berthRate;"left"==this.orientation&&(this.element.style.top=-1*r+"px")}},render:function(){void 0!==this._renderHeight&&this.graph.height!==this._renderHeight&&this.setSize({auto:!0}),this.ticks=this.staticTicks||Math.floor(this.graph.height/this.pixelsPerTick);var t=this._drawAxis(this.graph.y);this._drawGrid(t),this._renderHeight=this.graph.height},_drawAxis:function(e){var n=t.svg.axis().scale(e).orient(this.orientation);if(n.tickFormat(this.tickFormat),this.tickValues&&n.tickValues(this.tickValues),"left"==this.orientation)var i=this.height*this.berthRate,r="translate("+this.width+", "+i+")";return this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["y_ticks",this.ticksTreatment].join(" ")).attr("transform",r).call(n.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize)),n},_drawGrid:function(t){var e=("right"==this.orientation?1:-1)*this.graph.width;this.graph.vis.append("svg:g").attr("class","y_grid").call(t.ticks(this.ticks).tickSubdivide(0).tickSize(e)).selectAll("text").each(function(){this.parentNode.setAttribute("data-y-value",this.textContent)})}}),e.namespace("Rickshaw.Graph.Axis.Y.Scaled"),e.Graph.Axis.Y.Scaled=e.Class.create(e.Graph.Axis.Y,{initialize:function($super,t){if("undefined"==typeof t.scale)throw new Error("Scaled requires scale");this.scale=t.scale,"undefined"==typeof t.grid?this.grid=!0:this.grid=t.grid,$super(t)},_drawAxis:function($super,e){var n=this.scale.domain(),i=this.graph.renderer.domain().y,r=[Math.min.apply(Math,n),Math.max.apply(Math,n)],a=t.scale.linear().domain([0,1]).range(r),o=[a(i[0]),a(i[1])],s=t.scale.linear().domain(r).range(o),l=this.scale.copy().domain(n.map(s)).range(e.range());return $super(l)},_drawGrid:function($super,t){this.grid&&$super(t)}}),e.namespace("Rickshaw.Graph.Behavior.Series.Highlight"),e.Graph.Behavior.Series.Highlight=function(e){this.graph=e.graph,this.legend=e.legend;var n=this,i={},r=null,a=e.disabledColor||function(e){return t.interpolateRgb(e,t.rgb("#d8d8d8"))(.8).toString()};this.addHighlightEvents=function(t){t.element.addEventListener("mouseover",function(){r||(r=t,n.legend.lines.forEach(function(e){if(t!==e)i[e.series.name]=i[e.series.name]||e.series.color,e.series.color=a(e.series.color);else if(n.graph.renderer.unstack&&(!e.series.renderer||e.series.renderer.unstack)){var r=n.graph.series.indexOf(e.series);e.originalIndex=r;var o=n.graph.series.splice(r,1)[0];n.graph.series.push(o)}}),n.graph.update())},!1),t.element.addEventListener("mouseout",function(){r&&(r=null,n.legend.lines.forEach(function(e){if(t===e&&e.hasOwnProperty("originalIndex")){var r=n.graph.series.pop();n.graph.series.splice(e.originalIndex,0,r),delete e.originalIndex}i[e.series.name]&&(e.series.color=i[e.series.name])}),n.graph.update())},!1)},this.legend&&this.legend.lines.forEach(function(t){n.addHighlightEvents(t)})},e.namespace("Rickshaw.Graph.Behavior.Series.Order"),e.Graph.Behavior.Series.Order=function(t){this.graph=t.graph,this.legend=t.legend;var e=this;if("undefined"==typeof window.jQuery)throw"couldn't find jQuery at window.jQuery";if("undefined"==typeof window.jQuery.ui)throw"couldn't find jQuery UI at window.jQuery.ui";jQuery(function(){jQuery(e.legend.list).sortable({containment:"parent",tolerance:"pointer",update:function(){var t=[];jQuery(e.legend.list).find("li").each(function(e,n){n.series&&t.push(n.series)});for(var n=e.graph.series.length-1;n>=0;n--)e.graph.series[n]=t.shift();e.graph.update()}}),jQuery(e.legend.list).disableSelection()}),this.graph.onUpdate(function(){var t=window.getComputedStyle(e.legend.element).height;e.legend.element.style.height=t})},e.namespace("Rickshaw.Graph.Behavior.Series.Toggle"),e.Graph.Behavior.Series.Toggle=function(t){this.graph=t.graph,this.legend=t.legend;var e=this;if(this.addAnchor=function(t){var n=document.createElement("a");n.innerHTML="&#10004;",n.classList.add("action"),t.element.insertBefore(n,t.element.firstChild),n.onclick=function(){if(t.series.disabled)t.series.enable(),t.element.classList.remove("disabled");else{if(this.graph.series.filter(function(t){return!t.disabled}).length<=1)return;t.series.disable(),t.element.classList.add("disabled")}}.bind(this);var i=t.element.getElementsByTagName("span")[0];i.onclick=function(){var n=t.series.disabled;if(!n)for(var i=0;i<e.legend.lines.length;i++){var r=e.legend.lines[i];if(t.series===r.series);else if(!r.series.disabled){n=!0;break}}n?(t.series.enable(),t.element.classList.remove("disabled"),e.legend.lines.forEach(function(e){t.series===e.series||(e.series.disable(),e.element.classList.add("disabled"))})):e.legend.lines.forEach(function(t){t.series.enable(),t.element.classList.remove("disabled")})}},this.legend){var n=jQuery;"undefined"!=typeof n&&n(this.legend.list).sortable&&n(this.legend.list).sortable({start:function(t,e){e.item.bind("no.onclick",function(t){t.preventDefault()})},stop:function(t,e){setTimeout(function(){e.item.unbind("no.onclick")},250)}}),this.legend.lines.forEach(function(t){e.addAnchor(t)})}this._addBehavior=function(){this.graph.series.forEach(function(t){t.disable=function(){if(e.graph.series.length<=1)throw"only one series left";t.disabled=!0,e.graph.update()},t.enable=function(){t.disabled=!1,e.graph.update()}})},this._addBehavior(),this.updateBehaviour=function(){this._addBehavior()}},e.namespace("Rickshaw.Graph.HoverDetail"),e.Graph.HoverDetail=e.Class.create({initialize:function(t){var e=this.graph=t.graph;this.xFormatter=t.xFormatter||function(t){return new Date(1e3*t).toUTCString()},this.yFormatter=t.yFormatter||function(t){return null===t?t:t.toFixed(2)};var n=this.element=document.createElement("div");n.className="detail",this.visible=!0,e.element.appendChild(n),this.lastEvent=null,this._addListeners(),this.onShow=t.onShow,this.onHide=t.onHide,this.onRender=t.onRender,this.formatter=t.formatter||this.formatter},formatter:function(t,e,n,i,r){return t.name+":&nbsp;"+r},update:function(e){if(e=e||this.lastEvent,e&&(this.lastEvent=e,e.target.nodeName.match(/^(path|svg|rect|circle)$/))){var n,i=this.graph,r=e.offsetX||e.layerX,a=e.offsetY||e.layerY,o=0,s=[];if(this.graph.series.active().forEach(function(e){var l=this.graph.stackedData[o++];if(l.length){var u=i.x.invert(r),h=t.scale.linear().domain([l[0].x,l.slice(-1)[0].x]).range([0,l.length-1]),c=Math.round(h(u));c==l.length-1&&c--;for(var f=Math.min(c||0,l.length-1),d=c;d<l.length-1&&(l[d]&&l[d+1]);){if(l[d].x<=u&&l[d+1].x>u){f=Math.abs(u-l[d].x)<Math.abs(u-l[d+1].x)?d:d+1;break}l[d+1].x<=u?d++:d--}f<0&&(f=0);var p=l[f],g=Math.sqrt(Math.pow(Math.abs(i.x(p.x)-r),2)+Math.pow(Math.abs(i.y(p.y+p.y0)-a),2)),v=e.xFormatter||this.xFormatter,m=e.yFormatter||this.yFormatter,x={formattedXValue:v(p.x),formattedYValue:m(e.scale?e.scale.invert(p.y):p.y),series:e,value:p,distance:g,order:o,name:e.name};(!n||g<n.distance)&&(n=x),s.push(x)}},this),n){n.active=!0;var l=n.value.x,u=n.formattedXValue;this.element.innerHTML="",this.element.style.left=i.x(l)+"px",this.visible&&this.render({points:s,detail:s,mouseX:r,mouseY:a,formattedXValue:u,domainX:l})}}},hide:function(){this.visible=!1,this.element.classList.add("inactive"),"function"==typeof this.onHide&&this.onHide()},show:function(){this.visible=!0,this.element.classList.remove("inactive"),"function"==typeof this.onShow&&this.onShow()},render:function(t){var e=this.graph,n=t.points,i=n.filter(function(t){return t.active}).shift();if(null!==i.value.y){var r=i.formattedXValue,a=i.formattedYValue;this.element.innerHTML="",this.element.style.left=e.x(i.value.x)+"px";var o=document.createElement("div");o.className="x_label",o.innerHTML=r,this.element.appendChild(o);var s=document.createElement("div");s.className="item";var l=i.series,u=l.scale?l.scale.invert(i.value.y):i.value.y;s.innerHTML=this.formatter(l,i.value.x,u,r,a,i),s.style.top=this.graph.y(i.value.y0+i.value.y)+"px",this.element.appendChild(s);var h=document.createElement("div");h.className="dot",h.style.top=s.style.top,h.style.borderColor=l.color,this.element.appendChild(h),i.active&&(s.classList.add("active"),h.classList.add("active"));var c=[o,s];c.forEach(function(t){t.classList.add("left")}),this.show();var f=this._calcLayoutError(c);if(f>0){c.forEach(function(t){t.classList.remove("left"),t.classList.add("right")});var d=this._calcLayoutError(c);d>f&&c.forEach(function(t){t.classList.remove("right"),t.classList.add("left")})}"function"==typeof this.onRender&&this.onRender(t)}},_calcLayoutError:function(t){var e=this.element.parentNode.getBoundingClientRect(),n=0;t.forEach(function(t){var i=t.getBoundingClientRect();i.width&&(i.right>e.right&&(n+=i.right-e.right),i.left<e.left&&(n+=e.left-i.left))});return n},_addListeners:function(){this.graph.element.addEventListener("mousemove",function(t){this.visible=!0,this.update(t)}.bind(this),!1),this.graph.onUpdate(function(){this.update()}.bind(this)),this.graph.element.addEventListener("mouseout",function(t){!t.relatedTarget||t.relatedTarget.compareDocumentPosition(this.graph.element)&Node.DOCUMENT_POSITION_CONTAINS||this.hide()}.bind(this),!1)}}),e.namespace("Rickshaw.Graph.JSONP"),e.Graph.JSONP=e.Class.create(e.Graph.Ajax,{request:function(){jQuery.ajax({url:this.dataURL,dataType:"jsonp",success:this.success.bind(this),error:this.error.bind(this)})}}),e.namespace("Rickshaw.Graph.Legend"),e.Graph.Legend=e.Class.create({className:"rickshaw_legend",initialize:function(t){this.element=t.element,this.graph=t.graph,this.naturalOrder=t.naturalOrder,this.element.classList.add(this.className),this.list=document.createElement("ul"),this.element.appendChild(this.list),this.render(),this.graph.onUpdate(function(){})},render:function(){for(var t=this;this.list.firstChild;)this.list.removeChild(this.list.firstChild);this.lines=[];var e=this.graph.series.map(function(t){return t});this.naturalOrder||(e=e.reverse()),e.forEach(function(e){t.addLine(e)})},addLine:function(e){var n=document.createElement("li");n.className="line",e.disabled&&(n.className+=" disabled"),e.className&&t.select(n).classed(e.className,!0);var i=document.createElement("div");i.className="swatch",i.style.backgroundColor=e.color,n.appendChild(i);var r=document.createElement("span");r.className="label",r.innerHTML=e.name,n.appendChild(r),this.list.appendChild(n),n.series=e,e.noLegend&&(n.style.display="none");var a={element:n,series:e};return this.shelving&&(this.shelving.addAnchor(a),this.shelving.updateBehaviour()),this.highlighter&&this.highlighter.addHighlightEvents(a),this.lines.push(a),n}}),e.namespace("Rickshaw.Graph.RangeSlider"),e.Graph.RangeSlider=e.Class.create({initialize:function(t){var e=(this.element=t.element,this.graph=t.graph);this.slideCallbacks=[],this.build(),e.onUpdate(function(){this.update()}.bind(this))},build:function(){var t=this.element,e=this.graph,n=jQuery,i=e.dataDomain(),r=this;n(function(){n(t).slider({range:!0,min:i[0],max:i[1],values:[i[0],i[1]],slide:function(t,n){if(!(n.values[1]<=n.values[0])){e.window.xMin=n.values[0],e.window.xMax=n.values[1],e.update();var i=e.dataDomain();i[0]==n.values[0]&&(e.window.xMin=void 0),i[1]==n.values[1]&&(e.window.xMax=void 0),r.slideCallbacks.forEach(function(t){t(e,e.window.xMin,e.window.xMax)})}}})}),n(t)[0].style.width=e.width+"px"},update:function(){var t=this.element,e=this.graph,n=jQuery,i=n(t).slider("option","values"),r=e.dataDomain();n(t).slider("option","min",r[0]),n(t).slider("option","max",r[1]),null==e.window.xMin&&(i[0]=r[0]),null==e.window.xMax&&(i[1]=r[1]),n(t).slider("option","values",i)},onSlide:function(t){this.slideCallbacks.push(t)}}),e.namespace("Rickshaw.Graph.RangeSlider.Preview"),e.Graph.RangeSlider.Preview=e.Class.create({initialize:function(e){if(!e.element)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an element";if(!e.graph&&!e.graphs)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an graph or an array of graphs";this.element=e.element,this.element.style.position="relative",this.graphs=e.graph?[e.graph]:e.graphs,this.defaults={height:75,width:400,gripperColor:void 0,frameTopThickness:3,frameHandleThickness:10,frameColor:"#d4d4d4",frameOpacity:1,minimumFrameWidth:0,heightRatio:.2},this.heightRatio=e.heightRatio||this.defaults.heightRatio,this.defaults.gripperColor=t.rgb(this.defaults.frameColor).darker().toString(),this.configureCallbacks=[],this.slideCallbacks=[],this.previews=[],e.width||(this.widthFromGraph=!0),e.height||(this.heightFromGraph=!0),(this.widthFromGraph||this.heightFromGraph)&&this.graphs[0].onConfigure(function(){this.configure(e),this.render()}.bind(this)),e.width=e.width||this.graphs[0].width||this.defaults.width,e.height=e.height||this.graphs[0].height*this.heightRatio||this.defaults.height,this.configure(e),this.render()},onSlide:function(t){this.slideCallbacks.push(t)},onConfigure:function(t){this.configureCallbacks.push(t)},configure:function(t){this.config=this.config||{},this.configureCallbacks.forEach(function(e){e(t)}),e.keys(this.defaults).forEach(function(e){this.config[e]=e in t?t[e]:e in this.config?this.config[e]:this.defaults[e]},this),("width"in t||"height"in t)&&(this.widthFromGraph&&(this.config.width=this.graphs[0].width),this.heightFromGraph&&(this.config.height=this.graphs[0].height*this.heightRatio,this.previewHeight=this.config.height),this.previews.forEach(function(t){var e=this.previewHeight/this.graphs.length-2*this.config.frameTopThickness,n=this.config.width-2*this.config.frameHandleThickness;if(t.setSize({width:n,height:e}),this.svg){var i=e+2*this.config.frameHandleThickness,r=n+2*this.config.frameHandleThickness;this.svg.style("width",r+"px"),this.svg.style("height",i+"px")}},this))},render:function(){var n=this;this.svg=t.select(this.element).selectAll("svg.rickshaw_range_slider_preview").data([null]),this.previewHeight=this.config.height-2*this.config.frameTopThickness,this.previewWidth=this.config.width-2*this.config.frameHandleThickness,this.currentFrame=[0,this.previewWidth];var i=function(t){var i=e.extend({},t.config),r=n.previewHeight/n.graphs.length,a=t.renderer.name;e.extend(i,{element:this.appendChild(document.createElement("div")),height:r,width:n.previewWidth,series:t.series,renderer:a});var o=new e.Graph(i);n.previews.push(o),t.onUpdate(function(){o.render(),n.render()}),t.onConfigure(function(t){delete t.height,t.width=t.width-2*n.config.frameHandleThickness,o.configure(t),o.render()}),o.render()},r=t.select(this.element).selectAll("div.rickshaw_range_slider_preview_container").data(this.graphs),a="translate("+this.config.frameHandleThickness+"px, "+this.config.frameTopThickness+"px)";r.enter().append("div").classed("rickshaw_range_slider_preview_container",!0).style("-webkit-transform",a).style("-moz-transform",a).style("-ms-transform",a).style("transform",a).each(i),r.exit().remove();var o=this.graphs[0],s=t.scale.linear().domain([0,this.previewWidth]).range(o.dataDomain()),l=[o.window.xMin,o.window.xMax];this.currentFrame[0]=void 0===l[0]?0:Math.round(s.invert(l[0])),this.currentFrame[0]<0&&(this.currentFrame[0]=0),this.currentFrame[1]=void 0===l[1]?this.previewWidth:s.invert(l[1]),this.currentFrame[1]-this.currentFrame[0]<n.config.minimumFrameWidth&&(this.currentFrame[1]=(this.currentFrame[0]||0)+n.config.minimumFrameWidth),this.svg.enter().append("svg").classed("rickshaw_range_slider_preview",!0).style("height",this.config.height+"px").style("width",this.config.width+"px").style("position","absolute").style("top",0),
this._renderDimming(),this._renderFrame(),this._renderGrippers(),this._renderHandles(),this._renderMiddle(),this._registerMouseEvents()},_renderDimming:function(){var t=this.svg.selectAll("path.dimming").data([null]);t.enter().append("path").attr("fill","white").attr("fill-opacity","0.7").attr("fill-rule","evenodd").classed("dimming",!0);var e="";e+=" M "+this.config.frameHandleThickness+" "+this.config.frameTopThickness,e+=" h "+this.previewWidth,e+=" v "+this.previewHeight,e+=" h "+-this.previewWidth,e+=" z ",e+=" M "+Math.max(this.currentFrame[0],this.config.frameHandleThickness)+" "+this.config.frameTopThickness,e+=" H "+Math.min(this.currentFrame[1]+2*this.config.frameHandleThickness,this.previewWidth+this.config.frameHandleThickness),e+=" v "+this.previewHeight,e+=" H "+Math.max(this.currentFrame[0],this.config.frameHandleThickness),e+=" z",t.attr("d",e)},_renderFrame:function(){var t=this.svg.selectAll("path.frame").data([null]);t.enter().append("path").attr("stroke","white").attr("stroke-width","1px").attr("stroke-linejoin","round").attr("fill",this.config.frameColor).attr("fill-opacity",this.config.frameOpacity).attr("fill-rule","evenodd").classed("frame",!0);var e="";e+=" M "+this.currentFrame[0]+" 0",e+=" H "+(this.currentFrame[1]+2*this.config.frameHandleThickness),e+=" V "+this.config.height,e+=" H "+this.currentFrame[0],e+=" z",e+=" M "+(this.currentFrame[0]+this.config.frameHandleThickness)+" "+this.config.frameTopThickness,e+=" H "+(this.currentFrame[1]+this.config.frameHandleThickness),e+=" v "+this.previewHeight,e+=" H "+(this.currentFrame[0]+this.config.frameHandleThickness),e+=" z",t.attr("d",e)},_renderGrippers:function(){var t=this.svg.selectAll("path.gripper").data([null]);t.enter().append("path").attr("stroke",this.config.gripperColor).classed("gripper",!0);var e="";[.4,.6].forEach(function(t){e+=" M "+Math.round(this.currentFrame[0]+this.config.frameHandleThickness*t)+" "+Math.round(.3*this.config.height),e+=" V "+Math.round(.7*this.config.height),e+=" M "+Math.round(this.currentFrame[1]+this.config.frameHandleThickness*(1+t))+" "+Math.round(.3*this.config.height),e+=" V "+Math.round(.7*this.config.height)}.bind(this)),t.attr("d",e)},_renderHandles:function(){var t=this.svg.selectAll("rect.left_handle").data([null]);t.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("left_handle",!0),t.attr("x",this.currentFrame[0]).attr("height",this.config.height);var e=this.svg.selectAll("rect.right_handle").data([null]);e.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("right_handle",!0),e.attr("x",this.currentFrame[1]+this.config.frameHandleThickness).attr("height",this.config.height)},_renderMiddle:function(){var t=this.svg.selectAll("rect.middle_handle").data([null]);t.enter().append("rect").style("cursor","move").style("fill-opacity","0").classed("middle_handle",!0),t.attr("width",Math.max(0,this.currentFrame[1]-this.currentFrame[0])).attr("x",this.currentFrame[0]+this.config.frameHandleThickness).attr("height",this.config.height)},_registerMouseEvents:function(){function e(){l.stop=u._getClientXFromEvent(t.event,l);var e=l.stop-l.start,n=u.frameBeforeDrag.slice(0),i=u.config.minimumFrameWidth;l.rigid&&(i=u.frameBeforeDrag[1]-u.frameBeforeDrag[0]),l.left&&(n[0]=Math.max(n[0]+e,0)),l.right&&(n[1]=Math.min(n[1]+e,u.previewWidth));var r=n[1]-n[0];r<=i&&(l.left&&(n[0]=n[1]-i),l.right&&(n[1]=n[0]+i),n[0]<=0&&(n[1]-=n[0],n[0]=0),n[1]>=u.previewWidth&&(n[0]-=n[1]-u.previewWidth,n[1]=u.previewWidth)),u.graphs.forEach(function(e){var i=t.scale.linear().interpolate(t.interpolateNumber).domain([0,u.previewWidth]).range(e.dataDomain()),r=[i(n[0]),i(n[1])];u.slideCallbacks.forEach(function(t){t(e,r[0],r[1])}),0===n[0]&&(r[0]=void 0),n[1]===u.previewWidth&&(r[1]=void 0),e.window.xMin=r[0],e.window.xMax=r[1],e.update()})}function n(){l.target=t.event.target,l.start=u._getClientXFromEvent(t.event,l),u.frameBeforeDrag=u.currentFrame.slice(),t.event.preventDefault?t.event.preventDefault():t.event.returnValue=!1,t.select(document).on("mousemove.rickshaw_range_slider_preview",e),t.select(document).on("mouseup.rickshaw_range_slider_preview",o),t.select(document).on("touchmove.rickshaw_range_slider_preview",e),t.select(document).on("touchend.rickshaw_range_slider_preview",o),t.select(document).on("touchcancel.rickshaw_range_slider_preview",o)}function i(){l.left=!0,n()}function r(){l.right=!0,n()}function a(){l.left=!0,l.right=!0,l.rigid=!0,n()}function o(){t.select(document).on("mousemove.rickshaw_range_slider_preview",null),t.select(document).on("mouseup.rickshaw_range_slider_preview",null),t.select(document).on("touchmove.rickshaw_range_slider_preview",null),t.select(document).on("touchend.rickshaw_range_slider_preview",null),t.select(document).on("touchcancel.rickshaw_range_slider_preview",null),delete u.frameBeforeDrag,l.left=!1,l.right=!1,l.rigid=!1}var s=t.select(this.element),l={target:null,start:null,stop:null,left:!1,right:!1,rigid:!1},u=this;s.select("rect.left_handle").on("mousedown",i),s.select("rect.right_handle").on("mousedown",r),s.select("rect.middle_handle").on("mousedown",a),s.select("rect.left_handle").on("touchstart",i),s.select("rect.right_handle").on("touchstart",r),s.select("rect.middle_handle").on("touchstart",a)},_getClientXFromEvent:function(t,e){switch(t.type){case"touchstart":case"touchmove":for(var n=t.changedTouches,i=null,r=0;r<n.length;r++)if(n[r].target===e.target){i=n[r];break}return null!==i?i.clientX:void 0;default:return t.clientX}}}),e.namespace("Rickshaw.Graph.Renderer"),e.Graph.Renderer=e.Class.create({initialize:function(t){this.graph=t.graph,this.tension=t.tension||this.tension,this.configure(t)},seriesPathFactory:function(){},seriesStrokeFactory:function(){},defaults:function(){return{tension:.8,strokeWidth:2,unstack:!0,padding:{top:.01,right:0,bottom:.01,left:0},stroke:!1,fill:!1}},domain:function(t){var e=t||this.graph.stackedData||this.graph.stackData(),n=+(1/0),i=-(1/0),r=+(1/0),a=-(1/0);return e.forEach(function(t){t.forEach(function(t){if(null!=t.y){var e=t.y+t.y0;e<r&&(r=e),e>a&&(a=e)}}),t.length&&(t[0].x<n&&(n=t[0].x),t[t.length-1].x>i&&(i=t[t.length-1].x))}),n-=(i-n)*this.padding.left,i+=(i-n)*this.padding.right,r="auto"===this.graph.min?r:this.graph.min||0,a=void 0===this.graph.max?a:this.graph.max,("auto"===this.graph.min||r<0)&&(r-=(a-r)*this.padding.bottom),void 0===this.graph.max&&(a+=(a-r)*this.padding.top),{x:[n,i],y:[r,a]}},render:function(t){t=t||{};var e=this.graph,n=t.series||e.series,i=t.vis||e.vis;i.selectAll("*").remove();var r=n.filter(function(t){return!t.disabled}).map(function(t){return t.stack}),a=i.selectAll("path.path").data(r).enter().append("svg:path").classed("path",!0).attr("d",this.seriesPathFactory());if(this.stroke)var o=i.selectAll("path.stroke").data(r).enter().append("svg:path").classed("stroke",!0).attr("d",this.seriesStrokeFactory());var s=0;n.forEach(function(t){t.disabled||(t.path=a[0][s],this.stroke&&(t.stroke=o[0][s]),this._styleSeries(t),s++)},this)},_styleSeries:function(e){var n=this.fill?e.color:"none",i=this.stroke?e.color:"none";e.path.setAttribute("fill",n),e.path.setAttribute("stroke",i),e.path.setAttribute("stroke-width",this.strokeWidth),e.className&&t.select(e.path).classed(e.className,!0),e.className&&this.stroke&&t.select(e.stroke).classed(e.className,!0)},configure:function(t){t=t||{},e.keys(this.defaults()).forEach(function(n){return t.hasOwnProperty(n)?void("object"==typeof this.defaults()[n]?e.keys(this.defaults()[n]).forEach(function(e){this[n][e]=void 0!==t[n][e]?t[n][e]:void 0!==this[n][e]?this[n][e]:this.defaults()[n][e]},this):this[n]=void 0!==t[n]?t[n]:void 0!==this[n]?this[n]:void 0!==this.graph[n]?this.graph[n]:this.defaults()[n]):void(this[n]=this[n]||this.graph[n]||this.defaults()[n])},this)},setStrokeWidth:function(t){void 0!==t&&(this.strokeWidth=t)},setTension:function(t){void 0!==t&&(this.tension=t)}}),e.namespace("Rickshaw.Graph.Renderer.Line"),e.Graph.Renderer.Line=e.Class.create(e.Graph.Renderer,{name:"line",defaults:function($super){return e.extend($super(),{unstack:!0,fill:!1,stroke:!0})},seriesPathFactory:function(){var e=this.graph,n=t.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y)}).interpolate(this.graph.interpolation).tension(this.tension);return n.defined&&n.defined(function(t){return null!==t.y}),n}}),e.namespace("Rickshaw.Graph.Renderer.Stack"),e.Graph.Renderer.Stack=e.Class.create(e.Graph.Renderer,{name:"stack",defaults:function($super){return e.extend($super(),{fill:!0,stroke:!1,unstack:!1})},seriesPathFactory:function(){var e=this.graph,n=t.svg.area().x(function(t){return e.x(t.x)}).y0(function(t){return e.y(t.y0)}).y1(function(t){return e.y(t.y+t.y0)}).interpolate(this.graph.interpolation).tension(this.tension);return n.defined&&n.defined(function(t){return null!==t.y}),n}}),e.namespace("Rickshaw.Graph.Renderer.Bar"),e.Graph.Renderer.Bar=e.Class.create(e.Graph.Renderer,{name:"bar",defaults:function($super){var t=e.extend($super(),{gapSize:.05,unstack:!1});return delete t.tension,t},initialize:function($super,t){t=t||{},this.gapSize=t.gapSize||this.gapSize,$super(t)},domain:function($super){var t=$super(),e=this._frequentInterval(this.graph.stackedData.slice(-1).shift());return t.x[1]+=Number(e.magnitude),t},barWidth:function(t){var e=this._frequentInterval(t.stack),n=this.graph.x.magnitude(e.magnitude)*(1-this.gapSize);return n},render:function(t){t=t||{};var e=this.graph,n=t.series||e.series,i=t.vis||e.vis;i.selectAll("*").remove();var r=this.barWidth(n.active()[0]),a=0,o=n.filter(function(t){return!t.disabled}).length,s=this.unstack?r/o:r,l=function(t){var n=[1,0,0,t.y<0?-1:1,0,t.y<0?2*e.y.magnitude(Math.abs(t.y)):0];return"matrix("+n.join(",")+")"};n.forEach(function(t){if(!t.disabled){var n=(this.barWidth(t),i.selectAll("path").data(t.stack.filter(function(t){return null!==t.y})).enter().append("svg:rect").attr("x",function(t){return e.x(t.x)+a}).attr("y",function(t){return e.y(t.y0+Math.abs(t.y))*(t.y<0?-1:1)}).attr("width",s).attr("height",function(t){return e.y.magnitude(Math.abs(t.y))}).attr("transform",l));Array.prototype.forEach.call(n[0],function(e){e.setAttribute("fill",t.color)}),this.unstack&&(a+=s)}},this)},_frequentInterval:function(t){for(var n={},i=0;i<t.length-1;i++){var r=t[i+1].x-t[i].x;n[r]=n[r]||0,n[r]++}var a={count:0,magnitude:1};return e.keys(n).forEach(function(t){a.count<n[t]&&(a={count:n[t],magnitude:t})}),a}}),e.namespace("Rickshaw.Graph.Renderer.Area"),e.Graph.Renderer.Area=e.Class.create(e.Graph.Renderer,{name:"area",defaults:function($super){return e.extend($super(),{unstack:!1,fill:!1,stroke:!1})},seriesPathFactory:function(){var e=this.graph,n=t.svg.area().x(function(t){return e.x(t.x)}).y0(function(t){return e.y(t.y0)}).y1(function(t){return e.y(t.y+t.y0)}).interpolate(e.interpolation).tension(this.tension);return n.defined&&n.defined(function(t){return null!==t.y}),n},seriesStrokeFactory:function(){var e=this.graph,n=t.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y+t.y0)}).interpolate(e.interpolation).tension(this.tension);return n.defined&&n.defined(function(t){return null!==t.y}),n},render:function(t){t=t||{};var e=this.graph,n=t.series||e.series,i=t.vis||e.vis;i.selectAll("*").remove();var r=this.unstack?"append":"insert",a=n.filter(function(t){return!t.disabled}).map(function(t){return t.stack}),o=i.selectAll("path").data(a).enter()[r]("svg:g","g");o.append("svg:path").attr("d",this.seriesPathFactory()).attr("class","area"),this.stroke&&o.append("svg:path").attr("d",this.seriesStrokeFactory()).attr("class","line");var s=0;n.forEach(function(t){t.disabled||(t.path=o[0][s++],this._styleSeries(t))},this)},_styleSeries:function(e){e.path&&(t.select(e.path).select(".area").attr("fill",e.color),this.stroke&&t.select(e.path).select(".line").attr("fill","none").attr("stroke",e.stroke||t.interpolateRgb(e.color,"black")(.125)).attr("stroke-width",this.strokeWidth),e.className&&e.path.setAttribute("class",e.className))}}),e.namespace("Rickshaw.Graph.Renderer.ScatterPlot"),e.Graph.Renderer.ScatterPlot=e.Class.create(e.Graph.Renderer,{name:"scatterplot",defaults:function($super){return e.extend($super(),{unstack:!0,fill:!0,stroke:!1,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:4})},initialize:function($super,t){$super(t)},render:function(t){t=t||{};var e=this.graph,n=t.series||e.series,i=t.vis||e.vis,r=this.dotSize;i.selectAll("*").remove(),n.forEach(function(t){if(!t.disabled){var n=i.selectAll("path").data(t.stack.filter(function(t){return null!==t.y})).enter().append("svg:circle").attr("cx",function(t){return e.x(t.x)}).attr("cy",function(t){return e.y(t.y)}).attr("r",function(t){return"r"in t?t.r:r});t.className&&n.classed(t.className,!0),Array.prototype.forEach.call(n[0],function(e){e.setAttribute("fill",t.color)})}},this)}}),e.namespace("Rickshaw.Graph.Renderer.Multi"),e.Graph.Renderer.Multi=e.Class.create(e.Graph.Renderer,{name:"multi",initialize:function($super,t){$super(t)},defaults:function($super){return e.extend($super(),{unstack:!0,fill:!1,stroke:!0})},configure:function($super,t){t=t||{},this.config=t,$super(t)},domain:function($super){this.graph.stackData();var e=[],n=this._groups();this._stack(n),n.forEach(function(t){var n=t.series.filter(function(t){return!t.disabled}).map(function(t){return t.stack});if(n.length){var i=null;i=t.renderer&&t.renderer.domain?t.renderer.domain(n):$super(n),e.push(i)}});var i=t.min(e.map(function(t){return t.x[0]})),r=t.max(e.map(function(t){return t.x[1]})),a=t.min(e.map(function(t){return t.y[0]})),o=t.max(e.map(function(t){return t.y[1]}));return{x:[i,r],y:[a,o]}},_groups:function(){var n=this.graph,i={};n.series.forEach(function(r){if(!r.disabled){if(!i[r.renderer]){var a="http://www.w3.org/2000/svg",o=document.createElementNS(a,"g");n.vis[0][0].appendChild(o);var s=n._renderers[r.renderer],l={},u=[this.defaults(),s.defaults(),this.config,this.graph];u.forEach(function(t){e.extend(l,t)}),s.configure(l),i[r.renderer]={renderer:s,series:[],vis:t.select(o)}}i[r.renderer].series.push(r)}},this);var r=[];return Object.keys(i).forEach(function(t){var e=i[t];r.push(e)}),r},_stack:function(n){return n.forEach(function(n){var i=n.series.filter(function(t){return!t.disabled}),r=i.map(function(t){return t.stack});if(!n.renderer.unstack){var a=t.layout.stack(),o=e.clone(a(r));i.forEach(function(t,n){t._stack=e.clone(o[n])})}},this),n},render:function(){this.graph.series.forEach(function(t){if(!t.renderer)throw new Error("Each series needs a renderer for graph 'multi' renderer")}),this.graph.vis.selectAll("*").remove();var t=this._groups();t=this._stack(t),t.forEach(function(t){var e=t.series.filter(function(t){return!t.disabled});e.active=function(){return e},t.renderer.render({series:e,vis:t.vis}),e.forEach(function(t){t.stack=t._stack||t.stack||t.data})})}}),e.namespace("Rickshaw.Graph.Renderer.LinePlot"),e.Graph.Renderer.LinePlot=e.Class.create(e.Graph.Renderer,{name:"lineplot",defaults:function($super){return e.extend($super(),{unstack:!0,fill:!1,stroke:!0,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:3,strokeWidth:2})},seriesPathFactory:function(){var e=this.graph,n=t.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y)}).interpolate(this.graph.interpolation).tension(this.tension);return n.defined&&n.defined(function(t){return null!==t.y}),n},render:function(t){t=t||{};var e=this.graph,n=t.series||e.series,i=t.vis||e.vis,r=this.dotSize;i.selectAll("*").remove();var a=n.filter(function(t){return!t.disabled}).map(function(t){return t.stack}),o=i.selectAll("path").data(a).enter().append("svg:path").attr("d",this.seriesPathFactory()),s=0;n.forEach(function(t){t.disabled||(t.path=o[0][s++],this._styleSeries(t))},this),n.forEach(function(t){if(!t.disabled){var n=i.selectAll("x").data(t.stack.filter(function(t){return null!==t.y})).enter().append("svg:circle").attr("cx",function(t){return e.x(t.x)}).attr("cy",function(t){return e.y(t.y)}).attr("r",function(t){return"r"in t?t.r:r});Array.prototype.forEach.call(n[0],function(e){e&&(e.setAttribute("data-color",t.color),e.setAttribute("fill","white"),e.setAttribute("stroke",t.color),e.setAttribute("stroke-width",this.strokeWidth))}.bind(this))}},this)}}),e.namespace("Rickshaw.Graph.Smoother"),e.Graph.Smoother=e.Class.create({initialize:function(t){this.graph=t.graph,this.element=t.element,this.aggregationScale=1,this.build(),this.graph.stackData.hooks.data.push({name:"smoother",orderPosition:50,f:this.transformer.bind(this)})},build:function(){var t=this,e=jQuery;this.element&&e(function(){e(t.element).slider({min:1,max:100,slide:function(e,n){t.setScale(n.value),t.graph.update()}})})},setScale:function(t){if(t<1)throw"scale out of range: "+t;this.aggregationScale=t,this.graph.update()},transformer:function(t){if(1==this.aggregationScale)return t;var e=[];return t.forEach(function(t){for(var n=[];t.length;){var i=0,r=0,a=t.splice(0,this.aggregationScale);a.forEach(function(t){i+=t.x/a.length,r+=t.y/a.length}),n.push({x:i,y:r})}e.push(n)}.bind(this)),e}}),e.namespace("Rickshaw.Graph.Socketio"),e.Graph.Socketio=e.Class.create(e.Graph.Ajax,{request:function(){var t=io.connect(this.dataURL),e=this;t.on("rickshaw",function(t){e.success(t)})}}),e.namespace("Rickshaw.Series"),e.Series=e.Class.create(Array,{initialize:function(t,n,i){i=i||{},this.palette=new e.Color.Palette(n),this.timeBase="undefined"==typeof i.timeBase?Math.floor((new Date).getTime()/1e3):i.timeBase;var r="undefined"==typeof i.timeInterval?1e3:i.timeInterval;this.setTimeInterval(r),t&&"object"==typeof t&&Array.isArray(t)&&t.forEach(function(t){this.addItem(t)},this)},addItem:function(t){if("undefined"==typeof t.name)throw"addItem() needs a name";t.color=t.color||this.palette.color(t.name),t.data=t.data||[],0===t.data.length&&this.length&&this.getIndex()>0?this[0].data.forEach(function(e){t.data.push({x:e.x,y:0})}):0===t.data.length&&t.data.push({x:this.timeBase-(this.timeInterval||0),y:0}),this.push(t),this.legend&&this.legend.addLine(this.itemByName(t.name))},addData:function(t,n){var i=this.getIndex();e.keys(t).forEach(function(t){this.itemByName(t)||this.addItem({name:t})},this),this.forEach(function(e){e.data.push({x:n||(i*this.timeInterval||1)+this.timeBase,y:t[e.name]||0})},this)},getIndex:function(){return this[0]&&this[0].data&&this[0].data.length?this[0].data.length:0},itemByName:function(t){for(var e=0;e<this.length;e++)if(this[e].name==t)return this[e]},setTimeInterval:function(t){this.timeInterval=t/1e3},setTimeBase:function(t){this.timeBase=t},dump:function(){var t={timeBase:this.timeBase,timeInterval:this.timeInterval,items:[]};return this.forEach(function(e){var n={color:e.color,name:e.name,data:[]};e.data.forEach(function(t){n.data.push({x:t.x,y:t.y})}),t.items.push(n)}),t},load:function(t){t.timeInterval&&(this.timeInterval=t.timeInterval),t.timeBase&&(this.timeBase=t.timeBase),t.items&&t.items.forEach(function(t){this.push(t),this.legend&&this.legend.addLine(this.itemByName(t.name))},this)}}),e.Series.zeroFill=function(t){e.Series.fill(t,0)},e.Series.fill=function(t,e){for(var n,i=0,r=t.map(function(t){return t.data});i<Math.max.apply(null,r.map(function(t){return t.length}));)n=Math.min.apply(null,r.filter(function(t){return t[i]}).map(function(t){return t[i].x})),r.forEach(function(t){t[i]&&t[i].x==n||t.splice(i,0,{x:n,y:e})}),i++},e.namespace("Rickshaw.Series.FixedDuration"),e.Series.FixedDuration=e.Class.create(e.Series,{initialize:function(t,n,i){if(i=i||{},"undefined"==typeof i.timeInterval)throw new Error("FixedDuration series requires timeInterval");if("undefined"==typeof i.maxDataPoints)throw new Error("FixedDuration series requires maxDataPoints");if(this.palette=new e.Color.Palette(n),this.timeBase="undefined"==typeof i.timeBase?Math.floor((new Date).getTime()/1e3):i.timeBase,this.setTimeInterval(i.timeInterval),this[0]&&this[0].data&&this[0].data.length?(this.currentSize=this[0].data.length,this.currentIndex=this[0].data.length):(this.currentSize=0,this.currentIndex=0),this.maxDataPoints=i.maxDataPoints,t&&"object"==typeof t&&Array.isArray(t)&&(t.forEach(function(t){this.addItem(t)},this),this.currentSize+=1,this.currentIndex+=1),this.timeBase-=(this.maxDataPoints-this.currentSize)*this.timeInterval,"undefined"!=typeof this.maxDataPoints&&this.currentSize<this.maxDataPoints)for(var r=this.maxDataPoints-this.currentSize-1;r>1;r--)this.currentSize+=1,this.currentIndex+=1,this.forEach(function(t){t.data.unshift({x:((r-1)*this.timeInterval||1)+this.timeBase,y:0,i:r})},this)},addData:function($super,t,e){if($super(t,e),this.currentSize+=1,this.currentIndex+=1,void 0!==this.maxDataPoints)for(;this.currentSize>this.maxDataPoints;)this.dropData()},dropData:function(){this.forEach(function(t){t.data.splice(0,1)}),this.currentSize-=1},getIndex:function(){return this.currentIndex}}),e}),!function(t,e){"function"==typeof define&&define.amd?define([],function(){return t.Chartist=e()}):"object"==typeof exports?module.exports=e():t.Chartist=e()}(this,function(){var t={version:"0.8.3"};return function(t,e,n){"use strict";n.noop=function(t){return t},n.alphaNumerate=function(t){return String.fromCharCode(97+t%26)},n.extend=function(t){t=t||{};var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(e){for(var i in e)"object"!=typeof e[i]||null===e[i]||e[i]instanceof Array?t[i]=e[i]:t[i]=n.extend({},t[i],e[i])}),t},n.replaceAll=function(t,e,n){return t.replace(new RegExp(e,"g"),n)},n.stripUnit=function(t){return"string"==typeof t&&(t=t.replace(/[^0-9\+-\.]/g,"")),+t},n.ensureUnit=function(t,e){return"number"==typeof t&&(t+=e),t},n.querySelector=function(t){return t instanceof Node?t:e.querySelector(t)},n.times=function(t){return Array.apply(null,new Array(t))},n.sum=function(t,e){return t+(e?e:0)},n.mapMultiply=function(t){return function(e){return e*t}},n.mapAdd=function(t){return function(e){return e+t}},n.serialMap=function(t,e){var i=[],r=Math.max.apply(null,t.map(function(t){return t.length}));return n.times(r).forEach(function(n,r){var a=t.map(function(t){return t[r]});i[r]=e.apply(null,a)}),i},n.roundWithPrecision=function(t,e){var i=Math.pow(10,e||n.precision);return Math.round(t*i)/i},n.precision=8,n.escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},n.serialize=function(t){return null===t||void 0===t?t:("number"==typeof t?t=""+t:"object"==typeof t&&(t=JSON.stringify({data:t})),Object.keys(n.escapingMap).reduce(function(t,e){return n.replaceAll(t,e,n.escapingMap[e])},t))},n.deserialize=function(t){if("string"!=typeof t)return t;t=Object.keys(n.escapingMap).reduce(function(t,e){return n.replaceAll(t,n.escapingMap[e],e)},t);try{t=JSON.parse(t),t=void 0!==t.data?t.data:t}catch(t){}return t},n.createSvg=function(t,e,i,r){var a;return e=e||"100%",i=i||"100%",Array.prototype.slice.call(t.querySelectorAll("svg")).filter(function(t){return t.getAttribute(n.xmlNs.qualifiedName)}).forEach(function(e){t.removeChild(e)}),a=new n.Svg("svg").attr({width:e,height:i}).addClass(r).attr({style:"width: "+e+"; height: "+i+";"}),t.appendChild(a._node),a},n.reverseData=function(t){t.labels.reverse(),t.series.reverse();for(var e=0;e<t.series.length;e++)"object"==typeof t.series[e]&&void 0!==t.series[e].data?t.series[e].data.reverse():t.series[e]instanceof Array&&t.series[e].reverse()},n.getDataArray=function(t,e){function i(t){return void 0===t||null===t||"number"==typeof t&&isNaN(t)?void 0:(t.data||t)instanceof Array?(t.data||t).map(i):t.hasOwnProperty("value")?i(t.value):+t}return(e&&!t.reversed||!e&&t.reversed)&&(n.reverseData(t),t.reversed=!t.reversed),t.series.map(i)},n.normalizePadding=function(t,e){return e=e||0,"number"==typeof t?{top:t,right:t,bottom:t,left:t}:{top:"number"==typeof t.top?t.top:e,right:"number"==typeof t.right?t.right:e,bottom:"number"==typeof t.bottom?t.bottom:e,left:"number"==typeof t.left?t.left:e}},n.normalizeDataArray=function(t,e){for(var n=0;n<t.length;n++)if(t[n].length!==e)for(var i=t[n].length;e>i;i++)t[n][i]=void 0;return t},n.getMetaData=function(t,e){var i=t.data?t.data[e]:t[e];return i?n.serialize(i.meta):void 0},n.orderOfMagnitude=function(t){return Math.floor(Math.log(Math.abs(t))/Math.LN10)},n.projectLength=function(t,e,n){return e/n.range*t},n.getAvailableHeight=function(t,e){return Math.max((n.stripUnit(e.height)||t.height())-(e.chartPadding.top+e.chartPadding.bottom)-e.axisX.offset,0)},n.getHighLow=function(t,e){function n(t){if(t instanceof Array)for(var e=0;e<t.length;e++)n(t[e]);else r&&t>i.high&&(i.high=t),a&&t<i.low&&(i.low=t)}var i={high:void 0===e.high?-Number.MAX_VALUE:+e.high,low:void 0===e.low?Number.MAX_VALUE:+e.low},r=void 0===e.high,a=void 0===e.low;return n(t),i.high<=i.low&&(0===i.low?i.high=1:i.low<0?i.high=0:i.low=0),i},n.rho=function(t){function e(t,n){return t%n===0?n:e(n,t%n)}function n(t){return t*t+1}if(1===t)return t;var i,r=2,a=2;if(t%2===0)return 2;do r=n(r)%t,a=n(n(a))%t,i=e(Math.abs(r-a),t);while(1===i);return i},n.getBounds=function(t,e,i,r,a){var o,s,l,u={high:e.high,low:e.low};(r||0===r)&&(u.high=Math.max(r,u.high),u.low=Math.min(r,u.low)),u.valueRange=u.high-u.low,u.oom=n.orderOfMagnitude(u.valueRange),u.step=Math.pow(10,u.oom),u.min=Math.floor(u.low/u.step)*u.step,u.max=Math.ceil(u.high/u.step)*u.step,u.range=u.max-u.min,u.numberOfSteps=Math.round(u.range/u.step);var h=n.projectLength(t,u.step,u),c=i>h,f=a?n.rho(u.range):0;if(a&&n.projectLength(t,1,u)>=i)u.step=1;else if(a&&f<u.step&&n.projectLength(t,f,u)>=i)u.step=f;else for(;;)if(c&&n.projectLength(t,u.step,u)<=i)u.step*=2;else{if(c||!(n.projectLength(t,u.step/2,u)>=i))break;if(u.step/=2,a&&u.step%1!==0){u.step*=2;break}}for(s=u.min,l=u.max;s+u.step<=u.low;)s+=u.step;for(;l-u.step>=u.high;)l-=u.step;for(u.min=s,u.max=l,u.range=u.max-u.min,u.values=[],o=u.min;o<=u.max;o+=u.step)u.values.push(n.roundWithPrecision(o));return u},n.polarToCartesian=function(t,e,n,i){var r=(i-90)*Math.PI/180;return{x:t+n*Math.cos(r),y:e+n*Math.sin(r)}},n.createChartRect=function(t,e,i){var r=!(!e.axisX&&!e.axisY),a=r?e.axisY.offset:0,o=r?e.axisX.offset:0,s=t.width()||n.stripUnit(e.width)||0,l=t.height()||n.stripUnit(e.height)||0,u=n.normalizePadding(e.chartPadding,i);s=Math.max(s,o+u.left+u.right),l=Math.max(l,a+u.top+u.bottom);var h={padding:u,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}};return r?("start"===e.axisX.position?(h.y2=u.top+o,h.y1=Math.max(l-u.bottom,h.y2+1)):(h.y2=u.top,h.y1=Math.max(l-u.bottom-o,h.y2+1)),"start"===e.axisY.position?(h.x1=u.left+a,h.x2=Math.max(s-u.right,h.x1+1)):(h.x1=u.left,h.x2=Math.max(s-u.right-a,h.x1+1))):(h.x1=u.left,h.x2=Math.max(s-u.right,h.x1+1),h.y2=u.top,h.y1=Math.max(l-u.bottom,h.y2+1)),h},n.createGrid=function(t,e,i,r,a,o,s,l){var u={};u[i.units.pos+"1"]=t.pos,u[i.units.pos+"2"]=t.pos,u[i.counterUnits.pos+"1"]=r,u[i.counterUnits.pos+"2"]=r+a;var h=o.elem("line",u,s.join(" "));l.emit("draw",n.extend({type:"grid",axis:i,index:e,group:o,element:h},u))},n.createLabel=function(t,e,i,r,a,o,s,l,u,h){var c,f={};if(f[r.units.pos]=t.pos+o[r.units.pos],f[r.counterUnits.pos]=o[r.counterUnits.pos],f[r.units.len]=t.len,f[r.counterUnits.len]=a-10,u){var d='<span class="'+l.join(" ")+'" style="'+r.units.len+": "+Math.round(f[r.units.len])+"px; "+r.counterUnits.len+": "+Math.round(f[r.counterUnits.len])+'px">'+i[e]+"</span>";c=s.foreignObject(d,n.extend({style:"overflow: visible;"},f))}else c=s.elem("text",f,l.join(" ")).text(i[e]);h.emit("draw",n.extend({type:"label",axis:r,index:e,group:s,element:c,text:i[e]},f))},n.createAxis=function(t,e,i,r,a,o,s,l){var u=s["axis"+t.units.pos.toUpperCase()],h=e.map(t.projectValue.bind(t)),c=e.map(u.labelInterpolationFnc);h.forEach(function(e,h){var f={x:0,y:0};(c[h]||0===c[h])&&("x"===t.units.pos?(e.pos=i.x1+e.pos,f.x=s.axisX.labelOffset.x,"start"===s.axisX.position?f.y=i.padding.top+s.axisX.labelOffset.y+(o?5:20):f.y=i.y1+s.axisX.labelOffset.y+(o?5:20)):(e.pos=i.y1-e.pos,f.y=s.axisY.labelOffset.y-(o?e.len:0),"start"===s.axisY.position?f.x=o?i.padding.left+s.axisY.labelOffset.x:i.x1-10:f.x=i.x2+s.axisY.labelOffset.x+10),u.showGrid&&n.createGrid(e,h,t,t.gridOffset,i[t.counterUnits.len](),r,[s.classNames.grid,s.classNames[t.units.dir]],l),u.showLabel&&n.createLabel(e,h,c,t,u.offset,f,a,[s.classNames.label,s.classNames[t.units.dir],s.classNames[u.position]],o,l))})},n.getSeriesOption=function(t,e,n){if(t.name&&e.series&&e.series[t.name]){var i=e.series[t.name];return i.hasOwnProperty(n)?i[n]:e[n]}return e[n]},n.optionsProvider=function(e,i,r){function a(e){var a=s;if(s=n.extend({},u),i)for(l=0;l<i.length;l++){var o=t.matchMedia(i[l][0]);o.matches&&(s=n.extend(s,i[l][1]))}r&&!e&&r.emit("optionsChanged",{previousOptions:a,currentOptions:s})}function o(){h.forEach(function(t){t.removeListener(a)})}var s,l,u=n.extend({},e),h=[];if(!t.matchMedia)throw"window.matchMedia not found! Make sure you're using a polyfill.";if(i)for(l=0;l<i.length;l++){var c=t.matchMedia(i[l][0]);c.addListener(a),h.push(c)}return a(!0),{removeMediaQueryListeners:o,getCurrentOptions:function(){return n.extend({},s)}}}}(window,document,t),function(t,e,n){"use strict";n.Interpolation={},n.Interpolation.none=function(){return function(t,e){for(var i=new n.Svg.Path,r=!0,a=1;a<t.length;a+=2){var o=e[(a-1)/2];void 0===o.value?r=!0:r?(i.move(t[a-1],t[a],!1,o),r=!1):i.line(t[a-1],t[a],!1,o)}return i}},n.Interpolation.simple=function(t){var e={divisor:2};t=n.extend({},e,t);var i=1/Math.max(1,t.divisor);return function(t,e){for(var r=new n.Svg.Path,a=!0,o=2;o<t.length;o+=2){var s=t[o-2],l=t[o-1],u=t[o],h=t[o+1],c=(u-s)*i,f=e[o/2-1],d=e[o/2];void 0===f.value?a=!0:(a&&r.move(s,l,!1,f),void 0!==d.value&&(r.curve(s+c,l,u-c,h,u,h,!1,d),a=!1))}return r}},n.Interpolation.cardinal=function(t){function e(t,e){for(var n=[],i=!0,r=0;r<t.length;r+=2)void 0===e[r/2].value?i=!0:(i&&(n.push({pathCoordinates:[],valueData:[]}),i=!1),n[n.length-1].pathCoordinates.push(t[r],t[r+1]),n[n.length-1].valueData.push(e[r/2]));return n}var i={tension:1};t=n.extend({},i,t);var r=Math.min(1,Math.max(0,t.tension)),a=1-r;return function t(i,o){var s=e(i,o);if(s.length>1){var l=[];return s.forEach(function(e){l.push(t(e.pathCoordinates,e.valueData))}),n.Svg.Path.join(l)}if(i=s[0].pathCoordinates,o=s[0].valueData,i.length<=4)return n.Interpolation.none()(i,o);for(var u,h=(new n.Svg.Path).move(i[0],i[1],!1,o[0]),c=0,f=i.length;f-2*!u>c;c+=2){var d=[{x:+i[c-2],y:+i[c-1]},{x:+i[c],y:+i[c+1]},{x:+i[c+2],y:+i[c+3]},{x:+i[c+4],y:+i[c+5]}];u?c?f-4===c?d[3]={x:+i[0],y:+i[1]}:f-2===c&&(d[2]={x:+i[0],y:+i[1]},d[3]={x:+i[2],y:+i[3]}):d[0]={x:+i[f-2],y:+i[f-1]}:f-4===c?d[3]=d[2]:c||(d[0]={x:+i[c],y:+i[c+1]}),h.curve(r*(-d[0].x+6*d[1].x+d[2].x)/6+a*d[2].x,r*(-d[0].y+6*d[1].y+d[2].y)/6+a*d[2].y,r*(d[1].x+6*d[2].x-d[3].x)/6+a*d[2].x,r*(d[1].y+6*d[2].y-d[3].y)/6+a*d[2].y,d[2].x,d[2].y,!1,o[(c+2)/2])}return h}},n.Interpolation.step=function(t){var e={postpone:!0};return t=n.extend({},e,t),function(e,i){for(var r=new n.Svg.Path,a=!0,o=2;o<e.length;o+=2){var s=e[o-2],l=e[o-1],u=e[o],h=e[o+1],c=i[o/2-1],f=i[o/2];void 0===c.value?a=!0:(a&&r.move(s,l,!1,c),void 0!==f.value&&(t.postpone?r.line(u,l,!1,c):r.line(s,h,!1,f),r.line(u,h,!1,f),a=!1))}return r}}}(window,document,t),function(t,e,n){"use strict";n.EventEmitter=function(){function t(t,e){i[t]=i[t]||[],i[t].push(e)}function e(t,e){i[t]&&(e?(i[t].splice(i[t].indexOf(e),1),0===i[t].length&&delete i[t]):delete i[t])}function n(t,e){i[t]&&i[t].forEach(function(t){t(e)}),i["*"]&&i["*"].forEach(function(n){n(t,e)})}var i=[];return{addEventHandler:t,removeEventHandler:e,emit:n}}}(window,document,t),function(t,e,n){"use strict";function i(t){var e=[];if(t.length)for(var n=0;n<t.length;n++)e.push(t[n]);return e}function r(t,e){var i=e||this.prototype||n.Class,r=Object.create(i);n.Class.cloneDefinitions(r,t);var a=function(){var t,e=r.constructor||function(){};return t=this===n?Object.create(r):this,e.apply(t,Array.prototype.slice.call(arguments,0)),t};return a.prototype=r,a["super"]=i,a.extend=this.extend,a}function a(){var t=i(arguments),e=t[0];return t.splice(1,t.length-1).forEach(function(t){Object.getOwnPropertyNames(t).forEach(function(n){delete e[n],Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}),e}n.Class={extend:r,cloneDefinitions:a}}(window,document,t),function(t,e,n){"use strict";function i(t,e,i){return t&&(this.data=t,this.eventEmitter.emit("data",{type:"update",data:this.data})),e&&(this.options=n.extend({},i?this.options:this.defaultOptions,e),this.initializeTimeoutId||(this.optionsProvider.removeMediaQueryListeners(),this.optionsProvider=n.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter))),this.initializeTimeoutId||this.createChart(this.optionsProvider.getCurrentOptions()),
this}function r(){return this.initializeTimeoutId?t.clearTimeout(this.initializeTimeoutId):(t.removeEventListener("resize",this.resizeListener),this.optionsProvider.removeMediaQueryListeners()),this}function a(t,e){return this.eventEmitter.addEventHandler(t,e),this}function o(t,e){return this.eventEmitter.removeEventHandler(t,e),this}function s(){t.addEventListener("resize",this.resizeListener),this.optionsProvider=n.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.addEventHandler("optionsChanged",function(){this.update()}.bind(this)),this.options.plugins&&this.options.plugins.forEach(function(t){t instanceof Array?t[0](this,t[1]):t(this)}.bind(this)),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=void 0}function l(t,e,i,r,a){this.container=n.querySelector(t),this.data=e,this.defaultOptions=i,this.options=r,this.responsiveOptions=a,this.eventEmitter=n.EventEmitter(),this.supportsForeignObject=n.Svg.isSupported("Extensibility"),this.supportsAnimations=n.Svg.isSupported("AnimationEventsAttribute"),this.resizeListener=function(){this.update()}.bind(this),this.container&&(this.container.__chartist__&&this.container.__chartist__.detach(),this.container.__chartist__=this),this.initializeTimeoutId=setTimeout(s.bind(this),0)}n.Base=n.Class.extend({constructor:l,optionsProvider:void 0,container:void 0,svg:void 0,eventEmitter:void 0,createChart:function(){throw new Error("Base chart type can't be instantiated!")},update:i,detach:r,on:a,off:o,version:n.version,supportsForeignObject:!1})}(window,document,t),function(t,e,n){"use strict";function i(t,i,r,a,o){t instanceof Element?this._node=t:(this._node=e.createElementNS(S,t),"svg"===t&&this._node.setAttributeNS(T,n.xmlNs.qualifiedName,n.xmlNs.uri),i&&this.attr(i),r&&this.addClass(r),a&&(o&&a._node.firstChild?a._node.insertBefore(this._node,a._node.firstChild):a._node.appendChild(this._node)))}function r(t,e){return"string"==typeof t?e?this._node.getAttributeNS(e,t):this._node.getAttribute(t):(Object.keys(t).forEach(function(i){void 0!==t[i]&&(e?this._node.setAttributeNS(e,[n.xmlNs.prefix,":",i].join(""),t[i]):this._node.setAttribute(i,t[i]))}.bind(this)),this)}function a(t,e,i,r){return new n.Svg(t,e,i,this,r)}function o(){return this._node.parentNode instanceof SVGElement?new n.Svg(this._node.parentNode):null}function s(){for(var t=this._node;"svg"!==t.nodeName;)t=t.parentNode;return new n.Svg(t)}function l(t){var e=this._node.querySelector(t);return e?new n.Svg(e):null}function u(t){var e=this._node.querySelectorAll(t);return e.length?new n.Svg.List(e):null}function h(t,n,i,r){if("string"==typeof t){var a=e.createElement("div");a.innerHTML=t,t=a.firstChild}t.setAttribute("xmlns",C);var o=this.elem("foreignObject",n,i,r);return o._node.appendChild(t),o}function c(t){return this._node.appendChild(e.createTextNode(t)),this}function f(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this}function d(){return this._node.parentNode.removeChild(this._node),this.parent()}function p(t){return this._node.parentNode.replaceChild(t._node,this._node),t}function g(t,e){return e&&this._node.firstChild?this._node.insertBefore(t._node,this._node.firstChild):this._node.appendChild(t._node),this}function v(){return this._node.getAttribute("class")?this._node.getAttribute("class").trim().split(/\s+/):[]}function m(t){return this._node.setAttribute("class",this.classes(this._node).concat(t.trim().split(/\s+/)).filter(function(t,e,n){return n.indexOf(t)===e}).join(" ")),this}function x(t){var e=t.trim().split(/\s+/);return this._node.setAttribute("class",this.classes(this._node).filter(function(t){return-1===e.indexOf(t)}).join(" ")),this}function y(){return this._node.setAttribute("class",""),this}function b(t,e){try{return t.getBBox()[e]}catch(t){}return 0}function _(){return this._node.clientHeight||Math.round(b(this._node,"height"))||this._node.parentNode.clientHeight}function w(){return this._node.clientWidth||Math.round(b(this._node,"width"))||this._node.parentNode.clientWidth}function M(t,e,i){return void 0===e&&(e=!0),Object.keys(t).forEach(function(r){function a(t,e){var a,o,s,l={};t.easing&&(s=t.easing instanceof Array?t.easing:n.Svg.Easing[t.easing],delete t.easing),t.begin=n.ensureUnit(t.begin,"ms"),t.dur=n.ensureUnit(t.dur,"ms"),s&&(t.calcMode="spline",t.keySplines=s.join(" "),t.keyTimes="0;1"),e&&(t.fill="freeze",l[r]=t.from,this.attr(l),o=n.stripUnit(t.begin||0),t.begin="indefinite"),a=this.elem("animate",n.extend({attributeName:r},t)),e&&setTimeout(function(){try{a._node.beginElement()}catch(e){l[r]=t.to,this.attr(l),a.remove()}}.bind(this),o),i&&a._node.addEventListener("beginEvent",function(){i.emit("animationBegin",{element:this,animate:a._node,params:t})}.bind(this)),a._node.addEventListener("endEvent",function(){i&&i.emit("animationEnd",{element:this,animate:a._node,params:t}),e&&(l[r]=t.to,this.attr(l),a.remove())}.bind(this))}t[r]instanceof Array?t[r].forEach(function(t){a.bind(this)(t,!1)}.bind(this)):a.bind(this)(t[r],e)}.bind(this)),this}function k(t){var e=this;this.svgElements=[];for(var i=0;i<t.length;i++)this.svgElements.push(new n.Svg(t[i]));Object.keys(n.Svg.prototype).filter(function(t){return-1===["constructor","parent","querySelector","querySelectorAll","replace","append","classes","height","width"].indexOf(t)}).forEach(function(t){e[t]=function(){var i=Array.prototype.slice.call(arguments,0);return e.svgElements.forEach(function(e){n.Svg.prototype[t].apply(e,i)}),e}})}var S="http://www.w3.org/2000/svg",T="http://www.w3.org/2000/xmlns/",C="http://www.w3.org/1999/xhtml";n.xmlNs={qualifiedName:"xmlns:ct",prefix:"ct",uri:"http://gionkunz.github.com/chartist-js/ct"},n.Svg=n.Class.extend({constructor:i,attr:r,elem:a,parent:o,root:s,querySelector:l,querySelectorAll:u,foreignObject:h,text:c,empty:f,remove:d,replace:p,append:g,classes:v,addClass:m,removeClass:x,removeAllClasses:y,height:_,width:w,animate:M}),n.Svg.isSupported=function(t){return e.implementation.hasFeature("www.http://w3.org/TR/SVG11/feature#"+t,"1.1")};var A={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};n.Svg.Easing=A,n.Svg.List=n.Class.extend({constructor:k})}(window,document,t),function(t,e,n){"use strict";function i(t,e,i,r,a,o){var s=n.extend({command:a?t.toLowerCase():t.toUpperCase()},e,o?{data:o}:{});i.splice(r,0,s)}function r(t,e){t.forEach(function(n,i){b[n.command.toLowerCase()].forEach(function(r,a){e(n,r,i,a,t)})})}function a(t,e){this.pathElements=[],this.pos=0,this.close=t,this.options=n.extend({},_,e)}function o(t){return void 0!==t?(this.pos=Math.max(0,Math.min(this.pathElements.length,t)),this):this.pos}function s(t){return this.pathElements.splice(this.pos,t),this}function l(t,e,n,r){return i("M",{x:+t,y:+e},this.pathElements,this.pos++,n,r),this}function u(t,e,n,r){return i("L",{x:+t,y:+e},this.pathElements,this.pos++,n,r),this}function h(t,e,n,r,a,o,s,l){return i("C",{x1:+t,y1:+e,x2:+n,y2:+r,x:+a,y:+o},this.pathElements,this.pos++,s,l),this}function c(t,e,n,r,a,o,s,l,u){return i("A",{rx:+t,ry:+e,xAr:+n,lAf:+r,sf:+a,x:+o,y:+s},this.pathElements,this.pos++,l,u),this}function f(t){var e=t.replace(/([A-Za-z])([0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce(function(t,e){return e.match(/[A-Za-z]/)&&t.push([]),t[t.length-1].push(e),t},[]);"Z"===e[e.length-1][0].toUpperCase()&&e.pop();var i=e.map(function(t){var e=t.shift(),i=b[e.toLowerCase()];return n.extend({command:e},i.reduce(function(e,n,i){return e[n]=+t[i],e},{}))}),r=[this.pos,0];return Array.prototype.push.apply(r,i),Array.prototype.splice.apply(this.pathElements,r),this.pos+=i.length,this}function d(){var t=Math.pow(10,this.options.accuracy);return this.pathElements.reduce(function(e,n){var i=b[n.command.toLowerCase()].map(function(e){return this.options.accuracy?Math.round(n[e]*t)/t:n[e]}.bind(this));return e+n.command+i.join(",")}.bind(this),"")+(this.close?"Z":"")}function p(t,e){return r(this.pathElements,function(n,i){n[i]*="x"===i[0]?t:e}),this}function g(t,e){return r(this.pathElements,function(n,i){n[i]+="x"===i[0]?t:e}),this}function v(t){return r(this.pathElements,function(e,n,i,r,a){var o=t(e,n,i,r,a);(o||0===o)&&(e[n]=o)}),this}function m(t){var e=new n.Svg.Path(t||this.close);return e.pos=this.pos,e.pathElements=this.pathElements.slice().map(function(t){return n.extend({},t)}),e.options=n.extend({},this.options),e}function x(t){var e=[new n.Svg.Path];return this.pathElements.forEach(function(i){i.command===t.toUpperCase()&&0!==e[e.length-1].pathElements.length&&e.push(new n.Svg.Path),e[e.length-1].pathElements.push(i)}),e}function y(t,e,i){for(var r=new n.Svg.Path(e,i),a=0;a<t.length;a++)for(var o=t[a],s=0;s<o.pathElements.length;s++)r.pathElements.push(o.pathElements[s]);return r}var b={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},_={accuracy:3};n.Svg.Path=n.Class.extend({constructor:a,position:o,remove:s,move:l,line:u,curve:h,arc:c,scale:p,translate:g,transform:v,parse:f,stringify:d,clone:m,splitByCommand:x}),n.Svg.Path.elementDescriptions=b,n.Svg.Path.join=y}(window,document,t),function(t,e,n){"use strict";function i(t,e,n){this.units=t,this.counterUnits=t===r.x?r.y:r.x,this.chartRect=e,this.axisLength=e[t.rectEnd]-e[t.rectStart],this.gridOffset=e[t.rectOffset],this.options=n}var r={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};n.Axis=n.Class.extend({constructor:i,projectValue:function(){throw new Error("Base axis can't be instantiated!")}}),n.Axis.units=r}(window,document,t),function(t,e,n){"use strict";function i(t,e,i){n.LinearScaleAxis["super"].constructor.call(this,t,e,i),this.bounds=n.getBounds(this.axisLength,i.highLow,i.scaleMinSpace,i.referenceValue,i.onlyInteger)}function r(t){return{pos:this.axisLength*(t-this.bounds.min)/this.bounds.range,len:n.projectLength(this.axisLength,this.bounds.step,this.bounds)}}n.LinearScaleAxis=n.Axis.extend({constructor:i,projectValue:r})}(window,document,t),function(t,e,n){"use strict";function i(t,e,i){n.StepAxis["super"].constructor.call(this,t,e,i),this.stepLength=this.axisLength/(i.stepCount-(i.stretch?1:0))}function r(t,e){return{pos:this.stepLength*e,len:this.stepLength}}n.StepAxis=n.Axis.extend({constructor:i,projectValue:r})}(window,document,t),function(t,e,n){"use strict";function i(t){var e=[],i=n.normalizeDataArray(n.getDataArray(this.data,t.reverseData),this.data.labels.length);this.svg=n.createSvg(this.container,t.width,t.height,t.classNames.chart);var r=n.createChartRect(this.svg,t,a.padding),o=n.getHighLow(i,t),s=new n.StepAxis(n.Axis.units.x,r,{stepCount:this.data.labels.length,stretch:t.fullWidth}),l=new n.LinearScaleAxis(n.Axis.units.y,r,{highLow:o,scaleMinSpace:t.axisY.scaleMinSpace,onlyInteger:t.axisY.onlyInteger}),u=this.svg.elem("g").addClass(t.classNames.labelGroup),h=this.svg.elem("g").addClass(t.classNames.gridGroup);n.createAxis(s,this.data.labels,r,h,u,this.supportsForeignObject,t,this.eventEmitter),n.createAxis(l,l.bounds.values,r,h,u,this.supportsForeignObject,t,this.eventEmitter),this.data.series.forEach(function(a,o){e[o]=this.svg.elem("g"),e[o].attr({"series-name":a.name,meta:n.serialize(a.meta)},n.xmlNs.uri),e[o].addClass([t.classNames.series,a.className||t.classNames.series+"-"+n.alphaNumerate(o)].join(" "));var u=[],h=[];i[o].forEach(function(t,e){var c={x:r.x1+s.projectValue(t,e,i[o]).pos,y:r.y1-l.projectValue(t,e,i[o]).pos};u.push(c.x,c.y),h.push({value:t,valueIndex:e,meta:n.getMetaData(a,e)})}.bind(this));var c={lineSmooth:n.getSeriesOption(a,t,"lineSmooth"),showPoint:n.getSeriesOption(a,t,"showPoint"),showLine:n.getSeriesOption(a,t,"showLine"),showArea:n.getSeriesOption(a,t,"showArea")},f="function"==typeof c.lineSmooth?c.lineSmooth:c.lineSmooth?n.Interpolation.cardinal():n.Interpolation.none(),d=f(u,h);if(c.showPoint&&d.pathElements.forEach(function(i){var r=e[o].elem("line",{x1:i.x,y1:i.y,x2:i.x+.01,y2:i.y},t.classNames.point).attr({value:i.data.value,meta:i.data.meta},n.xmlNs.uri);this.eventEmitter.emit("draw",{type:"point",value:i.data.value,index:i.data.valueIndex,meta:i.data.meta,series:a,seriesIndex:o,group:e[o],element:r,x:i.x,y:i.y})}.bind(this)),c.showLine){var p=e[o].elem("path",{d:d.stringify()},t.classNames.line,!0).attr({values:i[o]},n.xmlNs.uri);this.eventEmitter.emit("draw",{type:"line",values:i[o],path:d.clone(),chartRect:r,index:o,series:a,seriesIndex:o,group:e[o],element:p})}if(c.showArea){var g=Math.max(Math.min(t.areaBase,l.bounds.max),l.bounds.min),v=r.y1-l.projectValue(g).pos;d.splitByCommand("M").filter(function(t){return t.pathElements.length>1}).map(function(t){var e=t.pathElements[0],n=t.pathElements[t.pathElements.length-1];return t.clone(!0).position(0).remove(1).move(e.x,v).line(e.x,e.y).position(t.pathElements.length+1).line(n.x,v)}).forEach(function(s){var l=e[o].elem("path",{d:s.stringify()},t.classNames.area,!0).attr({values:i[o]},n.xmlNs.uri);this.eventEmitter.emit("draw",{type:"area",values:i[o],path:s.clone(),series:a,seriesIndex:o,chartRect:r,index:o,group:e[o],element:l})}.bind(this))}}.bind(this)),this.eventEmitter.emit("created",{bounds:l.bounds,chartRect:r,axisX:s,axisY:l,svg:this.svg,options:t})}function r(t,e,i,r){n.Line["super"].constructor.call(this,t,e,a,n.extend({},a,i),r)}var a={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:n.noop,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:n.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};n.Line=n.Base.extend({constructor:r,createChart:i})}(window,document,t),function(t,e,n){"use strict";function i(t){var e,i=[],r=n.getDataArray(this.data,t.reverseData),o=t.distributeSeries?r.map(function(t){return[t]}):n.normalizeDataArray(r,this.data.labels.length);if(this.svg=n.createSvg(this.container,t.width,t.height,t.classNames.chart+(t.horizontalBars?" "+t.classNames.horizontalBars:"")),t.stackBars){var s=n.serialMap(o,function(){return Array.prototype.slice.call(arguments).reduce(n.sum,0)});e=n.getHighLow([s],t)}else e=n.getHighLow(o,t);e.high=+t.high||(0===t.high?0:e.high),e.low=+t.low||(0===t.low?0:e.low);var l,u,h,c,f,d=n.createChartRect(this.svg,t,a.padding);u=t.distributeSeries&&!t.stackBars?o.length:t.distributeSeries&&t.stackBars?1:this.data.labels.length,t.horizontalBars?(h=f=new n.StepAxis(n.Axis.units.y,d,{stepCount:u}),l=c=new n.LinearScaleAxis(n.Axis.units.x,d,{highLow:e,scaleMinSpace:t.axisX.scaleMinSpace,onlyInteger:t.axisX.onlyInteger,referenceValue:0})):(h=c=new n.StepAxis(n.Axis.units.x,d,{stepCount:u}),l=f=new n.LinearScaleAxis(n.Axis.units.y,d,{highLow:e,scaleMinSpace:t.axisY.scaleMinSpace,onlyInteger:t.axisY.onlyInteger,referenceValue:0}));var p=this.svg.elem("g").addClass(t.classNames.labelGroup),g=this.svg.elem("g").addClass(t.classNames.gridGroup),v=t.horizontalBars?d.x1+l.projectValue(0).pos:d.y1-l.projectValue(0).pos,m=[];n.createAxis(h,this.data.labels,d,g,p,this.supportsForeignObject,t,this.eventEmitter),n.createAxis(l,l.bounds.values,d,g,p,this.supportsForeignObject,t,this.eventEmitter),this.data.series.forEach(function(e,r){var a,s=r-(this.data.series.length-1)/2;a=t.distributeSeries&&!t.stackBars?h.axisLength/o.length/2:t.distributeSeries&&t.stackBars?h.axisLength/2:h.axisLength/o[r].length/2,i[r]=this.svg.elem("g"),i[r].attr({"series-name":e.name,meta:n.serialize(e.meta)},n.xmlNs.uri),i[r].addClass([t.classNames.series,e.className||t.classNames.series+"-"+n.alphaNumerate(r)].join(" ")),o[r].forEach(function(u,c){var f,p,g,x;if(x=t.distributeSeries&&!t.stackBars?r:t.distributeSeries&&t.stackBars?0:c,f=t.horizontalBars?{x:d.x1+l.projectValue(u||0,c,o[r]).pos,y:d.y1-h.projectValue(u||0,x,o[r]).pos}:{x:d.x1+h.projectValue(u||0,x,o[r]).pos,y:d.y1-l.projectValue(u||0,c,o[r]).pos},f[h.units.pos]+=a*(t.horizontalBars?-1:1),f[h.units.pos]+=t.stackBars||t.distributeSeries?0:s*t.seriesBarDistance*(t.horizontalBars?-1:1),g=m[c]||v,m[c]=g-(v-f[h.counterUnits.pos]),void 0!==u){var y={};y[h.units.pos+"1"]=f[h.units.pos],y[h.units.pos+"2"]=f[h.units.pos],y[h.counterUnits.pos+"1"]=t.stackBars?g:v,y[h.counterUnits.pos+"2"]=t.stackBars?m[c]:f[h.counterUnits.pos],p=i[r].elem("line",y,t.classNames.bar).attr({value:u,meta:n.getMetaData(e,c)},n.xmlNs.uri),this.eventEmitter.emit("draw",n.extend({type:"bar",value:u,index:c,meta:n.getMetaData(e,c),series:e,seriesIndex:r,chartRect:d,group:i[r],element:p},y))}}.bind(this))}.bind(this)),this.eventEmitter.emit("created",{bounds:l.bounds,chartRect:d,axisX:c,axisY:f,svg:this.svg,options:t})}function r(t,e,i,r){n.Bar["super"].constructor.call(this,t,e,a,n.extend({},a,i),r)}var a={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:n.noop,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:n.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,onlyInteger:!1,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,horizontalBars:!1,distributeSeries:!1,reverseData:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};n.Bar=n.Base.extend({constructor:r,createChart:i})}(window,document,t),function(t,e,n){"use strict";function i(t,e,n){var i=e.x>t.x;return i&&"explode"===n||!i&&"implode"===n?"start":i&&"implode"===n||!i&&"explode"===n?"end":"middle"}function r(t){var e,r,a,s,l=[],u=t.startAngle,h=n.getDataArray(this.data,t.reverseData);this.svg=n.createSvg(this.container,t.width,t.height,t.donut?t.classNames.chartDonut:t.classNames.chartPie),e=n.createChartRect(this.svg,t,o.padding),r=Math.min(e.width()/2,e.height()/2),s=t.total||h.reduce(function(t,e){return t+e},0),r-=t.donut?t.donutWidth/2:0,a="outside"===t.labelPosition||t.donut?r:"center"===t.labelPosition?0:r/2,a+=t.labelOffset;for(var c={x:e.x1+e.width()/2,y:e.y2+e.height()/2},f=1===this.data.series.filter(function(t){return t.hasOwnProperty("value")?0!==t.value:0!==t}).length,d=0;d<this.data.series.length;d++){var p=this.data.series[d];l[d]=this.svg.elem("g",null,null,!0),l[d].attr({"series-name":p.name},n.xmlNs.uri),l[d].addClass([t.classNames.series,p.className||t.classNames.series+"-"+n.alphaNumerate(d)].join(" "));var g=u+h[d]/s*360;g-u===360&&(g-=.01);var v=n.polarToCartesian(c.x,c.y,r,u-(0===d||f?0:.2)),m=n.polarToCartesian(c.x,c.y,r,g),x=new n.Svg.Path(!t.donut).move(m.x,m.y).arc(r,r,0,g-u>180,0,v.x,v.y);t.donut||x.line(c.x,c.y);var y=l[d].elem("path",{d:x.stringify()},t.donut?t.classNames.sliceDonut:t.classNames.slicePie);if(y.attr({value:h[d],meta:n.serialize(p.meta)},n.xmlNs.uri),t.donut&&y.attr({style:"stroke-width: "+ +t.donutWidth+"px"}),this.eventEmitter.emit("draw",{type:"slice",value:h[d],totalDataSum:s,index:d,meta:p.meta,series:p,group:l[d],element:y,path:x.clone(),center:c,radius:r,startAngle:u,endAngle:g}),t.showLabel){var b=n.polarToCartesian(c.x,c.y,a,u+(g-u)/2),_=t.labelInterpolationFnc(this.data.labels?this.data.labels[d]:h[d],d);if(_||0===_){var w=l[d].elem("text",{dx:b.x,dy:b.y,"text-anchor":i(c,b,t.labelDirection)},t.classNames.label).text(""+_);this.eventEmitter.emit("draw",{type:"label",index:d,group:l[d],element:w,text:""+_,x:b.x,y:b.y})}}u=g}this.eventEmitter.emit("created",{chartRect:e,svg:this.svg,options:t})}function a(t,e,i,r){n.Pie["super"].constructor.call(this,t,e,o,n.extend({},o,i),r)}var o={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:n.noop,labelDirection:"neutral",reverseData:!1};n.Pie=n.Base.extend({constructor:a,createChart:r,determineAnchorPosition:i})}(window,document,t),t}),!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function e(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function n(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function i(t){return null===t?NaN:+t}function r(t){return!isNaN(t)}function a(t){return{left:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var a=i+r>>>1;t(e[a],n)<0?i=a+1:r=a}return i},right:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var a=i+r>>>1;t(e[a],n)>0?r=a:i=a+1}return i}}}function o(t){return t.length}function s(t){for(var e=1;t*e%1;)e*=10;return e}function l(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function u(){this._=Object.create(null)}function h(t){return(t+="")===yo||t[0]===bo?bo+t:t}function c(t){return(t+="")[0]===bo?t.slice(1):t}function f(t){return h(t)in this._}function d(t){return(t=h(t))in this._&&delete this._[t]}function p(){var t=[];for(var e in this._)t.push(c(e));return t}function g(){var t=0;for(var e in this._)++t;return t}function v(){for(var t in this._)return!1;return!0}function m(){this._=Object.create(null)}function x(t){return t}function y(t,e,n){return function(){var i=n.apply(e,arguments);return i===e?t:i}}function b(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=_o.length;i>n;++n){var r=_o[n]+e;if(r in t)return r}}function _(){}function w(){}function M(t){function e(){for(var e,i=n,r=-1,a=i.length;++r<a;)(e=i[r].on)&&e.apply(this,arguments);return t}var n=[],i=new u;return e.on=function(e,r){var a,o=i.get(e);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),i.remove(e)),r&&n.push(i.set(e,{on:r})),t)},e}function k(){so.event.preventDefault()}function S(){for(var t,e=so.event;t=e.sourceEvent;)e=t;return e}function T(t){for(var e=new w,n=0,i=arguments.length;++n<i;)e[arguments[n]]=M(e);return e.of=function(n,i){return function(r){try{var a=r.sourceEvent=so.event;r.target=t,so.event=r,e[r.type].apply(n,i)}finally{so.event=a}}},e}function C(t){return Mo(t,Co),t}function A(t){return"function"==typeof t?t:function(){return ko(t,this)}}function L(t){return"function"==typeof t?t:function(){return So(t,this)}}function E(t,e){function n(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function a(){this.setAttributeNS(t.space,t.local,e)}function o(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=so.ns.qualify(t),null==e?t.local?i:n:"function"==typeof e?t.local?s:o:t.local?a:r}function F(t){return t.trim().replace(/\s+/g," ")}function R(t){return new RegExp("(?:^|\\s+)"+so.requote(t)+"(?:\\s+|$)","g")}function P(t){return(t+"").trim().split(/^|\s+/)}function z(t,e){function n(){for(var n=-1;++n<r;)t[n](this,e)}function i(){for(var n=-1,i=e.apply(this,arguments);++n<r;)t[n](this,i)}t=P(t).map(D);var r=t.length;return"function"==typeof e?i:n}function D(t){var e=R(t);return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);var r=n.getAttribute("class")||"";i?(e.lastIndex=0,e.test(r)||n.setAttribute("class",F(r+" "+t))):n.setAttribute("class",F(r.replace(e," ")))}}function I(t,e,n){function i(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,n)}function a(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}return null==e?i:"function"==typeof e?a:r}function N(t,e){function n(){delete this[t]}function i(){this[t]=e}function r(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?r:i}function O(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n?e.createElementNS(n,t):e.createElement(t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=so.ns.qualify(t)).local?n:e}function B(){var t=this.parentNode;t&&t.removeChild(this)}function H(t){return{__data__:t}}function X(t){return function(){return To(this,t)}}function W(t){return arguments.length||(t=n),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function Y(t,e){for(var n=0,i=t.length;i>n;n++)for(var r,a=t[n],o=0,s=a.length;s>o;o++)(r=a[o])&&e(r,o,n);return t}function j(t){return Mo(t,Lo),t}function q(t){var e,n;return function(i,r,a){var o,s=t[a].update,l=s.length;for(a!=n&&(n=a,e=0),r>=e&&(e=r+1);!(o=s[e])&&++e<l;);return o}}function V(t,e,n){function i(){var e=this[o];e&&(this.removeEventListener(t,e,e.$),delete this[o])}function r(){var r=l(e,uo(arguments));i.call(this),this.addEventListener(t,this[o]=r,r.$=n),r._=e}function a(){var e,n=new RegExp("^__on([^.]+)"+so.requote(t)+"$");for(var i in this)if(e=i.match(n)){var r=this[i];this.removeEventListener(e[1],r,r.$),delete this[i]}}var o="__on"+t,s=t.indexOf("."),l=G;s>0&&(t=t.slice(0,s));var u=Eo.get(t);return u&&(t=u,l=U),s?e?r:i:e?_:a}function G(t,e){return function(n){var i=so.event;so.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{so.event=i}}}function U(t,e){var n=G(t,e);return function(t){var e=this,i=t.relatedTarget;i&&(i===e||8&i.compareDocumentPosition(e))||n.call(e,t)}}function Z(n){var i=".dragsuppress-"+ ++Ro,r="click"+i,a=so.select(e(n)).on("touchmove"+i,k).on("dragstart"+i,k).on("selectstart"+i,k);if(null==Fo&&(Fo=!("onselectstart"in n)&&b(n.style,"userSelect")),Fo){var o=t(n).style,s=o[Fo];o[Fo]="none"}return function(t){if(a.on(i,null),Fo&&(o[Fo]=s),t){var e=function(){a.on(r,null)};a.on(r,function(){k(),e()},!0),setTimeout(e,0)}}}function $(t,n){n.changedTouches&&(n=n.changedTouches[0]);var i=t.ownerSVGElement||t;if(i.createSVGPoint){var r=i.createSVGPoint();if(0>Po){var a=e(t);if(a.scrollX||a.scrollY){i=so.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=i[0][0].getScreenCTM();Po=!(o.f||o.e),i.remove()}}return Po?(r.x=n.pageX,r.y=n.pageY):(r.x=n.clientX,r.y=n.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var s=t.getBoundingClientRect();return[n.clientX-s.left-t.clientLeft,n.clientY-s.top-t.clientTop]}function Q(){return so.event.changedTouches[0].identifier}function J(t){return t>0?1:0>t?-1:0}function K(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function tt(t){return t>1?0:-1>t?Io:Math.acos(t)}function et(t){return t>1?Bo:-1>t?-Bo:Math.asin(t)}function nt(t){return((t=Math.exp(t))-1/t)/2}function it(t){return((t=Math.exp(t))+1/t)/2}function rt(t){return((t=Math.exp(2*t))-1)/(t+1)}function at(t){return(t=Math.sin(t/2))*t}function ot(){}function st(t,e,n){return this instanceof st?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof st?new st(t.h,t.s,t.l):_t(""+t,wt,st):new st(t,e,n)}function lt(t,e,n){function i(t){return t>360?t-=360:0>t&&(t+=360),60>t?a+(o-a)*t/60:180>t?o:240>t?a+(o-a)*(240-t)/60:a}function r(t){return Math.round(255*i(t))}var a,o;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+e):n+e-n*e,a=2*n-o,new mt(r(t+120),r(t),r(t-120))}function ut(t,e,n){return this instanceof ut?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof ut?new ut(t.h,t.c,t.l):t instanceof ct?dt(t.l,t.a,t.b):dt((t=Mt((t=so.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ut(t,e,n)}function ht(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ct(n,Math.cos(t*=Ho)*e,Math.sin(t)*e)}function ct(t,e,n){return this instanceof ct?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof ct?new ct(t.l,t.a,t.b):t instanceof ut?ht(t.h,t.c,t.l):Mt((t=mt(t)).r,t.g,t.b):new ct(t,e,n)}function ft(t,e,n){var i=(t+16)/116,r=i+e/500,a=i-n/200;return r=pt(r)*Qo,i=pt(i)*Jo,a=pt(a)*Ko,new mt(vt(3.2404542*r-1.5371385*i-.4985314*a),vt(-.969266*r+1.8760108*i+.041556*a),vt(.0556434*r-.2040259*i+1.0572252*a))}function dt(t,e,n){return t>0?new ut(Math.atan2(n,e)*Xo,Math.sqrt(e*e+n*n),t):new ut(NaN,NaN,t)}function pt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function gt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function vt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function mt(t,e,n){return this instanceof mt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof mt?new mt(t.r,t.g,t.b):_t(""+t,mt,lt):new mt(t,e,n)}function xt(t){return new mt(t>>16,t>>8&255,255&t)}function yt(t){return xt(t)+""}function bt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function _t(t,e,n){var i,r,a,o=0,s=0,l=0;if(i=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(St(r[0]),St(r[1]),St(r[2]))}return(a=ns.get(t))?e(a.r,a.g,a.b):(null==t||"#"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o=o>>4|o,s=240&a,s=s>>4|s,l=15&a,l=l<<4|l):7===t.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a)),e(o,s,l))}function wt(t,e,n){var i,r,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,l=(o+a)/2;return s?(r=.5>l?s/(o+a):s/(2-o-a),i=t==o?(e-n)/s+(n>e?6:0):e==o?(n-t)/s+2:(t-e)/s+4,i*=60):(i=NaN,r=l>0&&1>l?0:i),new st(i,r,l)}function Mt(t,e,n){t=kt(t),e=kt(e),n=kt(n);var i=gt((.4124564*t+.3575761*e+.1804375*n)/Qo),r=gt((.2126729*t+.7151522*e+.072175*n)/Jo),a=gt((.0193339*t+.119192*e+.9503041*n)/Ko);return ct(116*r-16,500*(i-r),200*(r-a))}function kt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function St(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Tt(t){return"function"==typeof t?t:function(){return t}}function Ct(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),At(e,n,t,i)}}function At(t,e,n,i){function r(){var t,e=l.status;if(!e&&Et(l)||e>=200&&300>e||304===e){try{t=n.call(a,l)}catch(t){return void o.error.call(a,t)}o.load.call(a,t)}else o.error.call(a,l)}var a={},o=so.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(t){var e=so.event;so.event=t;try{o.progress.call(a,l)}finally{so.event=e}},a.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",a)},a.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",a):e},a.responseType=function(t){return arguments.length?(u=t,a):u},a.response=function(t){return n=t,a},["get","post"].forEach(function(t){a[t]=function(){return a.send.apply(a,[t].concat(uo(arguments)))}}),a.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),l.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),l.setRequestHeader)for(var h in s)l.setRequestHeader(h,s[h]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=u&&(l.responseType=u),null!=r&&a.on("error",r).on("load",function(t){r(null,t)}),o.beforesend.call(a,l),l.send(null==i?null:i),a},a.abort=function(){return l.abort(),a},so.rebind(a,o,"on"),null==i?a:a.get(Lt(i))}function Lt(t){return 1===t.length?function(e,n){
t(null==e?n:null)}:t}function Et(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Ft(t,e,n){var i=arguments.length;2>i&&(e=0),3>i&&(n=Date.now());var r=n+e,a={c:t,t:r,n:null};return rs?rs.n=a:is=a,rs=a,as||(os=clearTimeout(os),as=1,ss(Rt)),a}function Rt(){var t=Pt(),e=zt()-t;e>24?(isFinite(e)&&(clearTimeout(os),os=setTimeout(Rt,e)),as=0):(as=1,ss(Rt))}function Pt(){for(var t=Date.now(),e=is;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function zt(){for(var t,e=is,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:is=e.n;return rs=t,n}function Dt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function It(t,e){var n=Math.pow(10,3*xo(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Nt(t){var e=t.decimal,n=t.thousands,i=t.grouping,r=t.currency,a=i&&n?function(t,e){for(var r=t.length,a=[],o=0,s=i[0],l=0;r>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),a.push(t.substring(r-=s,r+s)),!((l+=s+1)>e));)s=i[o=(o+1)%i.length];return a.reverse().join(n)}:x;return function(t){var n=us.exec(t),i=n[1]||" ",o=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],h=+n[6],c=n[7],f=n[8],d=n[9],p=1,g="",v="",m=!1,x=!0;switch(f&&(f=+f.substring(1)),(u||"0"===i&&"="===o)&&(u=i="0",o="="),d){case"n":c=!0,d="g";break;case"%":p=100,v="%",d="f";break;case"p":p=100,v="%",d="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+d.toLowerCase());case"c":x=!1;case"d":m=!0,f=0;break;case"s":p=-1,d="r"}"$"===l&&(g=r[0],v=r[1]),"r"!=d||f||(d="g"),null!=f&&("g"==d?f=Math.max(1,Math.min(21,f)):("e"==d||"f"==d)&&(f=Math.max(0,Math.min(20,f)))),d=hs.get(d)||Ot;var y=u&&c;return function(t){var n=v;if(m&&t%1)return"";var r=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===s?"":s;if(0>p){var l=so.formatPrefix(t,f);t=l.scale(t),n=l.symbol+v}else t*=p;t=d(t,f);var b,_,w=t.lastIndexOf(".");if(0>w){var M=x?t.lastIndexOf("e"):-1;0>M?(b=t,_=""):(b=t.substring(0,M),_=t.substring(M))}else b=t.substring(0,w),_=e+t.substring(w+1);!u&&c&&(b=a(b,1/0));var k=g.length+b.length+_.length+(y?0:r.length),S=h>k?new Array(k=h-k+1).join(i):"";return y&&(b=a(S+b,S.length?h-_.length:1/0)),r+=g,t=b+_,("<"===o?r+t+S:">"===o?S+r+t:"^"===o?S.substring(0,k>>=1)+r+t+S.substring(k):r+(y?t:S+t))+n}}}function Ot(t){return t+""}function Bt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ht(t,e,n){function i(e){var n=t(e),i=a(n,1);return i-e>e-n?n:i}function r(n){return e(n=t(new fs(n-1)),1),n}function a(t,n){return e(t=new fs(+t),n),t}function o(t,i,a){var o=r(t),s=[];if(a>1)for(;i>o;)n(o)%a||s.push(new Date(+o)),e(o,1);else for(;i>o;)s.push(new Date(+o)),e(o,1);return s}function s(t,e,n){try{fs=Bt;var i=new Bt;return i._=t,o(i,e,n)}finally{fs=Date}}t.floor=t,t.round=i,t.ceil=r,t.offset=a,t.range=o;var l=t.utc=Xt(t);return l.floor=l,l.round=Xt(i),l.ceil=Xt(r),l.offset=Xt(a),l.range=s,t}function Xt(t){return function(e,n){try{fs=Bt;var i=new Bt;return i._=e,t(i,n)._}finally{fs=Date}}}function Wt(t){function e(t){function e(e){for(var n,r,a,o=[],s=-1,l=0;++s<i;)37===t.charCodeAt(s)&&(o.push(t.slice(l,s)),null!=(r=ps[n=t.charAt(++s)])&&(n=t.charAt(++s)),(a=A[n])&&(n=a(e,null==r?"e"===n?" ":"0":r)),o.push(n),l=s+1);return o.push(t.slice(l,s)),o.join("")}var i=t.length;return e.parse=function(e){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=n(i,t,e,0);if(r!=e.length)return null;"p"in i&&(i.H=i.H%12+12*i.p);var a=null!=i.Z&&fs!==Bt,o=new(a?Bt:fs);return"j"in i?o.setFullYear(i.y,0,i.j):"W"in i||"U"in i?("w"in i||(i.w="W"in i?1:0),o.setFullYear(i.y,0,1),o.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(o.getDay()+5)%7:i.w+7*i.U-(o.getDay()+6)%7)):o.setFullYear(i.y,i.m,i.d),o.setHours(i.H+(i.Z/100|0),i.M+i.Z%100,i.S,i.L),a?o._:o},e.toString=function(){return t},e}function n(t,e,n,i){for(var r,a,o,s=0,l=e.length,u=n.length;l>s;){if(i>=u)return-1;if(r=e.charCodeAt(s++),37===r){if(o=e.charAt(s++),a=L[o in ps?e.charAt(s++):o],!a||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function i(t,e,n){w.lastIndex=0;var i=w.exec(e.slice(n));return i?(t.w=M.get(i[0].toLowerCase()),n+i[0].length):-1}function r(t,e,n){b.lastIndex=0;var i=b.exec(e.slice(n));return i?(t.w=_.get(i[0].toLowerCase()),n+i[0].length):-1}function a(t,e,n){T.lastIndex=0;var i=T.exec(e.slice(n));return i?(t.m=C.get(i[0].toLowerCase()),n+i[0].length):-1}function o(t,e,n){k.lastIndex=0;var i=k.exec(e.slice(n));return i?(t.m=S.get(i[0].toLowerCase()),n+i[0].length):-1}function s(t,e,i){return n(t,A.c.toString(),e,i)}function l(t,e,i){return n(t,A.x.toString(),e,i)}function u(t,e,i){return n(t,A.X.toString(),e,i)}function h(t,e,n){var i=y.get(e.slice(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)}var c=t.dateTime,f=t.date,d=t.time,p=t.periods,g=t.days,v=t.shortDays,m=t.months,x=t.shortMonths;e.utc=function(t){function n(t){try{fs=Bt;var e=new fs;return e._=t,i(e)}finally{fs=Date}}var i=e(t);return n.parse=function(t){try{fs=Bt;var e=i.parse(t);return e&&e._}finally{fs=Date}},n.toString=i.toString,n},e.multi=e.utc.multi=le;var y=so.map(),b=jt(g),_=qt(g),w=jt(v),M=qt(v),k=jt(m),S=qt(m),T=jt(x),C=qt(x);p.forEach(function(t,e){y.set(t.toLowerCase(),e)});var A={a:function(t){return v[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return x[t.getMonth()]},B:function(t){return m[t.getMonth()]},c:e(c),d:function(t,e){return Yt(t.getDate(),e,2)},e:function(t,e){return Yt(t.getDate(),e,2)},H:function(t,e){return Yt(t.getHours(),e,2)},I:function(t,e){return Yt(t.getHours()%12||12,e,2)},j:function(t,e){return Yt(1+cs.dayOfYear(t),e,3)},L:function(t,e){return Yt(t.getMilliseconds(),e,3)},m:function(t,e){return Yt(t.getMonth()+1,e,2)},M:function(t,e){return Yt(t.getMinutes(),e,2)},p:function(t){return p[+(t.getHours()>=12)]},S:function(t,e){return Yt(t.getSeconds(),e,2)},U:function(t,e){return Yt(cs.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Yt(cs.mondayOfYear(t),e,2)},x:e(f),X:e(d),y:function(t,e){return Yt(t.getFullYear()%100,e,2)},Y:function(t,e){return Yt(t.getFullYear()%1e4,e,4)},Z:oe,"%":function(){return"%"}},L={a:i,A:r,b:a,B:o,c:s,d:te,e:te,H:ne,I:ne,j:ee,L:ae,m:Kt,M:ie,p:h,S:re,U:Gt,w:Vt,W:Ut,x:l,X:u,y:$t,Y:Zt,Z:Qt,"%":se};return e}function Yt(t,e,n){var i=0>t?"-":"",r=(i?-t:t)+"",a=r.length;return i+(n>a?new Array(n-a+1).join(e)+r:r)}function jt(t){return new RegExp("^(?:"+t.map(so.requote).join("|")+")","i")}function qt(t){for(var e=new u,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Vt(t,e,n){gs.lastIndex=0;var i=gs.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Gt(t,e,n){gs.lastIndex=0;var i=gs.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function Ut(t,e,n){gs.lastIndex=0;var i=gs.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function Zt(t,e,n){gs.lastIndex=0;var i=gs.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function $t(t,e,n){gs.lastIndex=0;var i=gs.exec(e.slice(n,n+2));return i?(t.y=Jt(+i[0]),n+i[0].length):-1}function Qt(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Jt(t){return t+(t>68?1900:2e3)}function Kt(t,e,n){gs.lastIndex=0;var i=gs.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function te(t,e,n){gs.lastIndex=0;var i=gs.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function ee(t,e,n){gs.lastIndex=0;var i=gs.exec(e.slice(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function ne(t,e,n){gs.lastIndex=0;var i=gs.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function ie(t,e,n){gs.lastIndex=0;var i=gs.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function re(t,e,n){gs.lastIndex=0;var i=gs.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function ae(t,e,n){gs.lastIndex=0;var i=gs.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function oe(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=xo(e)/60|0,r=xo(e)%60;return n+Yt(i,"0",2)+Yt(r,"0",2)}function se(t,e,n){vs.lastIndex=0;var i=vs.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function le(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,i=t[n];!i[1](e);)i=t[++n];return i[0](e)}}function ue(){}function he(t,e,n){var i=n.s=t+e,r=i-t,a=i-r;n.t=t-a+(e-r)}function ce(t,e){t&&bs.hasOwnProperty(t.type)&&bs[t.type](t,e)}function fe(t,e,n){var i,r=-1,a=t.length-n;for(e.lineStart();++r<a;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function de(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)fe(t[n],e,1);e.polygonEnd()}function pe(){function t(t,e){t*=Ho,e=e*Ho/2+Io/4;var n=t-i,o=n>=0?1:-1,s=o*n,l=Math.cos(e),u=Math.sin(e),h=a*u,c=r*l+h*Math.cos(s),f=h*o*Math.sin(s);ws.add(Math.atan2(f,c)),i=t,r=l,a=u}var e,n,i,r,a;Ms.point=function(o,s){Ms.point=t,i=(e=o)*Ho,r=Math.cos(s=(n=s)*Ho/2+Io/4),a=Math.sin(s)},Ms.lineEnd=function(){t(e,n)}}function ge(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function ve(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function me(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function xe(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ye(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function be(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function _e(t){return[Math.atan2(t[1],t[0]),et(t[2])]}function we(t,e){return xo(t[0]-e[0])<zo&&xo(t[1]-e[1])<zo}function Me(t,e){t*=Ho;var n=Math.cos(e*=Ho);ke(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function ke(t,e,n){++ks,Ts+=(t-Ts)/ks,Cs+=(e-Cs)/ks,As+=(n-As)/ks}function Se(){function t(t,r){t*=Ho;var a=Math.cos(r*=Ho),o=a*Math.cos(t),s=a*Math.sin(t),l=Math.sin(r),u=Math.atan2(Math.sqrt((u=n*l-i*s)*u+(u=i*o-e*l)*u+(u=e*s-n*o)*u),e*o+n*s+i*l);Ss+=u,Ls+=u*(e+(e=o)),Es+=u*(n+(n=s)),Fs+=u*(i+(i=l)),ke(e,n,i)}var e,n,i;Ds.point=function(r,a){r*=Ho;var o=Math.cos(a*=Ho);e=o*Math.cos(r),n=o*Math.sin(r),i=Math.sin(a),Ds.point=t,ke(e,n,i)}}function Te(){Ds.point=Me}function Ce(){function t(t,e){t*=Ho;var n=Math.cos(e*=Ho),o=n*Math.cos(t),s=n*Math.sin(t),l=Math.sin(e),u=r*l-a*s,h=a*o-i*l,c=i*s-r*o,f=Math.sqrt(u*u+h*h+c*c),d=i*o+r*s+a*l,p=f&&-tt(d)/f,g=Math.atan2(f,d);Rs+=p*u,Ps+=p*h,zs+=p*c,Ss+=g,Ls+=g*(i+(i=o)),Es+=g*(r+(r=s)),Fs+=g*(a+(a=l)),ke(i,r,a)}var e,n,i,r,a;Ds.point=function(o,s){e=o,n=s,Ds.point=t,o*=Ho;var l=Math.cos(s*=Ho);i=l*Math.cos(o),r=l*Math.sin(o),a=Math.sin(s),ke(i,r,a)},Ds.lineEnd=function(){t(e,n),Ds.lineEnd=Te,Ds.point=Me}}function Ae(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return n=e.invert(n,i),n&&t.invert(n[0],n[1])}),n}function Le(){return!0}function Ee(t,e,n,i,r){var a=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(we(n,i)){r.lineStart();for(var s=0;e>s;++s)r.point((n=t[s])[0],n[1]);return void r.lineEnd()}var l=new Re(n,t,null,!0),u=new Re(n,null,l,!1);l.o=u,a.push(l),o.push(u),l=new Re(i,t,null,!1),u=new Re(i,null,l,!0),l.o=u,a.push(l),o.push(u)}}),o.sort(e),Fe(a),Fe(o),a.length){for(var s=0,l=n,u=o.length;u>s;++s)o[s].e=l=!l;for(var h,c,f=a[0];;){for(var d=f,p=!0;d.v;)if((d=d.n)===f)return;h=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(var s=0,u=h.length;u>s;++s)r.point((c=h[s])[0],c[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(p){h=d.p.z;for(var s=h.length-1;s>=0;--s)r.point((c=h[s])[0],c[1])}else i(d.x,d.p.x,-1,r);d=d.p}d=d.o,h=d.z,p=!p}while(!d.v);r.lineEnd()}}}function Fe(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Re(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Pe(t,e,n,i){return function(r,a){function o(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&a.point(e,n)}function s(t,e){var n=r(t,e);v.point(n[0],n[1])}function l(){x.point=s,v.lineStart()}function u(){x.point=o,v.lineEnd()}function h(t,e){g.push([t,e]);var n=r(t,e);b.point(n[0],n[1])}function c(){b.lineStart(),g=[]}function f(){h(g[0][0],g[0][1]),b.lineEnd();var t,e=b.clean(),n=y.buffer(),i=n.length;if(g.pop(),p.push(g),g=null,i)if(1&e){t=n[0];var r,i=t.length-1,o=-1;if(i>0){for(_||(a.polygonStart(),_=!0),a.lineStart();++o<i;)a.point((r=t[o])[0],r[1]);a.lineEnd()}}else i>1&&2&e&&n.push(n.pop().concat(n.shift())),d.push(n.filter(ze))}var d,p,g,v=e(a),m=r.invert(i[0],i[1]),x={point:o,lineStart:l,lineEnd:u,polygonStart:function(){x.point=h,x.lineStart=c,x.lineEnd=f,d=[],p=[]},polygonEnd:function(){x.point=o,x.lineStart=l,x.lineEnd=u,d=so.merge(d);var t=He(m,p);d.length?(_||(a.polygonStart(),_=!0),Ee(d,Ie,t,n,a)):t&&(_||(a.polygonStart(),_=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),_&&(a.polygonEnd(),_=!1),d=p=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},y=De(),b=e(y),_=!1;return x}}function ze(t){return t.length>1}function De(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:_,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Ie(t,e){return((t=t.x)[0]<0?t[1]-Bo-zo:Bo-t[1])-((e=e.x)[0]<0?e[1]-Bo-zo:Bo-e[1])}function Ne(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?Io:-Io,l=xo(a-n);xo(l-Io)<zo?(t.point(n,i=(i+o)/2>0?Bo:-Bo),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(a,i),e=0):r!==s&&l>=Io&&(xo(n-r)<zo&&(n-=r*zo),xo(a-s)<zo&&(a-=s*zo),i=Oe(n,i,a,o),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=a,i=o),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}function Oe(t,e,n,i){var r,a,o=Math.sin(t-n);return xo(o)>zo?Math.atan((Math.sin(e)*(a=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*a*o)):(e+i)/2}function Be(t,e,n,i){var r;if(null==t)r=n*Bo,i.point(-Io,r),i.point(0,r),i.point(Io,r),i.point(Io,0),i.point(Io,-r),i.point(0,-r),i.point(-Io,-r),i.point(-Io,0),i.point(-Io,r);else if(xo(t[0]-e[0])>zo){var a=t[0]<e[0]?Io:-Io;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(e[0],e[1])}function He(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],a=0,o=0;ws.reset();for(var s=0,l=e.length;l>s;++s){var u=e[s],h=u.length;if(h)for(var c=u[0],f=c[0],d=c[1]/2+Io/4,p=Math.sin(d),g=Math.cos(d),v=1;;){v===h&&(v=0),t=u[v];var m=t[0],x=t[1]/2+Io/4,y=Math.sin(x),b=Math.cos(x),_=m-f,w=_>=0?1:-1,M=w*_,k=M>Io,S=p*y;if(ws.add(Math.atan2(S*w*Math.sin(M),g*b+S*Math.cos(M))),a+=k?_+w*No:_,k^f>=n^m>=n){var T=me(ge(c),ge(t));be(T);var C=me(r,T);be(C);var A=(k^_>=0?-1:1)*et(C[2]);(i>A||i===A&&(T[0]||T[1]))&&(o+=k^_>=0?1:-1)}if(!v++)break;f=m,p=y,g=b,c=t}}return(-zo>a||zo>a&&0>ws)^1&o}function Xe(t){function e(t,e){return Math.cos(t)*Math.cos(e)>a}function n(t){var n,a,l,u,h;return{lineStart:function(){u=l=!1,h=1},point:function(c,f){var d,p=[c,f],g=e(c,f),v=o?g?0:r(c,f):g?r(c+(0>c?Io:-Io),f):0;if(!n&&(u=l=g)&&t.lineStart(),g!==l&&(d=i(n,p),(we(n,d)||we(p,d))&&(p[0]+=zo,p[1]+=zo,g=e(p[0],p[1]))),g!==l)h=0,g?(t.lineStart(),d=i(p,n),t.point(d[0],d[1])):(d=i(n,p),t.point(d[0],d[1]),t.lineEnd()),n=d;else if(s&&n&&o^g){var m;v&a||!(m=i(p,n,!0))||(h=0,o?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||n&&we(n,p)||t.point(p[0],p[1]),n=p,l=g,a=v},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return h|(u&&l)<<1}}}function i(t,e,n){var i=ge(t),r=ge(e),o=[1,0,0],s=me(i,r),l=ve(s,s),u=s[0],h=l-u*u;if(!h)return!n&&t;var c=a*l/h,f=-a*u/h,d=me(o,s),p=ye(o,c),g=ye(s,f);xe(p,g);var v=d,m=ve(p,v),x=ve(v,v),y=m*m-x*(ve(p,p)-1);if(!(0>y)){var b=Math.sqrt(y),_=ye(v,(-m-b)/x);if(xe(_,p),_=_e(_),!n)return _;var w,M=t[0],k=e[0],S=t[1],T=e[1];M>k&&(w=M,M=k,k=w);var C=k-M,A=xo(C-Io)<zo,L=A||zo>C;if(!A&&S>T&&(w=S,S=T,T=w),L?A?S+T>0^_[1]<(xo(_[0]-M)<zo?S:T):S<=_[1]&&_[1]<=T:C>Io^(M<=_[0]&&_[0]<=k)){var E=ye(v,(-m+b)/x);return xe(E,p),[_,_e(E)]}}}function r(e,n){var i=o?t:Io-t,r=0;return-i>e?r|=1:e>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var a=Math.cos(t),o=a>0,s=xo(a)>zo,l=gn(t,6*Ho);return Pe(e,n,l,o?[0,-t]:[-Io,t-Io])}function We(t,e,n,i){return function(r){var a,o=r.a,s=r.b,l=o.x,u=o.y,h=s.x,c=s.y,f=0,d=1,p=h-l,g=c-u;if(a=t-l,p||!(a>0)){if(a/=p,0>p){if(f>a)return;d>a&&(d=a)}else if(p>0){if(a>d)return;a>f&&(f=a)}if(a=n-l,p||!(0>a)){if(a/=p,0>p){if(a>d)return;a>f&&(f=a)}else if(p>0){if(f>a)return;d>a&&(d=a)}if(a=e-u,g||!(a>0)){if(a/=g,0>g){if(f>a)return;d>a&&(d=a)}else if(g>0){if(a>d)return;a>f&&(f=a)}if(a=i-u,g||!(0>a)){if(a/=g,0>g){if(a>d)return;a>f&&(f=a)}else if(g>0){if(f>a)return;d>a&&(d=a)}return f>0&&(r.a={x:l+f*p,y:u+f*g}),1>d&&(r.b={x:l+d*p,y:u+d*g}),r}}}}}}function Ye(t,e,n,i){function r(i,r){return xo(i[0]-t)<zo?r>0?0:3:xo(i[0]-n)<zo?r>0?2:1:xo(i[1]-e)<zo?r>0?1:0:r>0?3:2}function a(t,e){return o(t.x,e.x)}function o(t,e){var n=r(t,1),i=r(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function l(t){for(var e=0,n=v.length,i=t[1],r=0;n>r;++r)for(var a,o=1,s=v[r],l=s.length,u=s[0];l>o;++o)a=s[o],u[1]<=i?a[1]>i&&K(u,a,t)>0&&++e:a[1]<=i&&K(u,a,t)<0&&--e,u=a;return 0!==e}function u(a,s,l,u){var h=0,c=0;if(null==a||(h=r(a,l))!==(c=r(s,l))||o(a,s)<0^l>0){do u.point(0===h||3===h?t:n,h>1?i:e);while((h=(h+l+4)%4)!==c)}else u.point(s[0],s[1])}function h(r,a){return r>=t&&n>=r&&a>=e&&i>=a}function c(t,e){h(t,e)&&s.point(t,e)}function f(){L.point=p,v&&v.push(m=[]),k=!0,M=!1,_=w=NaN}function d(){g&&(p(x,y),b&&M&&C.rejoin(),g.push(C.buffer())),L.point=c,M&&s.lineEnd()}function p(t,e){t=Math.max(-Ns,Math.min(Ns,t)),e=Math.max(-Ns,Math.min(Ns,e));var n=h(t,e);if(v&&m.push([t,e]),k)x=t,y=e,b=n,k=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&M)s.point(t,e);else{var i={a:{x:_,y:w},b:{x:t,y:e}};A(i)?(M||(s.lineStart(),s.point(i.a.x,i.a.y)),s.point(i.b.x,i.b.y),n||s.lineEnd(),S=!1):n&&(s.lineStart(),s.point(t,e),S=!1)}_=t,w=e,M=n}var g,v,m,x,y,b,_,w,M,k,S,T=s,C=De(),A=We(t,e,n,i),L={point:c,lineStart:f,lineEnd:d,polygonStart:function(){s=C,g=[],v=[],S=!0},polygonEnd:function(){s=T,g=so.merge(g);var e=l([t,i]),n=S&&e,r=g.length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),r&&Ee(g,a,e,u,s),s.polygonEnd()),g=v=m=null}};return L}}function je(t){var e=0,n=Io/3,i=sn(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Io/180,n=t[1]*Io/180):[e/Io*180,n/Io*180]},r}function qe(t,e){function n(t,e){var n=Math.sqrt(a-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),o-n*Math.cos(t)]}var i=Math.sin(t),r=(i+Math.sin(e))/2,a=1+i*(2*r-i),o=Math.sqrt(a)/r;return n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,et((a-(t*t+n*n)*r*r)/(2*r))]},n}function Ve(){function t(t,e){Bs+=r*t-i*e,i=t,r=e}var e,n,i,r;js.point=function(a,o){js.point=t,e=i=a,n=r=o},js.lineEnd=function(){t(e,n)}}function Ge(t,e){Hs>t&&(Hs=t),t>Ws&&(Ws=t),Xs>e&&(Xs=e),e>Ys&&(Ys=e)}function Ue(){function t(t,e){o.push("M",t,",",e,a)}function e(t,e){o.push("M",t,",",e),s.point=n}function n(t,e){o.push("L",t,",",e)}function i(){s.point=t}function r(){o.push("Z")}var a=Ze(4.5),o=[],s={point:t,lineStart:function(){s.point=e},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(t){return a=Ze(t),s},result:function(){if(o.length){var t=o.join("");return o=[],t}}};return s}function Ze(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function $e(t,e){Ts+=t,Cs+=e,++As}function Qe(){function t(t,i){var r=t-e,a=i-n,o=Math.sqrt(r*r+a*a);Ls+=o*(e+t)/2,Es+=o*(n+i)/2,Fs+=o,$e(e=t,n=i)}var e,n;Vs.point=function(i,r){Vs.point=t,$e(e=i,n=r)}}function Je(){Vs.point=$e}function Ke(){function t(t,e){var n=t-i,a=e-r,o=Math.sqrt(n*n+a*a);Ls+=o*(i+t)/2,Es+=o*(r+e)/2,Fs+=o,o=r*t-i*e,Rs+=o*(i+t),Ps+=o*(r+e),zs+=3*o,$e(i=t,r=e)}var e,n,i,r;Vs.point=function(a,o){Vs.point=t,$e(e=i=a,n=r=o)},Vs.lineEnd=function(){t(e,n)}}function tn(t){function e(e,n){t.moveTo(e+o,n),t.arc(e,n,o,0,No)}function n(e,n){t.moveTo(e,n),s.point=i}function i(e,n){t.lineTo(e,n)}function r(){s.point=e}function a(){t.closePath()}var o=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:r,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(t){return o=t,s},result:_};return s}function en(t){function e(t){return(s?i:n)(t)}function n(e){return an(e,function(n,i){n=t(n,i),e.point(n[0],n[1])})}function i(e){function n(n,i){n=t(n,i),e.point(n[0],n[1])}function i(){y=NaN,k.point=a,e.lineStart()}function a(n,i){var a=ge([n,i]),o=t(n,i);r(y,b,x,_,w,M,y=o[0],b=o[1],x=n,_=a[0],w=a[1],M=a[2],s,e),e.point(y,b)}function o(){k.point=n,e.lineEnd()}function l(){i(),k.point=u,k.lineEnd=h}function u(t,e){a(c=t,f=e),d=y,p=b,g=_,v=w,m=M,k.point=a}function h(){r(y,b,x,_,w,M,d,p,c,g,v,m,s,e),k.lineEnd=o,o()}var c,f,d,p,g,v,m,x,y,b,_,w,M,k={point:n,lineStart:i,lineEnd:o,polygonStart:function(){e.polygonStart(),k.lineStart=l},polygonEnd:function(){e.polygonEnd(),k.lineStart=i}};return k}function r(e,n,i,s,l,u,h,c,f,d,p,g,v,m){var x=h-e,y=c-n,b=x*x+y*y;if(b>4*a&&v--){var _=s+d,w=l+p,M=u+g,k=Math.sqrt(_*_+w*w+M*M),S=Math.asin(M/=k),T=xo(xo(M)-1)<zo||xo(i-f)<zo?(i+f)/2:Math.atan2(w,_),C=t(T,S),A=C[0],L=C[1],E=A-e,F=L-n,R=y*E-x*F;(R*R/b>a||xo((x*E+y*F)/b-.5)>.3||o>s*d+l*p+u*g)&&(r(e,n,i,s,l,u,A,L,T,_/=k,w/=k,M,v,m),m.point(A,L),r(A,L,T,_,w,M,h,c,f,d,p,g,v,m))}}var a=.5,o=Math.cos(30*Ho),s=16;return e.precision=function(t){return arguments.length?(s=(a=t*t)>0&&16,e):Math.sqrt(a)},e}function nn(t){var e=en(function(e,n){return t([e*Xo,n*Xo])});return function(t){return ln(e(t))}}function rn(t){this.stream=t}function an(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function on(t){return sn(function(){return t})()}function sn(t){function e(t){return t=s(t[0]*Ho,t[1]*Ho),[t[0]*f+l,u-t[1]*f]}function n(t){return t=s.invert((t[0]-l)/f,(u-t[1])/f),t&&[t[0]*Xo,t[1]*Xo]}function i(){s=Ae(o=cn(m,y,b),a);var t=a(g,v);return l=d-t[0]*f,u=p+t[1]*f,r()}function r(){return h&&(h.valid=!1,h=null),e}var a,o,s,l,u,h,c=en(function(t,e){return t=a(t,e),[t[0]*f+l,u-t[1]*f]}),f=150,d=480,p=250,g=0,v=0,m=0,y=0,b=0,_=Is,w=x,M=null,k=null;return e.stream=function(t){return h&&(h.valid=!1),h=ln(_(o,c(w(t)))),h.valid=!0,h},e.clipAngle=function(t){return arguments.length?(_=null==t?(M=t,Is):Xe((M=+t)*Ho),r()):M},e.clipExtent=function(t){return arguments.length?(k=t,w=t?Ye(t[0][0],t[0][1],t[1][0],t[1][1]):x,r()):k},e.scale=function(t){return arguments.length?(f=+t,i()):f},e.translate=function(t){return arguments.length?(d=+t[0],p=+t[1],i()):[d,p]},e.center=function(t){return arguments.length?(g=t[0]%360*Ho,v=t[1]%360*Ho,i()):[g*Xo,v*Xo]},e.rotate=function(t){return arguments.length?(m=t[0]%360*Ho,y=t[1]%360*Ho,b=t.length>2?t[2]%360*Ho:0,i()):[m*Xo,y*Xo,b*Xo]},so.rebind(e,c,"precision"),function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,i()}}function ln(t){return an(t,function(e,n){t.point(e*Ho,n*Ho)})}function un(t,e){return[t,e]}function hn(t,e){return[t>Io?t-No:-Io>t?t+No:t,e]}function cn(t,e,n){return t?e||n?Ae(dn(t),pn(e,n)):dn(t):e||n?pn(e,n):hn}function fn(t){return function(e,n){return e+=t,[e>Io?e-No:-Io>e?e+No:e,n]}}function dn(t){var e=fn(t);return e.invert=fn(-t),e}function pn(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),h=u*i+s*r;return[Math.atan2(l*a-h*o,s*i-u*r),et(h*a+l*o)]}var i=Math.cos(t),r=Math.sin(t),a=Math.cos(e),o=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),h=u*a-l*o;return[Math.atan2(l*a+u*o,s*i+h*r),et(h*i-s*r)]},n}function gn(t,e){var n=Math.cos(t),i=Math.sin(t);return function(r,a,o,s){var l=o*e;null!=r?(r=vn(n,r),a=vn(n,a),(o>0?a>r:r>a)&&(r+=o*No)):(r=t+o*No,a=t-.5*l);for(var u,h=r;o>0?h>a:a>h;h-=l)s.point((u=_e([n,-i*Math.cos(h),-i*Math.sin(h)]))[0],u[1])}}function vn(t,e){var n=ge(e);n[0]-=t,be(n);var i=tt(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-zo)%(2*Math.PI)}function mn(t,e,n){var i=so.range(t,e-zo,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function xn(t,e,n){var i=so.range(t,e-zo,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function yn(t){return t.source}function bn(t){return t.target}function _n(t,e,n,i){var r=Math.cos(e),a=Math.sin(e),o=Math.cos(i),s=Math.sin(i),l=r*Math.cos(t),u=r*Math.sin(t),h=o*Math.cos(n),c=o*Math.sin(n),f=2*Math.asin(Math.sqrt(at(i-e)+r*o*at(n-t))),d=1/Math.sin(f),p=f?function(t){var e=Math.sin(t*=f)*d,n=Math.sin(f-t)*d,i=n*l+e*h,r=n*u+e*c,o=n*a+e*s;return[Math.atan2(r,i)*Xo,Math.atan2(o,Math.sqrt(i*i+r*r))*Xo]}:function(){return[t*Xo,e*Xo]};return p.distance=f,p}function wn(){function t(t,r){var a=Math.sin(r*=Ho),o=Math.cos(r),s=xo((t*=Ho)-e),l=Math.cos(s);Gs+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=i*a-n*o*l)*s),n*a+i*o*l),e=t,n=a,i=o}var e,n,i;Us.point=function(r,a){e=r*Ho,n=Math.sin(a*=Ho),i=Math.cos(a),Us.point=t},Us.lineEnd=function(){Us.point=Us.lineEnd=_}}function Mn(t,e){function n(e,n){var i=Math.cos(e),r=Math.cos(n),a=t(i*r);return[a*r*Math.sin(e),a*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),r=e(i),a=Math.sin(r),o=Math.cos(r);return[Math.atan2(t*a,i*o),Math.asin(i&&n*a/i)]},n}function kn(t,e){function n(t,e){o>0?-Bo+zo>e&&(e=-Bo+zo):e>Bo-zo&&(e=Bo-zo);var n=o/Math.pow(r(e),a);return[n*Math.sin(a*t),o-n*Math.cos(a*t)]}var i=Math.cos(t),r=function(t){return Math.tan(Io/4+t/2)},a=t===e?Math.sin(t):Math.log(i/Math.cos(e))/Math.log(r(e)/r(t)),o=i*Math.pow(r(t),a)/a;return a?(n.invert=function(t,e){var n=o-e,i=J(a)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/a,2*Math.atan(Math.pow(o/i,1/a))-Bo]},n):Tn}function Sn(t,e){function n(t,e){var n=a-e;return[n*Math.sin(r*t),a-n*Math.cos(r*t)]}var i=Math.cos(t),r=t===e?Math.sin(t):(i-Math.cos(e))/(e-t),a=i/r+t;return xo(r)<zo?un:(n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/r,a-J(r)*Math.sqrt(t*t+n*n)]},n)}function Tn(t,e){return[t,Math.log(Math.tan(Io/4+e/2))]}function Cn(t){var e,n=on(t),i=n.scale,r=n.translate,a=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var o=a.apply(n,arguments);if(o===n){if(e=null==t){var s=Io*i(),l=r();a([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(o=null);return o},n.clipExtent(null)}function An(t,e){return[Math.log(Math.tan(Io/4+e/2)),-t]}function Ln(t){return t[0]}function En(t){return t[1]}function Fn(t){for(var e=t.length,n=[0,1],i=2,r=2;e>r;r++){for(;i>1&&K(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function Rn(t,e){return t[0]-e[0]||t[1]-e[1]}function Pn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function zn(t,e,n,i){var r=t[0],a=n[0],o=e[0]-r,s=i[0]-a,l=t[1],u=n[1],h=e[1]-l,c=i[1]-u,f=(s*(l-u)-c*(r-a))/(c*o-s*h);return[r+f*o,l+f*h]}function Dn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function In(){ii(this),this.edge=this.site=this.circle=null}function Nn(t){var e=ol.pop()||new In;return e.site=t,e}function On(t){Un(t),il.remove(t),ol.push(t),ii(t)}function Bn(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},a=t.P,o=t.N,s=[t];On(t);for(var l=a;l.circle&&xo(n-l.circle.x)<zo&&xo(i-l.circle.cy)<zo;)a=l.P,s.unshift(l),On(l),l=a;s.unshift(l),Un(l);for(var u=o;u.circle&&xo(n-u.circle.x)<zo&&xo(i-u.circle.cy)<zo;)o=u.N,s.push(u),On(u),u=o;s.push(u),Un(u);var h,c=s.length;for(h=1;c>h;++h)u=s[h],l=s[h-1],ti(u.edge,l.site,u.site,r);l=s[0],u=s[c-1],u.edge=Jn(l.site,u.site,null,r),Gn(l),Gn(u)}function Hn(t){for(var e,n,i,r,a=t.x,o=t.y,s=il._;s;)if(i=Xn(s,o)-a,i>zo)s=s.L;else{if(r=a-Wn(s,o),!(r>zo)){i>-zo?(e=s.P,n=s):r>-zo?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=Nn(t);if(il.insert(e,l),e||n){if(e===n)return Un(e),n=Nn(e.site),il.insert(l,n),l.edge=n.edge=Jn(e.site,l.site),Gn(e),void Gn(n);if(!n)return void(l.edge=Jn(e.site,l.site));Un(e),Un(n);var u=e.site,h=u.x,c=u.y,f=t.x-h,d=t.y-c,p=n.site,g=p.x-h,v=p.y-c,m=2*(f*v-d*g),x=f*f+d*d,y=g*g+v*v,b={x:(v*x-d*y)/m+h,y:(f*y-g*x)/m+c};ti(n.edge,u,p,b),l.edge=Jn(u,t,null,b),n.edge=Jn(t,p,null,b),Gn(e),Gn(n)}}function Xn(t,e){var n=t.site,i=n.x,r=n.y,a=r-e;if(!a)return i;var o=t.P;if(!o)return-(1/0);n=o.site;var s=n.x,l=n.y,u=l-e;if(!u)return s;var h=s-i,c=1/a-1/u,f=h/u;return c?(-f+Math.sqrt(f*f-2*c*(h*h/(-2*u)-l+u/2+r-a/2)))/c+i:(i+s)/2}function Wn(t,e){var n=t.N;if(n)return Xn(n,e);var i=t.site;return i.y===e?i.x:1/0}function Yn(t){this.site=t,this.edges=[]}function jn(t){for(var e,n,i,r,a,o,s,l,u,h,c=t[0][0],f=t[1][0],d=t[0][1],p=t[1][1],g=nl,v=g.length;v--;)if(a=g[v],a&&a.prepare())for(s=a.edges,l=s.length,o=0;l>o;)h=s[o].end(),i=h.x,r=h.y,u=s[++o%l].start(),e=u.x,n=u.y,(xo(i-e)>zo||xo(r-n)>zo)&&(s.splice(o,0,new ei(Kn(a.site,h,xo(i-c)<zo&&p-r>zo?{x:c,y:xo(e-c)<zo?n:p}:xo(r-p)<zo&&f-i>zo?{x:xo(n-p)<zo?e:f,y:p}:xo(i-f)<zo&&r-d>zo?{x:f,y:xo(e-f)<zo?n:d}:xo(r-d)<zo&&i-c>zo?{x:xo(n-d)<zo?e:c,y:d}:null),a.site,null)),++l)}function qn(t,e){return e.angle-t.angle}function Vn(){ii(this),this.x=this.y=this.arc=this.site=this.cy=null}function Gn(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,a=n.site;if(i!==a){var o=r.x,s=r.y,l=i.x-o,u=i.y-s,h=a.x-o,c=a.y-s,f=2*(l*c-u*h);if(!(f>=-Do)){var d=l*l+u*u,p=h*h+c*c,g=(c*d-u*p)/f,v=(l*p-h*d)/f,c=v+s,m=sl.pop()||new Vn;m.arc=t,m.site=r,m.x=g+o,m.y=c+Math.sqrt(g*g+v*v),m.cy=c,t.circle=m;for(var x=null,y=al._;y;)if(m.y<y.y||m.y===y.y&&m.x<=y.x){if(!y.L){x=y.P;break}y=y.L}else{if(!y.R){x=y;break}y=y.R}al.insert(x,m),x||(rl=m)}}}}function Un(t){var e=t.circle;e&&(e.P||(rl=e.N),al.remove(e),sl.push(e),ii(e),t.circle=null)}function Zn(t){for(var e,n=el,i=We(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)e=n[r],(!$n(e,t)||!i(e)||xo(e.a.x-e.b.x)<zo&&xo(e.a.y-e.b.y)<zo)&&(e.a=e.b=null,n.splice(r,1))}function $n(t,e){var n=t.b;if(n)return!0;var i,r,a=t.a,o=e[0][0],s=e[1][0],l=e[0][1],u=e[1][1],h=t.l,c=t.r,f=h.x,d=h.y,p=c.x,g=c.y,v=(f+p)/2,m=(d+g)/2;if(g===d){if(o>v||v>=s)return;if(f>p){if(a){if(a.y>=u)return}else a={x:v,y:l};n={x:v,y:u}}else{if(a){if(a.y<l)return}else a={x:v,y:u};n={x:v,y:l}}}else if(i=(f-p)/(g-d),r=m-i*v,-1>i||i>1)if(f>p){if(a){if(a.y>=u)return}else a={x:(l-r)/i,y:l};n={x:(u-r)/i,y:u}}else{if(a){if(a.y<l)return}else a={x:(u-r)/i,y:u};n={x:(l-r)/i,y:l}}else if(g>d){if(a){if(a.x>=s)return}else a={x:o,y:i*o+r};n={x:s,y:i*s+r}}else{if(a){if(a.x<o)return}else a={x:s,y:i*s+r};n={x:o,y:i*o+r}}return t.a=a,t.b=n,!0}function Qn(t,e){this.l=t,this.r=e,this.a=this.b=null}function Jn(t,e,n,i){var r=new Qn(t,e);return el.push(r),n&&ti(r,t,e,n),i&&ti(r,e,t,i),nl[t.i].edges.push(new ei(r,t,e)),nl[e.i].edges.push(new ei(r,e,t)),r}function Kn(t,e,n){var i=new Qn(t,null);return i.a=e,i.b=n,el.push(i),i}function ti(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function ei(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function ni(){this._=null}function ii(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ri(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function ai(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function oi(t){for(;t.L;)t=t.L;return t}function si(t,e){var n,i,r,a=t.sort(li).pop();for(el=[],nl=new Array(t.length),il=new ni,al=new ni;;)if(r=rl,a&&(!r||a.y<r.y||a.y===r.y&&a.x<r.x))(a.x!==n||a.y!==i)&&(nl[a.i]=new Yn(a),Hn(a),n=a.x,i=a.y),a=t.pop();else{if(!r)break;Bn(r.arc)}e&&(Zn(e),jn(e));var o={cells:nl,edges:el};return il=al=el=nl=null,o}function li(t,e){return e.y-t.y||e.x-t.x}function ui(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function hi(t){return t.x}function ci(t){return t.y}function fi(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function di(t,e,n,i,r,a){if(!t(e,n,i,r,a)){var o=.5*(n+r),s=.5*(i+a),l=e.nodes;l[0]&&di(t,l[0],n,i,o,s),l[1]&&di(t,l[1],o,i,r,s),l[2]&&di(t,l[2],n,s,o,a),l[3]&&di(t,l[3],o,s,r,a)}}function pi(t,e,n,i,r,a,o){var s,l=1/0;return function t(u,h,c,f,d){if(!(h>a||c>o||i>f||r>d)){if(p=u.point){var p,g=e-u.x,v=n-u.y,m=g*g+v*v;if(l>m){var x=Math.sqrt(l=m);i=e-x,r=n-x,a=e+x,o=n+x,s=p}}for(var y=u.nodes,b=.5*(h+f),_=.5*(c+d),w=e>=b,M=n>=_,k=M<<1|w,S=k+4;S>k;++k)if(u=y[3&k])switch(3&k){case 0:t(u,h,c,b,_);break;case 1:t(u,b,c,f,_);break;case 2:t(u,h,_,b,d);break;case 3:t(u,b,_,f,d)}}}(t,i,r,a,o),s}function gi(t,e){t=so.rgb(t),e=so.rgb(e);var n=t.r,i=t.g,r=t.b,a=e.r-n,o=e.g-i,s=e.b-r;return function(t){return"#"+bt(Math.round(n+a*t))+bt(Math.round(i+o*t))+bt(Math.round(r+s*t))}}function vi(t,e){var n,i={},r={};for(n in t)n in e?i[n]=yi(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function mi(t,e){
return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function xi(t,e){var n,i,r,a=ul.lastIndex=hl.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(n=ul.exec(t))&&(i=hl.exec(e));)(r=i.index)>a&&(r=e.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:mi(n,i)})),a=hl.lastIndex;return a<e.length&&(r=e.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,i=0;e>i;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})}function yi(t,e){for(var n,i=so.interpolators.length;--i>=0&&!(n=so.interpolators[i](t,e)););return n}function bi(t,e){var n,i=[],r=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)i.push(yi(t[n],e[n]));for(;a>n;++n)r[n]=t[n];for(;o>n;++n)r[n]=e[n];return function(t){for(n=0;s>n;++n)r[n]=i[n](t);return r}}function _i(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function wi(t){return function(e){return 1-t(1-e)}}function Mi(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function ki(t){return t*t}function Si(t){return t*t*t}function Ti(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function Ci(t){return function(e){return Math.pow(e,t)}}function Ai(t){return 1-Math.cos(t*Bo)}function Li(t){return Math.pow(2,10*(t-1))}function Ei(t){return 1-Math.sqrt(1-t*t)}function Fi(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/No*Math.asin(1/t):(t=1,n=e/4),function(i){return 1+t*Math.pow(2,-10*i)*Math.sin((i-n)*No/e)}}function Ri(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Pi(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function zi(t,e){t=so.hcl(t),e=so.hcl(e);var n=t.h,i=t.c,r=t.l,a=e.h-n,o=e.c-i,s=e.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?e.c:i),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:-180>a&&(a+=360),function(t){return ht(n+a*t,i+o*t,r+s*t)+""}}function Di(t,e){t=so.hsl(t),e=so.hsl(e);var n=t.h,i=t.s,r=t.l,a=e.h-n,o=e.s-i,s=e.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?e.s:i),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:-180>a&&(a+=360),function(t){return lt(n+a*t,i+o*t,r+s*t)+""}}function Ii(t,e){t=so.lab(t),e=so.lab(e);var n=t.l,i=t.a,r=t.b,a=e.l-n,o=e.a-i,s=e.b-r;return function(t){return ft(n+a*t,i+o*t,r+s*t)+""}}function Ni(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Oi(t){var e=[t.a,t.b],n=[t.c,t.d],i=Hi(e),r=Bi(e,n),a=Hi(Xi(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Xo,this.translate=[t.e,t.f],this.scale=[i,a],this.skew=a?Math.atan2(r,a)*Xo:0}function Bi(t,e){return t[0]*e[0]+t[1]*e[1]}function Hi(t){var e=Math.sqrt(Bi(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Xi(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Wi(t){return t.length?t.pop()+",":""}function Yi(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var r=n.push("translate(",null,",",null,")");i.push({i:r-4,x:mi(t[0],e[0])},{i:r-2,x:mi(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}function ji(t,e,n,i){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),i.push({i:n.push(Wi(n)+"rotate(",null,")")-2,x:mi(t,e)})):e&&n.push(Wi(n)+"rotate("+e+")")}function qi(t,e,n,i){t!==e?i.push({i:n.push(Wi(n)+"skewX(",null,")")-2,x:mi(t,e)}):e&&n.push(Wi(n)+"skewX("+e+")")}function Vi(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var r=n.push(Wi(n)+"scale(",null,",",null,")");i.push({i:r-4,x:mi(t[0],e[0])},{i:r-2,x:mi(t[1],e[1])})}else(1!==e[0]||1!==e[1])&&n.push(Wi(n)+"scale("+e+")")}function Gi(t,e){var n=[],i=[];return t=so.transform(t),e=so.transform(e),Yi(t.translate,e.translate,n,i),ji(t.rotate,e.rotate,n,i),qi(t.skew,e.skew,n,i),Vi(t.scale,e.scale,n,i),t=e=null,function(t){for(var e,r=-1,a=i.length;++r<a;)n[(e=i[r]).i]=e.x(t);return n.join("")}}function Ui(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function Zi(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function $i(t){for(var e=t.source,n=t.target,i=Ji(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var a=r.length;n!==i;)r.splice(a,0,n),n=n.parent;return r}function Qi(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Ji(t,e){if(t===e)return t;for(var n=Qi(t),i=Qi(e),r=n.pop(),a=i.pop(),o=null;r===a;)o=r,r=n.pop(),a=i.pop();return o}function Ki(t){t.fixed|=2}function tr(t){t.fixed&=-7}function er(t){t.fixed|=4,t.px=t.x,t.py=t.y}function nr(t){t.fixed&=-5}function ir(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var a,o=t.nodes,s=o.length,l=-1;++l<s;)a=o[l],null!=a&&(ir(a,e,n),t.charge+=a.charge,i+=a.charge*a.cx,r+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,i+=u*t.point.x,r+=u*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function rr(t,e){return so.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=hr,t}function ar(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(r=t.children)&&(i=r.length))for(var i,r;--i>=0;)n.push(r[i])}function or(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(a=t.children)&&(r=a.length))for(var r,a,o=-1;++o<r;)n.push(a[o]);for(;null!=(t=i.pop());)e(t)}function sr(t){return t.children}function lr(t){return t.value}function ur(t,e){return e.value-t.value}function hr(t){return so.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function cr(t){return t.x}function fr(t){return t.y}function dr(t,e,n){t.y0=e,t.y=n}function pr(t){return so.range(t.length)}function gr(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function vr(t){for(var e,n=1,i=0,r=t[0][1],a=t.length;a>n;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function mr(t){return t.reduce(xr,0)}function xr(t,e){return t+e[1]}function yr(t,e){return br(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function br(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,a=[];++n<=e;)a[n]=r*n+i;return a}function _r(t){return[so.min(t),so.max(t)]}function wr(t,e){return t.value-e.value}function Mr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function kr(t,e){t._pack_next=e,e._pack_prev=t}function Sr(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return.999*r*r>n*n+i*i}function Tr(t){function e(t){h=Math.min(t.x-t.r,h),c=Math.max(t.x+t.r,c),f=Math.min(t.y-t.r,f),d=Math.max(t.y+t.r,d)}if((n=t.children)&&(u=n.length)){var n,i,r,a,o,s,l,u,h=1/0,c=-(1/0),f=1/0,d=-(1/0);if(n.forEach(Cr),i=n[0],i.x=-i.r,i.y=0,e(i),u>1&&(r=n[1],r.x=r.r,r.y=0,e(r),u>2))for(a=n[2],Er(i,r,a),e(a),Mr(i,a),i._pack_prev=a,Mr(a,r),r=i._pack_next,o=3;u>o;o++){Er(i,r,a=n[o]);var p=0,g=1,v=1;for(s=r._pack_next;s!==r;s=s._pack_next,g++)if(Sr(s,a)){p=1;break}if(1==p)for(l=i._pack_prev;l!==s._pack_prev&&!Sr(l,a);l=l._pack_prev,v++);p?(v>g||g==v&&r.r<i.r?kr(i,r=s):kr(i=l,r),o--):(Mr(i,a),r=a,e(a))}var m=(h+c)/2,x=(f+d)/2,y=0;for(o=0;u>o;o++)a=n[o],a.x-=m,a.y-=x,y=Math.max(y,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=y,n.forEach(Ar)}}function Cr(t){t._pack_next=t._pack_prev=t}function Ar(t){delete t._pack_next,delete t._pack_prev}function Lr(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var a=-1,o=r.length;++a<o;)Lr(r[a],e,n,i)}function Er(t,e,n){var i=t.r+n.r,r=e.x-t.x,a=e.y-t.y;if(i&&(r||a)){var o=e.r+n.r,s=r*r+a*a;o*=o,i*=i;var l=.5+(i-o)/(2*s),u=Math.sqrt(Math.max(0,2*o*(i+s)-(i-=s)*i-o*o))/(2*s);n.x=t.x+l*r+u*a,n.y=t.y+l*a-u*r}else n.x=t.x+i,n.y=t.y}function Fr(t,e){return t.parent==e.parent?1:2}function Rr(t){var e=t.children;return e.length?e[0]:t.t}function Pr(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function zr(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Dr(t){for(var e,n=0,i=0,r=t.children,a=r.length;--a>=0;)e=r[a],e.z+=n,e.m+=n,n+=e.s+(i+=e.c)}function Ir(t,e,n){return t.a.parent===e.parent?t.a:n}function Nr(t){return 1+so.max(t,function(t){return t.y})}function Or(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Br(t){var e=t.children;return e&&e.length?Br(e[0]):t}function Hr(t){var e,n=t.children;return n&&(e=n.length)?Hr(n[e-1]):t}function Xr(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Wr(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return 0>r&&(n+=r/2,r=0),0>a&&(i+=a/2,a=0),{x:n,y:i,dx:r,dy:a}}function Yr(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function jr(t){return t.rangeExtent?t.rangeExtent():Yr(t.range())}function qr(t,e,n,i){var r=n(t[0],t[1]),a=i(e[0],e[1]);return function(t){return a(r(t))}}function Vr(t,e){var n,i=0,r=t.length-1,a=t[i],o=t[r];return a>o&&(n=i,i=r,r=n,n=a,a=o,o=n),t[i]=e.floor(a),t[r]=e.ceil(o),t}function Gr(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:_l}function Ur(t,e,n,i){var r=[],a=[],o=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<=s;)r.push(n(t[o-1],t[o])),a.push(i(e[o-1],e[o]));return function(e){var n=so.bisect(t,e,1,s)-1;return a[n](r[n](e))}}function Zr(t,e,n,i){function r(){var r=Math.min(t.length,e.length)>2?Ur:qr,l=i?Zi:Ui;return o=r(t,e,l,n),s=r(e,t,l,yi),a}function a(t){return o(t)}var o,s;return a.invert=function(t){return s(t)},a.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},a.range=function(t){return arguments.length?(e=t,r()):e},a.rangeRound=function(t){return a.range(t).interpolate(Ni)},a.clamp=function(t){return arguments.length?(i=t,r()):i},a.interpolate=function(t){return arguments.length?(n=t,r()):n},a.ticks=function(e){return Kr(t,e)},a.tickFormat=function(e,n){return ta(t,e,n)},a.nice=function(e){return Qr(t,e),r()},a.copy=function(){return Zr(t,e,n,i)},r()}function $r(t,e){return so.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Qr(t,e){return Vr(t,Gr(Jr(t,e)[2])),Vr(t,Gr(Jr(t,e)[2])),t}function Jr(t,e){null==e&&(e=10);var n=Yr(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),a=e/i*r;return.15>=a?r*=10:.35>=a?r*=5:.75>=a&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function Kr(t,e){return so.range.apply(so,Jr(t,e))}function ta(t,e,n){var i=Jr(t,e);if(n){var r=us.exec(n);if(r.shift(),"s"===r[8]){var a=so.formatPrefix(Math.max(xo(i[0]),xo(i[1])));return r[7]||(r[7]="."+ea(a.scale(i[2]))),r[8]="f",n=so.format(r.join("")),function(t){return n(a.scale(t))+a.symbol}}r[7]||(r[7]="."+na(r[8],i)),n=r.join("")}else n=",."+ea(i[2])+"f";return so.format(n)}function ea(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function na(t,e){var n=ea(e[2]);return t in wl?Math.abs(n-ea(Math.max(xo(e[0]),xo(e[1]))))+ +("e"!==t):n-2*("%"===t)}function ia(t,e,n,i){function r(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function a(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function o(e){return t(r(e))}return o.invert=function(e){return a(t.invert(e))},o.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((i=e.map(Number)).map(r)),o):i},o.base=function(n){return arguments.length?(e=+n,t.domain(i.map(r)),o):e},o.nice=function(){var e=Vr(i.map(r),n?Math:kl);return t.domain(e),i=e.map(a),o},o.ticks=function(){var t=Yr(i),o=[],s=t[0],l=t[1],u=Math.floor(r(s)),h=Math.ceil(r(l)),c=e%1?2:e;if(isFinite(h-u)){if(n){for(;h>u;u++)for(var f=1;c>f;f++)o.push(a(u)*f);o.push(a(u))}else for(o.push(a(u));u++<h;)for(var f=c-1;f>0;f--)o.push(a(u)*f);for(u=0;o[u]<s;u++);for(h=o.length;o[h-1]>l;h--);o=o.slice(u,h)}return o},o.tickFormat=function(t,n){if(!arguments.length)return Ml;arguments.length<2?n=Ml:"function"!=typeof n&&(n=so.format(n));var i=Math.max(1,e*t/o.ticks().length);return function(t){var o=t/a(Math.round(r(t)));return e-.5>o*e&&(o*=e),i>=o?n(t):""}},o.copy=function(){return ia(t.copy(),e,n,i)},$r(o,t)}function ra(t,e,n){function i(e){return t(r(e))}var r=aa(e),a=aa(1/e);return i.invert=function(e){return a(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),i):n},i.ticks=function(t){return Kr(n,t)},i.tickFormat=function(t,e){return ta(n,t,e)},i.nice=function(t){return i.domain(Qr(n,t))},i.exponent=function(o){return arguments.length?(r=aa(e=o),a=aa(1/e),t.domain(n.map(r)),i):e},i.copy=function(){return ra(t.copy(),e,n)},$r(i,t)}function aa(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function oa(t,e){function n(n){return a[((r.get(n)||("range"===e.t?r.set(n,t.push(n)):NaN))-1)%a.length]}function i(e,n){return so.range(t.length).map(function(t){return e+n*t})}var r,a,o;return n.domain=function(i){if(!arguments.length)return t;t=[],r=new u;for(var a,o=-1,s=i.length;++o<s;)r.has(a=i[o])||r.set(a,t.push(a));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(a=t,o=0,e={t:"range",a:arguments},n):a},n.rangePoints=function(r,s){arguments.length<2&&(s=0);var l=r[0],u=r[1],h=t.length<2?(l=(l+u)/2,0):(u-l)/(t.length-1+s);return a=i(l+h*s/2,h),o=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(r,s){arguments.length<2&&(s=0);var l=r[0],u=r[1],h=t.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(t.length-1+s)|0;return a=i(l+Math.round(h*s/2+(u-l-(t.length-1+s)*h)/2),h),o=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=r[1]<r[0],h=r[u-0],c=r[1-u],f=(c-h)/(t.length-s+2*l);return a=i(h+f*l,f),u&&a.reverse(),o=f*(1-s),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=r[1]<r[0],h=r[u-0],c=r[1-u],f=Math.floor((c-h)/(t.length-s+2*l));return a=i(h+Math.round((c-h-(t.length-s)*f)/2),f),u&&a.reverse(),o=Math.round(f*(1-s)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Yr(e.a[0])},n.copy=function(){return oa(t,e)},n.domain(t)}function sa(t,e){function a(){var n=0,i=e.length;for(s=[];++n<i;)s[n-1]=so.quantile(t,n/i);return o}function o(t){return isNaN(t=+t)?void 0:e[so.bisect(s,t)]}var s;return o.domain=function(e){return arguments.length?(t=e.map(i).filter(r).sort(n),a()):t},o.range=function(t){return arguments.length?(e=t,a()):e},o.quantiles=function(){return s},o.invertExtent=function(n){return n=e.indexOf(n),0>n?[NaN,NaN]:[n>0?s[n-1]:t[0],n<s.length?s[n]:t[t.length-1]]},o.copy=function(){return sa(t,e)},a()}function la(t,e,n){function i(e){return n[Math.max(0,Math.min(o,Math.floor(a*(e-t))))]}function r(){return a=n.length/(e-t),o=n.length-1,i}var a,o;return i.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],r()):[t,e]},i.range=function(t){return arguments.length?(n=t,r()):n},i.invertExtent=function(e){return e=n.indexOf(e),e=0>e?NaN:e/a+t,[e,e+1/a]},i.copy=function(){return la(t,e,n)},r()}function ua(t,e){function n(n){return n>=n?e[so.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return ua(t,e)},n}function ha(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Kr(t,e)},e.tickFormat=function(e,n){return ta(t,e,n)},e.copy=function(){return ha(t)},e}function ca(){return 0}function fa(t){return t.innerRadius}function da(t){return t.outerRadius}function pa(t){return t.startAngle}function ga(t){return t.endAngle}function va(t){return t&&t.padAngle}function ma(t,e,n,i){return(t-n)*e-(e-i)*t>0?0:1}function xa(t,e,n,i,r){var a=t[0]-e[0],o=t[1]-e[1],s=(r?i:-i)/Math.sqrt(a*a+o*o),l=s*o,u=-s*a,h=t[0]+l,c=t[1]+u,f=e[0]+l,d=e[1]+u,p=(h+f)/2,g=(c+d)/2,v=f-h,m=d-c,x=v*v+m*m,y=n-i,b=h*d-f*c,_=(0>m?-1:1)*Math.sqrt(Math.max(0,y*y*x-b*b)),w=(b*m-v*_)/x,M=(-b*v-m*_)/x,k=(b*m+v*_)/x,S=(-b*v+m*_)/x,T=w-p,C=M-g,A=k-p,L=S-g;return T*T+C*C>A*A+L*L&&(w=k,M=S),[[w-l,M-u],[w*n/y,M*n/y]]}function ya(t){function e(e){function o(){u.push("M",a(t(h),s))}for(var l,u=[],h=[],c=-1,f=e.length,d=Tt(n),p=Tt(i);++c<f;)r.call(this,l=e[c],c)?h.push([+d.call(this,l,c),+p.call(this,l,c)]):h.length&&(o(),h=[]);return h.length&&o(),u.length?u.join(""):null}var n=Ln,i=En,r=Le,a=ba,o=a.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(o="function"==typeof t?a=t:(a=El.get(t)||ba).key,e):o},e.tension=function(t){return arguments.length?(s=t,e):s},e}function ba(t){return t.length>1?t.join("L"):t+"Z"}function _a(t){return t.join("L")+"Z"}function wa(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);return n>1&&r.push("H",i[0]),r.join("")}function Ma(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function ka(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function Sa(t,e){return t.length<4?ba(t):t[1]+Aa(t.slice(1,-1),La(t,e))}function Ta(t,e){return t.length<3?_a(t):t[0]+Aa((t.push(t[0]),t),La([t[t.length-2]].concat(t,[t[1]]),e))}function Ca(t,e){return t.length<3?ba(t):t[0]+Aa(t,La(t,e))}function Aa(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return ba(t);var n=t.length!=e.length,i="",r=t[0],a=t[1],o=e[0],s=o,l=1;if(n&&(i+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],r=t[1],l=2),e.length>1){s=e[1],a=t[l],l++,i+="C"+(r[0]+o[0])+","+(r[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var u=2;u<e.length;u++,l++)a=t[l],s=e[u],i+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var h=t[l];i+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+h[0]+","+h[1]}return i}function La(t,e){for(var n,i=[],r=(1-e)/2,a=t[0],o=t[1],s=1,l=t.length;++s<l;)n=a,a=o,o=t[s],i.push([r*(o[0]-n[0]),r*(o[1]-n[1])]);return i}function Ea(t){if(t.length<3)return ba(t);var e=1,n=t.length,i=t[0],r=i[0],a=i[1],o=[r,r,r,(i=t[1])[0]],s=[a,a,a,i[1]],l=[r,",",a,"L",za(Pl,o),",",za(Pl,s)];for(t.push(t[n-1]);++e<=n;)i=t[e],o.shift(),o.push(i[0]),s.shift(),s.push(i[1]),Da(l,o,s);return t.pop(),l.push("L",i),l.join("")}function Fa(t){if(t.length<4)return ba(t);for(var e,n=[],i=-1,r=t.length,a=[0],o=[0];++i<3;)e=t[i],a.push(e[0]),o.push(e[1]);for(n.push(za(Pl,a)+","+za(Pl,o)),--i;++i<r;)e=t[i],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Da(n,a,o);return n.join("")}function Ra(t){for(var e,n,i=-1,r=t.length,a=r+4,o=[],s=[];++i<4;)n=t[i%r],o.push(n[0]),s.push(n[1]);for(e=[za(Pl,o),",",za(Pl,s)],--i;++i<a;)n=t[i%r],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Da(e,o,s);return e.join("")}function Pa(t,e){var n=t.length-1;if(n)for(var i,r,a=t[0][0],o=t[0][1],s=t[n][0]-a,l=t[n][1]-o,u=-1;++u<=n;)i=t[u],r=u/n,i[0]=e*i[0]+(1-e)*(a+r*s),i[1]=e*i[1]+(1-e)*(o+r*l);return Ea(t)}function za(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Da(t,e,n){t.push("C",za(Fl,e),",",za(Fl,n),",",za(Rl,e),",",za(Rl,n),",",za(Pl,e),",",za(Pl,n))}function Ia(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Na(t){for(var e=0,n=t.length-1,i=[],r=t[0],a=t[1],o=i[0]=Ia(r,a);++e<n;)i[e]=(o+(o=Ia(r=a,a=t[e+1])))/2;return i[e]=o,i}function Oa(t){for(var e,n,i,r,a=[],o=Na(t),s=-1,l=t.length-1;++s<l;)e=Ia(t[s],t[s+1]),xo(e)<zo?o[s]=o[s+1]=0:(n=o[s]/e,i=o[s+1]/e,r=n*n+i*i,r>9&&(r=3*e/Math.sqrt(r),o[s]=r*n,o[s+1]=r*i));for(s=-1;++s<=l;)r=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([r||0,o[s]*r||0]);return a}function Ba(t){return t.length<3?ba(t):t[0]+Aa(t,Oa(t))}function Ha(t){for(var e,n,i,r=-1,a=t.length;++r<a;)e=t[r],n=e[0],i=e[1]-Bo,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function Xa(t){function e(e){function l(){g.push("M",s(t(m),c),h,u(t(v.reverse()),c),"Z")}for(var f,d,p,g=[],v=[],m=[],x=-1,y=e.length,b=Tt(n),_=Tt(r),w=n===i?function(){return d}:Tt(i),M=r===a?function(){return p}:Tt(a);++x<y;)o.call(this,f=e[x],x)?(v.push([d=+b.call(this,f,x),p=+_.call(this,f,x)]),m.push([+w.call(this,f,x),+M.call(this,f,x)])):v.length&&(l(),v=[],m=[]);return v.length&&l(),g.length?g.join(""):null}var n=Ln,i=Ln,r=0,a=En,o=Le,s=ba,l=s.key,u=s,h="L",c=.7;return e.x=function(t){return arguments.length?(n=i=t,e):i},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(r=a=t,e):a},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(a=t,e):a},e.defined=function(t){return arguments.length?(o=t,e):o},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?s=t:(s=El.get(t)||ba).key,u=s.reverse||s,h=s.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(c=t,e):c},e}function Wa(t){return t.radius}function Ya(t){return[t.x,t.y]}function ja(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]-Bo;return[n*Math.cos(i),n*Math.sin(i)]}}function qa(){return 64}function Va(){return"circle"}function Ga(t){var e=Math.sqrt(t/Io);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Ua(t){return function(){var e,n,i;(e=this[t])&&(i=e[n=e.active])&&(i.timer.c=null,i.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,i.event&&i.event.interrupt.call(this,this.__data__,i.index))}}function Za(t,e,n){return Mo(t,Hl),t.namespace=e,t.id=n,t}function $a(t,e,n,i){var r=t.id,a=t.namespace;return Y(t,"function"==typeof n?function(t,o,s){t[a][r].tween.set(e,i(n.call(t,t.__data__,o,s)))}:(n=i(n),function(t){t[a][r].tween.set(e,n)}))}function Qa(t){return null==t&&(t=""),function(){this.textContent=t}}function Ja(t){return null==t?"__transition__":"__transition_"+t+"__"}function Ka(t,e,n,i,r){function a(t){var e=g.delay;return h.t=e+l,t>=e?o(t-e):void(h.c=o)}function o(n){var r=p.active,a=p[r];a&&(a.timer.c=null,a.timer.t=NaN,--p.count,delete p[r],a.event&&a.event.interrupt.call(t,t.__data__,a.index));for(var o in p)if(i>+o){var u=p[o];u.timer.c=null,u.timer.t=NaN,--p.count,delete p[o]}h.c=s,Ft(function(){return h.c&&s(n||1)&&(h.c=null,h.t=NaN),1},0,l),p.active=i,g.event&&g.event.start.call(t,t.__data__,e),d=[],g.tween.forEach(function(n,i){(i=i.call(t,t.__data__,e))&&d.push(i)}),f=g.ease,c=g.duration}function s(r){for(var a=r/c,o=f(a),s=d.length;s>0;)d[--s].call(t,o);return a>=1?(g.event&&g.event.end.call(t,t.__data__,e),--p.count?delete p[i]:delete t[n],1):void 0}var l,h,c,f,d,p=t[n]||(t[n]={active:0,count:0}),g=p[i];g||(l=r.time,h=Ft(a,0,l),g=p[i]={tween:new u,time:l,timer:h,delay:r.delay,duration:r.duration,ease:r.ease,index:e},r=null,++p.count)}function to(t,e,n){t.attr("transform",function(t){var i=e(t);return"translate("+(isFinite(i)?i:n(t))+",0)"})}function eo(t,e,n){t.attr("transform",function(t){var i=e(t);return"translate(0,"+(isFinite(i)?i:n(t))+")"})}function no(t){return t.toISOString()}function io(t,e,n){function i(e){return t(e)}function r(t,n){var i=t[1]-t[0],r=i/n,a=so.bisect(Zl,r);return a==Zl.length?[e.year,Jr(t.map(function(t){return t/31536e6}),n)[2]]:a?e[r/Zl[a-1]<Zl[a]/r?a-1:a]:[Jl,Jr(t,n)[2]]}return i.invert=function(e){return ro(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(ro)},i.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,ro(+n+1),e).length}var a=i.domain(),o=Yr(a),s=null==t?r(o,10):"number"==typeof t&&r(o,t);return s&&(t=s[0],e=s[1]),i.domain(Vr(a,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=ro(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=ro(+e+1);return e}}:t))},i.ticks=function(t,e){var n=Yr(i.domain()),a=null==t?r(n,10):"number"==typeof t?r(n,t):!t.range&&[{range:t},e];return a&&(t=a[0],e=a[1]),t.range(n[0],ro(+n[1]+1),1>e?1:e)},i.tickFormat=function(){return n},i.copy=function(){return io(t.copy(),e,n)},$r(i,t)}function ro(t){return new Date(t)}function ao(t){return JSON.parse(t.responseText)}function oo(t){var e=ho.createRange();return e.selectNode(ho.body),e.createContextualFragment(t.responseText)}var so={version:"3.5.12"},lo=[].slice,uo=function(t){return lo.call(t)},ho=this.document;if(ho)try{uo(ho.documentElement.childNodes)[0].nodeType}catch(t){uo=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),ho)try{ho.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var co=this.Element.prototype,fo=co.setAttribute,po=co.setAttributeNS,go=this.CSSStyleDeclaration.prototype,vo=go.setProperty;co.setAttribute=function(t,e){fo.call(this,t,e+"")},co.setAttributeNS=function(t,e,n){po.call(this,t,e,n+"")},go.setProperty=function(t,e,n){vo.call(this,t,e+"",n)}}so.ascending=n,so.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},so.min=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<a;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},so.max=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<a;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},so.extent=function(t,e){var n,i,r,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(i=t[a])&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=t[a])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++a<o;)if(null!=(i=e.call(t,t[a],a))&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=e.call(t,t[a],a))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},so.sum=function(t,e){var n,i=0,a=t.length,o=-1;if(1===arguments.length)for(;++o<a;)r(n=+t[o])&&(i+=n);else for(;++o<a;)r(n=+e.call(t,t[o],o))&&(i+=n);return i},so.mean=function(t,e){var n,a=0,o=t.length,s=-1,l=o;if(1===arguments.length)for(;++s<o;)r(n=i(t[s]))?a+=n:--l;else for(;++s<o;)r(n=i(e.call(t,t[s],s)))?a+=n:--l;return l?a/l:void 0},so.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],a=n-i;return a?r+a*(t[i]-r):r},so.median=function(t,e){var a,o=[],s=t.length,l=-1;if(1===arguments.length)for(;++l<s;)r(a=i(t[l]))&&o.push(a);else for(;++l<s;)r(a=i(e.call(t,t[l],l)))&&o.push(a);return o.length?so.quantile(o.sort(n),.5):void 0},so.variance=function(t,e){var n,a,o=t.length,s=0,l=0,u=-1,h=0;if(1===arguments.length)for(;++u<o;)r(n=i(t[u]))&&(a=n-s,s+=a/++h,l+=a*(n-s));else for(;++u<o;)r(n=i(e.call(t,t[u],u)))&&(a=n-s,s+=a/++h,l+=a*(n-s));return h>1?l/(h-1):void 0},so.deviation=function(){var t=so.variance.apply(this,arguments);return t?Math.sqrt(t):t};var mo=a(n);so.bisectLeft=mo.left,so.bisect=so.bisectRight=mo.right,so.bisector=function(t){return a(1===t.length?function(e,i){return n(t(e),i)}:t)},so.shuffle=function(t,e,n){(a=arguments.length)<3&&(n=t.length,2>a&&(e=0));for(var i,r,a=n-e;a;)r=Math.random()*a--|0,i=t[a+e],t[a+e]=t[r+e],t[r+e]=i;return t},so.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},so.pairs=function(t){for(var e,n=0,i=t.length-1,r=t[0],a=new Array(0>i?0:i);i>n;)a[n]=[e=r,r=t[++n]];return a},so.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,e=so.min(arguments,o),n=new Array(e);++t<e;)for(var i,r=-1,a=n[t]=new Array(i);++r<i;)a[r]=arguments[r][t];return n},so.transpose=function(t){return so.zip.apply(so,t)},so.keys=function(t){var e=[];for(var n in t)e.push(n);return e},so.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},so.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},so.merge=function(t){for(var e,n,i,r=t.length,a=-1,o=0;++a<r;)o+=t[a].length;for(n=new Array(o);--r>=0;)for(i=t[r],e=i.length;--e>=0;)n[--o]=i[e];return n};var xo=Math.abs;so.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var i,r=[],a=s(xo(n)),o=-1;if(t*=a,e*=a,n*=a,0>n)for(;(i=t+n*++o)>e;)r.push(i/a);else for(;(i=t+n*++o)<e;)r.push(i/a);return r},so.map=function(t,e){var n=new u;if(t instanceof u)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,r=-1,a=t.length;if(1===arguments.length)for(;++r<a;)n.set(r,t[r]);else for(;++r<a;)n.set(e.call(t,i=t[r],r),i)}else for(var o in t)n.set(o,t[o]);return n};var yo="__proto__",bo="\0";l(u,{has:f,get:function(t){return this._[h(t)]},set:function(t,e){return this._[h(t)]=e},remove:d,keys:p,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:c(e),value:this._[e]});return t},size:g,empty:v,forEach:function(t){for(var e in this._)t.call(this,c(e),this._[e])}}),so.nest=function(){function t(e,o,s){if(s>=a.length)return i?i.call(r,o):n?o.sort(n):o;for(var l,h,c,f,d=-1,p=o.length,g=a[s++],v=new u;++d<p;)(f=v.get(l=g(h=o[d])))?f.push(h):v.set(l,[h]);return e?(h=e(),c=function(n,i){h.set(n,t(e,i,s))}):(h={},c=function(n,i){h[n]=t(e,i,s)}),v.forEach(c),h}function e(t,n){if(n>=a.length)return t;var i=[],r=o[n++];return t.forEach(function(t,r){i.push({key:t,values:e(r,n)})}),r?i.sort(function(t,e){return r(t.key,e.key)}):i}var n,i,r={},a=[],o=[];return r.map=function(e,n){return t(n,e,0)},r.entries=function(n){return e(t(so.map,n,0),0)},r.key=function(t){return a.push(t),r},r.sortKeys=function(t){return o[a.length-1]=t,r},r.sortValues=function(t){return n=t,r},r.rollup=function(t){return i=t,r},r},so.set=function(t){var e=new m;if(t)for(var n=0,i=t.length;i>n;++n)e.add(t[n]);return e},l(m,{has:f,add:function(t){return this._[h(t+="")]=!0,t},remove:d,values:p,size:g,empty:v,forEach:function(t){for(var e in this._)t.call(this,c(e))}}),so.behavior={},so.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=y(t,e,e[n]);return t};var _o=["webkit","ms","moz","Moz","o","O"];so.dispatch=function(){for(var t=new w,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=M(t);return t},w.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},so.event=null,so.requote=function(t){return t.replace(wo,"\\$&")};var wo=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Mo={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},ko=function(t,e){return e.querySelector(t)},So=function(t,e){return e.querySelectorAll(t)},To=function(t,e){var n=t.matches||t[b(t,"matchesSelector")];return(To=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(ko=function(t,e){return Sizzle(t,e)[0]||null},So=Sizzle,To=Sizzle.matchesSelector),so.selection=function(){return so.select(ho.documentElement)};var Co=so.selection.prototype=[];Co.select=function(t){var e,n,i,r,a=[];t=A(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(i=this[o]).parentNode;for(var l=-1,u=i.length;++l<u;)(r=i[l])?(e.push(n=t.call(r,r.__data__,l,o)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return C(a)},Co.selectAll=function(t){var e,n,i=[];t=L(t);for(var r=-1,a=this.length;++r<a;)for(var o=this[r],s=-1,l=o.length;++s<l;)(n=o[s])&&(i.push(e=uo(t.call(n,n.__data__,s,r))),e.parentNode=n);return C(i)};var Ao={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};so.ns={prefix:Ao,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Ao.hasOwnProperty(n)?{space:Ao[n],local:t}:t}},Co.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=so.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(E(e,t[e]));return this}return this.each(E(t,e))},Co.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=P(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!R(t[r]).test(e))return!1;return!0}for(e in t)this.each(z(e,t[e]));return this}return this.each(z(t,e))},Co.style=function(t,n,i){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(n="");for(i in t)this.each(I(i,t[i],n));return this}if(2>r){var a=this.node();return e(a).getComputedStyle(a,null).getPropertyValue(t)}i=""}return this.each(I(t,n,i))},Co.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(N(e,t[e]));return this}return this.each(N(t,e))},Co.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Co.html=function(t){return arguments.length?this.each("function"==typeof t?function(){
var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Co.append=function(t){return t=O(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Co.insert=function(t,e){return t=O(t),e=A(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Co.remove=function(){return this.each(B)},Co.data=function(t,e){function n(t,n){var i,r,a,o=t.length,c=n.length,f=Math.min(o,c),d=new Array(c),p=new Array(c),g=new Array(o);if(e){var v,m=new u,x=new Array(o);for(i=-1;++i<o;)(r=t[i])&&(m.has(v=e.call(r,r.__data__,i))?g[i]=r:m.set(v,r),x[i]=v);for(i=-1;++i<c;)(r=m.get(v=e.call(n,a=n[i],i)))?r!==!0&&(d[i]=r,r.__data__=a):p[i]=H(a),m.set(v,!0);for(i=-1;++i<o;)i in x&&m.get(x[i])!==!0&&(g[i]=t[i])}else{for(i=-1;++i<f;)r=t[i],a=n[i],r?(r.__data__=a,d[i]=r):p[i]=H(a);for(;c>i;++i)p[i]=H(n[i]);for(;o>i;++i)g[i]=t[i]}p.update=d,p.parentNode=d.parentNode=g.parentNode=t.parentNode,s.push(p),l.push(d),h.push(g)}var i,r,a=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(i=this[0]).length);++a<o;)(r=i[a])&&(t[a]=r.__data__);return t}var s=j([]),l=C([]),h=C([]);if("function"==typeof t)for(;++a<o;)n(i=this[a],t.call(i,i.parentNode.__data__,a));else for(;++a<o;)n(i=this[a],t);return l.enter=function(){return s},l.exit=function(){return h},l},Co.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Co.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=X(t));for(var a=0,o=this.length;o>a;a++){r.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;l>s;s++)(i=n[s])&&t.call(i,i.__data__,s,a)&&e.push(i)}return C(r)},Co.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,a=i[r];--r>=0;)(n=i[r])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Co.sort=function(t){t=W.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Co.each=function(t){return Y(this,function(e,n,i){t.call(e,e.__data__,n,i)})},Co.call=function(t){var e=uo(arguments);return t.apply(e[0]=this,e),this},Co.empty=function(){return!this.node()},Co.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],i=0,r=n.length;r>i;i++){var a=n[i];if(a)return a}return null},Co.size=function(){var t=0;return Y(this,function(){++t}),t};var Lo=[];so.selection.enter=j,so.selection.enter.prototype=Lo,Lo.append=Co.append,Lo.empty=Co.empty,Lo.node=Co.node,Lo.call=Co.call,Lo.size=Co.size,Lo.select=function(t){for(var e,n,i,r,a,o=[],s=-1,l=this.length;++s<l;){i=(r=this[s]).update,o.push(e=[]),e.parentNode=r.parentNode;for(var u=-1,h=r.length;++u<h;)(a=r[u])?(e.push(i[u]=n=t.call(r.parentNode,a.__data__,u,s)),n.__data__=a.__data__):e.push(null)}return C(o)},Lo.insert=function(t,e){return arguments.length<2&&(e=q(this)),Co.insert.call(this,t,e)},so.select=function(e){var n;return"string"==typeof e?(n=[ko(e,ho)],n.parentNode=ho.documentElement):(n=[e],n.parentNode=t(e)),C([n])},so.selectAll=function(t){var e;return"string"==typeof t?(e=uo(So(t,ho)),e.parentNode=ho.documentElement):(e=uo(t),e.parentNode=null),C([e])},Co.on=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e=!1);for(n in t)this.each(V(n,t[n],e));return this}if(2>i)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(V(t,e,n))};var Eo=so.map({mouseenter:"mouseover",mouseleave:"mouseout"});ho&&Eo.forEach(function(t){"on"+t in ho&&Eo.remove(t)});var Fo,Ro=0;so.mouse=function(t){return $(t,S())};var Po=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;so.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=S().changedTouches),e)for(var i,r=0,a=e.length;a>r;++r)if((i=e[r]).identifier===n)return $(t,i)},so.behavior.drag=function(){function t(){this.on("mousedown.drag",a).on("touchstart.drag",o)}function n(t,e,n,a,o){return function(){function s(){var t,n,i=e(f,g);i&&(t=i[0]-y[0],n=i[1]-y[1],p|=t|n,y=i,d({type:"drag",x:i[0]+u[0],y:i[1]+u[1],dx:t,dy:n}))}function l(){e(f,g)&&(m.on(a+v,null).on(o+v,null),x(p),d({type:"dragend"}))}var u,h=this,c=so.event.target,f=h.parentNode,d=i.of(h,arguments),p=0,g=t(),v=".drag"+(null==g?"":"-"+g),m=so.select(n(c)).on(a+v,s).on(o+v,l),x=Z(c),y=e(f,g);r?(u=r.apply(h,arguments),u=[u.x-y[0],u.y-y[1]]):u=[0,0],d({type:"dragstart"})}}var i=T(t,"drag","dragstart","dragend"),r=null,a=n(_,so.mouse,e,"mousemove","mouseup"),o=n(Q,so.touch,x,"touchmove","touchend");return t.origin=function(e){return arguments.length?(r=e,t):r},so.rebind(t,i,"on")},so.touches=function(t,e){return arguments.length<2&&(e=S().touches),e?uo(e).map(function(e){var n=$(t,e);return n.identifier=e.identifier,n}):[]};var zo=1e-6,Do=zo*zo,Io=Math.PI,No=2*Io,Oo=No-zo,Bo=Io/2,Ho=Io/180,Xo=180/Io,Wo=Math.SQRT2,Yo=2,jo=4;so.interpolateZoom=function(t,e){var n,i,r=t[0],a=t[1],o=t[2],s=e[0],l=e[1],u=e[2],h=s-r,c=l-a,f=h*h+c*c;if(Do>f)i=Math.log(u/o)/Wo,n=function(t){return[r+t*h,a+t*c,o*Math.exp(Wo*t*i)]};else{var d=Math.sqrt(f),p=(u*u-o*o+jo*f)/(2*o*Yo*d),g=(u*u-o*o-jo*f)/(2*u*Yo*d),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);i=(m-v)/Wo,n=function(t){var e=t*i,n=it(v),s=o/(Yo*d)*(n*rt(Wo*e+v)-nt(v));return[r+s*h,a+s*c,o*n/it(Wo*e+v)]}}return n.duration=1e3*i,n},so.behavior.zoom=function(){function t(t){t.on(F,c).on(Vo+".zoom",d).on("dblclick.zoom",p).on(z,f)}function n(t){return[(t[0]-S.x)/S.k,(t[1]-S.y)/S.k]}function i(t){return[t[0]*S.k+S.x,t[1]*S.k+S.y]}function r(t){S.k=Math.max(A[0],Math.min(A[1],t))}function a(t,e){e=i(e),S.x+=t[0]-e[0],S.y+=t[1]-e[1]}function o(e,n,i,o){e.__chart__={x:S.x,y:S.y,k:S.k},r(Math.pow(2,o)),a(v=n,i),e=so.select(e),L>0&&(e=e.transition().duration(L)),e.call(t.event)}function s(){_&&_.domain(b.range().map(function(t){return(t-S.x)/S.k}).map(b.invert)),M&&M.domain(w.range().map(function(t){return(t-S.y)/S.k}).map(w.invert))}function l(t){E++||t({type:"zoomstart"})}function u(t){s(),t({type:"zoom",scale:S.k,translate:[S.x,S.y]})}function h(t){--E||(t({type:"zoomend"}),v=null)}function c(){function t(){s=1,a(so.mouse(r),f),u(o)}function i(){c.on(R,null).on(P,null),d(s),h(o)}var r=this,o=D.of(r,arguments),s=0,c=so.select(e(r)).on(R,t).on(P,i),f=n(so.mouse(r)),d=Z(r);Bl.call(r),l(o)}function f(){function t(){var t=so.touches(p);return d=S.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=n(t))}),t}function e(){var e=so.event.target;so.select(e).on(b,i).on(_,s),w.push(e);for(var n=so.event.changedTouches,r=0,a=n.length;a>r;++r)v[n[r].identifier]=null;var l=t(),u=Date.now();if(1===l.length){if(500>u-y){var h=l[0];o(p,h,v[h.identifier],Math.floor(Math.log(S.k)/Math.LN2)+1),k()}y=u}else if(l.length>1){var h=l[0],c=l[1],f=h[0]-c[0],d=h[1]-c[1];m=f*f+d*d}}function i(){var t,e,n,i,o=so.touches(p);Bl.call(p);for(var s=0,l=o.length;l>s;++s,i=null)if(n=o[s],i=v[n.identifier]){if(e)break;t=n,e=i}if(i){var h=(h=n[0]-t[0])*h+(h=n[1]-t[1])*h,c=m&&Math.sqrt(h/m);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+i[0])/2,(e[1]+i[1])/2],r(c*d)}y=null,a(t,e),u(g)}function s(){if(so.event.touches.length){for(var e=so.event.changedTouches,n=0,i=e.length;i>n;++n)delete v[e[n].identifier];for(var r in v)return void t()}so.selectAll(w).on(x,null),M.on(F,c).on(z,f),T(),h(g)}var d,p=this,g=D.of(p,arguments),v={},m=0,x=".zoom-"+so.event.changedTouches[0].identifier,b="touchmove"+x,_="touchend"+x,w=[],M=so.select(p),T=Z(p);e(),l(g),M.on(F,null).on(z,e)}function d(){var t=D.of(this,arguments);x?clearTimeout(x):(Bl.call(this),g=n(v=m||so.mouse(this)),l(t)),x=setTimeout(function(){x=null,h(t)},50),k(),r(Math.pow(2,.002*qo())*S.k),a(v,g),u(t)}function p(){var t=so.mouse(this),e=Math.log(S.k)/Math.LN2;o(this,t,n(t),so.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var g,v,m,x,y,b,_,w,M,S={x:0,y:0,k:1},C=[960,500],A=Go,L=250,E=0,F="mousedown.zoom",R="mousemove.zoom",P="mouseup.zoom",z="touchstart.zoom",D=T(t,"zoomstart","zoom","zoomend");return Vo||(Vo="onwheel"in ho?(qo=function(){return-so.event.deltaY*(so.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ho?(qo=function(){return so.event.wheelDelta},"mousewheel"):(qo=function(){return-so.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=D.of(this,arguments),e=S;Nl?so.select(this).transition().each("start.zoom",function(){S=this.__chart__||{x:0,y:0,k:1},l(t)}).tween("zoom:zoom",function(){var n=C[0],i=C[1],r=v?v[0]:n/2,a=v?v[1]:i/2,o=so.interpolateZoom([(r-S.x)/S.k,(a-S.y)/S.k,n/S.k],[(r-e.x)/e.k,(a-e.y)/e.k,n/e.k]);return function(e){var i=o(e),s=n/i[2];this.__chart__=S={x:r-i[0]*s,y:a-i[1]*s,k:s},u(t)}}).each("interrupt.zoom",function(){h(t)}).each("end.zoom",function(){h(t)}):(this.__chart__=S,l(t),u(t),h(t))})},t.translate=function(e){return arguments.length?(S={x:+e[0],y:+e[1],k:S.k},s(),t):[S.x,S.y]},t.scale=function(e){return arguments.length?(S={x:S.x,y:S.y,k:null},r(+e),s(),t):S.k},t.scaleExtent=function(e){return arguments.length?(A=null==e?Go:[+e[0],+e[1]],t):A},t.center=function(e){return arguments.length?(m=e&&[+e[0],+e[1]],t):m},t.size=function(e){return arguments.length?(C=e&&[+e[0],+e[1]],t):C},t.duration=function(e){return arguments.length?(L=+e,t):L},t.x=function(e){return arguments.length?(_=e,b=e.copy(),S={x:0,y:0,k:1},t):_},t.y=function(e){return arguments.length?(M=e,w=e.copy(),S={x:0,y:0,k:1},t):M},so.rebind(t,D,"on")};var qo,Vo,Go=[0,1/0];so.color=ot,ot.prototype.toString=function(){return this.rgb()+""},so.hsl=st;var Uo=st.prototype=new ot;Uo.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new st(this.h,this.s,this.l/t)},Uo.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new st(this.h,this.s,t*this.l)},Uo.rgb=function(){return lt(this.h,this.s,this.l)},so.hcl=ut;var Zo=ut.prototype=new ot;Zo.brighter=function(t){return new ut(this.h,this.c,Math.min(100,this.l+$o*(arguments.length?t:1)))},Zo.darker=function(t){return new ut(this.h,this.c,Math.max(0,this.l-$o*(arguments.length?t:1)))},Zo.rgb=function(){return ht(this.h,this.c,this.l).rgb()},so.lab=ct;var $o=18,Qo=.95047,Jo=1,Ko=1.08883,ts=ct.prototype=new ot;ts.brighter=function(t){return new ct(Math.min(100,this.l+$o*(arguments.length?t:1)),this.a,this.b)},ts.darker=function(t){return new ct(Math.max(0,this.l-$o*(arguments.length?t:1)),this.a,this.b)},ts.rgb=function(){return ft(this.l,this.a,this.b)},so.rgb=mt;var es=mt.prototype=new ot;es.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,r=30;return e||n||i?(e&&r>e&&(e=r),n&&r>n&&(n=r),i&&r>i&&(i=r),new mt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new mt(r,r,r)},es.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new mt(t*this.r,t*this.g,t*this.b)},es.hsl=function(){return wt(this.r,this.g,this.b)},es.toString=function(){return"#"+bt(this.r)+bt(this.g)+bt(this.b)};var ns=so.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ns.forEach(function(t,e){ns.set(t,xt(e))}),so.functor=Tt,so.xhr=Ct(x),so.dsv=function(t,e){function n(t,n,a){arguments.length<3&&(a=n,n=null);var o=At(t,e,null==n?i:r(n),a);return o.row=function(t){return arguments.length?o.response(null==(n=t)?i:r(t)):n},o}function i(t){return n.parse(t.responseText)}function r(t){return function(e){return n.parse(e.responseText,t)}}function a(e){return e.map(o).join(t)}function o(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return n.parse=function(t,e){var i;return n.parseRows(t,function(t,n){if(i)return i(t,n-1);var r=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");i=e?function(t,n){return e(r(t),n)}:r})},n.parseRows=function(t,e){function n(){if(h>=u)return o;if(r)return r=!1,a;var e=h;if(34===t.charCodeAt(e)){for(var n=e;n++<u;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}h=n+2;var i=t.charCodeAt(n+1);return 13===i?(r=!0,10===t.charCodeAt(n+2)&&++h):10===i&&(r=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;u>h;){var i=t.charCodeAt(h++),s=1;if(10===i)r=!0;else if(13===i)r=!0,10===t.charCodeAt(h)&&(++h,++s);else if(i!==l)continue;return t.slice(e,h-s)}return t.slice(e)}for(var i,r,a={},o={},s=[],u=t.length,h=0,c=0;(i=n())!==o;){for(var f=[];i!==a&&i!==o;)f.push(i),i=n();e&&null==(f=e(f,c++))||s.push(f)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var i=new m,r=[];return e.forEach(function(t){for(var e in t)i.has(e)||r.push(i.add(e))}),[r.map(o).join(t)].concat(e.map(function(e){return r.map(function(t){return o(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(a).join("\n")},n},so.csv=so.dsv(",","text/csv"),so.tsv=so.dsv("\t","text/tab-separated-values");var is,rs,as,os,ss=this[b(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};so.timer=function(){Ft.apply(this,arguments)},so.timer.flush=function(){Pt(),zt()},so.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var ls=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(It);so.formatPrefix=function(t,e){var n=0;return(t=+t)&&(0>t&&(t*=-1),e&&(t=so.round(t,Dt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),ls[8+n/3]};var us=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,hs=so.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=so.round(t,Dt(t,e))).toFixed(Math.max(0,Math.min(20,Dt(t*(1+1e-15),e))))}}),cs=so.time={},fs=Date;Bt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ds.setUTCDate.apply(this._,arguments)},setDay:function(){ds.setUTCDay.apply(this._,arguments)},setFullYear:function(){ds.setUTCFullYear.apply(this._,arguments)},setHours:function(){ds.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ds.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ds.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ds.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ds.setUTCSeconds.apply(this._,arguments)},setTime:function(){ds.setTime.apply(this._,arguments)}};var ds=Date.prototype;cs.year=Ht(function(t){return t=cs.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),cs.years=cs.year.range,cs.years.utc=cs.year.utc.range,cs.day=Ht(function(t){var e=new fs(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),cs.days=cs.day.range,cs.days.utc=cs.day.utc.range,cs.dayOfYear=function(t){var e=cs.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=cs[t]=Ht(function(t){return(t=cs.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=cs.year(t).getDay();return Math.floor((cs.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});cs[t+"s"]=n.range,cs[t+"s"].utc=n.utc.range,cs[t+"OfYear"]=function(t){var n=cs.year(t).getDay();return Math.floor((cs.dayOfYear(t)+(n+e)%7)/7)}}),cs.week=cs.sunday,cs.weeks=cs.sunday.range,cs.weeks.utc=cs.sunday.utc.range,cs.weekOfYear=cs.sundayOfYear;var ps={"-":"",_:" ",0:"0"},gs=/^\s*\d+/,vs=/^%/;so.locale=function(t){return{numberFormat:Nt(t),timeFormat:Wt(t)}};var ms=so.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});so.format=ms.numberFormat,so.geo={},ue.prototype={s:0,t:0,add:function(t){he(t,this.t,xs),he(xs.s,this.s,this),this.s?this.t+=xs.t:this.s=xs.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var xs=new ue;so.geo.stream=function(t,e){t&&ys.hasOwnProperty(t.type)?ys[t.type](t,e):ce(t,e)};var ys={Feature:function(t,e){ce(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)ce(n[i].geometry,e)}},bs={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){fe(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)fe(n[i],e,0)},Polygon:function(t,e){de(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)de(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)ce(n[i],e)}};so.geo.area=function(t){return _s=0,so.geo.stream(t,Ms),_s};var _s,ws=new ue,Ms={sphere:function(){_s+=4*Io},point:_,lineStart:_,lineEnd:_,polygonStart:function(){ws.reset(),Ms.lineStart=pe},polygonEnd:function(){var t=2*ws;_s+=0>t?4*Io+t:t,Ms.lineStart=Ms.lineEnd=Ms.point=_}};so.geo.bounds=function(){function t(t,e){y.push(b=[h=t,f=t]),c>e&&(c=e),e>d&&(d=e)}function e(e,n){var i=ge([e*Ho,n*Ho]);if(m){var r=me(m,i),a=[r[1],-r[0],0],o=me(a,r);be(o),o=_e(o);var l=e-p,u=l>0?1:-1,g=o[0]*Xo*u,v=xo(l)>180;if(v^(g>u*p&&u*e>g)){var x=o[1]*Xo;x>d&&(d=x)}else if(g=(g+360)%360-180,v^(g>u*p&&u*e>g)){var x=-o[1]*Xo;c>x&&(c=x)}else c>n&&(c=n),n>d&&(d=n);v?p>e?s(h,e)>s(h,f)&&(f=e):s(e,f)>s(h,f)&&(h=e):f>=h?(h>e&&(h=e),e>f&&(f=e)):e>p?s(h,e)>s(h,f)&&(f=e):s(e,f)>s(h,f)&&(h=e)}else t(e,n);m=i,p=e}function n(){_.point=e}function i(){b[0]=h,b[1]=f,_.point=t,m=null}function r(t,n){if(m){var i=t-p;x+=xo(i)>180?i+(i>0?360:-360):i}else g=t,v=n;Ms.point(t,n),e(t,n)}function a(){Ms.lineStart()}function o(){r(g,v),Ms.lineEnd(),xo(x)>zo&&(h=-(f=180)),b[0]=h,b[1]=f,m=null}function s(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var h,c,f,d,p,g,v,m,x,y,b,_={point:t,lineStart:n,lineEnd:i,polygonStart:function(){_.point=r,_.lineStart=a,_.lineEnd=o,x=0,Ms.polygonStart()},polygonEnd:function(){Ms.polygonEnd(),_.point=t,_.lineStart=n,_.lineEnd=i,0>ws?(h=-(f=180),c=-(d=90)):x>zo?d=90:-zo>x&&(c=-90),b[0]=h,b[1]=f}};return function(t){d=f=-(h=c=1/0),y=[],so.geo.stream(t,_);var e=y.length;if(e){y.sort(l);for(var n,i=1,r=y[0],a=[r];e>i;++i)n=y[i],u(n[0],r)||u(n[1],r)?(s(r[0],n[1])>s(r[0],r[1])&&(r[1]=n[1]),s(n[0],r[1])>s(r[0],r[1])&&(r[0]=n[0])):a.push(r=n);for(var o,n,p=-(1/0),e=a.length-1,i=0,r=a[e];e>=i;r=n,++i)n=a[i],(o=s(r[1],n[0]))>p&&(p=o,h=n[0],f=r[1])}return y=b=null,h===1/0||c===1/0?[[NaN,NaN],[NaN,NaN]]:[[h,c],[f,d]]}}(),so.geo.centroid=function(t){ks=Ss=Ts=Cs=As=Ls=Es=Fs=Rs=Ps=zs=0,so.geo.stream(t,Ds);var e=Rs,n=Ps,i=zs,r=e*e+n*n+i*i;return Do>r&&(e=Ls,n=Es,i=Fs,zo>Ss&&(e=Ts,n=Cs,i=As),r=e*e+n*n+i*i,Do>r)?[NaN,NaN]:[Math.atan2(n,e)*Xo,et(i/Math.sqrt(r))*Xo]};var ks,Ss,Ts,Cs,As,Ls,Es,Fs,Rs,Ps,zs,Ds={sphere:_,point:Me,lineStart:Se,lineEnd:Te,polygonStart:function(){Ds.lineStart=Ce},polygonEnd:function(){Ds.lineStart=Se}},Is=Pe(Le,Ne,Be,[-Io,-Io/2]),Ns=1e9;so.geo.clipExtent=function(){var t,e,n,i,r,a,o={stream:function(t){return r&&(r.valid=!1),r=a(t),r.valid=!0,r},extent:function(s){return arguments.length?(a=Ye(t=+s[0][0],e=+s[0][1],n=+s[1][0],i=+s[1][1]),r&&(r.valid=!1,r=null),o):[[t,e],[n,i]]}};return o.extent([[0,0],[960,500]])},(so.geo.conicEqualArea=function(){return je(qe)}).raw=qe,so.geo.albers=function(){return so.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},so.geo.albersUsa=function(){function t(t){var a=t[0],o=t[1];return e=null,n(a,o),e||(i(a,o),e)||r(a,o),e}var e,n,i,r,a=so.geo.albers(),o=so.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=so.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?o:r>=.166&&.234>r&&i>=-.214&&-.115>i?s:a).invert(t)},t.stream=function(t){var e=a.stream(t),n=o.stream(t),i=s.stream(t);return{point:function(t,r){e.point(t,r),n.point(t,r),i.point(t,r)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},t.precision=function(e){return arguments.length?(a.precision(e),o.precision(e),s.precision(e),t):a.precision()},t.scale=function(e){return arguments.length?(a.scale(e),o.scale(.35*e),s.scale(e),t.translate(a.translate())):a.scale()},t.translate=function(e){if(!arguments.length)return a.translate();var u=a.scale(),h=+e[0],c=+e[1];return n=a.translate(e).clipExtent([[h-.455*u,c-.238*u],[h+.455*u,c+.238*u]]).stream(l).point,i=o.translate([h-.307*u,c+.201*u]).clipExtent([[h-.425*u+zo,c+.12*u+zo],[h-.214*u-zo,c+.234*u-zo]]).stream(l).point,r=s.translate([h-.205*u,c+.212*u]).clipExtent([[h-.214*u+zo,c+.166*u+zo],[h-.115*u-zo,c+.234*u-zo]]).stream(l).point,t},t.scale(1070)};var Os,Bs,Hs,Xs,Ws,Ys,js={point:_,lineStart:_,lineEnd:_,polygonStart:function(){Bs=0,js.lineStart=Ve},polygonEnd:function(){js.lineStart=js.lineEnd=js.point=_,Os+=xo(Bs/2)}},qs={point:Ge,lineStart:_,lineEnd:_,polygonStart:_,polygonEnd:_},Vs={point:$e,lineStart:Qe,lineEnd:Je,polygonStart:function(){Vs.lineStart=Ke},polygonEnd:function(){Vs.point=$e,Vs.lineStart=Qe,Vs.lineEnd=Je}};so.geo.path=function(){function t(t){return t&&("function"==typeof s&&a.pointRadius(+s.apply(this,arguments)),o&&o.valid||(o=r(a)),so.geo.stream(t,o)),a.result()}function e(){return o=null,t}var n,i,r,a,o,s=4.5;return t.area=function(t){return Os=0,so.geo.stream(t,r(js)),Os},t.centroid=function(t){return Ts=Cs=As=Ls=Es=Fs=Rs=Ps=zs=0,so.geo.stream(t,r(Vs)),zs?[Rs/zs,Ps/zs]:Fs?[Ls/Fs,Es/Fs]:As?[Ts/As,Cs/As]:[NaN,NaN]},t.bounds=function(t){return Ws=Ys=-(Hs=Xs=1/0),so.geo.stream(t,r(qs)),[[Hs,Xs],[Ws,Ys]]},t.projection=function(t){return arguments.length?(r=(n=t)?t.stream||nn(t):x,e()):n},t.context=function(t){return arguments.length?(a=null==(i=t)?new Ue:new tn(t),"function"!=typeof s&&a.pointRadius(s),e()):i},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(a.pointRadius(+e),+e),t):s},t.projection(so.geo.albersUsa()).context(null)},so.geo.transform=function(t){return{stream:function(e){var n=new rn(e);for(var i in t)n[i]=t[i];return n}}},rn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},so.geo.projection=on,so.geo.projectionMutator=sn,(so.geo.equirectangular=function(){return on(un)}).raw=un.invert=un,so.geo.rotation=function(t){function e(e){return e=t(e[0]*Ho,e[1]*Ho),e[0]*=Xo,e[1]*=Xo,e}return t=cn(t[0]%360*Ho,t[1]*Ho,t.length>2?t[2]*Ho:0),e.invert=function(e){return e=t.invert(e[0]*Ho,e[1]*Ho),e[0]*=Xo,e[1]*=Xo,e},e},hn.invert=un,so.geo.circle=function(){function t(){var t="function"==typeof i?i.apply(this,arguments):i,e=cn(-t[0]*Ho,-t[1]*Ho,0).invert,r=[];return n(null,null,1,{point:function(t,n){r.push(t=e(t,n)),t[0]*=Xo,t[1]*=Xo}}),{type:"Polygon",coordinates:[r]}}var e,n,i=[0,0],r=6;return t.origin=function(e){return arguments.length?(i=e,t):i},t.angle=function(i){return arguments.length?(n=gn((e=+i)*Ho,r*Ho),t):e},t.precision=function(i){return arguments.length?(n=gn(e*Ho,(r=+i)*Ho),t):r},t.angle(90)},so.geo.distance=function(t,e){var n,i=(e[0]-t[0])*Ho,r=t[1]*Ho,a=e[1]*Ho,o=Math.sin(i),s=Math.cos(i),l=Math.sin(r),u=Math.cos(r),h=Math.sin(a),c=Math.cos(a);return Math.atan2(Math.sqrt((n=c*o)*n+(n=u*h-l*c*s)*n),l*h+u*c*s)},so.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return so.range(Math.ceil(a/v)*v,r,v).map(f).concat(so.range(Math.ceil(u/m)*m,l,m).map(d)).concat(so.range(Math.ceil(i/p)*p,n,p).filter(function(t){return xo(t%v)>zo}).map(h)).concat(so.range(Math.ceil(s/g)*g,o,g).filter(function(t){return xo(t%m)>zo}).map(c))}var n,i,r,a,o,s,l,u,h,c,f,d,p=10,g=p,v=90,m=360,x=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[f(a).concat(d(l).slice(1),f(r).reverse().slice(1),d(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(a=+e[0][0],r=+e[1][0],u=+e[0][1],l=+e[1][1],a>r&&(e=a,a=r,r=e),u>l&&(e=u,u=l,l=e),t.precision(x)):[[a,u],[r,l]]},t.minorExtent=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],s=+e[0][1],o=+e[1][1],i>n&&(e=i,i=n,n=e),s>o&&(e=s,s=o,o=e),t.precision(x)):[[i,s],[n,o]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(v=+e[0],m=+e[1],t):[v,m]},t.minorStep=function(e){return arguments.length?(p=+e[0],g=+e[1],t):[p,g]},t.precision=function(e){return arguments.length?(x=+e,h=mn(s,o,90),c=xn(i,n,x),f=mn(u,l,90),d=xn(a,r,x),t):x},t.majorExtent([[-180,-90+zo],[180,90-zo]]).minorExtent([[-180,-80-zo],[180,80+zo]])},so.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}var e,n,i=yn,r=bn;return t.distance=function(){return so.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.target=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},so.geo.interpolate=function(t,e){return _n(t[0]*Ho,t[1]*Ho,e[0]*Ho,e[1]*Ho)},so.geo.length=function(t){return Gs=0,so.geo.stream(t,Us),Gs};var Gs,Us={sphere:_,point:_,lineStart:wn,lineEnd:_,polygonStart:_,polygonEnd:_},Zs=Mn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(so.geo.azimuthalEqualArea=function(){return on(Zs)}).raw=Zs;var $s=Mn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},x);(so.geo.azimuthalEquidistant=function(){return on($s)}).raw=$s,(so.geo.conicConformal=function(){return je(kn)}).raw=kn,(so.geo.conicEquidistant=function(){return je(Sn)}).raw=Sn;var Qs=Mn(function(t){return 1/t},Math.atan);(so.geo.gnomonic=function(){return on(Qs)}).raw=Qs,Tn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Bo]},(so.geo.mercator=function(){return Cn(Tn)}).raw=Tn;var Js=Mn(function(){return 1},Math.asin);(so.geo.orthographic=function(){return on(Js)}).raw=Js;var Ks=Mn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(so.geo.stereographic=function(){return on(Ks)}).raw=Ks,An.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Bo]},(so.geo.transverseMercator=function(){var t=Cn(An),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=An,so.geom={},so.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,r=Tt(n),a=Tt(i),o=t.length,s=[],l=[];for(e=0;o>e;e++)s.push([+r.call(this,t[e],e),+a.call(this,t[e],e),e]);for(s.sort(Rn),e=0;o>e;e++)l.push([s[e][0],-s[e][1]]);var u=Fn(s),h=Fn(l),c=h[0]===u[0],f=h[h.length-1]===u[u.length-1],d=[];for(e=u.length-1;e>=0;--e)d.push(t[s[u[e]][2]]);for(e=+c;e<h.length-f;++e)d.push(t[s[h[e]][2]]);return d}var n=Ln,i=En;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e)},so.geom.polygon=function(t){return Mo(t,tl),t};var tl=so.geom.polygon.prototype=[];tl.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},tl.centroid=function(t){var e,n,i=-1,r=this.length,a=0,o=0,s=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=s,s=this[i],n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a*t,o*t]},tl.clip=function(t){for(var e,n,i,r,a,o,s=Dn(t),l=-1,u=this.length-Dn(this),h=this[u-1];++l<u;){for(e=t.slice(),t.length=0,r=this[l],a=e[(i=e.length-s)-1],n=-1;++n<i;)o=e[n],Pn(o,h,r)?(Pn(a,h,r)||t.push(zn(a,o,h,r)),t.push(o)):Pn(a,h,r)&&t.push(zn(a,o,h,r)),a=o;s&&t.push(t[0]),h=r}return t};var el,nl,il,rl,al,ol=[],sl=[];Yn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(qn),e.length},ei.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ni.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=oi(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(ri(this,n),
t=n,n=t.U),n.C=!1,i.C=!0,ai(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(ai(this,n),t=n,n=t.U),n.C=!1,i.C=!0,ri(this,i))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,a=t.L,o=t.R;if(n=a?o?oi(o):a:o,r?r.L===t?r.L=n:r.R=n:this._=n,a&&o?(i=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=o,o.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if(e=r.R,e.C&&(e.C=!1,r.C=!0,ri(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ai(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,ri(this,r),t=this._;break}}else if(e=r.L,e.C&&(e.C=!1,r.C=!0,ai(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ri(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,ai(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},so.geom.voronoi=function(t){function e(t){var e=new Array(t.length),i=s[0][0],r=s[0][1],a=s[1][0],o=s[1][1];return si(n(t),s).cells.forEach(function(n,s){var l=n.edges,u=n.site,h=e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):u.x>=i&&u.x<=a&&u.y>=r&&u.y<=o?[[i,o],[a,o],[a,r],[i,r]]:[];h.point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(a(t,e)/zo)*zo,y:Math.round(o(t,e)/zo)*zo,i:e}})}var i=Ln,r=En,a=i,o=r,s=ll;return t?e(t):(e.links=function(t){return si(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return si(n(t)).cells.forEach(function(n,i){for(var r,a,o=n.site,s=n.edges.sort(qn),l=-1,u=s.length,h=s[u-1].edge,c=h.l===o?h.r:h.l;++l<u;)r=h,a=c,h=s[l].edge,c=h.l===o?h.r:h.l,i<a.i&&i<c.i&&ui(o,a,c)<0&&e.push([t[i],t[a.i],t[c.i]])}),e},e.x=function(t){return arguments.length?(a=Tt(i=t),e):i},e.y=function(t){return arguments.length?(o=Tt(r=t),e):r},e.clipExtent=function(t){return arguments.length?(s=null==t?ll:t,e):s===ll?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===ll?null:s&&s[1]},e)};var ll=[[-1e6,-1e6],[1e6,1e6]];so.geom.delaunay=function(t){return so.geom.voronoi().triangles(t)},so.geom.quadtree=function(t,e,n,i,r){function a(t){function a(t,e,n,i,r,a,o,s){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var l=t.x,h=t.y;if(null!=l)if(xo(l-n)+xo(h-i)<.01)u(t,e,n,i,r,a,o,s);else{var c=t.point;t.x=t.y=t.point=null,u(t,c,l,h,r,a,o,s),u(t,e,n,i,r,a,o,s)}else t.x=n,t.y=i,t.point=e}else u(t,e,n,i,r,a,o,s)}function u(t,e,n,i,r,o,s,l){var u=.5*(r+s),h=.5*(o+l),c=n>=u,f=i>=h,d=f<<1|c;t.leaf=!1,t=t.nodes[d]||(t.nodes[d]=fi()),c?r=u:s=u,f?o=h:l=h,a(t,e,n,i,r,o,s,l)}var h,c,f,d,p,g,v,m,x,y=Tt(s),b=Tt(l);if(null!=e)g=e,v=n,m=i,x=r;else if(m=x=-(g=v=1/0),c=[],f=[],p=t.length,o)for(d=0;p>d;++d)h=t[d],h.x<g&&(g=h.x),h.y<v&&(v=h.y),h.x>m&&(m=h.x),h.y>x&&(x=h.y),c.push(h.x),f.push(h.y);else for(d=0;p>d;++d){var _=+y(h=t[d],d),w=+b(h,d);g>_&&(g=_),v>w&&(v=w),_>m&&(m=_),w>x&&(x=w),c.push(_),f.push(w)}var M=m-g,k=x-v;M>k?x=v+M:m=g+k;var S=fi();if(S.add=function(t){a(S,t,+y(t,++d),+b(t,d),g,v,m,x)},S.visit=function(t){di(t,S,g,v,m,x)},S.find=function(t){return pi(S,t[0],t[1],g,v,m,x)},d=-1,null==e){for(;++d<p;)a(S,t[d],c[d],f[d],g,v,m,x);--d}else t.forEach(S.add);return c=f=t=h=null,S}var o,s=Ln,l=En;return(o=arguments.length)?(s=hi,l=ci,3===o&&(r=n,i=e,n=e=0),a(t)):(a.x=function(t){return arguments.length?(s=t,a):s},a.y=function(t){return arguments.length?(l=t,a):l},a.extent=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),a):null==e?null:[[e,n],[i,r]]},a.size=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=n=0,i=+t[0],r=+t[1]),a):null==e?null:[i-e,r-n]},a)},so.interpolateRgb=gi,so.interpolateObject=vi,so.interpolateNumber=mi,so.interpolateString=xi;var ul=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hl=new RegExp(ul.source,"g");so.interpolate=yi,so.interpolators=[function(t,e){var n=typeof e;return("string"===n?ns.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?gi:xi:e instanceof ot?gi:Array.isArray(e)?bi:"object"===n&&isNaN(e)?vi:mi)(t,e)}],so.interpolateArray=bi;var cl=function(){return x},fl=so.map({linear:cl,poly:Ci,quad:function(){return ki},cubic:function(){return Si},sin:function(){return Ai},exp:function(){return Li},circle:function(){return Ei},elastic:Fi,back:Ri,bounce:function(){return Pi}}),dl=so.map({"in":x,out:wi,"in-out":Mi,"out-in":function(t){return Mi(wi(t))}});so.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,i=e>=0?t.slice(e+1):"in";return n=fl.get(n)||cl,i=dl.get(i)||x,_i(i(n.apply(null,lo.call(arguments,1))))},so.interpolateHcl=zi,so.interpolateHsl=Di,so.interpolateLab=Ii,so.interpolateRound=Ni,so.transform=function(t){var e=ho.createElementNS(so.ns.prefix.svg,"g");return(so.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Oi(n?n.matrix:pl)})(t)},Oi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var pl={a:1,b:0,c:0,d:1,e:0,f:0};so.interpolateTransform=Gi,so.layout={},so.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push($i(t[n]));return e}},so.layout.chord=function(){function t(){var t,u,c,f,d,p={},g=[],v=so.range(a),m=[];for(n=[],i=[],t=0,f=-1;++f<a;){for(u=0,d=-1;++d<a;)u+=r[f][d];g.push(u),m.push(so.range(a)),t+=u}for(o&&v.sort(function(t,e){return o(g[t],g[e])}),s&&m.forEach(function(t,e){t.sort(function(t,n){return s(r[e][t],r[e][n])})}),t=(No-h*a)/t,u=0,f=-1;++f<a;){for(c=u,d=-1;++d<a;){var x=v[f],y=m[x][d],b=r[x][y],_=u,w=u+=b*t;p[x+"-"+y]={index:x,subindex:y,startAngle:_,endAngle:w,value:b}}i[x]={index:x,startAngle:c,endAngle:u,value:g[x]},u+=h}for(f=-1;++f<a;)for(d=f-1;++d<a;){var M=p[f+"-"+d],k=p[d+"-"+f];(M.value||k.value)&&n.push(M.value<k.value?{source:k,target:M}:{source:M,target:k})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,r,a,o,s,l,u={},h=0;return u.matrix=function(t){return arguments.length?(a=(r=t)&&r.length,n=i=null,u):r},u.padding=function(t){return arguments.length?(h=t,n=i=null,u):h},u.sortGroups=function(t){return arguments.length?(o=t,n=i=null,u):o},u.sortSubgroups=function(t){return arguments.length?(s=t,n=null,u):s},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return i||t(),i},u},so.layout.force=function(){function t(t){return function(e,n,i,r){if(e.point!==t){var a=e.cx-t.x,o=e.cy-t.y,s=r-n,l=a*a+o*o;if(l>s*s/m){if(g>l){var u=e.charge/l;t.px-=a*u,t.py-=o*u}return!0}if(e.point&&l&&g>l){var u=e.pointCharge/l;t.px-=a*u,t.py-=o*u}}return!e.charge}}function e(t){t.px=so.event.x,t.py=so.event.y,l.resume()}var n,i,r,a,o,s,l={},u=so.dispatch("start","tick","end"),h=[1,1],c=.9,f=gl,d=vl,p=-30,g=ml,v=.1,m=.64,y=[],b=[];return l.tick=function(){if((r*=.99)<.005)return n=null,u.end({type:"end",alpha:r=0}),!0;var e,i,l,f,d,g,m,x,_,w=y.length,M=b.length;for(i=0;M>i;++i)l=b[i],f=l.source,d=l.target,x=d.x-f.x,_=d.y-f.y,(g=x*x+_*_)&&(g=r*o[i]*((g=Math.sqrt(g))-a[i])/g,x*=g,_*=g,d.x-=x*(m=f.weight+d.weight?f.weight/(f.weight+d.weight):.5),d.y-=_*m,f.x+=x*(m=1-m),f.y+=_*m);if((m=r*v)&&(x=h[0]/2,_=h[1]/2,i=-1,m))for(;++i<w;)l=y[i],l.x+=(x-l.x)*m,l.y+=(_-l.y)*m;if(p)for(ir(e=so.geom.quadtree(y),r,s),i=-1;++i<w;)(l=y[i]).fixed||e.visit(t(l));for(i=-1;++i<w;)l=y[i],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*c,l.y-=(l.py-(l.py=l.y))*c);u.tick({type:"tick",alpha:r})},l.nodes=function(t){return arguments.length?(y=t,l):y},l.links=function(t){return arguments.length?(b=t,l):b},l.size=function(t){return arguments.length?(h=t,l):h},l.linkDistance=function(t){return arguments.length?(f="function"==typeof t?t:+t,l):f},l.distance=l.linkDistance,l.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,l):d},l.friction=function(t){return arguments.length?(c=+t,l):c},l.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,l):p},l.chargeDistance=function(t){return arguments.length?(g=t*t,l):Math.sqrt(g)},l.gravity=function(t){return arguments.length?(v=+t,l):v},l.theta=function(t){return arguments.length?(m=t*t,l):Math.sqrt(m)},l.alpha=function(t){return arguments.length?(t=+t,r?t>0?r=t:(n.c=null,n.t=NaN,n=null,u.end({type:"end",alpha:r=0})):t>0&&(u.start({type:"start",alpha:r=t}),n=Ft(l.tick)),l):r},l.start=function(){function t(t,i){if(!n){for(n=new Array(r),l=0;r>l;++l)n[l]=[];for(l=0;u>l;++l){var a=b[l];n[a.source.index].push(a.target),n[a.target.index].push(a.source)}}for(var o,s=n[e],l=-1,h=s.length;++l<h;)if(!isNaN(o=s[l][t]))return o;return Math.random()*i}var e,n,i,r=y.length,u=b.length,c=h[0],g=h[1];for(e=0;r>e;++e)(i=y[e]).index=e,i.weight=0;for(e=0;u>e;++e)i=b[e],"number"==typeof i.source&&(i.source=y[i.source]),"number"==typeof i.target&&(i.target=y[i.target]),++i.source.weight,++i.target.weight;for(e=0;r>e;++e)i=y[e],isNaN(i.x)&&(i.x=t("x",c)),isNaN(i.y)&&(i.y=t("y",g)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(a=[],"function"==typeof f)for(e=0;u>e;++e)a[e]=+f.call(this,b[e],e);else for(e=0;u>e;++e)a[e]=f;if(o=[],"function"==typeof d)for(e=0;u>e;++e)o[e]=+d.call(this,b[e],e);else for(e=0;u>e;++e)o[e]=d;if(s=[],"function"==typeof p)for(e=0;r>e;++e)s[e]=+p.call(this,y[e],e);else for(e=0;r>e;++e)s[e]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return i||(i=so.behavior.drag().origin(x).on("dragstart.force",Ki).on("drag.force",e).on("dragend.force",tr)),arguments.length?void this.on("mouseover.force",er).on("mouseout.force",nr).call(i):i},so.rebind(l,u,"on")};var gl=20,vl=1,ml=1/0;so.layout.hierarchy=function(){function t(r){var a,o=[r],s=[];for(r.depth=0;null!=(a=o.pop());)if(s.push(a),(u=n.call(t,a,a.depth))&&(l=u.length)){for(var l,u,h;--l>=0;)o.push(h=u[l]),h.parent=a,h.depth=a.depth+1;i&&(a.value=0),a.children=u}else i&&(a.value=+i.call(t,a,a.depth)||0),delete a.children;return or(r,function(t){var n,r;e&&(n=t.children)&&n.sort(e),i&&(r=t.parent)&&(r.value+=t.value)}),s}var e=ur,n=sr,i=lr;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(i=e,t):i},t.revalue=function(e){return i&&(ar(e,function(t){t.children&&(t.value=0)}),or(e,function(e){var n;e.children||(e.value=+i.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},so.layout.partition=function(){function t(e,n,i,r){var a=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,a&&(o=a.length)){var o,s,l,u=-1;for(i=e.value?i/e.value:0;++u<o;)t(s=a[u],n,l=s.value*i,r),n+=l}}function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,a=-1;++a<r;)i=Math.max(i,e(n[a]));return 1+i}function n(n,a){var o=i.call(this,n,a);return t(o[0],0,r[0],r[1]/e(o[0])),o}var i=so.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},rr(n,i)},so.layout.pie=function(){function t(o){var s,l=o.length,u=o.map(function(n,i){return+e.call(t,n,i)}),h=+("function"==typeof i?i.apply(this,arguments):i),c=("function"==typeof r?r.apply(this,arguments):r)-h,f=Math.min(Math.abs(c)/l,+("function"==typeof a?a.apply(this,arguments):a)),d=f*(0>c?-1:1),p=so.sum(u),g=p?(c-l*d)/p:0,v=so.range(l),m=[];return null!=n&&v.sort(n===xl?function(t,e){return u[e]-u[t]}:function(t,e){return n(o[t],o[e])}),v.forEach(function(t){m[t]={data:o[t],value:s=u[t],startAngle:h,endAngle:h+=s*g+d,padAngle:f}}),m}var e=Number,n=xl,i=0,r=No,a=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(r=e,t):r},t.padAngle=function(e){return arguments.length?(a=e,t):a},t};var xl={};so.layout.stack=function(){function t(s,l){if(!(f=s.length))return s;var u=s.map(function(n,i){return e.call(t,n,i)}),h=u.map(function(e){return e.map(function(e,n){return[a.call(t,e,n),o.call(t,e,n)]})}),c=n.call(t,h,l);u=so.permute(u,c),h=so.permute(h,c);var f,d,p,g,v=i.call(t,h,l),m=u[0].length;for(p=0;m>p;++p)for(r.call(t,u[0][p],g=v[p],h[0][p][1]),d=1;f>d;++d)r.call(t,u[d][p],g+=h[d-1][p][1],h[d][p][1]);return s}var e=x,n=pr,i=gr,r=dr,a=cr,o=fr;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:yl.get(e)||pr,t):n},t.offset=function(e){return arguments.length?(i="function"==typeof e?e:bl.get(e)||gr,t):i},t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(o=e,t):o},t.out=function(e){return arguments.length?(r=e,t):r},t};var yl=so.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(vr),a=t.map(mr),o=so.range(i).sort(function(t,e){return r[t]-r[e]}),s=0,l=0,u=[],h=[];for(e=0;i>e;++e)n=o[e],l>s?(s+=a[n],u.push(n)):(l+=a[n],h.push(n));return h.reverse().concat(u)},reverse:function(t){return so.range(t.length).reverse()},"default":pr}),bl=so.map({silhouette:function(t){var e,n,i,r=t.length,a=t[0].length,o=[],s=0,l=[];for(n=0;a>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];i>s&&(s=i),o.push(i)}for(n=0;a>n;++n)l[n]=(s-o[n])/2;return l},wiggle:function(t){var e,n,i,r,a,o,s,l,u,h=t.length,c=t[0],f=c.length,d=[];for(d[0]=l=u=0,n=1;f>n;++n){for(e=0,r=0;h>e;++e)r+=t[e][n][1];for(e=0,a=0,s=c[n][0]-c[n-1][0];h>e;++e){for(i=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);e>i;++i)o+=(t[i][n][1]-t[i][n-1][1])/s;a+=o*t[e][n][1]}d[n]=l-=r?a/r*s:0,u>l&&(u=l)}for(n=0;f>n;++n)d[n]-=u;return d},expand:function(t){var e,n,i,r=t.length,a=t[0].length,o=1/r,s=[];for(n=0;a>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];if(i)for(e=0;r>e;e++)t[e][n][1]/=i;else for(e=0;r>e;e++)t[e][n][1]=o}for(n=0;a>n;++n)s[n]=0;return s},zero:gr});so.layout.histogram=function(){function t(t,a){for(var o,s,l=[],u=t.map(n,this),h=i.call(this,u,a),c=r.call(this,h,u,a),a=-1,f=u.length,d=c.length-1,p=e?1:1/f;++a<d;)o=l[a]=[],o.dx=c[a+1]-(o.x=c[a]),o.y=0;if(d>0)for(a=-1;++a<f;)s=u[a],s>=h[0]&&s<=h[1]&&(o=l[so.bisect(c,s,1,d)-1],o.y+=p,o.push(t[a]));return l}var e=!0,n=Number,i=_r,r=yr;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=Tt(e),t):i},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return br(t,e)}:Tt(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},so.layout.pack=function(){function t(t,a){var o=n.call(this,t,a),s=o[0],l=r[0],u=r[1],h=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,or(s,function(t){t.r=+h(t.value)}),or(s,Tr),i){var c=i*(e?1:Math.max(2*s.r/l,2*s.r/u))/2;or(s,function(t){t.r+=c}),or(s,Tr),or(s,function(t){t.r-=c})}return Lr(s,l/2,u/2,e?1:1/Math.max(2*s.r/l,2*s.r/u)),o}var e,n=so.layout.hierarchy().sort(wr),i=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(i=+e,t):i},rr(t,n)},so.layout.tree=function(){function t(t,r){var h=o.call(this,t,r),c=h[0],f=e(c);if(or(f,n),f.parent.m=-f.z,ar(f,i),u)ar(c,a);else{var d=c,p=c,g=c;ar(c,function(t){t.x<d.x&&(d=t),t.x>p.x&&(p=t),t.depth>g.depth&&(g=t)});var v=s(d,p)/2-d.x,m=l[0]/(p.x+s(p,d)/2+v),x=l[1]/(g.depth||1);ar(c,function(t){t.x=(t.x+v)*m,t.y=t.depth*x})}return h}function e(t){for(var e,n={A:null,children:[t]},i=[n];null!=(e=i.pop());)for(var r,a=e.children,o=0,s=a.length;s>o;++o)i.push((a[o]=r={_:a[o],parent:e,children:(r=a[o].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=r);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){Dr(t);var a=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+s(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+s(t._,i._));t.parent.A=r(t,i,t.parent.A||n[0])}function i(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var i,r=t,a=t,o=e,l=r.parent.children[0],u=r.m,h=a.m,c=o.m,f=l.m;o=Pr(o),r=Rr(r),o&&r;)l=Rr(l),a=Pr(a),a.a=t,i=o.z+c-r.z-u+s(o._,r._),i>0&&(zr(Ir(o,t,n),t,i),u+=i,h+=i),c+=o.m,u+=r.m,f+=l.m,h+=a.m;o&&!Pr(a)&&(a.t=o,a.m+=c-h),r&&!Rr(l)&&(l.t=r,l.m+=u-f,n=t)}return n}function a(t){t.x*=l[0],t.y=t.depth*l[1]}var o=so.layout.hierarchy().sort(null).value(null),s=Fr,l=[1,1],u=null;return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(u=null==(l=e)?a:null,t):u?null:l},t.nodeSize=function(e){return arguments.length?(u=null==(l=e)?null:a,t):u?l:null},rr(t,o)},so.layout.cluster=function(){function t(t,a){var o,s=e.call(this,t,a),l=s[0],u=0;or(l,function(t){var e=t.children;e&&e.length?(t.x=Or(e),t.y=Nr(e)):(t.x=o?u+=n(t,o):0,t.y=0,o=t)});var h=Br(l),c=Hr(l),f=h.x-n(h,c)/2,d=c.x+n(c,h)/2;return or(l,r?function(t){t.x=(t.x-l.x)*i[0],t.y=(l.y-t.y)*i[1]}:function(t){t.x=(t.x-f)/(d-f)*i[0],t.y=(1-(l.y?t.y/l.y:1))*i[1]}),s}var e=so.layout.hierarchy().sort(null).value(null),n=Fr,i=[1,1],r=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=null==(i=e),t):r?null:i},t.nodeSize=function(e){return arguments.length?(r=null!=(i=e),t):r?i:null},rr(t,e)},so.layout.treemap=function(){function t(t,e){for(var n,i,r=-1,a=t.length;++r<a;)i=(n=t[r]).value*(0>e?0:e),n.area=isNaN(i)||0>=i?0:i}function e(n){var a=n.children;if(a&&a.length){var o,s,l,u=c(n),h=[],f=a.slice(),p=1/0,g="slice"===d?u.dx:"dice"===d?u.dy:"slice-dice"===d?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(t(f,u.dx*u.dy/n.value),h.area=0;(l=f.length)>0;)h.push(o=f[l-1]),h.area+=o.area,"squarify"!==d||(s=i(h,g))<=p?(f.pop(),p=s):(h.area-=h.pop().area,r(h,g,u,!1),g=Math.min(u.dx,u.dy),h.length=h.area=0,p=1/0);h.length&&(r(h,g,u,!0),h.length=h.area=0),a.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var a,o=c(e),s=i.slice(),l=[];for(t(s,o.dx*o.dy/e.value),l.area=0;a=s.pop();)l.push(a),l.area+=a.area,null!=a.z&&(r(l,a.z?o.dx:o.dy,o,!s.length),l.length=l.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,r=0,a=1/0,o=-1,s=t.length;++o<s;)(n=t[o].area)&&(a>n&&(a=n),n>r&&(r=n));return i*=i,e*=e,i?Math.max(e*r*p/i,i/(e*a*p)):1/0}function r(t,e,n,i){var r,a=-1,o=t.length,s=n.x,u=n.y,h=e?l(t.area/e):0;if(e==n.dx){for((i||h>n.dy)&&(h=n.dy);++a<o;)r=t[a],r.x=s,r.y=u,r.dy=h,s+=r.dx=Math.min(n.x+n.dx-s,h?l(r.area/h):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=h,n.dy-=h}else{for((i||h>n.dx)&&(h=n.dx);++a<o;)r=t[a],r.x=s,r.y=u,r.dx=h,u+=r.dy=Math.min(n.y+n.dy-u,h?l(r.area/h):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=h,n.dx-=h}}function a(i){var r=o||s(i),a=r[0];return a.x=a.y=0,a.value?(a.dx=u[0],a.dy=u[1]):a.dx=a.dy=0,o&&s.revalue(a),t([a],a.dx*a.dy/a.value),(o?n:e)(a),f&&(o=r),r}var o,s=so.layout.hierarchy(),l=Math.round,u=[1,1],h=null,c=Xr,f=!1,d="squarify",p=.5*(1+Math.sqrt(5));return a.size=function(t){return arguments.length?(u=t,a):u},a.padding=function(t){function e(e){var n=t.call(a,e,e.depth);return null==n?Xr(e):Wr(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Wr(e,t)}if(!arguments.length)return h;var i;return c=null==(h=t)?Xr:"function"==(i=typeof t)?e:"number"===i?(t=[t,t,t,t],n):n,a},a.round=function(t){return arguments.length?(l=t?Math.round:Number,a):l!=Number},a.sticky=function(t){return arguments.length?(f=t,o=null,a):f},a.ratio=function(t){return arguments.length?(p=t,a):p},a.mode=function(t){return arguments.length?(d=t+"",a):d},rr(a,s)},so.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=so.random.normal.apply(so,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=so.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},so.scale={};var _l={floor:x,ceil:x};so.scale.linear=function(){return Zr([0,1],[0,1],yi,!1)};var wl={s:1,g:1,p:1,r:1,e:1};so.scale.log=function(){return ia(so.scale.linear().domain([0,1]),10,!0,[1,10])};var Ml=so.format(".0e"),kl={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};so.scale.pow=function(){return ra(so.scale.linear(),1,[0,1])},so.scale.sqrt=function(){return so.scale.pow().exponent(.5)},so.scale.ordinal=function(){return oa([],{t:"range",a:[[]]})},so.scale.category10=function(){return so.scale.ordinal().range(Sl)},so.scale.category20=function(){return so.scale.ordinal().range(Tl)},so.scale.category20b=function(){return so.scale.ordinal().range(Cl)},so.scale.category20c=function(){return so.scale.ordinal().range(Al)};var Sl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(yt),Tl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(yt),Cl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(yt),Al=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(yt);so.scale.quantile=function(){return sa([],[])},so.scale.quantize=function(){return la(0,1,[0,1])},so.scale.threshold=function(){return ua([.5],[0,1])},so.scale.identity=function(){return ha([0,1])},so.svg={},so.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+i.apply(this,arguments)),h=o.apply(this,arguments)-Bo,c=s.apply(this,arguments)-Bo,f=Math.abs(c-h),d=h>c?0:1;if(t>u&&(p=u,u=t,t=p),f>=Oo)return e(u,d)+(t?e(t,1-d):"")+"Z";var p,g,v,m,x,y,b,_,w,M,k,S,T=0,C=0,A=[];if((m=(+l.apply(this,arguments)||0)/2)&&(v=a===Ll?Math.sqrt(t*t+u*u):+a.apply(this,arguments),d||(C*=-1),u&&(C=et(v/u*Math.sin(m))),t&&(T=et(v/t*Math.sin(m)))),u){x=u*Math.cos(h+C),y=u*Math.sin(h+C),b=u*Math.cos(c-C),_=u*Math.sin(c-C);var L=Math.abs(c-h-2*C)<=Io?0:1;if(C&&ma(x,y,b,_)===d^L){var E=(h+c)/2;x=u*Math.cos(E),y=u*Math.sin(E),b=_=null}}else x=y=0;if(t){w=t*Math.cos(c-T),M=t*Math.sin(c-T),k=t*Math.cos(h+T),S=t*Math.sin(h+T);var F=Math.abs(h-c+2*T)<=Io?0:1;if(T&&ma(w,M,k,S)===1-d^F){var R=(h+c)/2;w=t*Math.cos(R),M=t*Math.sin(R),k=S=null}}else w=M=0;if(f>zo&&(p=Math.min(Math.abs(u-t)/2,+r.apply(this,arguments)))>.001){g=u>t^d?0:1;var P=p,z=p;if(Io>f){var D=null==k?[w,M]:null==b?[x,y]:zn([x,y],[k,S],[b,_],[w,M]),I=x-D[0],N=y-D[1],O=b-D[0],B=_-D[1],H=1/Math.sin(Math.acos((I*O+N*B)/(Math.sqrt(I*I+N*N)*Math.sqrt(O*O+B*B)))/2),X=Math.sqrt(D[0]*D[0]+D[1]*D[1]);z=Math.min(p,(t-X)/(H-1)),P=Math.min(p,(u-X)/(H+1))}if(null!=b){var W=xa(null==k?[w,M]:[k,S],[x,y],u,P,d),Y=xa([b,_],[w,M],u,P,d);p===P?A.push("M",W[0],"A",P,",",P," 0 0,",g," ",W[1],"A",u,",",u," 0 ",1-d^ma(W[1][0],W[1][1],Y[1][0],Y[1][1]),",",d," ",Y[1],"A",P,",",P," 0 0,",g," ",Y[0]):A.push("M",W[0],"A",P,",",P," 0 1,",g," ",Y[0])}else A.push("M",x,",",y);if(null!=k){var j=xa([x,y],[k,S],t,-z,d),q=xa([w,M],null==b?[x,y]:[b,_],t,-z,d);p===z?A.push("L",q[0],"A",z,",",z," 0 0,",g," ",q[1],"A",t,",",t," 0 ",d^ma(q[1][0],q[1][1],j[1][0],j[1][1]),",",1-d," ",j[1],"A",z,",",z," 0 0,",g," ",j[0]):A.push("L",q[0],"A",z,",",z," 0 0,",g," ",j[0])}else A.push("L",w,",",M)}else A.push("M",x,",",y),null!=b&&A.push("A",u,",",u," 0 ",L,",",d," ",b,",",_),A.push("L",w,",",M),null!=k&&A.push("A",t,",",t," 0 ",F,",",1-d," ",k,",",S);return A.push("Z"),A.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=fa,i=da,r=ca,a=Ll,o=pa,s=ga,l=va;return t.innerRadius=function(e){return arguments.length?(n=Tt(e),t):n},t.outerRadius=function(e){return arguments.length?(i=Tt(e),t):i},t.cornerRadius=function(e){return arguments.length?(r=Tt(e),t):r},t.padRadius=function(e){return arguments.length?(a=e==Ll?Ll:Tt(e),t):a},t.startAngle=function(e){return arguments.length?(o=Tt(e),t):o},t.endAngle=function(e){return arguments.length?(s=Tt(e),t):s},t.padAngle=function(e){return arguments.length?(l=Tt(e),t):l},t.centroid=function(){var t=(+n.apply(this,arguments)+ +i.apply(this,arguments))/2,e=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-Bo;return[Math.cos(e)*t,Math.sin(e)*t]},t};var Ll="auto";so.svg.line=function(){return ya(x)};var El=so.map({linear:ba,"linear-closed":_a,step:wa,"step-before":Ma,"step-after":ka,basis:Ea,"basis-open":Fa,"basis-closed":Ra,bundle:Pa,cardinal:Ca,"cardinal-open":Sa,"cardinal-closed":Ta,monotone:Ba});El.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Fl=[0,2/3,1/3,0],Rl=[0,1/3,2/3,0],Pl=[0,1/6,2/3,1/6];so.svg.line.radial=function(){var t=ya(Ha);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Ma.reverse=ka,ka.reverse=Ma,so.svg.area=function(){return Xa(x)},so.svg.area.radial=function(){var t=Xa(Ha);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},so.svg.chord=function(){function t(t,s){var l=e(this,a,t,s),u=e(this,o,t,s);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,u)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,u.r,u.p0)+i(u.r,u.p1,u.a1-u.a0)+r(u.r,u.p1,l.r,l.p0))+"Z"}function e(t,e,n,i){var r=e.call(t,n,i),a=s.call(t,r,i),o=l.call(t,r,i)-Bo,h=u.call(t,r,i)-Bo;return{r:a,a0:o,a1:h,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(h),a*Math.sin(h)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function i(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Io)+",1 "+e}function r(t,e,n,i){return"Q 0,0 "+i}var a=yn,o=bn,s=Wa,l=pa,u=ga;return t.radius=function(e){return arguments.length?(s=Tt(e),t):s},t.source=function(e){return arguments.length?(a=Tt(e),t):a},t.target=function(e){return arguments.length?(o=Tt(e),t):o},t.startAngle=function(e){return arguments.length?(l=Tt(e),t):l},t.endAngle=function(e){return arguments.length?(u=Tt(e),t):u},t},so.svg.diagonal=function(){function t(t,r){var a=e.call(this,t,r),o=n.call(this,t,r),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=yn,n=bn,i=Ya;return t.source=function(n){return arguments.length?(e=Tt(n),t):e},t.target=function(e){return arguments.length?(n=Tt(e),t):n},t.projection=function(e){return arguments.length?(i=e,t):i},t},so.svg.diagonal.radial=function(){var t=so.svg.diagonal(),e=Ya,n=t.projection;return t.projection=function(t){return arguments.length?n(ja(e=t)):e},t},so.svg.symbol=function(){function t(t,i){return(zl.get(e.call(this,t,i))||Ga)(n.call(this,t,i))}var e=Va,n=qa;return t.type=function(n){return arguments.length?(e=Tt(n),t):e},t.size=function(e){return arguments.length?(n=Tt(e),t):n},t};var zl=so.map({circle:Ga,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Il)),n=e*Il;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Dl),n=e*Dl/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Dl),n=e*Dl/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});so.svg.symbolTypes=zl.keys();var Dl=Math.sqrt(3),Il=Math.tan(30*Ho);Co.transition=function(t){for(var e,n,i=Nl||++Xl,r=Ja(t),a=[],o=Ol||{time:Date.now(),ease:Ti,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(e=[]);for(var u=this[s],h=-1,c=u.length;++h<c;)(n=u[h])&&Ka(n,h,r,i,o),e.push(n)}return Za(a,r,i)},Co.interrupt=function(t){return this.each(null==t?Bl:Ua(Ja(t)))};var Nl,Ol,Bl=Ua(Ja()),Hl=[],Xl=0;Hl.call=Co.call,Hl.empty=Co.empty,Hl.node=Co.node,Hl.size=Co.size,so.transition=function(t,e){return t&&t.transition?Nl?t.transition(e):t:so.selection().transition(t)},so.transition.prototype=Hl,Hl.select=function(t){var e,n,i,r=this.id,a=this.namespace,o=[];t=A(t);for(var s=-1,l=this.length;++s<l;){o.push(e=[]);for(var u=this[s],h=-1,c=u.length;++h<c;)(i=u[h])&&(n=t.call(i,i.__data__,h,s))?("__data__"in i&&(n.__data__=i.__data__),Ka(n,h,a,r,i[a][r]),e.push(n)):e.push(null)}return Za(o,a,r)},Hl.selectAll=function(t){var e,n,i,r,a,o=this.id,s=this.namespace,l=[];t=L(t);for(var u=-1,h=this.length;++u<h;)for(var c=this[u],f=-1,d=c.length;++f<d;)if(i=c[f]){a=i[s][o],n=t.call(i,i.__data__,f,u),l.push(e=[]);for(var p=-1,g=n.length;++p<g;)(r=n[p])&&Ka(r,p,s,o,a),e.push(r)}return Za(l,s,o)},Hl.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=X(t));for(var a=0,o=this.length;o>a;a++){r.push(e=[]);for(var n=this[a],s=0,l=n.length;l>s;s++)(i=n[s])&&t.call(i,i.__data__,s,a)&&e.push(i)}return Za(r,this.namespace,this.id)},Hl.tween=function(t,e){var n=this.id,i=this.namespace;return arguments.length<2?this.node()[i][n].tween.get(t):Y(this,null==e?function(e){e[i][n].tween.remove(t)}:function(r){r[i][n].tween.set(t,e)})},Hl.attr=function(t,e){function n(){this.removeAttribute(s)}function i(){this.removeAttributeNS(s.space,s.local)}function r(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(s);return n!==t&&(e=o(n,t),function(t){this.setAttribute(s,e(t))})})}function a(t){return null==t?i:(t+="",function(){var e,n=this.getAttributeNS(s.space,s.local);return n!==t&&(e=o(n,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var o="transform"==t?Gi:yi,s=so.ns.qualify(t);return $a(this,"attr."+t,e,s.local?a:r)},Hl.attrTween=function(t,e){function n(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}}function i(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}var r=so.ns.qualify(t);return this.tween("attr."+t,r.local?i:n)},Hl.style=function(t,n,i){function r(){this.style.removeProperty(t)}function a(n){return null==n?r:(n+="",function(){var r,a=e(this).getComputedStyle(this,null).getPropertyValue(t);return a!==n&&(r=yi(a,n),function(e){this.style.setProperty(t,r(e),i)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(n="");for(i in t)this.style(i,t[i],n);return this}i=""}return $a(this,"style."+t,n,a)},Hl.styleTween=function(t,n,i){function r(r,a){var o=n.call(this,r,a,e(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),i)}}return arguments.length<3&&(i=""),this.tween("style."+t,r)},Hl.text=function(t){return $a(this,"text",t,Qa)},Hl.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Hl.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=so.ease.apply(so,arguments)),Y(this,function(i){i[n][e].ease=t}))},Hl.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:Y(this,"function"==typeof t?function(i,r,a){i[n][e].delay=+t.call(i,i.__data__,r,a)}:(t=+t,function(i){i[n][e].delay=t}))},Hl.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:Y(this,"function"==typeof t?function(i,r,a){i[n][e].duration=Math.max(1,t.call(i,i.__data__,r,a))}:(t=Math.max(1,t),function(i){i[n][e].duration=t}))},Hl.each=function(t,e){var n=this.id,i=this.namespace;if(arguments.length<2){var r=Ol,a=Nl;try{Nl=n,Y(this,function(e,r,a){Ol=e[i][n],t.call(e,e.__data__,r,a)})}finally{Ol=r,Nl=a}}else Y(this,function(r){var a=r[i][n];(a.event||(a.event=so.dispatch("start","end","interrupt"))).on(t,e)});return this},Hl.transition=function(){for(var t,e,n,i,r=this.id,a=++Xl,o=this.namespace,s=[],l=0,u=this.length;u>l;l++){s.push(t=[]);for(var e=this[l],h=0,c=e.length;c>h;h++)(n=e[h])&&(i=n[o][r],Ka(n,h,o,a,{time:i.time,ease:i.ease,delay:i.delay+i.duration,duration:i.duration})),t.push(n)}return Za(s,o,a)},so.svg.axis=function(){function t(t){t.each(function(){var t,u=so.select(this),h=this.__chart__||n,c=this.__chart__=n.copy(),f=null==l?c.ticks?c.ticks.apply(c,s):c.domain():l,d=null==e?c.tickFormat?c.tickFormat.apply(c,s):x:e,p=u.selectAll(".tick").data(f,c),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",zo),v=so.transition(p.exit()).style("opacity",zo).remove(),m=so.transition(p.order()).style("opacity",1),y=Math.max(r,0)+o,b=jr(c),_=u.selectAll(".domain").data([0]),w=(_.enter().append("path").attr("class","domain"),so.transition(_));g.append("line"),g.append("text");var M,k,S,T,C=g.select("line"),A=m.select("line"),L=p.select("text").text(d),E=g.select("text"),F=m.select("text"),R="top"===i||"left"===i?-1:1;
if("bottom"===i||"top"===i?(t=to,M="x",S="y",k="x2",T="y2",L.attr("dy",0>R?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+b[0]+","+R*a+"V0H"+b[1]+"V"+R*a)):(t=eo,M="y",S="x",k="y2",T="x2",L.attr("dy",".32em").style("text-anchor",0>R?"end":"start"),w.attr("d","M"+R*a+","+b[0]+"H0V"+b[1]+"H"+R*a)),C.attr(T,R*r),E.attr(S,R*y),A.attr(k,0).attr(T,R*r),F.attr(M,0).attr(S,R*y),c.rangeBand){var P=c,z=P.rangeBand()/2;h=c=function(t){return P(t)+z}}else h.rangeBand?h=c:v.call(t,c,h);g.call(t,h,c),m.call(t,c,c)})}var e,n=so.scale.linear(),i=Wl,r=6,a=6,o=3,s=[10],l=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(i=e in Yl?e+"":Wl,t):i},t.ticks=function(){return arguments.length?(s=uo(arguments),t):s},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(r=+e,a=+arguments[n-1],t):r},t.innerTickSize=function(e){return arguments.length?(r=+e,t):r},t.outerTickSize=function(e){return arguments.length?(a=+e,t):a},t.tickPadding=function(e){return arguments.length?(o=+e,t):o},t.tickSubdivide=function(){return arguments.length&&t},t};var Wl="bottom",Yl={top:1,right:1,bottom:1,left:1};so.svg.brush=function(){function t(e){e.each(function(){var e=so.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),o=e.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=e.selectAll(".resize").data(g,x);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return jl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var l,c=so.transition(e),f=so.transition(o);u&&(l=jr(u),f.attr("x",l[0]).attr("width",l[1]-l[0]),i(c)),h&&(l=jr(h),f.attr("y",l[0]).attr("height",l[1]-l[0]),r(c)),n(c)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+c[+/e$/.test(t)]+","+f[+/^s/.test(t)]+")"})}function i(t){t.select(".extent").attr("x",c[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1]-c[0])}function r(t){t.select(".extent").attr("y",f[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function a(){function a(){32==so.event.keyCode&&(L||(y=null,F[0]-=c[1],F[1]-=f[1],L=2),k())}function g(){32==so.event.keyCode&&2==L&&(F[0]+=c[1],F[1]+=f[1],L=0,k())}function v(){var t=so.mouse(_),e=!1;b&&(t[0]+=b[0],t[1]+=b[1]),L||(so.event.altKey?(y||(y=[(c[0]+c[1])/2,(f[0]+f[1])/2]),F[0]=c[+(t[0]<y[0])],F[1]=f[+(t[1]<y[1])]):y=null),C&&m(t,u,0)&&(i(S),e=!0),A&&m(t,h,1)&&(r(S),e=!0),e&&(n(S),M({type:"brush",mode:L?"move":"resize"}))}function m(t,e,n){var i,r,a=jr(e),l=a[0],u=a[1],h=F[n],g=n?f:c,v=g[1]-g[0];return L&&(l-=h,u-=v+h),i=(n?p:d)?Math.max(l,Math.min(u,t[n])):t[n],L?r=(i+=h)+v:(y&&(h=Math.max(l,Math.min(u,2*y[n]-i))),i>h?(r=i,i=h):r=h),g[0]!=i||g[1]!=r?(n?s=null:o=null,g[0]=i,g[1]=r,!0):void 0}function x(){v(),S.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),so.select("body").style("cursor",null),R.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),M({type:"brushend"})}var y,b,_=this,w=so.select(so.event.target),M=l.of(_,arguments),S=so.select(_),T=w.datum(),C=!/^(n|s)$/.test(T)&&u,A=!/^(e|w)$/.test(T)&&h,L=w.classed("extent"),E=Z(_),F=so.mouse(_),R=so.select(e(_)).on("keydown.brush",a).on("keyup.brush",g);if(so.event.changedTouches?R.on("touchmove.brush",v).on("touchend.brush",x):R.on("mousemove.brush",v).on("mouseup.brush",x),S.interrupt().selectAll("*").interrupt(),L)F[0]=c[0]-F[0],F[1]=f[0]-F[1];else if(T){var P=+/w$/.test(T),z=+/^n/.test(T);b=[c[1-P]-F[0],f[1-z]-F[1]],F[0]=c[P],F[1]=f[z]}else so.event.altKey&&(y=F.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),so.select("body").style("cursor",w.style("cursor")),M({type:"brushstart"}),v()}var o,s,l=T(t,"brushstart","brush","brushend"),u=null,h=null,c=[0,0],f=[0,0],d=!0,p=!0,g=ql[0];return t.event=function(t){t.each(function(){var t=l.of(this,arguments),e={x:c,y:f,i:o,j:s},n=this.__chart__||e;this.__chart__=e,Nl?so.select(this).transition().each("start.brush",function(){o=n.i,s=n.j,c=n.x,f=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=bi(c,e.x),i=bi(f,e.y);return o=s=null,function(r){c=e.x=n(r),f=e.y=i(r),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(u=e,g=ql[!u<<1|!h],t):u},t.y=function(e){return arguments.length?(h=e,g=ql[!u<<1|!h],t):h},t.clamp=function(e){return arguments.length?(u&&h?(d=!!e[0],p=!!e[1]):u?d=!!e:h&&(p=!!e),t):u&&h?[d,p]:u?d:h?p:null},t.extent=function(e){var n,i,r,a,l;return arguments.length?(u&&(n=e[0],i=e[1],h&&(n=n[0],i=i[0]),o=[n,i],u.invert&&(n=u(n),i=u(i)),n>i&&(l=n,n=i,i=l),(n!=c[0]||i!=c[1])&&(c=[n,i])),h&&(r=e[0],a=e[1],u&&(r=r[1],a=a[1]),s=[r,a],h.invert&&(r=h(r),a=h(a)),r>a&&(l=r,r=a,a=l),(r!=f[0]||a!=f[1])&&(f=[r,a])),t):(u&&(o?(n=o[0],i=o[1]):(n=c[0],i=c[1],u.invert&&(n=u.invert(n),i=u.invert(i)),n>i&&(l=n,n=i,i=l))),h&&(s?(r=s[0],a=s[1]):(r=f[0],a=f[1],h.invert&&(r=h.invert(r),a=h.invert(a)),r>a&&(l=r,r=a,a=l))),u&&h?[[n,r],[i,a]]:u?[n,i]:h&&[r,a])},t.clear=function(){return t.empty()||(c=[0,0],f=[0,0],o=s=null),t},t.empty=function(){return!!u&&c[0]==c[1]||!!h&&f[0]==f[1]},so.rebind(t,l,"on")};var jl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ql=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Vl=cs.format=ms.timeFormat,Gl=Vl.utc,Ul=Gl("%Y-%m-%dT%H:%M:%S.%LZ");Vl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?no:Ul,no.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},no.toString=Ul.toString,cs.second=Ht(function(t){return new fs(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),cs.seconds=cs.second.range,cs.seconds.utc=cs.second.utc.range,cs.minute=Ht(function(t){return new fs(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),cs.minutes=cs.minute.range,cs.minutes.utc=cs.minute.utc.range,cs.hour=Ht(function(t){var e=t.getTimezoneOffset()/60;return new fs(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),cs.hours=cs.hour.range,cs.hours.utc=cs.hour.utc.range,cs.month=Ht(function(t){return t=cs.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),cs.months=cs.month.range,cs.months.utc=cs.month.utc.range;var Zl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],$l=[[cs.second,1],[cs.second,5],[cs.second,15],[cs.second,30],[cs.minute,1],[cs.minute,5],[cs.minute,15],[cs.minute,30],[cs.hour,1],[cs.hour,3],[cs.hour,6],[cs.hour,12],[cs.day,1],[cs.day,2],[cs.week,1],[cs.month,1],[cs.month,3],[cs.year,1]],Ql=Vl.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Le]]),Jl={range:function(t,e,n){return so.range(Math.ceil(t/n)*n,+e,n).map(ro)},floor:x,ceil:x};$l.year=cs.year,cs.scale=function(){return io(so.scale.linear(),$l,Ql)};var Kl=$l.map(function(t){return[t[0].utc,t[1]]}),tu=Gl.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Le]]);Kl.year=cs.year.utc,cs.scale.utc=function(){return io(so.scale.linear(),Kl,tu)},so.text=Ct(function(t){return t.responseText}),so.json=function(t,e){return At(t,"application/json",ao,e)},so.html=function(t,e){return At(t,"text/html",oo,e)},so.xml=Ct(function(t){return t.responseXML}),"function"==typeof define&&define.amd?(this.d3=so,define(so)):"object"==typeof module&&module.exports?module.exports=so:this.d3=so}(),!function(t){"use strict";function e(t){this.owner=t}function n(t,e){if(Object.create)e.prototype=Object.create(t.prototype);else{var n=function(){};n.prototype=t.prototype,e.prototype=new n}return e.prototype.constructor=e,e}function i(t){var e=this.internal=new r(this);e.loadConfig(t),e.beforeInit(t),e.init(),e.afterInit(t),function t(e,n,i){Object.keys(e).forEach(function(r){n[r]=e[r].bind(i),Object.keys(e[r]).length>0&&t(e[r],n[r],i)})}(s,this,this)}function r(e){var n=this;n.d3=t.d3?t.d3:"undefined"!=typeof require?require("d3"):void 0,n.api=e,n.config=n.getDefaultConfig(),n.data={},n.cache={},n.axes={}}function a(t){e.call(this,t)}function o(t,e){function n(t,e){t.attr("transform",function(t){return"translate("+Math.ceil(e(t)+b)+", 0)"})}function i(t,e){t.attr("transform",function(t){return"translate(0,"+Math.ceil(e(t))+")"})}function r(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function a(t){var e,n,i=[];if(t.ticks)return t.ticks.apply(t,d);for(n=t.domain(),e=Math.ceil(n[0]);e<n[1];e++)i.push(e);return i.length>0&&i[0]>0&&i.unshift(i[0]-(i[1]-i[0])),i}function o(){var t,n=g.copy();return e.isCategory&&(t=g.domain(),n.domain([t[0],t[1]-1])),n}function s(t){var e=f?f(t):t;return"undefined"!=typeof e?e:""}function l(t){if(S)return S;var e={h:11.5,w:5.5};return t.select("text").text(s).each(function(t){var n=this.getBoundingClientRect(),i=s(t),r=n.height,a=i?n.width/i.length:void 0;r&&a&&(e.h=r,e.w=a)}).text(""),S=e,e}function u(n){return e.withoutTransition?n:t.transition(n)}function h(f){f.each(function(){function f(t,n){function i(t,e){a=void 0;for(var s=1;s<e.length;s++)if(" "===e.charAt(s)&&(a=s),r=e.substr(0,s+1),o=V.w*r.length,o>n)return i(t.concat(e.substr(0,a?a:s)),e.slice(a?a+1:s));return t.concat(e)}var r,a,o,l=s(t),u=[];return"[object Array]"===Object.prototype.toString.call(l)?l:((!n||0>=n)&&(n=Z?95:e.isCategory?Math.ceil(F(R[1])-F(R[0]))-12:110),i(u,l+""))}function d(t,e){var n=V.h;return 0===e&&(n="left"===v||"right"===v?-((G[t.index]-1)*(V.h/2)-3):".71em"),n}function _(t){var e=g(t)+(p?0:b);return N[0]<e&&e<N[1]?m:0}function w(t){return t?t>0?"start":"end":"middle"}function M(t){return t?"rotate("+t+")":""}function k(t){return t?8*Math.sin(Math.PI*(t/180)):0}function S(t){return t?11.5-2.5*(t/15)*(t>0?1:-1):U}var T,C,A,L=h.g=t.select(this),E=this.__chart__||g,F=this.__chart__=o(),R=y?y:a(F),P=L.selectAll(".tick").data(R,F),z=P.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),D=P.exit().remove(),I=u(P).style("opacity",1),N=g.rangeExtent?g.rangeExtent():r(g.range()),O=L.selectAll(".domain").data([0]),B=(O.enter().append("path").attr("class","domain"),u(O));z.append("line"),z.append("text");var H=z.select("line"),X=I.select("line"),W=z.select("text"),Y=I.select("text");e.isCategory?(b=Math.ceil((F(1)-F(0))/2),C=p?0:b,A=p?b:0):b=C=0;var j,q,V=l(L.select(".tick")),G=[],U=Math.max(m,0)+x,Z="left"===v||"right"===v;j=P.select("text"),q=j.selectAll("tspan").data(function(t,n){var i=e.tickMultiline?f(t,e.tickWidth):[].concat(s(t));return G[n]=i.length,i.map(function(t){return{index:n,splitted:t}})}),q.enter().append("tspan"),q.exit().remove(),q.text(function(t){return t.splitted});var $=e.tickTextRotate;switch(v){case"bottom":T=n,H.attr("y2",m),W.attr("y",U),X.attr("x1",C).attr("x2",C).attr("y2",_),Y.attr("x",0).attr("y",S($)).style("text-anchor",w($)).attr("transform",M($)),q.attr("x",0).attr("dy",d).attr("dx",k($)),B.attr("d","M"+N[0]+","+c+"V0H"+N[1]+"V"+c);break;case"top":T=n,H.attr("y2",-m),W.attr("y",-U),X.attr("x2",0).attr("y2",-m),Y.attr("x",0).attr("y",-U),j.style("text-anchor","middle"),q.attr("x",0).attr("dy","0em"),B.attr("d","M"+N[0]+","+-c+"V0H"+N[1]+"V"+-c);break;case"left":T=i,H.attr("x2",-m),W.attr("x",-U),X.attr("x2",-m).attr("y1",A).attr("y2",A),Y.attr("x",-U).attr("y",b),j.style("text-anchor","end"),q.attr("x",-U).attr("dy",d),B.attr("d","M"+-c+","+N[0]+"H0V"+N[1]+"H"+-c);break;case"right":T=i,H.attr("x2",m),W.attr("x",U),X.attr("x2",m).attr("y2",0),Y.attr("x",U).attr("y",0),j.style("text-anchor","start"),q.attr("x",U).attr("dy",d),B.attr("d","M"+c+","+N[0]+"H0V"+N[1]+"H"+c)}if(F.rangeBand){var Q=F,J=Q.rangeBand()/2;E=F=function(t){return Q(t)+J}}else E.rangeBand?E=F:D.call(T,F);z.call(T,E),I.call(T,F)})}var c,f,d,p,g=t.scale.linear(),v="bottom",m=6,x=3,y=null,b=0,_=!0;return e=e||{},c=e.withOuterTick?6:0,h.scale=function(t){return arguments.length?(g=t,h):g},h.orient=function(t){return arguments.length?(v=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",h):v},h.tickFormat=function(t){return arguments.length?(f=t,h):f},h.tickCentered=function(t){return arguments.length?(p=t,h):p},h.tickOffset=function(){return b},h.tickInterval=function(){var t,n;return e.isCategory?t=2*b:(n=h.g.select("path.domain").node().getTotalLength()-2*c,t=n/h.g.selectAll("line").size()),t===1/0?0:t},h.ticks=function(){return arguments.length?(d=arguments,h):d},h.tickCulling=function(t){return arguments.length?(_=t,h):_},h.tickValues=function(t){if("function"==typeof t)y=function(){return t(g.domain())};else{if(!arguments.length)return y;y=t}return h},h}var s,l,u,h={version:"0.4.11-rc4"};h.generate=function(t){return new i(t)},h.chart={fn:i.prototype,internal:{fn:r.prototype,axis:{fn:a.prototype}}},s=h.chart.fn,l=h.chart.internal.fn,u=h.chart.internal.axis.fn,l.beforeInit=function(){},l.afterInit=function(){},l.init=function(){var t=this,e=t.config;if(t.initParams(),e.data_url)t.convertUrlToData(e.data_url,e.data_mimeType,e.data_keys,t.initWithData);else if(e.data_json)t.initWithData(t.convertJsonToData(e.data_json,e.data_keys));else if(e.data_rows)t.initWithData(t.convertRowsToData(e.data_rows));else{if(!e.data_columns)throw Error("url or json or rows or columns is required.");t.initWithData(t.convertColumnsToData(e.data_columns))}},l.initParams=function(){var t=this,e=t.d3,n=t.config;t.clipId="c3-"+ +new Date+"-clip",t.clipIdForXAxis=t.clipId+"-xaxis",t.clipIdForYAxis=t.clipId+"-yaxis",t.clipIdForGrid=t.clipId+"-grid",t.clipIdForSubchart=t.clipId+"-subchart",t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid),t.clipPathForSubchart=t.getClipPath(t.clipIdForSubchart),t.dragStart=null,t.dragging=!1,t.flowing=!1,t.cancelClick=!1,t.mouseover=!1,t.transiting=!1,t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),t.dataTimeFormat=n.data_xLocaltime?e.time.format:e.time.format.utc,t.axisTimeFormat=n.axis_x_localtime?e.time.format:e.time.format.utc,t.defaultAxisTimeFormat=t.axisTimeFormat.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%-m/%-d",function(t){return t.getDay()&&1!==t.getDate()}],["%-m/%-d",function(t){return 1!==t.getDate()}],["%-m/%-d",function(t){return t.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),t.hiddenTargetIds=[],t.hiddenLegendIds=[],t.focusedTargetIds=[],t.defocusedTargetIds=[],t.xOrient=n.axis_rotated?"left":"bottom",t.yOrient=n.axis_rotated?n.axis_y_inner?"top":"bottom":n.axis_y_inner?"right":"left",t.y2Orient=n.axis_rotated?n.axis_y2_inner?"bottom":"top":n.axis_y2_inner?"left":"right",t.subXOrient=n.axis_rotated?"left":"bottom",t.isLegendRight="right"===n.legend_position,t.isLegendInset="inset"===n.legend_position,t.isLegendTop="top-left"===n.legend_inset_anchor||"top-right"===n.legend_inset_anchor,t.isLegendLeft="top-left"===n.legend_inset_anchor||"bottom-left"===n.legend_inset_anchor,t.legendStep=0,t.legendItemWidth=0,t.legendItemHeight=0,t.currentMaxTickWidths={x:0,y:0,y2:0},t.rotated_padding_left=30,t.rotated_padding_right=n.axis_rotated&&!n.axis_x_show?0:30,t.rotated_padding_top=5,t.withoutFadeIn={},t.intervalForObserveInserted=void 0,t.axes.subx=e.selectAll([])},l.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},l.initWithData=function(t){var e,n,i=this,r=i.d3,o=i.config,s=!0;i.axis=new a(i),i.initPie&&i.initPie(),i.initBrush&&i.initBrush(),i.initZoom&&i.initZoom(),o.bindto?"function"==typeof o.bindto.node?i.selectChart=o.bindto:i.selectChart=r.select(o.bindto):i.selectChart=r.selectAll([]),i.selectChart.empty()&&(i.selectChart=r.select(document.createElement("div")).style("opacity",0),i.observeInserted(i.selectChart),s=!1),i.selectChart.html("").classed("c3",!0),i.data.xs={},i.data.targets=i.convertDataToTargets(t),o.data_filter&&(i.data.targets=i.data.targets.filter(o.data_filter)),o.data_hide&&i.addHiddenTargetIds(o.data_hide===!0?i.mapToIds(i.data.targets):o.data_hide),o.legend_hide&&i.addHiddenLegendIds(o.legend_hide===!0?i.mapToIds(i.data.targets):o.legend_hide),i.hasType("gauge")&&(o.legend_show=!1),i.updateSizes(),i.updateScales(),i.x.domain(r.extent(i.getXDomain(i.data.targets))),i.y.domain(i.getYDomain(i.data.targets,"y")),i.y2.domain(i.getYDomain(i.data.targets,"y2")),i.subX.domain(i.x.domain()),i.subY.domain(i.y.domain()),i.subY2.domain(i.y2.domain()),i.orgXDomain=i.x.domain(),i.brush&&i.brush.scale(i.subX),o.zoom_enabled&&i.zoom.scale(i.x),i.svg=i.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return o.onmouseover.call(i)}).on("mouseleave",function(){return o.onmouseout.call(i)}),i.config.svg_classname&&i.svg.attr("class",i.config.svg_classname),e=i.svg.append("defs"),i.clipChart=i.appendClip(e,i.clipId),i.clipXAxis=i.appendClip(e,i.clipIdForXAxis),i.clipYAxis=i.appendClip(e,i.clipIdForYAxis),i.clipGrid=i.appendClip(e,i.clipIdForGrid),i.clipSubchart=i.appendClip(e,i.clipIdForSubchart),i.updateSvgSize(),n=i.main=i.svg.append("g").attr("transform",i.getTranslate("main")),i.initSubchart&&i.initSubchart(),i.initTooltip&&i.initTooltip(),i.initLegend&&i.initLegend(),i.initTitle&&i.initTitle(),n.append("text").attr("class",c.text+" "+c.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),i.initRegion(),i.initGrid(),n.append("g").attr("clip-path",i.clipPath).attr("class",c.chart),o.grid_lines_front&&i.initGridLines(),i.initEventRect(),i.initChartElements(),n.insert("rect",o.zoom_privileged?null:"g."+c.regions).attr("class",c.zoomRect).attr("width",i.width).attr("height",i.height).style("opacity",0).on("dblclick.zoom",null),o.axis_x_extent&&i.brush.extent(i.getDefaultExtent()),i.axis.init(),i.updateTargets(i.data.targets),s&&(i.updateDimension(),i.config.oninit.call(i),i.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),i.bindResize(),i.api.element=i.selectChart.node()},l.smoothLines=function(t,e){var n=this;"grid"===e&&t.each(function(){var t=n.d3.select(this),e=t.attr("x1"),i=t.attr("x2"),r=t.attr("y1"),a=t.attr("y2");t.attr({x1:Math.ceil(e),x2:Math.ceil(i),y1:Math.ceil(r),y2:Math.ceil(a)})})},l.updateSizes=function(){var t=this,e=t.config,n=t.legend?t.getLegendHeight():0,i=t.legend?t.getLegendWidth():0,r=t.isLegendRight||t.isLegendInset?0:n,a=t.hasArcType(),o=e.axis_rotated||a?0:t.getHorizontalAxisHeight("x"),s=e.subchart_show&&!a?e.subchart_size_height+o:0;t.currentWidth=t.getCurrentWidth(),t.currentHeight=t.getCurrentHeight(),t.margin=e.axis_rotated?{top:t.getHorizontalAxisHeight("y2")+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:t.getHorizontalAxisHeight("y")+r+t.getCurrentPaddingBottom(),left:s+(a?0:t.getCurrentPaddingLeft())}:{top:4+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:o+s+r+t.getCurrentPaddingBottom(),left:a?0:t.getCurrentPaddingLeft()},t.margin2=e.axis_rotated?{top:t.margin.top,right:NaN,bottom:20+r,left:t.rotated_padding_left}:{top:t.currentHeight-s-r,right:NaN,bottom:o+r,left:t.margin.left},t.margin3={top:0,right:NaN,bottom:0,left:0},t.updateSizeForLegend&&t.updateSizeForLegend(n,i),t.width=t.currentWidth-t.margin.left-t.margin.right,t.height=t.currentHeight-t.margin.top-t.margin.bottom,t.width<0&&(t.width=0),t.height<0&&(t.height=0),t.width2=e.axis_rotated?t.margin.left-t.rotated_padding_left-t.rotated_padding_right:t.width,t.height2=e.axis_rotated?t.height:t.currentHeight-t.margin2.top-t.margin2.bottom,t.width2<0&&(t.width2=0),t.height2<0&&(t.height2=0),t.arcWidth=t.width-(t.isLegendRight?i+10:0),t.arcHeight=t.height-(t.isLegendRight?0:10),t.hasType("gauge")&&(t.arcHeight+=t.height-t.getGaugeLabelHeight()),t.updateRadius&&t.updateRadius(),t.isLegendRight&&a&&(t.margin3.left=t.arcWidth/2+1.1*t.radiusExpanded)},l.updateTargets=function(t){var e=this;e.updateTargetsForText(t),e.updateTargetsForBar(t),e.updateTargetsForLine(t),e.hasArcType()&&e.updateTargetsForArc&&e.updateTargetsForArc(t),e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t),e.showTargets()},l.showTargets=function(){var t=this;t.svg.selectAll("."+c.target).filter(function(e){return t.isTargetToShow(e.id)}).transition().duration(t.config.transition_duration).style("opacity",1)},l.redraw=function(t,e){var n,i,r,a,o,s,l,u,h,f,d,p,g,v,m,x,y,b,_,M,k,S,T,C,A,L,E,F,R,P=this,z=P.main,D=P.d3,I=P.config,N=P.getShapeIndices(P.isAreaType),O=P.getShapeIndices(P.isBarType),B=P.getShapeIndices(P.isLineType),H=P.hasArcType(),X=P.filterTargetsToShow(P.data.targets),W=P.xv.bind(P);if(t=t||{},n=w(t,"withY",!0),i=w(t,"withSubchart",!0),r=w(t,"withTransition",!0),s=w(t,"withTransform",!1),l=w(t,"withUpdateXDomain",!1),u=w(t,"withUpdateOrgXDomain",!1),h=w(t,"withTrimXDomain",!0),g=w(t,"withUpdateXAxis",l),f=w(t,"withLegend",!1),d=w(t,"withEventRect",!0),p=w(t,"withDimension",!0),a=w(t,"withTransitionForExit",r),o=w(t,"withTransitionForAxis",r),_=r?I.transition_duration:0,M=a?_:0,k=o?_:0,e=e||P.axis.generateTransitions(k),f&&I.legend_show?P.updateLegend(P.mapToIds(P.data.targets),t,e):p&&P.updateDimension(!0),P.isCategorized()&&0===X.length&&P.x.domain([0,P.axes.x.selectAll(".tick").size()]),X.length?(P.updateXDomain(X,l,u,h),I.axis_x_tick_values||(C=P.axis.updateXAxisTickValues(X))):(P.xAxis.tickValues([]),P.subXAxis.tickValues([])),I.zoom_rescale&&!t.flow&&(E=P.x.orgDomain()),P.y.domain(P.getYDomain(X,"y",E)),P.y2.domain(P.getYDomain(X,"y2",E)),!I.axis_y_tick_values&&I.axis_y_tick_count&&P.yAxis.tickValues(P.axis.generateTickValues(P.y.domain(),I.axis_y_tick_count)),!I.axis_y2_tick_values&&I.axis_y2_tick_count&&P.y2Axis.tickValues(P.axis.generateTickValues(P.y2.domain(),I.axis_y2_tick_count)),P.axis.redraw(e,H),P.axis.updateLabels(r),(l||g)&&X.length)if(I.axis_x_tick_culling&&C){for(A=1;A<C.length;A++)if(C.length/A<I.axis_x_tick_culling_max){L=A;break}P.svg.selectAll("."+c.axisX+" .tick text").each(function(t){var e=C.indexOf(t);e>=0&&D.select(this).style("display",e%L?"none":"block")})}else P.svg.selectAll("."+c.axisX+" .tick text").style("display","block");v=P.generateDrawArea?P.generateDrawArea(N,!1):void 0,m=P.generateDrawBar?P.generateDrawBar(O):void 0,x=P.generateDrawLine?P.generateDrawLine(B,!1):void 0,y=P.generateXYForText(N,O,B,!0),b=P.generateXYForText(N,O,B,!1),n&&(P.subY.domain(P.getYDomain(X,"y")),P.subY2.domain(P.getYDomain(X,"y2"))),P.updateXgridFocus(),z.select("text."+c.text+"."+c.empty).attr("x",P.width/2).attr("y",P.height/2).text(I.data_empty_label_text).transition().style("opacity",X.length?0:1),P.updateGrid(_),P.updateRegion(_),P.updateBar(M),P.updateLine(M),P.updateArea(M),P.updateCircle(),P.hasDataLabel()&&P.updateText(M),P.redrawTitle&&P.redrawTitle(),P.redrawArc&&P.redrawArc(_,M,s),P.redrawSubchart&&P.redrawSubchart(i,e,_,M,N,O,B),z.selectAll("."+c.selectedCircles).filter(P.isBarType.bind(P)).selectAll("circle").remove(),I.interaction_enabled&&!t.flow&&d&&(P.redrawEventRect(),P.updateZoom&&P.updateZoom()),P.updateCircleY(),F=(P.config.axis_rotated?P.circleY:P.circleX).bind(P),R=(P.config.axis_rotated?P.circleX:P.circleY).bind(P),t.flow&&(T=P.generateFlow({targets:X,flow:t.flow,duration:t.flow.duration,drawBar:m,drawLine:x,drawArea:v,cx:F,cy:R,xv:W,xForText:y,yForText:b})),(_||T)&&P.isTabVisible()?D.transition().duration(_).each(function(){var e=[];[P.redrawBar(m,!0),P.redrawLine(x,!0),P.redrawArea(v,!0),P.redrawCircle(F,R,!0),P.redrawText(y,b,t.flow,!0),P.redrawRegion(!0),P.redrawGrid(!0)].forEach(function(t){t.forEach(function(t){e.push(t)})}),S=P.generateWait(),e.forEach(function(t){S.add(t)})}).call(S,function(){T&&T(),I.onrendered&&I.onrendered.call(P)}):(P.redrawBar(m),P.redrawLine(x),P.redrawArea(v),P.redrawCircle(F,R),P.redrawText(y,b,t.flow),P.redrawRegion(),P.redrawGrid(),I.onrendered&&I.onrendered.call(P)),P.mapToIds(P.data.targets).forEach(function(t){P.withoutFadeIn[t]=!0})},l.updateAndRedraw=function(t){var e,n=this,i=n.config;t=t||{},t.withTransition=w(t,"withTransition",!0),t.withTransform=w(t,"withTransform",!1),t.withLegend=w(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=w(t,"withTransitionForTransform",t.withTransition),n.updateSizes(),t.withLegend&&i.legend_show||(e=n.axis.generateTransitions(t.withTransitionForAxis?i.transition_duration:0),n.updateScales(),n.updateSvgSize(),n.transformAll(t.withTransitionForTransform,e)),n.redraw(t,e)},l.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},l.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},l.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},l.isCustomX=function(){var t=this,e=t.config;return!t.isTimeSeries()&&(e.data_x||_(e.data_xs))},l.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},l.getTranslate=function(t){var e,n,i=this,r=i.config;return"main"===t?(e=x(i.margin.left),n=x(i.margin.top)):"context"===t?(e=x(i.margin2.left),n=x(i.margin2.top)):"legend"===t?(e=i.margin3.left,n=i.margin3.top):"x"===t?(e=0,n=r.axis_rotated?0:i.height):"y"===t?(e=0,n=r.axis_rotated?i.height:0):"y2"===t?(e=r.axis_rotated?0:i.width,n=r.axis_rotated?1:0):"subx"===t?(e=0,n=r.axis_rotated?0:i.height2):"arc"===t&&(e=i.arcWidth/2,n=i.arcHeight/2),"translate("+e+","+n+")"},l.initialOpacity=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?1:0},l.initialOpacityForCircle=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):0},l.opacityForCircle=function(t){var e=this.config.point_show?1:0;return f(t.value)?this.isScatterType(t)?.5:e:0},l.opacityForText=function(){return this.hasDataLabel()?1:0},l.xx=function(t){return t?this.x(t.x):null},l.xv=function(t){var e=this,n=t.value;return e.isTimeSeries()?n=e.parseDate(t.value):e.isCategorized()&&"string"==typeof t.value&&(n=e.config.axis_x_categories.indexOf(t.value)),Math.ceil(e.x(n))},l.yv=function(t){var e=this,n=t.axis&&"y2"===t.axis?e.y2:e.y;return Math.ceil(n(t.value))},l.subxx=function(t){return t?this.subX(t.x):null},l.transformMain=function(t,e){var n,i,r,a=this;e&&e.axisX?n=e.axisX:(n=a.main.select("."+c.axisX),t&&(n=n.transition())),e&&e.axisY?i=e.axisY:(i=a.main.select("."+c.axisY),t&&(i=i.transition())),e&&e.axisY2?r=e.axisY2:(r=a.main.select("."+c.axisY2),t&&(r=r.transition())),(t?a.main.transition():a.main).attr("transform",a.getTranslate("main")),n.attr("transform",a.getTranslate("x")),i.attr("transform",a.getTranslate("y")),r.attr("transform",a.getTranslate("y2")),a.main.select("."+c.chartArcs).attr("transform",a.getTranslate("arc"))},l.transformAll=function(t,e){var n=this;n.transformMain(t,e),n.config.subchart_show&&n.transformContext(t,e),n.legend&&n.transformLegend(t)},l.updateSvgSize=function(){var t=this,e=t.svg.select(".c3-brush .background");t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#"+t.clipId,"#"+t.clipIdForGrid]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#"+t.clipIdForXAxis).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForYAxis).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForSubchart).select("rect").attr("width",t.width).attr("height",e.size()?e.attr("height"):0),t.svg.select("."+c.zoomRect).attr("width",t.width).attr("height",t.height),t.selectChart.style("max-height",t.currentHeight+"px")},l.updateDimension=function(t){var e=this;t||(e.config.axis_rotated?(e.axes.x.call(e.xAxis),e.axes.subx.call(e.subXAxis)):(e.axes.y.call(e.yAxis),e.axes.y2.call(e.y2Axis))),e.updateSizes(),e.updateScales(),e.updateSvgSize(),e.transformAll(!1)},l.observeInserted=function(e){var n,i=this;return"undefined"==typeof MutationObserver?void t.console.error("MutationObserver not defined."):(n=new MutationObserver(function(r){r.forEach(function(r){"childList"===r.type&&r.previousSibling&&(n.disconnect(),i.intervalForObserveInserted=t.setInterval(function(){e.node().parentNode&&(t.clearInterval(i.intervalForObserveInserted),i.updateDimension(),i.brush&&i.brush.update(),i.config.oninit.call(i),i.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),e.transition().style("opacity",1))},10))})}),void n.observe(e.node(),{attributes:!0,childList:!0,characterData:!0}))},l.bindResize=function(){var e=this,n=e.config;if(e.resizeFunction=e.generateResize(),e.resizeFunction.add(function(){n.onresize.call(e)}),n.resize_auto&&e.resizeFunction.add(function(){void 0!==e.resizeTimeout&&t.clearTimeout(e.resizeTimeout),e.resizeTimeout=t.setTimeout(function(){delete e.resizeTimeout,e.api.flush()},100)}),e.resizeFunction.add(function(){n.onresized.call(e)}),t.attachEvent)t.attachEvent("onresize",e.resizeFunction);else if(t.addEventListener)t.addEventListener("resize",e.resizeFunction,!1);else{var i=t.onresize;i?i.add&&i.remove||(i=e.generateResize(),i.add(t.onresize)):i=e.generateResize(),i.add(e.resizeFunction),t.onresize=i}},l.generateResize=function(){function t(){e.forEach(function(t){t()})}var e=[];return t.add=function(t){e.push(t)},t.remove=function(t){for(var n=0;n<e.length;n++)if(e[n]===t){e.splice(n,1);break}},t},l.endall=function(t,e){var n=0;t.each(function(){++n}).each("end",function(){--n||e.apply(this,arguments)})},l.generateWait=function(){var t=[],e=function(e,n){var i=setInterval(function(){var e=0;t.forEach(function(t){if(t.empty())return void(e+=1);try{t.transition()}catch(t){e+=1}}),e===t.length&&(clearInterval(i),n&&n())},10)};return e.add=function(e){t.push(e)},e},l.parseDate=function(e){var n,i=this;return e instanceof Date?n=e:"string"==typeof e?n=i.dataTimeFormat(i.config.data_xFormat).parse(e):"number"!=typeof e||isNaN(e)||(n=new Date(+e)),(!n||isNaN(+n))&&t.console.error("Failed to parse x '"+e+"' to Date object"),n},l.isTabVisible=function(){var t;return"undefined"!=typeof document.hidden?t="hidden":"undefined"!=typeof document.mozHidden?t="mozHidden":"undefined"!=typeof document.msHidden?t="msHidden":"undefined"!=typeof document.webkitHidden&&(t="webkitHidden"),!document[t]},l.getDefaultConfig=function(){var t={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(t){return t},data_names:{},
data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_expand:{},pie_expand_duration:50,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(t,e,n,i){return this.getTooltipContent?this.getTooltipContent(t,e,n,i):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(e){t[e]=this.additionalConfig[e]},this),t},l.additionalConfig={},l.loadConfig=function(t){function e(){var t=i.shift();return t&&n&&"object"==typeof n&&t in n?(n=n[t],e()):t?void 0:n}var n,i,r,a=this.config;Object.keys(a).forEach(function(o){n=t,i=o.split("_"),r=e(),v(r)&&(a[o]=r)})},l.getScale=function(t,e,n){return(n?this.d3.time.scale():this.d3.scale.linear()).range([t,e])},l.getX=function(t,e,n,i){var r,a=this,o=a.getScale(t,e,a.isTimeSeries()),s=n?o.domain(n):o;a.isCategorized()?(i=i||function(){return 0},o=function(t,e){var n=s(t)+i(t);return e?n:Math.ceil(n)}):o=function(t,e){var n=s(t);return e?n:Math.ceil(n)};for(r in s)o[r]=s[r];return o.orgDomain=function(){return s.domain()},a.isCategorized()&&(o.domain=function(t){return arguments.length?(s.domain(t),o):(t=this.orgDomain(),[t[0],t[1]+1])}),o},l.getY=function(t,e,n){var i=this.getScale(t,e,this.isTimeSeriesY());return n&&i.domain(n),i},l.getYScale=function(t){return"y2"===this.axis.getId(t)?this.y2:this.y},l.getSubYScale=function(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},l.updateScales=function(){var t=this,e=t.config,n=!t.x;t.xMin=e.axis_rotated?1:0,t.xMax=e.axis_rotated?t.height:t.width,t.yMin=e.axis_rotated?0:t.height,t.yMax=e.axis_rotated?t.width:1,t.subXMin=t.xMin,t.subXMax=t.xMax,t.subYMin=e.axis_rotated?0:t.height2,t.subYMax=e.axis_rotated?t.width2:1,t.x=t.getX(t.xMin,t.xMax,n?void 0:t.x.orgDomain(),function(){return t.xAxis.tickOffset()}),t.y=t.getY(t.yMin,t.yMax,n?e.axis_y_default:t.y.domain()),t.y2=t.getY(t.yMin,t.yMax,n?e.axis_y2_default:t.y2.domain()),t.subX=t.getX(t.xMin,t.xMax,t.orgXDomain,function(e){return e%1?0:t.subXAxis.tickOffset()}),t.subY=t.getY(t.subYMin,t.subYMax,n?e.axis_y_default:t.subY.domain()),t.subY2=t.getY(t.subYMin,t.subYMax,n?e.axis_y2_default:t.subY2.domain()),t.xAxisTickFormat=t.axis.getXAxisTickFormat(),t.xAxisTickValues=t.axis.getXAxisTickValues(),t.yAxisTickValues=t.axis.getYAxisTickValues(),t.y2AxisTickValues=t.axis.getY2AxisTickValues(),t.xAxis=t.axis.getXAxis(t.x,t.xOrient,t.xAxisTickFormat,t.xAxisTickValues,e.axis_x_tick_outer),t.subXAxis=t.axis.getXAxis(t.subX,t.subXOrient,t.xAxisTickFormat,t.xAxisTickValues,e.axis_x_tick_outer),t.yAxis=t.axis.getYAxis(t.y,t.yOrient,e.axis_y_tick_format,t.yAxisTickValues,e.axis_y_tick_outer),t.y2Axis=t.axis.getYAxis(t.y2,t.y2Orient,e.axis_y2_tick_format,t.y2AxisTickValues,e.axis_y2_tick_outer),n||(t.brush&&t.brush.scale(t.subX),e.zoom_enabled&&t.zoom.scale(t.x)),t.updateArc&&t.updateArc()},l.getYDomainMin=function(t){var e,n,i,r,a,o,s=this,l=s.config,u=s.mapToIds(t),h=s.getValuesAsIdKeyed(t);if(l.data_groups.length>0)for(o=s.hasNegativeValueInTargets(t),e=0;e<l.data_groups.length;e++)if(r=l.data_groups[e].filter(function(t){return u.indexOf(t)>=0}),0!==r.length)for(i=r[0],o&&h[i]&&h[i].forEach(function(t,e){h[i][e]=0>t?t:0}),n=1;n<r.length;n++)a=r[n],h[a]&&h[a].forEach(function(t,e){s.axis.getId(a)!==s.axis.getId(i)||!h[i]||o&&+t>0||(h[i][e]+=+t)});return s.d3.min(Object.keys(h).map(function(t){return s.d3.min(h[t])}))},l.getYDomainMax=function(t){var e,n,i,r,a,o,s=this,l=s.config,u=s.mapToIds(t),h=s.getValuesAsIdKeyed(t);if(l.data_groups.length>0)for(o=s.hasPositiveValueInTargets(t),e=0;e<l.data_groups.length;e++)if(r=l.data_groups[e].filter(function(t){return u.indexOf(t)>=0}),0!==r.length)for(i=r[0],o&&h[i]&&h[i].forEach(function(t,e){h[i][e]=t>0?t:0}),n=1;n<r.length;n++)a=r[n],h[a]&&h[a].forEach(function(t,e){s.axis.getId(a)!==s.axis.getId(i)||!h[i]||o&&0>+t||(h[i][e]+=+t)});return s.d3.max(Object.keys(h).map(function(t){return s.d3.max(h[t])}))},l.getYDomain=function(t,e,n){var i,r,a,o,s,l,u,h,c,d,p,g=this,v=g.config,m=t.filter(function(t){return g.axis.getId(t.id)===e}),x=n?g.filterByXDomain(m,n):m,b="y2"===e?v.axis_y2_min:v.axis_y_min,w="y2"===e?v.axis_y2_max:v.axis_y_max,M=g.getYDomainMin(x),k=g.getYDomainMax(x),S="y2"===e?v.axis_y2_center:v.axis_y_center,T=g.hasType("bar",x)&&v.bar_zerobased||g.hasType("area",x)&&v.area_zerobased,C="y2"===e?v.axis_y2_inverted:v.axis_y_inverted,A=g.hasDataLabel()&&v.axis_rotated,L=g.hasDataLabel()&&!v.axis_rotated;return M=f(b)?b:f(w)?w>M?M:w-10:M,k=f(w)?w:f(b)?k>b?k:b+10:k,0===x.length?"y2"===e?g.y2.domain():g.y.domain():(isNaN(M)&&(M=0),isNaN(k)&&(k=M),M===k&&(0>M?k=0:M=0),d=M>=0&&k>=0,p=0>=M&&0>=k,(f(b)&&d||f(w)&&p)&&(T=!1),T&&(d&&(M=0),p&&(k=0)),r=Math.abs(k-M),a=o=s=.1*r,"undefined"!=typeof S&&(l=Math.max(Math.abs(M),Math.abs(k)),k=S+l,M=S-l),A?(u=g.getDataLabelLength(M,k,"width"),h=y(g.y.range()),c=[u[0]/h,u[1]/h],o+=r*(c[1]/(1-c[0]-c[1])),s+=r*(c[0]/(1-c[0]-c[1]))):L&&(u=g.getDataLabelLength(M,k,"height"),o+=g.axis.convertPixelsToAxisPadding(u[1],r),s+=g.axis.convertPixelsToAxisPadding(u[0],r)),"y"===e&&_(v.axis_y_padding)&&(o=g.axis.getPadding(v.axis_y_padding,"top",o,r),s=g.axis.getPadding(v.axis_y_padding,"bottom",s,r)),"y2"===e&&_(v.axis_y2_padding)&&(o=g.axis.getPadding(v.axis_y2_padding,"top",o,r),s=g.axis.getPadding(v.axis_y2_padding,"bottom",s,r)),T&&(d&&(s=M),p&&(o=-k)),i=[M-s,k+o],C?i.reverse():i)},l.getXDomainMin=function(t){var e=this,n=e.config;return v(n.axis_x_min)?e.isTimeSeries()?this.parseDate(n.axis_x_min):n.axis_x_min:e.d3.min(t,function(t){return e.d3.min(t.values,function(t){return t.x})})},l.getXDomainMax=function(t){var e=this,n=e.config;return v(n.axis_x_max)?e.isTimeSeries()?this.parseDate(n.axis_x_max):n.axis_x_max:e.d3.max(t,function(t){return e.d3.max(t.values,function(t){return t.x})})},l.getXDomainPadding=function(t){var e,n,i,r,a=this,o=a.config,s=t[1]-t[0];return a.isCategorized()?n=0:a.hasType("bar")?(e=a.getMaxDataCount(),n=e>1?s/(e-1)/2:.5):n=.01*s,"object"==typeof o.axis_x_padding&&_(o.axis_x_padding)?(i=f(o.axis_x_padding.left)?o.axis_x_padding.left:n,r=f(o.axis_x_padding.right)?o.axis_x_padding.right:n):i=r="number"==typeof o.axis_x_padding?o.axis_x_padding:n,{left:i,right:r}},l.getXDomain=function(t){var e=this,n=[e.getXDomainMin(t),e.getXDomainMax(t)],i=n[0],r=n[1],a=e.getXDomainPadding(n),o=0,s=0;return i-r!==0||e.isCategorized()||(e.isTimeSeries()?(i=new Date(.5*i.getTime()),r=new Date(1.5*r.getTime())):(i=0===i?1:.5*i,r=0===r?-1:1.5*r)),(i||0===i)&&(o=e.isTimeSeries()?new Date(i.getTime()-a.left):i-a.left),(r||0===r)&&(s=e.isTimeSeries()?new Date(r.getTime()+a.right):r+a.right),[o,s]},l.updateXDomain=function(t,e,n,i,r){var a=this,o=a.config;return n&&(a.x.domain(r?r:a.d3.extent(a.getXDomain(t))),a.orgXDomain=a.x.domain(),o.zoom_enabled&&a.zoom.scale(a.x).updateScaleExtent(),a.subX.domain(a.x.domain()),a.brush&&a.brush.scale(a.subX)),e&&(a.x.domain(r?r:!a.brush||a.brush.empty()?a.orgXDomain:a.brush.extent()),o.zoom_enabled&&a.zoom.scale(a.x).updateScaleExtent()),i&&a.x.domain(a.trimXDomain(a.x.orgDomain())),a.x.domain()},l.trimXDomain=function(t){var e=this.getZoomDomain(),n=e[0],i=e[1];return t[0]<=n&&(t[1]=+t[1]+(n-t[0]),t[0]=n),i<=t[1]&&(t[0]=+t[0]-(t[1]-i),t[1]=i),t},l.isX=function(t){var e=this,n=e.config;return n.data_x&&t===n.data_x||_(n.data_xs)&&M(n.data_xs,t)},l.isNotX=function(t){return!this.isX(t)},l.getXKey=function(t){var e=this,n=e.config;return n.data_x?n.data_x:_(n.data_xs)?n.data_xs[t]:null},l.getXValuesOfXKey=function(t,e){var n,i=this,r=e&&_(e)?i.mapToIds(e):[];return r.forEach(function(e){i.getXKey(e)===t&&(n=i.data.xs[e])}),n},l.getIndexByX=function(t){var e=this,n=e.filterByX(e.data.targets,t);return n.length?n[0].index:null},l.getXValue=function(t,e){var n=this;return t in n.data.xs&&n.data.xs[t]&&f(n.data.xs[t][e])?n.data.xs[t][e]:e},l.getOtherTargetXs=function(){var t=this,e=Object.keys(t.data.xs);return e.length?t.data.xs[e[0]]:null},l.getOtherTargetX=function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},l.addXs=function(t){var e=this;Object.keys(t).forEach(function(n){e.config.data_xs[n]=t[n]})},l.hasMultipleX=function(t){return this.d3.set(Object.keys(t).map(function(e){return t[e]})).size()>1},l.isMultipleX=function(){return _(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},l.addName=function(t){var e,n=this;return t&&(e=n.config.data_names[t.id],t.name=void 0!==e?e:t.id),t},l.getValueOnIndex=function(t,e){var n=t.filter(function(t){return t.index===e});return n.length?n[0]:null},l.updateTargetX=function(t,e){var n=this;t.forEach(function(t){t.values.forEach(function(i,r){i.x=n.generateTargetX(e[r],t.id,r)}),n.data.xs[t.id]=e})},l.updateTargetXs=function(t,e){var n=this;t.forEach(function(t){e[t.id]&&n.updateTargetX([t],e[t.id])})},l.generateTargetX=function(t,e,n){var i,r=this;return i=r.isTimeSeries()?t?r.parseDate(t):r.parseDate(r.getXValue(e,n)):r.isCustomX()&&!r.isCategorized()?f(t)?+t:r.getXValue(e,n):n},l.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},l.updateXs=function(){var t=this;t.data.targets.length&&(t.xs=[],t.data.targets[0].values.forEach(function(e){t.xs[e.index]=e.x}))},l.getPrevX=function(t){var e=this.xs[t-1];return"undefined"!=typeof e?e:null},l.getNextX=function(t){var e=this.xs[t+1];return"undefined"!=typeof e?e:null},l.getMaxDataCount=function(){var t=this;return t.d3.max(t.data.targets,function(t){return t.values.length})},l.getMaxDataCountTarget=function(t){var e,n=t.length,i=0;return n>1?t.forEach(function(t){t.values.length>i&&(e=t,i=t.values.length)}):e=n?t[0]:null,e},l.getEdgeX=function(t){var e=this;return t.length?[e.d3.min(t,function(t){return t.values[0].x}),e.d3.max(t,function(t){return t.values[t.values.length-1].x})]:[0,0]},l.mapToIds=function(t){return t.map(function(t){return t.id})},l.mapToTargetIds=function(t){var e=this;return t?[].concat(t):e.mapToIds(e.data.targets)},l.hasTarget=function(t,e){var n,i=this.mapToIds(t);for(n=0;n<i.length;n++)if(i[n]===e)return!0;return!1},l.isTargetToShow=function(t){return this.hiddenTargetIds.indexOf(t)<0},l.isLegendToShow=function(t){return this.hiddenLegendIds.indexOf(t)<0},l.filterTargetsToShow=function(t){var e=this;return t.filter(function(t){return e.isTargetToShow(t.id)})},l.mapTargetsToUniqueXs=function(t){var e=this,n=e.d3.set(e.d3.merge(t.map(function(t){return t.values.map(function(t){return+t.x})}))).values();return n=e.isTimeSeries()?n.map(function(t){return new Date(+t)}):n.map(function(t){return+t}),n.sort(function(t,e){return e>t?-1:t>e?1:t>=e?0:NaN})},l.addHiddenTargetIds=function(t){this.hiddenTargetIds=this.hiddenTargetIds.concat(t)},l.removeHiddenTargetIds=function(t){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(e){return t.indexOf(e)<0})},l.addHiddenLegendIds=function(t){this.hiddenLegendIds=this.hiddenLegendIds.concat(t)},l.removeHiddenLegendIds=function(t){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(e){return t.indexOf(e)<0})},l.getValuesAsIdKeyed=function(t){var e={};return t.forEach(function(t){e[t.id]=[],t.values.forEach(function(n){e[t.id].push(n.value)})}),e},l.checkValueInTargets=function(t,e){var n,i,r,a=Object.keys(t);for(n=0;n<a.length;n++)for(r=t[a[n]].values,i=0;i<r.length;i++)if(e(r[i].value))return!0;return!1},l.hasNegativeValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return 0>t})},l.hasPositiveValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return t>0})},l.isOrderDesc=function(){var t=this.config;return"string"==typeof t.data_order&&"desc"===t.data_order.toLowerCase()},l.isOrderAsc=function(){var t=this.config;return"string"==typeof t.data_order&&"asc"===t.data_order.toLowerCase()},l.orderTargets=function(t){var e=this,n=e.config,i=e.isOrderAsc(),r=e.isOrderDesc();return i||r?t.sort(function(t,e){var n=function(t,e){return t+Math.abs(e.value)},r=t.values.reduce(n,0),a=e.values.reduce(n,0);return i?a-r:r-a}):d(n.data_order)&&t.sort(n.data_order),t},l.filterByX=function(t,e){return this.d3.merge(t.map(function(t){return t.values})).filter(function(t){return t.x-e===0})},l.filterRemoveNull=function(t){return t.filter(function(t){return f(t.value)})},l.filterByXDomain=function(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})},l.hasDataLabel=function(){var t=this.config;return!("boolean"!=typeof t.data_labels||!t.data_labels)||!("object"!=typeof t.data_labels||!_(t.data_labels))},l.getDataLabelLength=function(t,e,n){var i=this,r=[0,0],a=1.3;return i.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return i.dataLabelFormat(t.id)(t)}).each(function(t,e){r[e]=this.getBoundingClientRect()[n]*a}).remove(),r},l.isNoneArc=function(t){return this.hasTarget(this.data.targets,t.id)},l.isArc=function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},l.findSameXOfValues=function(t,e){var n,i=t[e].x,r=[];for(n=e-1;n>=0&&i===t[n].x;n--)r.push(t[n]);for(n=e;n<t.length&&i===t[n].x;n++)r.push(t[n]);return r},l.findClosestFromTargets=function(t,e){var n,i=this;return n=t.map(function(t){return i.findClosest(t.values,e)}),i.findClosest(n,e)},l.findClosest=function(t,e){var n,i=this,r=i.config.point_sensitivity;return t.filter(function(t){return t&&i.isBarType(t.id)}).forEach(function(t){var e=i.main.select("."+c.bars+i.getTargetSelectorSuffix(t.id)+" ."+c.bar+"-"+t.index).node();!n&&i.isWithinBar(e)&&(n=t)}),t.filter(function(t){return t&&!i.isBarType(t.id)}).forEach(function(t){var a=i.dist(t,e);r>a&&(r=a,n=t)}),n},l.dist=function(t,e){var n=this,i=n.config,r=i.axis_rotated?1:0,a=i.axis_rotated?0:1,o=n.circleY(t,t.index),s=n.x(t.x);return Math.sqrt(Math.pow(s-e[r],2)+Math.pow(o-e[a],2))},l.convertValuesToStep=function(t){var e,n=[].concat(t);if(!this.isCategorized())return t;for(e=t.length+1;e>0;e--)n[e]=n[e-1];return n[0]={x:n[0].x-1,value:n[0].value,id:n[0].id},n[t.length+1]={x:n[t.length].x+1,value:n[t.length].value,id:n[t.length].id},n},l.updateDataAttributes=function(t,e){var n=this,i=n.config,r=i["data_"+t];return"undefined"==typeof e?r:(Object.keys(e).forEach(function(t){r[t]=e[t]}),n.redraw({withLegend:!0}),r)},l.convertUrlToData=function(t,e,n,i){var r=this,a=e?e:"csv";r.d3.xhr(t,function(t,e){var o;if(!e)throw new Error(t.responseURL+" "+t.status+" ("+t.statusText+")");o="json"===a?r.convertJsonToData(JSON.parse(e.response),n):"tsv"===a?r.convertTsvToData(e.response):r.convertCsvToData(e.response),i.call(r,o)})},l.convertXsvToData=function(t,e){var n,i=e.parseRows(t);return 1===i.length?(n=[{}],i[0].forEach(function(t){n[0][t]=null})):n=e.parse(t),n},l.convertCsvToData=function(t){return this.convertXsvToData(t,this.d3.csv)},l.convertTsvToData=function(t){return this.convertXsvToData(t,this.d3.tsv)},l.convertJsonToData=function(t,e){var n,i,r=this,a=[];return e?(e.x?(n=e.value.concat(e.x),r.config.data_x=e.x):n=e.value,a.push(n),t.forEach(function(t){var e=[];n.forEach(function(n){var i=g(t[n])?null:t[n];e.push(i)}),a.push(e)}),i=r.convertRowsToData(a)):(Object.keys(t).forEach(function(e){a.push([e].concat(t[e]))}),i=r.convertColumnsToData(a)),i},l.convertRowsToData=function(t){var e,n,i=t[0],r={},a=[];for(e=1;e<t.length;e++){for(r={},n=0;n<t[e].length;n++){if(g(t[e][n]))throw new Error("Source data is missing a component at ("+e+","+n+")!");r[i[n]]=t[e][n]}a.push(r)}return a},l.convertColumnsToData=function(t){var e,n,i,r=[];for(e=0;e<t.length;e++)for(i=t[e][0],n=1;n<t[e].length;n++){if(g(r[n-1])&&(r[n-1]={}),g(t[e][n]))throw new Error("Source data is missing a component at ("+e+","+n+")!");r[n-1][i]=t[e][n]}return r},l.convertDataToTargets=function(t,e){var n,i=this,r=i.config,a=i.d3.keys(t[0]).filter(i.isNotX,i),o=i.d3.keys(t[0]).filter(i.isX,i);return a.forEach(function(n){var a=i.getXKey(n);i.isCustomX()||i.isTimeSeries()?o.indexOf(a)>=0?i.data.xs[n]=(e&&i.data.xs[n]?i.data.xs[n]:[]).concat(t.map(function(t){return t[a]}).filter(f).map(function(t,e){return i.generateTargetX(t,n,e)})):r.data_x?i.data.xs[n]=i.getOtherTargetXs():_(r.data_xs)&&(i.data.xs[n]=i.getXValuesOfXKey(a,i.data.targets)):i.data.xs[n]=t.map(function(t,e){return e})}),a.forEach(function(t){if(!i.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')}),n=a.map(function(e,n){var a=r.data_idConverter(e);return{id:a,id_org:e,values:t.map(function(t,o){var s=i.getXKey(e),l=t[s],u=i.generateTargetX(l,e,o),h=null===t[e]||isNaN(t[e])?null:+t[e];return i.isCustomX()&&i.isCategorized()&&0===n&&l&&(0===o&&(r.axis_x_categories=[]),r.axis_x_categories.push(l)),(g(t[e])||i.data.xs[e].length<=o)&&(u=void 0),{x:u,value:h,id:a}}).filter(function(t){return v(t.x)})}}),n.forEach(function(t){var e;r.data_xSort&&(t.values=t.values.sort(function(t,e){var n=t.x||0===t.x?t.x:1/0,i=e.x||0===e.x?e.x:1/0;return n-i})),e=0,t.values.forEach(function(t){t.index=e++}),i.data.xs[t.id].sort(function(t,e){return t-e})}),i.hasNegativeValue=i.hasNegativeValueInTargets(n),i.hasPositiveValue=i.hasPositiveValueInTargets(n),r.data_type&&i.setTargetType(i.mapToIds(n).filter(function(t){return!(t in r.data_types)}),r.data_type),n.forEach(function(t){i.addCache(t.id_org,t)}),n},l.load=function(t,e){var n=this;t&&(e.filter&&(t=t.filter(e.filter)),(e.type||e.types)&&t.forEach(function(t){var i=e.types&&e.types[t.id]?e.types[t.id]:e.type;n.setTargetType(t.id,i)}),n.data.targets.forEach(function(e){for(var n=0;n<t.length;n++)if(e.id===t[n].id){e.values=t[n].values,t.splice(n,1);break}}),n.data.targets=n.data.targets.concat(t)),n.updateTargets(n.data.targets),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()},l.loadFromArgs=function(t){var e=this;t.data?e.load(e.convertDataToTargets(t.data),t):t.url?e.convertUrlToData(t.url,t.mimeType,t.keys,function(n){e.load(e.convertDataToTargets(n),t)}):t.json?e.load(e.convertDataToTargets(e.convertJsonToData(t.json,t.keys)),t):t.rows?e.load(e.convertDataToTargets(e.convertRowsToData(t.rows)),t):t.columns?e.load(e.convertDataToTargets(e.convertColumnsToData(t.columns)),t):e.load(null,t)},l.unload=function(t,e){var n=this;return e||(e=function(){}),t=t.filter(function(t){return n.hasTarget(n.data.targets,t)}),t&&0!==t.length?(n.svg.selectAll(t.map(function(t){return n.selectorTarget(t)})).transition().style("opacity",0).remove().call(n.endall,e),void t.forEach(function(t){n.withoutFadeIn[t]=!1,n.legend&&n.legend.selectAll("."+c.legendItem+n.getTargetSelectorSuffix(t)).remove(),n.data.targets=n.data.targets.filter(function(e){return e.id!==t})})):void e()},l.categoryName=function(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t},l.initEventRect=function(){var t=this;t.main.select("."+c.chart).append("g").attr("class",c.eventRects).style("fill-opacity",0)},l.redrawEventRect=function(){var t,e,n=this,i=n.config,r=n.isMultipleX(),a=n.main.select("."+c.eventRects).style("cursor",i.zoom_enabled?i.axis_rotated?"ns-resize":"ew-resize":null).classed(c.eventRectsMultiple,r).classed(c.eventRectsSingle,!r);a.selectAll("."+c.eventRect).remove(),n.eventRect=a.selectAll("."+c.eventRect),r?(t=n.eventRect.data([0]),n.generateEventRectsForMultipleXs(t.enter()),n.updateEventRect(t)):(e=n.getMaxDataCountTarget(n.data.targets),a.datum(e?e.values:[]),n.eventRect=a.selectAll("."+c.eventRect),t=n.eventRect.data(function(t){return t}),n.generateEventRectsForSingleX(t.enter()),n.updateEventRect(t),t.exit().remove())},l.updateEventRect=function(t){var e,n,i,r,a,o,s=this,l=s.config;t=t||s.eventRect.data(function(t){return t}),s.isMultipleX()?(e=0,n=0,i=s.width,r=s.height):(!s.isCustomX()&&!s.isTimeSeries()||s.isCategorized()?(a=s.getEventRectWidth(),o=function(t){return s.x(t.x)-a/2}):(s.updateXs(),a=function(t){var e=s.getPrevX(t.index),n=s.getNextX(t.index);return null===e&&null===n?l.axis_rotated?s.height:s.width:(null===e&&(e=s.x.domain()[0]),null===n&&(n=s.x.domain()[1]),Math.max(0,(s.x(n)-s.x(e))/2))},o=function(t){var e=s.getPrevX(t.index),n=s.getNextX(t.index),i=s.data.xs[t.id][t.index];return null===e&&null===n?0:(null===e&&(e=s.x.domain()[0]),(s.x(i)+s.x(e))/2)}),e=l.axis_rotated?0:o,n=l.axis_rotated?o:0,i=l.axis_rotated?s.width:a,r=l.axis_rotated?a:s.height),t.attr("class",s.classEvent.bind(s)).attr("x",e).attr("y",n).attr("width",i).attr("height",r)},l.generateEventRectsForSingleX=function(t){var e=this,n=e.d3,i=e.config;t.append("rect").attr("class",e.classEvent.bind(e)).style("cursor",i.data_selection_enabled&&i.data_selection_grouped?"pointer":null).on("mouseover",function(t){var n=t.index;e.dragging||e.flowing||e.hasArcType()||(i.point_focus_expand_enabled&&e.expandCircles(n,null,!0),e.expandBars(n,null,!0),e.main.selectAll("."+c.shape+"-"+n).each(function(t){i.data_onmouseover.call(e.api,t)}))}).on("mouseout",function(t){var n=t.index;e.config&&(e.hasArcType()||(e.hideXGridFocus(),e.hideTooltip(),e.unexpandCircles(),e.unexpandBars(),e.main.selectAll("."+c.shape+"-"+n).each(function(t){i.data_onmouseout.call(e.api,t)})))}).on("mousemove",function(t){var r,a=t.index,o=e.svg.select("."+c.eventRect+"-"+a);e.dragging||e.flowing||e.hasArcType()||(e.isStepType(t)&&"step-after"===e.config.line_step_type&&n.mouse(this)[0]<e.x(e.getXValue(t.id,a))&&(a-=1),r=e.filterTargetsToShow(e.data.targets).map(function(t){return e.addName(e.getValueOnIndex(t.values,a))}),i.tooltip_grouped&&(e.showTooltip(r,this),e.showXGridFocus(r)),(!i.tooltip_grouped||i.data_selection_enabled&&!i.data_selection_grouped)&&e.main.selectAll("."+c.shape+"-"+a).each(function(){n.select(this).classed(c.EXPANDED,!0),i.data_selection_enabled&&o.style("cursor",i.data_selection_grouped?"pointer":null),i.tooltip_grouped||(e.hideXGridFocus(),e.hideTooltip(),i.data_selection_grouped||(e.unexpandCircles(a),e.unexpandBars(a)))}).filter(function(t){return e.isWithinShape(this,t)}).each(function(t){i.data_selection_enabled&&(i.data_selection_grouped||i.data_selection_isselectable(t))&&o.style("cursor","pointer"),i.tooltip_grouped||(e.showTooltip([t],this),e.showXGridFocus([t]),i.point_focus_expand_enabled&&e.expandCircles(a,t.id,!0),e.expandBars(a,t.id,!0))}))}).on("click",function(t){var r=t.index;if(!e.hasArcType()&&e.toggleShape){if(e.cancelClick)return void(e.cancelClick=!1);e.isStepType(t)&&"step-after"===i.line_step_type&&n.mouse(this)[0]<e.x(e.getXValue(t.id,r))&&(r-=1),e.main.selectAll("."+c.shape+"-"+r).each(function(t){(i.data_selection_grouped||e.isWithinShape(this,t))&&(e.toggleShape(this,t,r),e.config.data_onclick.call(e.api,t,this))})}}).call(i.data_selection_draggable&&e.drag?n.behavior.drag().origin(Object).on("drag",function(){e.drag(n.mouse(this))}).on("dragstart",function(){e.dragstart(n.mouse(this))}).on("dragend",function(){e.dragend()}):function(){})},l.generateEventRectsForMultipleXs=function(t){function e(){n.svg.select("."+c.eventRect).style("cursor",null),n.hideXGridFocus(),n.hideTooltip(),n.unexpandCircles(),n.unexpandBars()}var n=this,i=n.d3,r=n.config;t.append("rect").attr("x",0).attr("y",0).attr("width",n.width).attr("height",n.height).attr("class",c.eventRect).on("mouseout",function(){n.config&&(n.hasArcType()||e())}).on("mousemove",function(){var t,a,o,s,l=n.filterTargetsToShow(n.data.targets);if(!n.dragging&&!n.hasArcType(l)){if(t=i.mouse(this),a=n.findClosestFromTargets(l,t),!n.mouseover||a&&a.id===n.mouseover.id||(r.data_onmouseout.call(n.api,n.mouseover),n.mouseover=void 0),!a)return void e();o=n.isScatterType(a)||!r.tooltip_grouped?[a]:n.filterByX(l,a.x),s=o.map(function(t){return n.addName(t)}),n.showTooltip(s,this),r.point_focus_expand_enabled&&n.expandCircles(a.index,a.id,!0),n.expandBars(a.index,a.id,!0),n.showXGridFocus(s),(n.isBarType(a.id)||n.dist(a,t)<r.point_sensitivity)&&(n.svg.select("."+c.eventRect).style("cursor","pointer"),n.mouseover||(r.data_onmouseover.call(n.api,a),n.mouseover=a))}}).on("click",function(){var t,e,a=n.filterTargetsToShow(n.data.targets);n.hasArcType(a)||(t=i.mouse(this),e=n.findClosestFromTargets(a,t),e&&(n.isBarType(e.id)||n.dist(e,t)<r.point_sensitivity)&&n.main.selectAll("."+c.shapes+n.getTargetSelectorSuffix(e.id)).selectAll("."+c.shape+"-"+e.index).each(function(){(r.data_selection_grouped||n.isWithinShape(this,e))&&(n.toggleShape(this,e,e.index),n.config.data_onclick.call(n.api,e,this))}))}).call(r.data_selection_draggable&&n.drag?i.behavior.drag().origin(Object).on("drag",function(){n.drag(i.mouse(this))}).on("dragstart",function(){n.dragstart(i.mouse(this))}).on("dragend",function(){n.dragend()}):function(){})},l.dispatchEvent=function(e,n,i){var r=this,a="."+c.eventRect+(r.isMultipleX()?"":"-"+n),o=r.main.select(a).node(),s=o.getBoundingClientRect(),l=s.left+(i?i[0]:0),u=s.top+(i?i[1]:0),h=document.createEvent("MouseEvents");h.initMouseEvent(e,!0,!0,t,0,l,u,l,u,!1,!1,!1,!1,0,null),o.dispatchEvent(h)},l.getCurrentWidth=function(){var t=this,e=t.config;return e.size_width?e.size_width:t.getParentWidth()},l.getCurrentHeight=function(){var t=this,e=t.config,n=e.size_height?e.size_height:t.getParentHeight();return n>0?n:320/(t.hasType("gauge")?2:1)},l.getCurrentPaddingTop=function(){var t=this,e=t.config,n=f(e.padding_top)?e.padding_top:0;return t.title&&t.title.node()&&(n+=t.getTitlePadding()),n},l.getCurrentPaddingBottom=function(){var t=this.config;return f(t.padding_bottom)?t.padding_bottom:0},l.getCurrentPaddingLeft=function(t){var e=this,n=e.config;return f(n.padding_left)?n.padding_left:n.axis_rotated?n.axis_x_show?Math.max(m(e.getAxisWidthByAxisId("x",t)),40):1:!n.axis_y_show||n.axis_y_inner?e.axis.getYAxisLabelPosition().isOuter?30:1:m(e.getAxisWidthByAxisId("y",t))},l.getCurrentPaddingRight=function(){var t=this,e=t.config,n=10,i=t.isLegendRight?t.getLegendWidth()+20:0;return f(e.padding_right)?e.padding_right+1:e.axis_rotated?n+i:!e.axis_y2_show||e.axis_y2_inner?2+i+(t.axis.getY2AxisLabelPosition().isOuter?20:0):m(t.getAxisWidthByAxisId("y2"))+i},l.getParentRectValue=function(t){for(var e,n=this.selectChart.node();n&&"BODY"!==n.tagName;){try{e=n.getBoundingClientRect()[t]}catch(i){"width"===t&&(e=n.offsetWidth)}if(e)break;n=n.parentNode}return e},l.getParentWidth=function(){return this.getParentRectValue("width")},l.getParentHeight=function(){var t=this.selectChart.style("height");return t.indexOf("px")>0?+t.replace("px",""):0},l.getSvgLeft=function(t){var e=this,n=e.config,i=n.axis_rotated||!n.axis_rotated&&!n.axis_y_inner,r=n.axis_rotated?c.axisX:c.axisY,a=e.main.select("."+r).node(),o=a&&i?a.getBoundingClientRect():{right:0},s=e.selectChart.node().getBoundingClientRect(),l=e.hasArcType(),u=o.right-s.left-(l?0:e.getCurrentPaddingLeft(t));return u>0?u:0},l.getAxisWidthByAxisId=function(t,e){var n=this,i=n.axis.getLabelPositionById(t);return n.axis.getMaxTickWidth(t,e)+(i.isInner?20:40)},l.getHorizontalAxisHeight=function(t){var e=this,n=e.config,i=30;return"x"!==t||n.axis_x_show?"x"===t&&n.axis_x_height?n.axis_x_height:"y"!==t||n.axis_y_show?"y2"!==t||n.axis_y2_show?("x"===t&&!n.axis_rotated&&n.axis_x_tick_rotate&&(i=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-n.axis_x_tick_rotate)/180)),i+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"===t?-10:0)):e.rotated_padding_top:!n.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},l.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},l.getShapeIndices=function(t){var e,n,i=this,r=i.config,a={},o=0;return i.filterTargetsToShow(i.data.targets.filter(t,i)).forEach(function(t){for(e=0;e<r.data_groups.length;e++)if(!(r.data_groups[e].indexOf(t.id)<0))for(n=0;n<r.data_groups[e].length;n++)if(r.data_groups[e][n]in a){a[t.id]=a[r.data_groups[e][n]];break}g(a[t.id])&&(a[t.id]=o++)}),a.__max__=o-1,a},l.getShapeX=function(t,e,n,i){var r=this,a=i?r.subX:r.x;return function(i){var r=i.id in n?n[i.id]:0;return i.x||0===i.x?a(i.x)-t*(e/2-r):0}},l.getShapeY=function(t){var e=this;return function(n){var i=t?e.getSubYScale(n.id):e.getYScale(n.id);return i(n.value)}},l.getShapeOffset=function(t,e,n){var i=this,r=i.orderTargets(i.filterTargetsToShow(i.data.targets.filter(t,i))),a=r.map(function(t){return t.id});return function(t,o){var s=n?i.getSubYScale(t.id):i.getYScale(t.id),l=s(0),u=l;return r.forEach(function(n){var r=i.isStepType(t)?i.convertValuesToStep(n.values):n.values;n.id!==t.id&&e[n.id]===e[t.id]&&a.indexOf(n.id)<a.indexOf(t.id)&&(("undefined"==typeof r[o]||+r[o].x!==+t.x)&&(o=-1,r.forEach(function(e,n){e.x===t.x&&(o=n)})),o in r&&r[o].value*t.value>=0&&(u+=s(r[o].value)-l))}),u}},l.isWithinShape=function(t,e){var n,i=this,r=i.d3.select(t);return i.isTargetToShow(e.id)?"circle"===t.nodeName?n=i.isStepType(e)?i.isWithinStep(t,i.getYScale(e.id)(e.value)):i.isWithinCircle(t,1.5*i.pointSelectR(e)):"path"===t.nodeName&&(n=!r.classed(c.bar)||i.isWithinBar(t)):n=!1,n},l.getInterpolate=function(t){var e=this,n=e.isInterpolationType(e.config.spline_interpolation_type)?e.config.spline_interpolation_type:"cardinal";return e.isSplineType(t)?n:e.isStepType(t)?e.config.line_step_type:"linear"},l.initLine=function(){var t=this;t.main.select("."+c.chart).append("g").attr("class",c.chartLines)},l.updateTargetsForLine=function(t){var e,n,i=this,r=i.config,a=i.classChartLine.bind(i),o=i.classLines.bind(i),s=i.classAreas.bind(i),l=i.classCircles.bind(i),u=i.classFocus.bind(i);e=i.main.select("."+c.chartLines).selectAll("."+c.chartLine).data(t).attr("class",function(t){return a(t)+u(t)}),n=e.enter().append("g").attr("class",a).style("opacity",0).style("pointer-events","none"),n.append("g").attr("class",o),n.append("g").attr("class",s),n.append("g").attr("class",function(t){return i.generateClass(c.selectedCircles,t.id)}),n.append("g").attr("class",l).style("cursor",function(t){
return r.data_selection_isselectable(t)?"pointer":null}),t.forEach(function(t){i.main.selectAll("."+c.selectedCircles+i.getTargetSelectorSuffix(t.id)).selectAll("."+c.selectedCircle).each(function(e){e.value=t.values[e.index].value})})},l.updateLine=function(t){var e=this;e.mainLine=e.main.selectAll("."+c.lines).selectAll("."+c.line).data(e.lineData.bind(e)),e.mainLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color),e.mainLine.style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",function(t){return e.isStepType(t)?"crispEdges":""}).attr("transform",null),e.mainLine.exit().transition().duration(t).style("opacity",0).remove()},l.redrawLine=function(t,e){return[(e?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity",1)]},l.generateDrawLine=function(t,e){var n=this,i=n.config,r=n.d3.svg.line(),a=n.generateGetLinePoints(t,e),o=e?n.getSubYScale:n.getYScale,s=function(t){return(e?n.subxx:n.xx).call(n,t)},l=function(t,e){return i.data_groups.length>0?a(t,e)[0][1]:o.call(n,t.id)(t.value)};return r=i.axis_rotated?r.x(l).y(s):r.x(s).y(l),i.line_connectNull||(r=r.defined(function(t){return null!=t.value})),function(t){var a,s=i.line_connectNull?n.filterRemoveNull(t.values):t.values,l=e?n.x:n.subX,u=o.call(n,t.id),h=0,c=0;return n.isLineType(t)?i.data_regions[t.id]?a=n.lineWithRegions(s,l,u,i.data_regions[t.id]):(n.isStepType(t)&&(s=n.convertValuesToStep(s)),a=r.interpolate(n.getInterpolate(t))(s)):(s[0]&&(h=l(s[0].x),c=u(s[0].value)),a=i.axis_rotated?"M "+c+" "+h:"M "+h+" "+c),a?a:"M 0 0"}},l.generateGetLinePoints=function(t,e){var n=this,i=n.config,r=t.__max__+1,a=n.getShapeX(0,r,t,!!e),o=n.getShapeY(!!e),s=n.getShapeOffset(n.isLineType,t,!!e),l=e?n.getSubYScale:n.getYScale;return function(t,e){var r=l.call(n,t.id)(0),u=s(t,e)||r,h=a(t),c=o(t);return i.axis_rotated&&(0<t.value&&r>c||t.value<0&&c>r)&&(c=r),[[h,c-(r-u)],[h,c-(r-u)],[h,c-(r-u)],[h,c-(r-u)]]}},l.lineWithRegions=function(t,e,n,i){function r(t,e){var n;for(n=0;n<e.length;n++)if(e[n].start<t&&t<=e[n].end)return!0;return!1}function a(t){return"M"+t[0][0]+" "+t[0][1]+" "+t[1][0]+" "+t[1][1]}var o,s,l,u,h,c,f,d,p,m,x,y,b=this,_=b.config,w=-1,M="M",k=b.isCategorized()?.5:0,S=[];if(v(i))for(o=0;o<i.length;o++)S[o]={},g(i[o].start)?S[o].start=t[0].x:S[o].start=b.isTimeSeries()?b.parseDate(i[o].start):i[o].start,g(i[o].end)?S[o].end=t[t.length-1].x:S[o].end=b.isTimeSeries()?b.parseDate(i[o].end):i[o].end;for(x=_.axis_rotated?function(t){return n(t.value)}:function(t){return e(t.x)},y=_.axis_rotated?function(t){return e(t.x)}:function(t){return n(t.value)},l=b.isTimeSeries()?function(t,i,r,o){var s,l=t.x.getTime(),u=i.x-t.x,c=new Date(l+u*r),f=new Date(l+u*(r+o));return s=_.axis_rotated?[[n(h(r)),e(c)],[n(h(r+o)),e(f)]]:[[e(c),n(h(r))],[e(f),n(h(r+o))]],a(s)}:function(t,i,r,o){var s;return s=_.axis_rotated?[[n(h(r),!0),e(u(r))],[n(h(r+o),!0),e(u(r+o))]]:[[e(u(r),!0),n(h(r))],[e(u(r+o),!0),n(h(r+o))]],a(s)},o=0;o<t.length;o++){if(g(S)||!r(t[o].x,S))M+=" "+x(t[o])+" "+y(t[o]);else for(u=b.getScale(t[o-1].x+k,t[o].x+k,b.isTimeSeries()),h=b.getScale(t[o-1].value,t[o].value),c=e(t[o].x)-e(t[o-1].x),f=n(t[o].value)-n(t[o-1].value),d=Math.sqrt(Math.pow(c,2)+Math.pow(f,2)),p=2/d,m=2*p,s=p;1>=s;s+=m)M+=l(t[o-1],t[o],s,p);w=t[o].x}return M},l.updateArea=function(t){var e=this,n=e.d3;e.mainArea=e.main.selectAll("."+c.areas).selectAll("."+c.area).data(e.lineData.bind(e)),e.mainArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+n.select(this).style("opacity"),0}),e.mainArea.style("opacity",e.orgAreaOpacity),e.mainArea.exit().transition().duration(t).style("opacity",0).remove()},l.redrawArea=function(t,e){return[(e?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},l.generateDrawArea=function(t,e){var n=this,i=n.config,r=n.d3.svg.area(),a=n.generateGetAreaPoints(t,e),o=e?n.getSubYScale:n.getYScale,s=function(t){return(e?n.subxx:n.xx).call(n,t)},l=function(t,e){return i.data_groups.length>0?a(t,e)[0][1]:o.call(n,t.id)(n.getAreaBaseValue(t.id))},u=function(t,e){return i.data_groups.length>0?a(t,e)[1][1]:o.call(n,t.id)(t.value)};return r=i.axis_rotated?r.x0(l).x1(u).y(s):r.x(s).y0(l).y1(u),i.line_connectNull||(r=r.defined(function(t){return null!==t.value})),function(t){var e,a=i.line_connectNull?n.filterRemoveNull(t.values):t.values,o=0,s=0;return n.isAreaType(t)?(n.isStepType(t)&&(a=n.convertValuesToStep(a)),e=r.interpolate(n.getInterpolate(t))(a)):(a[0]&&(o=n.x(a[0].x),s=n.getYScale(t.id)(a[0].value)),e=i.axis_rotated?"M "+s+" "+o:"M "+o+" "+s),e?e:"M 0 0"}},l.getAreaBaseValue=function(){return 0},l.generateGetAreaPoints=function(t,e){var n=this,i=n.config,r=t.__max__+1,a=n.getShapeX(0,r,t,!!e),o=n.getShapeY(!!e),s=n.getShapeOffset(n.isAreaType,t,!!e),l=e?n.getSubYScale:n.getYScale;return function(t,e){var r=l.call(n,t.id)(0),u=s(t,e)||r,h=a(t),c=o(t);return i.axis_rotated&&(0<t.value&&r>c||t.value<0&&c>r)&&(c=r),[[h,u],[h,c-(r-u)],[h,c-(r-u)],[h,u]]}},l.updateCircle=function(){var t=this;t.mainCircle=t.main.selectAll("."+c.circles).selectAll("."+c.circle).data(t.lineOrScatterData.bind(t)),t.mainCircle.enter().append("circle").attr("class",t.classCircle.bind(t)).attr("r",t.pointR.bind(t)).style("fill",t.color),t.mainCircle.style("opacity",t.initialOpacityForCircle.bind(t)),t.mainCircle.exit().remove()},l.redrawCircle=function(t,e,n){var i=this.main.selectAll("."+c.selectedCircle);return[(n?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",t).attr("cy",e),(n?i.transition(Math.random().toString()):i).attr("cx",t).attr("cy",e)]},l.circleX=function(t){return t.x||0===t.x?this.x(t.x):null},l.updateCircleY=function(){var t,e,n=this;n.config.data_groups.length>0?(t=n.getShapeIndices(n.isLineType),e=n.generateGetLinePoints(t),n.circleY=function(t,n){return e(t,n)[0][1]}):n.circleY=function(t){return n.getYScale(t.id)(t.value)}},l.getCircles=function(t,e){var n=this;return(e?n.main.selectAll("."+c.circles+n.getTargetSelectorSuffix(e)):n.main).selectAll("."+c.circle+(f(t)?"-"+t:""))},l.expandCircles=function(t,e,n){var i=this,r=i.pointExpandedR.bind(i);n&&i.unexpandCircles(),i.getCircles(t,e).classed(c.EXPANDED,!0).attr("r",r)},l.unexpandCircles=function(t){var e=this,n=e.pointR.bind(e);e.getCircles(t).filter(function(){return e.d3.select(this).classed(c.EXPANDED)}).classed(c.EXPANDED,!1).attr("r",n)},l.pointR=function(t){var e=this,n=e.config;return e.isStepType(t)?0:d(n.point_r)?n.point_r(t):n.point_r},l.pointExpandedR=function(t){var e=this,n=e.config;return n.point_focus_expand_enabled?n.point_focus_expand_r?n.point_focus_expand_r:1.75*e.pointR(t):e.pointR(t)},l.pointSelectR=function(t){var e=this,n=e.config;return n.point_select_r?n.point_select_r:4*e.pointR(t)},l.isWithinCircle=function(t,e){var n=this.d3,i=n.mouse(t),r=n.select(t),a=+r.attr("cx"),o=+r.attr("cy");return Math.sqrt(Math.pow(a-i[0],2)+Math.pow(o-i[1],2))<e},l.isWithinStep=function(t,e){return Math.abs(e-this.d3.mouse(t)[1])<30},l.initBar=function(){var t=this;t.main.select("."+c.chart).append("g").attr("class",c.chartBars)},l.updateTargetsForBar=function(t){var e,n,i=this,r=i.config,a=i.classChartBar.bind(i),o=i.classBars.bind(i),s=i.classFocus.bind(i);e=i.main.select("."+c.chartBars).selectAll("."+c.chartBar).data(t).attr("class",function(t){return a(t)+s(t)}),n=e.enter().append("g").attr("class",a).style("opacity",0).style("pointer-events","none"),n.append("g").attr("class",o).style("cursor",function(t){return r.data_selection_isselectable(t)?"pointer":null})},l.updateBar=function(t){var e=this,n=e.barData.bind(e),i=e.classBar.bind(e),r=e.initialOpacity.bind(e),a=function(t){return e.color(t.id)};e.mainBar=e.main.selectAll("."+c.bars).selectAll("."+c.bar).data(n),e.mainBar.enter().append("path").attr("class",i).style("stroke",a).style("fill",a),e.mainBar.style("opacity",r),e.mainBar.exit().transition().duration(t).style("opacity",0).remove()},l.redrawBar=function(t,e){return[(e?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",t).style("fill",this.color).style("opacity",1)]},l.getBarW=function(t,e){var n=this,i=n.config,r="number"==typeof i.bar_width?i.bar_width:e?t.tickInterval()*i.bar_width_ratio/e:0;return i.bar_width_max&&r>i.bar_width_max?i.bar_width_max:r},l.getBars=function(t,e){var n=this;return(e?n.main.selectAll("."+c.bars+n.getTargetSelectorSuffix(e)):n.main).selectAll("."+c.bar+(f(t)?"-"+t:""))},l.expandBars=function(t,e,n){var i=this;n&&i.unexpandBars(),i.getBars(t,e).classed(c.EXPANDED,!0)},l.unexpandBars=function(t){var e=this;e.getBars(t).classed(c.EXPANDED,!1)},l.generateDrawBar=function(t,e){var n=this,i=n.config,r=n.generateGetBarPoints(t,e);return function(t,e){var n=r(t,e),a=i.axis_rotated?1:0,o=i.axis_rotated?0:1,s="M "+n[0][a]+","+n[0][o]+" L"+n[1][a]+","+n[1][o]+" L"+n[2][a]+","+n[2][o]+" L"+n[3][a]+","+n[3][o]+" z";return s}},l.generateGetBarPoints=function(t,e){var n=this,i=e?n.subXAxis:n.xAxis,r=t.__max__+1,a=n.getBarW(i,r),o=n.getShapeX(a,r,t,!!e),s=n.getShapeY(!!e),l=n.getShapeOffset(n.isBarType,t,!!e),u=e?n.getSubYScale:n.getYScale;return function(t,e){var i=u.call(n,t.id)(0),r=l(t,e)||i,h=o(t),c=s(t);return n.config.axis_rotated&&(0<t.value&&i>c||t.value<0&&c>i)&&(c=i),[[h,r],[h,c-(i-r)],[h+a,c-(i-r)],[h+a,r]]}},l.isWithinBar=function(t){var e=this.d3.mouse(t),n=t.getBoundingClientRect(),i=t.pathSegList.getItem(0),r=t.pathSegList.getItem(1),a=Math.min(i.x,r.x),o=Math.min(i.y,r.y),s=n.width,l=n.height,u=2,h=a-u,c=a+s+u,f=o+l+u,d=o-u;return h<e[0]&&e[0]<c&&d<e[1]&&e[1]<f},l.initText=function(){var t=this;t.main.select("."+c.chart).append("g").attr("class",c.chartTexts),t.mainText=t.d3.selectAll([])},l.updateTargetsForText=function(t){var e,n,i=this,r=i.classChartText.bind(i),a=i.classTexts.bind(i),o=i.classFocus.bind(i);e=i.main.select("."+c.chartTexts).selectAll("."+c.chartText).data(t).attr("class",function(t){return r(t)+o(t)}),n=e.enter().append("g").attr("class",r).style("opacity",0).style("pointer-events","none"),n.append("g").attr("class",a)},l.updateText=function(t){var e=this,n=e.config,i=e.barOrLineData.bind(e),r=e.classText.bind(e);e.mainText=e.main.selectAll("."+c.texts).selectAll("."+c.text).data(i),e.mainText.enter().append("text").attr("class",r).attr("text-anchor",function(t){return n.axis_rotated?t.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(t){return e.color(t)}).style("fill-opacity",0),e.mainText.text(function(t,n,i){return e.dataLabelFormat(t.id)(t.value,t.id,n,i)}),e.mainText.exit().transition().duration(t).style("fill-opacity",0).remove()},l.redrawText=function(t,e,n,i){return[(i?this.mainText.transition():this.mainText).attr("x",t).attr("y",e).style("fill",this.color).style("fill-opacity",n?0:this.opacityForText.bind(this))]},l.getTextRect=function(t,e,n){var i,r=this.d3.select("body").append("div").classed("c3",!0),a=r.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),o=this.d3.select(n).style("font");return a.selectAll(".dummy").data([t]).enter().append("text").classed(e?e:"",!0).style("font",o).text(t).each(function(){i=this.getBoundingClientRect()}),r.remove(),i},l.generateXYForText=function(t,e,n,i){var r=this,a=r.generateGetAreaPoints(t,!1),o=r.generateGetBarPoints(e,!1),s=r.generateGetLinePoints(n,!1),l=i?r.getXForText:r.getYForText;return function(t,e){var n=r.isAreaType(t)?a:r.isBarType(t)?o:s;return l.call(r,n(t,e),t,this)}},l.getXForText=function(t,e,n){var i,r,a=this,o=n.getBoundingClientRect();return a.config.axis_rotated?(r=a.isBarType(e)?4:6,i=t[2][1]+r*(e.value<0?-1:1)):i=a.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value&&(i>a.width?i=a.width-o.width:0>i&&(i=4)),i},l.getYForText=function(t,e,n){var i,r=this,a=n.getBoundingClientRect();return r.config.axis_rotated?i=(t[0][0]+t[2][0]+.6*a.height)/2:(i=t[2][1],e.value<0||0===e.value&&!r.hasPositiveValue?(i+=a.height,r.isBarType(e)&&r.isSafari()?i-=3:!r.isBarType(e)&&r.isChrome()&&(i+=3)):i+=r.isBarType(e)?-3:-6),null!==e.value||r.config.axis_rotated||(i<a.height?i=a.height:i>this.height&&(i=this.height-4)),i},l.setTargetType=function(t,e){var n=this,i=n.config;n.mapToTargetIds(t).forEach(function(t){n.withoutFadeIn[t]=e===i.data_types[t],i.data_types[t]=e}),t||(i.data_type=e)},l.hasType=function(t,e){var n=this,i=n.config.data_types,r=!1;return e=e||n.data.targets,e&&e.length?e.forEach(function(e){var n=i[e.id];(n&&n.indexOf(t)>=0||!n&&"line"===t)&&(r=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(e){i[e]===t&&(r=!0)}):r=n.config.data_type===t,r},l.hasArcType=function(t){return this.hasType("pie",t)||this.hasType("donut",t)||this.hasType("gauge",t)},l.isLineType=function(t){var e=this.config,n=p(t)?t:t.id;return!e.data_types[n]||["line","spline","area","area-spline","step","area-step"].indexOf(e.data_types[n])>=0},l.isStepType=function(t){var e=p(t)?t:t.id;return["step","area-step"].indexOf(this.config.data_types[e])>=0},l.isSplineType=function(t){var e=p(t)?t:t.id;return["spline","area-spline"].indexOf(this.config.data_types[e])>=0},l.isAreaType=function(t){var e=p(t)?t:t.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[e])>=0},l.isBarType=function(t){var e=p(t)?t:t.id;return"bar"===this.config.data_types[e]},l.isScatterType=function(t){var e=p(t)?t:t.id;return"scatter"===this.config.data_types[e]},l.isPieType=function(t){var e=p(t)?t:t.id;return"pie"===this.config.data_types[e]},l.isGaugeType=function(t){var e=p(t)?t:t.id;return"gauge"===this.config.data_types[e]},l.isDonutType=function(t){var e=p(t)?t:t.id;return"donut"===this.config.data_types[e]},l.isArcType=function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)},l.lineData=function(t){return this.isLineType(t)?[t]:[]},l.arcData=function(t){return this.isArcType(t.data)?[t]:[]},l.barData=function(t){return this.isBarType(t)?t.values:[]},l.lineOrScatterData=function(t){return this.isLineType(t)||this.isScatterType(t)?t.values:[]},l.barOrLineData=function(t){return this.isBarType(t)||this.isLineType(t)?t.values:[]},l.isInterpolationType=function(t){return["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(t)>=0},l.initGrid=function(){var t=this,e=t.config,n=t.d3;t.grid=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",c.grid),e.grid_x_show&&t.grid.append("g").attr("class",c.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",c.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",c.xgridFocus).append("line").attr("class",c.xgridFocus),t.xgrid=n.selectAll([]),e.grid_lines_front||t.initGridLines()},l.initGridLines=function(){var t=this,e=t.d3;t.gridLines=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",c.grid+" "+c.gridLines),t.gridLines.append("g").attr("class",c.xgridLines),t.gridLines.append("g").attr("class",c.ygridLines),t.xgridLines=e.selectAll([])},l.updateXGrid=function(t){var e=this,n=e.config,i=e.d3,r=e.generateGridData(n.grid_x_type,e.x),a=e.isCategorized()?e.xAxis.tickOffset():0;e.xgridAttr=n.axis_rotated?{x1:0,x2:e.width,y1:function(t){return e.x(t)-a},y2:function(t){return e.x(t)-a}}:{x1:function(t){return e.x(t)+a},x2:function(t){return e.x(t)+a},y1:0,y2:e.height},e.xgrid=e.main.select("."+c.xgrids).selectAll("."+c.xgrid).data(r),e.xgrid.enter().append("line").attr("class",c.xgrid),t||e.xgrid.attr(e.xgridAttr).style("opacity",function(){return+i.select(this).attr(n.axis_rotated?"y1":"x1")===(n.axis_rotated?e.height:0)?0:1}),e.xgrid.exit().remove()},l.updateYGrid=function(){var t=this,e=t.config,n=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks);t.ygrid=t.main.select("."+c.ygrids).selectAll("."+c.ygrid).data(n),t.ygrid.enter().append("line").attr("class",c.ygrid),t.ygrid.attr("x1",e.axis_rotated?t.y:0).attr("x2",e.axis_rotated?t.y:t.width).attr("y1",e.axis_rotated?0:t.y).attr("y2",e.axis_rotated?t.height:t.y),t.ygrid.exit().remove(),t.smoothLines(t.ygrid,"grid")},l.gridTextAnchor=function(t){return t.position?t.position:"end"},l.gridTextDx=function(t){return"start"===t.position?4:"middle"===t.position?0:-4},l.xGridTextX=function(t){return"start"===t.position?-this.height:"middle"===t.position?-this.height/2:0},l.yGridTextX=function(t){return"start"===t.position?0:"middle"===t.position?this.width/2:this.width},l.updateGrid=function(t){var e,n,i,r=this,a=r.main,o=r.config;r.grid.style("visibility",r.hasArcType()?"hidden":"visible"),a.select("line."+c.xgridFocus).style("visibility","hidden"),o.grid_x_show&&r.updateXGrid(),r.xgridLines=a.select("."+c.xgridLines).selectAll("."+c.xgridLine).data(o.grid_x_lines),e=r.xgridLines.enter().append("g").attr("class",function(t){return c.xgridLine+(t["class"]?" "+t["class"]:"")}),e.append("line").style("opacity",0),e.append("text").attr("text-anchor",r.gridTextAnchor).attr("transform",o.axis_rotated?"":"rotate(-90)").attr("dx",r.gridTextDx).attr("dy",-5).style("opacity",0),r.xgridLines.exit().transition().duration(t).style("opacity",0).remove(),o.grid_y_show&&r.updateYGrid(),r.ygridLines=a.select("."+c.ygridLines).selectAll("."+c.ygridLine).data(o.grid_y_lines),n=r.ygridLines.enter().append("g").attr("class",function(t){return c.ygridLine+(t["class"]?" "+t["class"]:"")}),n.append("line").style("opacity",0),n.append("text").attr("text-anchor",r.gridTextAnchor).attr("transform",o.axis_rotated?"rotate(-90)":"").attr("dx",r.gridTextDx).attr("dy",-5).style("opacity",0),i=r.yv.bind(r),r.ygridLines.select("line").transition().duration(t).attr("x1",o.axis_rotated?i:0).attr("x2",o.axis_rotated?i:r.width).attr("y1",o.axis_rotated?0:i).attr("y2",o.axis_rotated?r.height:i).style("opacity",1),r.ygridLines.select("text").transition().duration(t).attr("x",o.axis_rotated?r.xGridTextX.bind(r):r.yGridTextX.bind(r)).attr("y",i).text(function(t){return t.text}).style("opacity",1),r.ygridLines.exit().transition().duration(t).style("opacity",0).remove()},l.redrawGrid=function(t){var e=this,n=e.config,i=e.xv.bind(e),r=e.xgridLines.select("line"),a=e.xgridLines.select("text");return[(t?r.transition():r).attr("x1",n.axis_rotated?0:i).attr("x2",n.axis_rotated?e.width:i).attr("y1",n.axis_rotated?i:0).attr("y2",n.axis_rotated?i:e.height).style("opacity",1),(t?a.transition():a).attr("x",n.axis_rotated?e.yGridTextX.bind(e):e.xGridTextX.bind(e)).attr("y",i).text(function(t){return t.text}).style("opacity",1)]},l.showXGridFocus=function(t){var e=this,n=e.config,i=t.filter(function(t){return t&&f(t.value)}),r=e.main.selectAll("line."+c.xgridFocus),a=e.xx.bind(e);n.tooltip_show&&(e.hasType("scatter")||e.hasArcType()||(r.style("visibility","visible").data([i[0]]).attr(n.axis_rotated?"y1":"x1",a).attr(n.axis_rotated?"y2":"x2",a),e.smoothLines(r,"grid")))},l.hideXGridFocus=function(){this.main.select("line."+c.xgridFocus).style("visibility","hidden")},l.updateXgridFocus=function(){var t=this,e=t.config;t.main.select("line."+c.xgridFocus).attr("x1",e.axis_rotated?0:-10).attr("x2",e.axis_rotated?t.width:-10).attr("y1",e.axis_rotated?-10:0).attr("y2",e.axis_rotated?-10:t.height)},l.generateGridData=function(t,e){var n,i,r,a,o=this,s=[],l=o.main.select("."+c.axisX).selectAll(".tick").size();if("year"===t)for(n=o.getXDomain(),i=n[0].getFullYear(),r=n[1].getFullYear(),a=i;r>=a;a++)s.push(new Date(a+"-01-01 00:00:00"));else s=e.ticks(10),s.length>l&&(s=s.filter(function(t){return(""+t).indexOf(".")<0}));return s},l.getGridFilterToRemove=function(t){return t?function(e){var n=!1;return[].concat(t).forEach(function(t){("value"in t&&e.value===t.value||"class"in t&&e["class"]===t["class"])&&(n=!0)}),n}:function(){return!0}},l.removeGridLines=function(t,e){var n=this,i=n.config,r=n.getGridFilterToRemove(t),a=function(t){return!r(t)},o=e?c.xgridLines:c.ygridLines,s=e?c.xgridLine:c.ygridLine;n.main.select("."+o).selectAll("."+s).filter(r).transition().duration(i.transition_duration).style("opacity",0).remove(),e?i.grid_x_lines=i.grid_x_lines.filter(a):i.grid_y_lines=i.grid_y_lines.filter(a)},l.initTooltip=function(){var t,e=this,n=e.config;if(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",c.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),n.tooltip_init_show){if(e.isTimeSeries()&&p(n.tooltip_init_x)){for(n.tooltip_init_x=e.parseDate(n.tooltip_init_x),t=0;t<e.data.targets[0].values.length&&e.data.targets[0].values[t].x-n.tooltip_init_x!==0;t++);n.tooltip_init_x=t}e.tooltip.html(n.tooltip_contents.call(e,e.data.targets.map(function(t){return e.addName(t.values[n.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color)),e.tooltip.style("top",n.tooltip_init_position.top).style("left",n.tooltip_init_position.left).style("display","block")}},l.getTooltipContent=function(t,e,n,i){var r,a,o,s,l,u,h=this,c=h.config,f=c.tooltip_format_title||e,d=c.tooltip_format_name||function(t){return t},p=c.tooltip_format_value||n,g=h.isOrderAsc();if(0===c.data_groups.length)t.sort(function(t,e){return g?t.value-e.value:e.value-t.value});else{var v=h.orderTargets(h.data.targets).map(function(t){return t.id});t.sort(function(t,e){return t.value>0&&e.value>0?g?v.indexOf(t.id)-v.indexOf(e.id):v.indexOf(e.id)-v.indexOf(t.id):g?t.value-e.value:e.value-t.value})}for(a=0;a<t.length;a++)if(t[a]&&(t[a].value||0===t[a].value)&&(r||(o=f?f(t[a].x):t[a].x,r="<table class='"+h.CLASS.tooltip+"'>"+(o||0===o?"<tr><th colspan='2'>"+o+"</th></tr>":"")),s=p(t[a].value,t[a].ratio,t[a].id,t[a].index),void 0!==s)){if(null===t[a].name)continue;l=d(t[a].name,t[a].ratio,t[a].id,t[a].index),u=h.levelColor?h.levelColor(t[a].value):i(t[a].id),r+="<tr class='"+h.CLASS.tooltipName+"-"+h.getTargetSelectorSuffix(t[a].id)+"'>",r+="<td class='name'><span style='background-color:"+u+"'></span>"+l+"</td>",r+="<td class='value'>"+s+"</td>",r+="</tr>"}return r+"</table>"},l.tooltipPosition=function(t,e,n,i){var r,a,o,s,l,u=this,h=u.config,c=u.d3,f=u.hasArcType(),d=c.mouse(i);return f?(a=(u.width-(u.isLegendRight?u.getLegendWidth():0))/2+d[0],s=u.height/2+d[1]+20):(r=u.getSvgLeft(!0),h.axis_rotated?(a=r+d[0]+100,o=a+e,l=u.currentWidth-u.getCurrentPaddingRight(),s=u.x(t[0].x)+20):(a=r+u.getCurrentPaddingLeft(!0)+u.x(t[0].x)+20,o=a+e,l=r+u.currentWidth-u.getCurrentPaddingRight(),s=d[1]+15),o>l&&(a-=o-l+20),s+n>u.currentHeight&&(s-=n+30)),0>s&&(s=0),{top:s,left:a}},l.showTooltip=function(t,e){var n,i,r,a=this,o=a.config,s=a.hasArcType(),u=t.filter(function(t){return t&&f(t.value)}),h=o.tooltip_position||l.tooltipPosition;0!==u.length&&o.tooltip_show&&(a.tooltip.html(o.tooltip_contents.call(a,t,a.axis.getXAxisTickFormat(),a.getYFormat(s),a.color)).style("display","block"),n=a.tooltip.property("offsetWidth"),i=a.tooltip.property("offsetHeight"),r=h.call(this,u,n,i,e),a.tooltip.style("top",r.top+"px").style("left",r.left+"px"))},l.hideTooltip=function(){this.tooltip.style("display","none")},l.initLegend=function(){var t=this;return t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g").attr("transform",t.getTranslate("legend")),t.config.legend_show?void t.updateLegendWithDefaults():(t.legend.style("visibility","hidden"),void(t.hiddenLegendIds=t.mapToIds(t.data.targets)))},l.updateLegendWithDefaults=function(){var t=this;t.updateLegend(t.mapToIds(t.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},l.updateSizeForLegend=function(t,e){var n=this,i=n.config,r={top:n.isLegendTop?n.getCurrentPaddingTop()+i.legend_inset_y+5.5:n.currentHeight-t-n.getCurrentPaddingBottom()-i.legend_inset_y,left:n.isLegendLeft?n.getCurrentPaddingLeft()+i.legend_inset_x+.5:n.currentWidth-e-n.getCurrentPaddingRight()-i.legend_inset_x+.5};n.margin3={top:n.isLegendRight?0:n.isLegendInset?r.top:n.currentHeight-t,right:NaN,bottom:0,left:n.isLegendRight?n.currentWidth-e:n.isLegendInset?r.left:0}},l.transformLegend=function(t){var e=this;(t?e.legend.transition():e.legend).attr("transform",e.getTranslate("legend"))},l.updateLegendStep=function(t){this.legendStep=t},l.updateLegendItemWidth=function(t){this.legendItemWidth=t},l.updateLegendItemHeight=function(t){this.legendItemHeight=t},l.getLegendWidth=function(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0},l.getLegendHeight=function(){var t=this,e=0;return t.config.legend_show&&(e=t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1)),e},l.opacityForLegend=function(t){return t.classed(c.legendItemHidden)?null:1},l.opacityForUnfocusedLegend=function(t){return t.classed(c.legendItemHidden)?null:.3},l.toggleFocusLegend=function(t,e){var n=this;t=n.mapToTargetIds(t),n.legend.selectAll("."+c.legendItem).filter(function(e){return t.indexOf(e)>=0}).classed(c.legendItemFocused,e).transition().duration(100).style("opacity",function(){var t=e?n.opacityForLegend:n.opacityForUnfocusedLegend;return t.call(n,n.d3.select(this))})},l.revertLegend=function(){var t=this,e=t.d3;t.legend.selectAll("."+c.legendItem).classed(c.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend(e.select(this))})},l.showLegend=function(t){var e=this,n=e.config;n.legend_show||(n.legend_show=!0,e.legend.style("visibility","visible"),e.legendHasRendered||e.updateLegendWithDefaults()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(e.d3.select(this))})},l.hideLegend=function(t){var e=this,n=e.config;n.legend_show&&b(t)&&(n.legend_show=!1,e.legend.style("visibility","hidden")),e.addHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("opacity",0).style("visibility","hidden")},l.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},l.updateLegend=function(t,e,n){function i(t,e){return k.legendItemTextBox[e]||(k.legendItemTextBox[e]=k.getTextRect(t.textContent,c.legendItem,t)),k.legendItemTextBox[e]}function r(e,n,r){function a(t,e){e||(o=(p-R-d)/2,E>o&&(o=(p-d)/2,R=0,O++)),N[t]=O,I[O]=k.isLegendInset?10:o,P[t]=R,R+=d}var o,s,l=0===r,u=r===t.length-1,h=i(e,n),c=h.width+F+(!u||k.isLegendRight||k.isLegendInset?C:0)+S.legend_padding,f=h.height+T,d=k.isLegendRight||k.isLegendInset?f:c,p=k.isLegendRight||k.isLegendInset?k.getLegendHeight():k.getLegendWidth();return l&&(R=0,O=0,A=0,L=0),S.legend_show&&!k.isLegendToShow(n)?void(z[n]=D[n]=N[n]=P[n]=0):(z[n]=c,D[n]=f,(!A||c>=A)&&(A=c),(!L||f>=L)&&(L=f),s=k.isLegendRight||k.isLegendInset?L:A,void(S.legend_equally?(Object.keys(z).forEach(function(t){z[t]=A}),Object.keys(D).forEach(function(t){D[t]=L}),o=(p-s*t.length)/2,E>o?(R=0,O=0,t.forEach(function(t){a(t)})):a(n,!0)):a(n)))}var a,o,s,l,u,h,f,d,p,g,m,x,y,b,_,M,k=this,S=k.config,T=4,C=10,A=0,L=0,E=10,F=S.legend_item_tile_width+5,R=0,P={},z={},D={},I=[0],N={},O=0;t=t.filter(function(t){return!v(S.data_names[t])||null!==S.data_names[t]}),e=e||{},m=w(e,"withTransition",!0),x=w(e,"withTransitionForTransform",!0),k.isLegendInset&&(O=S.legend_inset_step?S.legend_inset_step:t.length,k.updateLegendStep(O)),k.isLegendRight?(a=function(t){return A*N[t]},l=function(t){return I[N[t]]+P[t]}):k.isLegendInset?(a=function(t){return A*N[t]+10},l=function(t){return I[N[t]]+P[t]}):(a=function(t){return I[N[t]]+P[t]},l=function(t){return L*N[t]}),o=function(t,e){return a(t,e)+4+S.legend_item_tile_width},u=function(t,e){return l(t,e)+9},s=function(t,e){return a(t,e)},h=function(t,e){return l(t,e)-5},f=function(t,e){return a(t,e)-2},d=function(t,e){return a(t,e)-2+S.legend_item_tile_width},p=function(t,e){return l(t,e)+4},g=k.legend.selectAll("."+c.legendItem).data(t).enter().append("g").attr("class",function(t){return k.generateClass(c.legendItem,t)}).style("visibility",function(t){return k.isLegendToShow(t)?"visible":"hidden"}).style("cursor","pointer").on("click",function(t){S.legend_item_onclick?S.legend_item_onclick.call(k,t):k.d3.event.altKey?(k.api.hide(),k.api.show(t)):(k.api.toggle(t),k.isTargetToShow(t)?k.api.focus(t):k.api.revert())}).on("mouseover",function(t){S.legend_item_onmouseover?S.legend_item_onmouseover.call(k,t):(k.d3.select(this).classed(c.legendItemFocused,!0),!k.transiting&&k.isTargetToShow(t)&&k.api.focus(t))}).on("mouseout",function(t){S.legend_item_onmouseout?S.legend_item_onmouseout.call(k,t):(k.d3.select(this).classed(c.legendItemFocused,!1),k.api.revert())}),g.append("text").text(function(t){return v(S.data_names[t])?S.data_names[t]:t}).each(function(t,e){r(this,t,e)}).style("pointer-events","none").attr("x",k.isLegendRight||k.isLegendInset?o:-200).attr("y",k.isLegendRight||k.isLegendInset?-200:u),g.append("rect").attr("class",c.legendItemEvent).style("fill-opacity",0).attr("x",k.isLegendRight||k.isLegendInset?s:-200).attr("y",k.isLegendRight||k.isLegendInset?-200:h),g.append("line").attr("class",c.legendItemTile).style("stroke",k.color).style("pointer-events","none").attr("x1",k.isLegendRight||k.isLegendInset?f:-200).attr("y1",k.isLegendRight||k.isLegendInset?-200:p).attr("x2",k.isLegendRight||k.isLegendInset?d:-200).attr("y2",k.isLegendRight||k.isLegendInset?-200:p).attr("stroke-width",S.legend_item_tile_height),M=k.legend.select("."+c.legendBackground+" rect"),k.isLegendInset&&A>0&&0===M.size()&&(M=k.legend.insert("g","."+c.legendItem).attr("class",c.legendBackground).append("rect")),y=k.legend.selectAll("text").data(t).text(function(t){return v(S.data_names[t])?S.data_names[t]:t}).each(function(t,e){r(this,t,e)}),(m?y.transition():y).attr("x",o).attr("y",u),b=k.legend.selectAll("rect."+c.legendItemEvent).data(t),(m?b.transition():b).attr("width",function(t){return z[t]}).attr("height",function(t){return D[t]}).attr("x",s).attr("y",h),_=k.legend.selectAll("line."+c.legendItemTile).data(t),(m?_.transition():_).style("stroke",k.color).attr("x1",f).attr("y1",p).attr("x2",d).attr("y2",p),M&&(m?M.transition():M).attr("height",k.getLegendHeight()-12).attr("width",A*(O+1)+10),k.legend.selectAll("."+c.legendItem).classed(c.legendItemHidden,function(t){return!k.isTargetToShow(t)}),k.updateLegendItemWidth(A),k.updateLegendItemHeight(L),k.updateLegendStep(O),k.updateSizes(),k.updateScales(),k.updateSvgSize(),k.transformAll(x,n),k.legendHasRendered=!0},l.initTitle=function(){var t=this;t.title=t.svg.append("text").text(t.config.title_text).attr("class",t.CLASS.title)},l.redrawTitle=function(){var t=this;t.title.attr("x",t.xForTitle.bind(t)).attr("y",t.yForTitle.bind(t))},l.xForTitle=function(){var t,e=this,n=e.config,i=n.title_position||"left";return t=i.indexOf("right")>=0?e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width-n.title_padding.right:i.indexOf("center")>=0?(e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width)/2:n.title_padding.left},l.yForTitle=function(){var t=this;return t.config.title_padding.top+t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).height},l.getTitlePadding=function(){var t=this;return t.yForTitle()+t.config.title_padding.bottom},n(e,a),a.prototype.init=function(){var t=this.owner,e=t.config,n=t.main;t.axes.x=n.append("g").attr("class",c.axis+" "+c.axisX).attr("clip-path",t.clipPathForXAxis).attr("transform",t.getTranslate("x")).style("visibility",e.axis_x_show?"visible":"hidden"),t.axes.x.append("text").attr("class",c.axisXLabel).attr("transform",e.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),t.axes.y=n.append("g").attr("class",c.axis+" "+c.axisY).attr("clip-path",e.axis_y_inner?"":t.clipPathForYAxis).attr("transform",t.getTranslate("y")).style("visibility",e.axis_y_show?"visible":"hidden"),t.axes.y.append("text").attr("class",c.axisYLabel).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),t.axes.y2=n.append("g").attr("class",c.axis+" "+c.axisY2).attr("transform",t.getTranslate("y2")).style("visibility",e.axis_y2_show?"visible":"hidden"),t.axes.y2.append("text").attr("class",c.axisY2Label).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},a.prototype.getXAxis=function(t,e,n,i,r,a,s){var l=this.owner,u=l.config,h={isCategory:l.isCategorized(),withOuterTick:r,tickMultiline:u.axis_x_tick_multiline,tickWidth:u.axis_x_tick_width,tickTextRotate:s?0:u.axis_x_tick_rotate,withoutTransition:a},c=o(l.d3,h).scale(t).orient(e);return l.isTimeSeries()&&i&&"function"!=typeof i&&(i=i.map(function(t){return l.parseDate(t)})),c.tickFormat(n).tickValues(i),l.isCategorized()&&(c.tickCentered(u.axis_x_tick_centered),
b(u.axis_x_tick_culling)&&(u.axis_x_tick_culling=!1)),c},a.prototype.updateXAxisTickValues=function(t,e){var n,i=this.owner,r=i.config;return(r.axis_x_tick_fit||r.axis_x_tick_count)&&(n=this.generateTickValues(i.mapTargetsToUniqueXs(t),r.axis_x_tick_count,i.isTimeSeries())),e?e.tickValues(n):(i.xAxis.tickValues(n),i.subXAxis.tickValues(n)),n},a.prototype.getYAxis=function(t,e,n,i,r,a){var s={withOuterTick:r,withoutTransition:a},l=this.owner,u=l.d3,h=l.config,c=o(u,s).scale(t).orient(e).tickFormat(n);return l.isTimeSeriesY()?c.ticks(u.time[h.axis_y_tick_time_value],h.axis_y_tick_time_interval):c.tickValues(i),c},a.prototype.getId=function(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"},a.prototype.getXAxisTickFormat=function(){var t=this.owner,e=t.config,n=t.isTimeSeries()?t.defaultAxisTimeFormat:t.isCategorized()?t.categoryName:function(t){return 0>t?t.toFixed(0):t};return e.axis_x_tick_format&&(d(e.axis_x_tick_format)?n=e.axis_x_tick_format:t.isTimeSeries()&&(n=function(n){return n?t.axisTimeFormat(e.axis_x_tick_format)(n):""})),d(n)?function(e){return n.call(t,e)}:n},a.prototype.getTickValues=function(t,e){return t?t:e?e.tickValues():void 0},a.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},a.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},a.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},a.prototype.getLabelOptionByAxisId=function(t){var e,n=this.owner,i=n.config;return"y"===t?e=i.axis_y_label:"y2"===t?e=i.axis_y2_label:"x"===t&&(e=i.axis_x_label),e},a.prototype.getLabelText=function(t){var e=this.getLabelOptionByAxisId(t);return p(e)?e:e?e.text:null},a.prototype.setLabelText=function(t,e){var n=this.owner,i=n.config,r=this.getLabelOptionByAxisId(t);p(r)?"y"===t?i.axis_y_label=e:"y2"===t?i.axis_y2_label=e:"x"===t&&(i.axis_x_label=e):r&&(r.text=e)},a.prototype.getLabelPosition=function(t,e){var n=this.getLabelOptionByAxisId(t),i=n&&"object"==typeof n&&n.position?n.position:e;return{isInner:i.indexOf("inner")>=0,isOuter:i.indexOf("outer")>=0,isLeft:i.indexOf("left")>=0,isCenter:i.indexOf("center")>=0,isRight:i.indexOf("right")>=0,isTop:i.indexOf("top")>=0,isMiddle:i.indexOf("middle")>=0,isBottom:i.indexOf("bottom")>=0}},a.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},a.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},a.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},a.prototype.getLabelPositionById=function(t){return"y2"===t?this.getY2AxisLabelPosition():"y"===t?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},a.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},a.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},a.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},a.prototype.xForAxisLabel=function(t,e){var n=this.owner;return t?e.isLeft?0:e.isCenter?n.width/2:n.width:e.isBottom?-n.height:e.isMiddle?-n.height/2:0},a.prototype.dxForAxisLabel=function(t,e){return t?e.isLeft?"0.5em":e.isRight?"-0.5em":"0":e.isTop?"-0.5em":e.isBottom?"0.5em":"0"},a.prototype.textAnchorForAxisLabel=function(t,e){return t?e.isLeft?"start":e.isCenter?"middle":"end":e.isBottom?"start":e.isMiddle?"middle":"end"},a.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},a.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},a.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},a.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},a.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},a.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},a.prototype.dyForXAxisLabel=function(){var t=this.owner,e=t.config,n=this.getXAxisLabelPosition();return e.axis_rotated?n.isInner?"1.2em":-25-this.getMaxTickWidth("x"):n.isInner?"-0.5em":e.axis_x_height?e.axis_x_height-10:"3em"},a.prototype.dyForYAxisLabel=function(){var t=this.owner,e=this.getYAxisLabelPosition();return t.config.axis_rotated?e.isInner?"-0.5em":"3em":e.isInner?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},a.prototype.dyForY2AxisLabel=function(){var t=this.owner,e=this.getY2AxisLabelPosition();return t.config.axis_rotated?e.isInner?"1.2em":"-2.2em":e.isInner?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},a.prototype.textAnchorForXAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(!t.config.axis_rotated,this.getXAxisLabelPosition())},a.prototype.textAnchorForYAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getYAxisLabelPosition())},a.prototype.textAnchorForY2AxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getY2AxisLabelPosition())},a.prototype.getMaxTickWidth=function(t,e){var n,i,r,a,o,s=this.owner,l=s.config,u=0;return e&&s.currentMaxTickWidths[t]?s.currentMaxTickWidths[t]:(s.svg&&(n=s.filterTargetsToShow(s.data.targets),"y"===t?(i=s.y.copy().domain(s.getYDomain(n,"y")),r=this.getYAxis(i,s.yOrient,l.axis_y_tick_format,s.yAxisTickValues,!1,!0)):"y2"===t?(i=s.y2.copy().domain(s.getYDomain(n,"y2")),r=this.getYAxis(i,s.y2Orient,l.axis_y2_tick_format,s.y2AxisTickValues,!1,!0)):(i=s.x.copy().domain(s.getXDomain(n)),r=this.getXAxis(i,s.xOrient,s.xAxisTickFormat,s.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(n,r)),a=s.d3.select("body").append("div").classed("c3",!0),o=a.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),o.append("g").call(r).each(function(){s.d3.select(this).selectAll("text").each(function(){var t=this.getBoundingClientRect();u<t.width&&(u=t.width)}),a.remove()})),s.currentMaxTickWidths[t]=0>=u?s.currentMaxTickWidths[t]:u,s.currentMaxTickWidths[t])},a.prototype.updateLabels=function(t){var e=this.owner,n=e.main.select("."+c.axisX+" ."+c.axisXLabel),i=e.main.select("."+c.axisY+" ."+c.axisYLabel),r=e.main.select("."+c.axisY2+" ."+c.axisY2Label);(t?n.transition():n).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(t?i.transition():i).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(t?r.transition():r).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},a.prototype.getPadding=function(t,e,n,i){var r="number"==typeof t?t:t[e];return f(r)?"ratio"===t.unit?t[e]*i:this.convertPixelsToAxisPadding(r,i):n},a.prototype.convertPixelsToAxisPadding=function(t,e){var n=this.owner,i=n.config.axis_rotated?n.width:n.height;return e*(t/i)},a.prototype.generateTickValues=function(t,e,n){var i,r,a,o,s,l,u,h=t;if(e)if(i=d(e)?e():e,1===i)h=[t[0]];else if(2===i)h=[t[0],t[t.length-1]];else if(i>2){for(o=i-2,r=t[0],a=t[t.length-1],s=(a-r)/(o+1),h=[r],l=0;o>l;l++)u=+r+s*(l+1),h.push(n?new Date(u):u);h.push(a)}return n||(h=h.sort(function(t,e){return t-e})),h},a.prototype.generateTransitions=function(t){var e=this.owner,n=e.axes;return{axisX:t?n.x.transition().duration(t):n.x,axisY:t?n.y.transition().duration(t):n.y,axisY2:t?n.y2.transition().duration(t):n.y2,axisSubX:t?n.subx.transition().duration(t):n.subx}},a.prototype.redraw=function(t,e){var n=this.owner;n.axes.x.style("opacity",e?0:1),n.axes.y.style("opacity",e?0:1),n.axes.y2.style("opacity",e?0:1),n.axes.subx.style("opacity",e?0:1),t.axisX.call(n.xAxis),t.axisY.call(n.yAxis),t.axisY2.call(n.y2Axis),t.axisSubX.call(n.subXAxis)},l.getClipPath=function(e){var n=t.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(n?"":document.URL.split("#")[0])+"#"+e+")"},l.appendClip=function(t,e){return t.append("clipPath").attr("id",e).append("rect")},l.getAxisClipX=function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},l.getAxisClipY=function(t){return t?-20:-this.margin.top},l.getXAxisClipX=function(){var t=this;return t.getAxisClipX(!t.config.axis_rotated)},l.getXAxisClipY=function(){var t=this;return t.getAxisClipY(!t.config.axis_rotated)},l.getYAxisClipX=function(){var t=this;return t.config.axis_y_inner?-1:t.getAxisClipX(t.config.axis_rotated)},l.getYAxisClipY=function(){var t=this;return t.getAxisClipY(t.config.axis_rotated)},l.getAxisClipWidth=function(t){var e=this,n=Math.max(30,e.margin.left),i=Math.max(30,e.margin.right);return t?e.width+2+n+i:e.margin.left+20},l.getAxisClipHeight=function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},l.getXAxisClipWidth=function(){var t=this;return t.getAxisClipWidth(!t.config.axis_rotated)},l.getXAxisClipHeight=function(){var t=this;return t.getAxisClipHeight(!t.config.axis_rotated)},l.getYAxisClipWidth=function(){var t=this;return t.getAxisClipWidth(t.config.axis_rotated)+(t.config.axis_y_inner?20:0)},l.getYAxisClipHeight=function(){var t=this;return t.getAxisClipHeight(t.config.axis_rotated)},l.initPie=function(){var t=this,e=t.d3,n=t.config;t.pie=e.layout.pie().value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)}),n.data_order||t.pie.sort(null)},l.updateRadius=function(){var t=this,e=t.config,n=e.gauge_width||e.donut_width;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2,t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=n?(t.radius-n)/t.radius:.6,t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:0},l.updateArc=function(){var t=this;t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded(),t.svgArcExpandedSub=t.getSvgArcExpanded(.98)},l.updateAngle=function(t){var e,n,i,r,a=this,o=a.config,s=!1,l=0;return o?(a.pie(a.filterTargetsToShow(a.data.targets)).forEach(function(e){s||e.data.id!==t.data.id||(s=!0,t=e,t.index=l),l++}),isNaN(t.startAngle)&&(t.startAngle=0),isNaN(t.endAngle)&&(t.endAngle=t.startAngle),a.isGaugeType(t.data)&&(e=o.gauge_min,n=o.gauge_max,i=Math.PI/(n-e),r=t.value<e?0:t.value<n?t.value-e:n-e,t.startAngle=-1*(Math.PI/2),t.endAngle=t.startAngle+i*r),s?t:null):null},l.getSvgArc=function(){var t=this,e=t.d3.svg.arc().outerRadius(t.radius).innerRadius(t.innerRadius),n=function(n,i){var r;return i?e(n):(r=t.updateAngle(n),r?e(r):"M 0 0")};return n.centroid=e.centroid,n},l.getSvgArcExpanded=function(t){var e=this,n=e.d3.svg.arc().outerRadius(e.radiusExpanded*(t?t:1)).innerRadius(e.innerRadius);return function(t){var i=e.updateAngle(t);return i?n(i):"M 0 0"}},l.getArc=function(t,e,n){return n||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},l.transformForArcLabel=function(t){var e,n,i,r,a,o=this,s=o.updateAngle(t),l="";return s&&!o.hasType("gauge")&&(e=this.svgArc.centroid(s),n=isNaN(e[0])?0:e[0],i=isNaN(e[1])?0:e[1],r=Math.sqrt(n*n+i*i),a=o.radius&&r?(36/o.radius>.375?1.175-36/o.radius:.8)*o.radius/r:0,l="translate("+n*a+","+i*a+")"),l},l.getArcRatio=function(t){var e=this,n=e.hasType("gauge")?Math.PI:2*Math.PI;return t?(t.endAngle-t.startAngle)/n:null},l.convertToArcData=function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getArcRatio(t),index:t.index})},l.textForArcLabel=function(t){var e,n,i,r,a,o=this;return o.shouldShowArcLabel()?(e=o.updateAngle(t),n=e?e.value:null,i=o.getArcRatio(e),r=t.data.id,o.hasType("gauge")||o.meetsArcLabelThreshold(i)?(a=o.getArcLabelFormat(),a?a(n,i,r):o.defaultArcValueFormat(n,i)):""):""},l.expandArc=function(e){var n,i=this;return i.transiting?void(n=t.setInterval(function(){i.transiting||(t.clearInterval(n),i.legend.selectAll(".c3-legend-item-focused").size()>0&&i.expandArc(e))},10)):(e=i.mapToTargetIds(e),void i.svg.selectAll(i.selectorTargets(e,"."+c.chartArc)).each(function(t){i.shouldExpand(t.data.id)&&i.d3.select(this).selectAll("path").transition().duration(i.expandDuration(t.data.id)).attr("d",i.svgArcExpanded).transition().duration(2*i.expandDuration(t.data.id)).attr("d",i.svgArcExpandedSub).each(function(t){i.isDonutType(t.data)})}))},l.unexpandArc=function(t){var e=this;e.transiting||(t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t,"."+c.chartArc)).selectAll("path").transition().duration(function(t){return e.expandDuration(t.data.id)}).attr("d",e.svgArc),e.svg.selectAll("."+c.arc).style("opacity",1))},l.expandDuration=function(t){var e=this,n=e.config;return e.isDonutType(t)?n.donut_expand_duration:e.isGaugeType(t)?n.gauge_expand_duration:e.isPieType(t)?n.pie_expand_duration:50},l.shouldExpand=function(t){var e=this,n=e.config;return e.isDonutType(t)&&n.donut_expand||e.isGaugeType(t)&&n.gauge_expand||e.isPieType(t)&&n.pie_expand},l.shouldShowArcLabel=function(){var t=this,e=t.config,n=!0;return t.hasType("donut")?n=e.donut_label_show:t.hasType("pie")&&(n=e.pie_label_show),n},l.meetsArcLabelThreshold=function(t){var e=this,n=e.config,i=e.hasType("donut")?n.donut_label_threshold:n.pie_label_threshold;return t>=i},l.getArcLabelFormat=function(){var t=this,e=t.config,n=e.pie_label_format;return t.hasType("gauge")?n=e.gauge_label_format:t.hasType("donut")&&(n=e.donut_label_format),n},l.getArcTitle=function(){var t=this;return t.hasType("donut")?t.config.donut_title:""},l.updateTargetsForArc=function(t){var e,n,i=this,r=i.main,a=i.classChartArc.bind(i),o=i.classArcs.bind(i),s=i.classFocus.bind(i);e=r.select("."+c.chartArcs).selectAll("."+c.chartArc).data(i.pie(t)).attr("class",function(t){return a(t)+s(t.data)}),n=e.enter().append("g").attr("class",a),n.append("g").attr("class",o),n.append("text").attr("dy",i.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},l.initArc=function(){var t=this;t.arcs=t.main.select("."+c.chart).append("g").attr("class",c.chartArcs).attr("transform",t.getTranslate("arc")),t.arcs.append("text").attr("class",c.chartArcsTitle).style("text-anchor","middle").text(t.getArcTitle())},l.redrawArc=function(t,e,n){var i,r=this,a=r.d3,o=r.config,s=r.main;i=s.selectAll("."+c.arcs).selectAll("."+c.arc).data(r.arcData.bind(r)),i.enter().append("path").attr("class",r.classArc.bind(r)).style("fill",function(t){return r.color(t.data)}).style("cursor",function(t){return o.interaction_enabled&&o.data_selection_isselectable(t)?"pointer":null}).style("opacity",0).each(function(t){r.isGaugeType(t.data)&&(t.startAngle=t.endAngle=-1*(Math.PI/2)),this._current=t}),i.attr("transform",function(t){return!r.isGaugeType(t.data)&&n?"scale(0)":""}).style("opacity",function(t){return t===this._current?0:1}).on("mouseover",o.interaction_enabled?function(t){var e,n;r.transiting||(e=r.updateAngle(t),e&&(n=r.convertToArcData(e),r.expandArc(e.data.id),r.api.focus(e.data.id),r.toggleFocusLegend(e.data.id,!0),r.config.data_onmouseover(n,this)))}:null).on("mousemove",o.interaction_enabled?function(t){var e,n,i=r.updateAngle(t);i&&(e=r.convertToArcData(i),n=[e],r.showTooltip(n,this))}:null).on("mouseout",o.interaction_enabled?function(t){var e,n;r.transiting||(e=r.updateAngle(t),e&&(n=r.convertToArcData(e),r.unexpandArc(e.data.id),r.api.revert(),r.revertLegend(),r.hideTooltip(),r.config.data_onmouseout(n,this)))}:null).on("click",o.interaction_enabled?function(t,e){var n,i=r.updateAngle(t);i&&(n=r.convertToArcData(i),r.toggleShape&&r.toggleShape(this,n,e),r.config.data_onclick.call(r.api,n,this))}:null).each(function(){r.transiting=!0}).transition().duration(t).attrTween("d",function(t){var e,n=r.updateAngle(t);return n?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),e=a.interpolate(this._current,n),this._current=e(0),function(n){var i=e(n);return i.data=t.data,r.getArc(i,!0)}):function(){return"M 0 0"}}).attr("transform",n?"scale(1)":"").style("fill",function(t){return r.levelColor?r.levelColor(t.data.values[0].value):r.color(t.data.id)}).style("opacity",1).call(r.endall,function(){r.transiting=!1}),i.exit().transition().duration(e).style("opacity",0).remove(),s.selectAll("."+c.chartArc).select("text").style("opacity",0).attr("class",function(t){return r.isGaugeType(t.data)?c.gaugeValue:""}).text(r.textForArcLabel.bind(r)).attr("transform",r.transformForArcLabel.bind(r)).style("font-size",function(t){return r.isGaugeType(t.data)?Math.round(r.radius/5)+"px":""}).transition().duration(t).style("opacity",function(t){return r.isTargetToShow(t.data.id)&&r.isArcType(t.data)?1:0}),s.select("."+c.chartArcsTitle).style("opacity",r.hasType("donut")||r.hasType("gauge")?1:0),r.hasType("gauge")&&(r.arcs.select("."+c.chartArcsBackground).attr("d",function(){var t={data:[{value:o.gauge_max}],startAngle:-1*(Math.PI/2),endAngle:Math.PI/2};return r.getArc(t,!0,!0)}),r.arcs.select("."+c.chartArcsGaugeUnit).attr("dy",".75em").text(o.gauge_label_show?o.gauge_units:""),r.arcs.select("."+c.chartArcsGaugeMin).attr("dx",-1*(r.innerRadius+(r.radius-r.innerRadius)/2)+"px").attr("dy","1.2em").text(o.gauge_label_show?o.gauge_min:""),r.arcs.select("."+c.chartArcsGaugeMax).attr("dx",r.innerRadius+(r.radius-r.innerRadius)/2+"px").attr("dy","1.2em").text(o.gauge_label_show?o.gauge_max:""))},l.initGauge=function(){var t=this.arcs;this.hasType("gauge")&&(t.append("path").attr("class",c.chartArcsBackground),t.append("text").attr("class",c.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",c.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",c.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},l.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},l.initRegion=function(){var t=this;t.region=t.main.append("g").attr("clip-path",t.clipPath).attr("class",c.regions)},l.updateRegion=function(t){var e=this,n=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible"),e.mainRegion=e.main.select("."+c.regions).selectAll("."+c.region).data(n.regions),e.mainRegion.enter().append("g").attr("class",e.classRegion.bind(e)).append("rect").style("fill-opacity",0),e.mainRegion.exit().transition().duration(t).style("opacity",0).remove()},l.redrawRegion=function(t){var e=this,n=e.mainRegion.selectAll("rect"),i=e.regionX.bind(e),r=e.regionY.bind(e),a=e.regionWidth.bind(e),o=e.regionHeight.bind(e);return[(t?n.transition():n).attr("x",i).attr("y",r).attr("width",a).attr("height",o).style("fill-opacity",function(t){return f(t.opacity)?t.opacity:.1})]},l.regionX=function(t){var e,n=this,i=n.config,r="y"===t.axis?n.y:n.y2;return e="y"===t.axis||"y2"===t.axis?i.axis_rotated&&"start"in t?r(t.start):0:i.axis_rotated?0:"start"in t?n.x(n.isTimeSeries()?n.parseDate(t.start):t.start):0},l.regionY=function(t){var e,n=this,i=n.config,r="y"===t.axis?n.y:n.y2;return e="y"===t.axis||"y2"===t.axis?i.axis_rotated?0:"end"in t?r(t.end):0:i.axis_rotated&&"start"in t?n.x(n.isTimeSeries()?n.parseDate(t.start):t.start):0},l.regionWidth=function(t){var e,n=this,i=n.config,r=n.regionX(t),a="y"===t.axis?n.y:n.y2;return e="y"===t.axis||"y2"===t.axis?i.axis_rotated&&"end"in t?a(t.end):n.width:i.axis_rotated?n.width:"end"in t?n.x(n.isTimeSeries()?n.parseDate(t.end):t.end):n.width,r>e?0:e-r},l.regionHeight=function(t){var e,n=this,i=n.config,r=this.regionY(t),a="y"===t.axis?n.y:n.y2;return e="y"===t.axis||"y2"===t.axis?i.axis_rotated?n.height:"start"in t?a(t.start):n.height:i.axis_rotated&&"end"in t?n.x(n.isTimeSeries()?n.parseDate(t.end):t.end):n.height,r>e?0:e-r},l.isRegionOnX=function(t){return!t.axis||"x"===t.axis},l.drag=function(t){var e,n,i,r,a,o,s,l,u=this,h=u.config,f=u.main,d=u.d3;u.hasArcType()||h.data_selection_enabled&&(!h.zoom_enabled||u.zoom.altDomain)&&h.data_selection_multiple&&(e=u.dragStart[0],n=u.dragStart[1],i=t[0],r=t[1],a=Math.min(e,i),o=Math.max(e,i),s=h.data_selection_grouped?u.margin.top:Math.min(n,r),l=h.data_selection_grouped?u.height:Math.max(n,r),f.select("."+c.dragarea).attr("x",a).attr("y",s).attr("width",o-a).attr("height",l-s),f.selectAll("."+c.shapes).selectAll("."+c.shape).filter(function(t){return h.data_selection_isselectable(t)}).each(function(t,e){var n,i,r,h,f,p,g=d.select(this),v=g.classed(c.SELECTED),m=g.classed(c.INCLUDED),x=!1;if(g.classed(c.circle))n=1*g.attr("cx"),i=1*g.attr("cy"),f=u.togglePoint,x=n>a&&o>n&&i>s&&l>i;else{if(!g.classed(c.bar))return;p=k(this),n=p.x,i=p.y,r=p.width,h=p.height,f=u.togglePath,x=!(n>o||a>n+r||i>l||s>i+h)}x^m&&(g.classed(c.INCLUDED,!m),g.classed(c.SELECTED,!v),f.call(u,!v,g,t,e))}))},l.dragstart=function(t){var e=this,n=e.config;e.hasArcType()||n.data_selection_enabled&&(e.dragStart=t,e.main.select("."+c.chart).append("rect").attr("class",c.dragarea).style("opacity",.1),e.dragging=!0)},l.dragend=function(){var t=this,e=t.config;t.hasArcType()||e.data_selection_enabled&&(t.main.select("."+c.dragarea).transition().duration(100).style("opacity",0).remove(),t.main.selectAll("."+c.shape).classed(c.INCLUDED,!1),t.dragging=!1)},l.selectPoint=function(t,e,n){var i=this,r=i.config,a=(r.axis_rotated?i.circleY:i.circleX).bind(i),o=(r.axis_rotated?i.circleX:i.circleY).bind(i),s=i.pointSelectR.bind(i);r.data_onselected.call(i.api,e,t.node()),i.main.select("."+c.selectedCircles+i.getTargetSelectorSuffix(e.id)).selectAll("."+c.selectedCircle+"-"+n).data([e]).enter().append("circle").attr("class",function(){return i.generateClass(c.selectedCircle,n)}).attr("cx",a).attr("cy",o).attr("stroke",function(){return i.color(e)}).attr("r",function(t){return 1.4*i.pointSelectR(t)}).transition().duration(100).attr("r",s)},l.unselectPoint=function(t,e,n){var i=this;i.config.data_onunselected.call(i.api,e,t.node()),i.main.select("."+c.selectedCircles+i.getTargetSelectorSuffix(e.id)).selectAll("."+c.selectedCircle+"-"+n).transition().duration(100).attr("r",0).remove()},l.togglePoint=function(t,e,n,i){t?this.selectPoint(e,n,i):this.unselectPoint(e,n,i)},l.selectPath=function(t,e){var n=this;n.config.data_onselected.call(n,e,t.node()),t.transition().duration(100).style("fill",function(){return n.d3.rgb(n.color(e)).brighter(.75)})},l.unselectPath=function(t,e){var n=this;n.config.data_onunselected.call(n,e,t.node()),t.transition().duration(100).style("fill",function(){return n.color(e)})},l.togglePath=function(t,e,n,i){t?this.selectPath(e,n,i):this.unselectPath(e,n,i)},l.getToggle=function(t,e){var n,i=this;return"circle"===t.nodeName?n=i.isStepType(e)?function(){}:i.togglePoint:"path"===t.nodeName&&(n=i.togglePath),n},l.toggleShape=function(t,e,n){var i=this,r=i.d3,a=i.config,o=r.select(t),s=o.classed(c.SELECTED),l=i.getToggle(t,e).bind(i);a.data_selection_enabled&&a.data_selection_isselectable(e)&&(a.data_selection_multiple||i.main.selectAll("."+c.shapes+(a.data_selection_grouped?i.getTargetSelectorSuffix(e.id):"")).selectAll("."+c.shape).each(function(t,e){var n=r.select(this);n.classed(c.SELECTED)&&l(!1,n.classed(c.SELECTED,!1),t,e)}),o.classed(c.SELECTED,!s),l(!s,o,e,n))},l.initBrush=function(){var t=this,e=t.d3;t.brush=e.svg.brush().on("brush",function(){t.redrawForBrush()}),t.brush.update=function(){return t.context&&t.context.select("."+c.brush).call(this),this},t.brush.scale=function(e){return t.config.axis_rotated?this.y(e):this.x(e)}},l.initSubchart=function(){var t=this,e=t.config,n=t.context=t.svg.append("g").attr("transform",t.getTranslate("context")),i=e.subchart_show?"visible":"hidden";n.style("visibility",i),n.append("g").attr("clip-path",t.clipPathForSubchart).attr("class",c.chart),n.select("."+c.chart).append("g").attr("class",c.chartBars),n.select("."+c.chart).append("g").attr("class",c.chartLines),n.append("g").attr("clip-path",t.clipPath).attr("class",c.brush).call(t.brush),t.axes.subx=n.append("g").attr("class",c.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis).style("visibility",e.subchart_axis_x_show?i:"hidden")},l.updateTargetsForSubchart=function(t){var e,n,i,r,a=this,o=a.context,s=a.config,l=a.classChartBar.bind(a),u=a.classBars.bind(a),h=a.classChartLine.bind(a),f=a.classLines.bind(a),d=a.classAreas.bind(a);s.subchart_show&&(r=o.select("."+c.chartBars).selectAll("."+c.chartBar).data(t).attr("class",l),i=r.enter().append("g").style("opacity",0).attr("class",l),i.append("g").attr("class",u),n=o.select("."+c.chartLines).selectAll("."+c.chartLine).data(t).attr("class",h),e=n.enter().append("g").style("opacity",0).attr("class",h),e.append("g").attr("class",f),e.append("g").attr("class",d),o.selectAll("."+c.brush+" rect").attr(s.axis_rotated?"width":"height",s.axis_rotated?a.width2:a.height2))},l.updateBarForSubchart=function(t){var e=this;e.contextBar=e.context.selectAll("."+c.bars).selectAll("."+c.bar).data(e.barData.bind(e)),e.contextBar.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color),e.contextBar.style("opacity",e.initialOpacity.bind(e)),e.contextBar.exit().transition().duration(t).style("opacity",0).remove()},l.redrawBarForSubchart=function(t,e,n){(e?this.contextBar.transition(Math.random().toString()).duration(n):this.contextBar).attr("d",t).style("opacity",1)},l.updateLineForSubchart=function(t){var e=this;e.contextLine=e.context.selectAll("."+c.lines).selectAll("."+c.line).data(e.lineData.bind(e)),e.contextLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color),e.contextLine.style("opacity",e.initialOpacity.bind(e)),e.contextLine.exit().transition().duration(t).style("opacity",0).remove()},l.redrawLineForSubchart=function(t,e,n){(e?this.contextLine.transition(Math.random().toString()).duration(n):this.contextLine).attr("d",t).style("opacity",1)},l.updateAreaForSubchart=function(t){var e=this,n=e.d3;e.contextArea=e.context.selectAll("."+c.areas).selectAll("."+c.area).data(e.lineData.bind(e)),e.contextArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+n.select(this).style("opacity"),0}),e.contextArea.style("opacity",0),e.contextArea.exit().transition().duration(t).style("opacity",0).remove()},l.redrawAreaForSubchart=function(t,e,n){(e?this.contextArea.transition(Math.random().toString()).duration(n):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},l.redrawSubchart=function(t,e,n,i,r,a,o){var s,l,u,h=this,c=h.d3,f=h.config;h.context.style("visibility",f.subchart_show?"visible":"hidden"),f.subchart_show&&(c.event&&"zoom"===c.event.type&&h.brush.extent(h.x.orgDomain()).update(),t&&(h.brush.empty()||h.brush.extent(h.x.orgDomain()).update(),s=h.generateDrawArea(r,!0),l=h.generateDrawBar(a,!0),u=h.generateDrawLine(o,!0),h.updateBarForSubchart(n),h.updateLineForSubchart(n),h.updateAreaForSubchart(n),h.redrawBarForSubchart(l,n,n),h.redrawLineForSubchart(u,n,n),h.redrawAreaForSubchart(s,n,n)))},l.redrawForBrush=function(){var t=this,e=t.x;t.redraw({withTransition:!1,withY:t.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),t.config.subchart_onbrush.call(t.api,e.orgDomain())},l.transformContext=function(t,e){var n,i=this;e&&e.axisSubX?n=e.axisSubX:(n=i.context.select("."+c.axisX),t&&(n=n.transition())),i.context.attr("transform",i.getTranslate("context")),n.attr("transform",i.getTranslate("subx"))},l.getDefaultExtent=function(){var t=this,e=t.config,n=d(e.axis_x_extent)?e.axis_x_extent(t.getXDomain(t.data.targets)):e.axis_x_extent;return t.isTimeSeries()&&(n=[t.parseDate(n[0]),t.parseDate(n[1])]),n},l.initZoom=function(){var t,e=this,n=e.d3,i=e.config;e.zoom=n.behavior.zoom().on("zoomstart",function(){t=n.event.sourceEvent,e.zoom.altDomain=n.event.sourceEvent.altKey?e.x.orgDomain():null,i.zoom_onzoomstart.call(e.api,n.event.sourceEvent)}).on("zoom",function(){e.redrawForZoom.call(e)}).on("zoomend",function(){var r=n.event.sourceEvent;r&&t.clientX===r.clientX&&t.clientY===r.clientY||(e.redrawEventRect(),e.updateZoom(),i.zoom_onzoomend.call(e.api,e.x.orgDomain()))}),e.zoom.scale=function(t){return i.axis_rotated?this.y(t):this.x(t)},e.zoom.orgScaleExtent=function(){var t=i.zoom_extent?i.zoom_extent:[1,10];return[t[0],Math.max(e.getMaxDataCount()/t[1],t[1])]},e.zoom.updateScaleExtent=function(){var t=y(e.x.orgDomain())/y(e.getZoomDomain()),n=this.orgScaleExtent();return this.scaleExtent([n[0]*t,n[1]*t]),this}},l.getZoomDomain=function(){var t=this,e=t.config,n=t.d3,i=n.min([t.orgXDomain[0],e.zoom_x_min]),r=n.max([t.orgXDomain[1],e.zoom_x_max]);return[i,r]},l.updateZoom=function(){var t=this,e=t.config.zoom_enabled?t.zoom:function(){};t.main.select("."+c.zoomRect).call(e).on("dblclick.zoom",null),t.main.selectAll("."+c.eventRect).call(e).on("dblclick.zoom",null)},l.redrawForZoom=function(){var t=this,e=t.d3,n=t.config,i=t.zoom,r=t.x;if(n.zoom_enabled&&0!==t.filterTargetsToShow(t.data.targets).length){if("mousemove"===e.event.sourceEvent.type&&i.altDomain)return r.domain(i.altDomain),void i.scale(r).updateScaleExtent();t.isCategorized()&&r.orgDomain()[0]===t.orgXDomain[0]&&r.domain([t.orgXDomain[0]-1e-10,r.orgDomain()[1]]),t.redraw({withTransition:!1,withY:n.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===e.event.sourceEvent.type&&(t.cancelClick=!0),n.zoom_onzoom.call(t.api,r.orgDomain())}},l.generateColor=function(){var t=this,e=t.config,n=t.d3,i=e.data_colors,r=_(e.color_pattern)?e.color_pattern:n.scale.category10().range(),a=e.data_color,o=[];return function(t){var e,n=t.id||t.data&&t.data.id||t;return i[n]instanceof Function?e=i[n](t):i[n]?e=i[n]:(o.indexOf(n)<0&&o.push(n),e=r[o.indexOf(n)%r.length],i[n]=e),a instanceof Function?a(e,t):e}},l.generateLevelColor=function(){var t=this,e=t.config,n=e.color_pattern,i=e.color_threshold,r="value"===i.unit,a=i.values&&i.values.length?i.values:[],o=i.max||100;return _(e.color_threshold)?function(t){var e,i,s=n[n.length-1];for(e=0;e<a.length;e++)if(i=r?t:100*t/o,i<a[e]){s=n[e];break}return s}:null},l.getYFormat=function(t){var e=this,n=t&&!e.hasType("gauge")?e.defaultArcValueFormat:e.yFormat,i=t&&!e.hasType("gauge")?e.defaultArcValueFormat:e.y2Format;return function(t,r,a){var o="y2"===e.axis.getId(a)?i:n;return o.call(e,t,r)}},l.yFormat=function(t){var e=this,n=e.config,i=n.axis_y_tick_format?n.axis_y_tick_format:e.defaultValueFormat;return i(t)},l.y2Format=function(t){var e=this,n=e.config,i=n.axis_y2_tick_format?n.axis_y2_tick_format:e.defaultValueFormat;return i(t)},l.defaultValueFormat=function(t){return f(t)?+t:""},l.defaultArcValueFormat=function(t,e){return(100*e).toFixed(1)+"%"},l.dataLabelFormat=function(t){var e,n=this,i=n.config.data_labels,r=function(t){return f(t)?+t:""};return e="function"==typeof i.format?i.format:"object"==typeof i.format?i.format[t]?i.format[t]===!0?r:i.format[t]:function(){return""}:r},l.hasCaches=function(t){for(var e=0;e<t.length;e++)if(!(t[e]in this.cache))return!1;return!0},l.addCache=function(t,e){this.cache[t]=this.cloneTarget(e)},l.getCaches=function(t){var e,n=[];for(e=0;e<t.length;e++)t[e]in this.cache&&n.push(this.cloneTarget(this.cache[t[e]]));return n};var c=l.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",
texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};l.generateClass=function(t,e){return" "+t+" "+t+this.getTargetSelectorSuffix(e)},l.classText=function(t){return this.generateClass(c.text,t.index)},l.classTexts=function(t){return this.generateClass(c.texts,t.id)},l.classShape=function(t){return this.generateClass(c.shape,t.index)},l.classShapes=function(t){return this.generateClass(c.shapes,t.id)},l.classLine=function(t){return this.classShape(t)+this.generateClass(c.line,t.id)},l.classLines=function(t){return this.classShapes(t)+this.generateClass(c.lines,t.id)},l.classCircle=function(t){return this.classShape(t)+this.generateClass(c.circle,t.index)},l.classCircles=function(t){return this.classShapes(t)+this.generateClass(c.circles,t.id)},l.classBar=function(t){return this.classShape(t)+this.generateClass(c.bar,t.index)},l.classBars=function(t){return this.classShapes(t)+this.generateClass(c.bars,t.id)},l.classArc=function(t){return this.classShape(t.data)+this.generateClass(c.arc,t.data.id)},l.classArcs=function(t){return this.classShapes(t.data)+this.generateClass(c.arcs,t.data.id)},l.classArea=function(t){return this.classShape(t)+this.generateClass(c.area,t.id)},l.classAreas=function(t){return this.classShapes(t)+this.generateClass(c.areas,t.id)},l.classRegion=function(t,e){return this.generateClass(c.region,e)+" "+("class"in t?t["class"]:"")},l.classEvent=function(t){return this.generateClass(c.eventRect,t.index)},l.classTarget=function(t){var e=this,n=e.config.data_classes[t],i="";return n&&(i=" "+c.target+"-"+n),e.generateClass(c.target,t)+i},l.classFocus=function(t){return this.classFocused(t)+this.classDefocused(t)},l.classFocused=function(t){return" "+(this.focusedTargetIds.indexOf(t.id)>=0?c.focused:"")},l.classDefocused=function(t){return" "+(this.defocusedTargetIds.indexOf(t.id)>=0?c.defocused:"")},l.classChartText=function(t){return c.chartText+this.classTarget(t.id)},l.classChartLine=function(t){return c.chartLine+this.classTarget(t.id)},l.classChartBar=function(t){return c.chartBar+this.classTarget(t.id)},l.classChartArc=function(t){return c.chartArc+this.classTarget(t.data.id)},l.getTargetSelectorSuffix=function(t){return t||0===t?("-"+t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},l.selectorTarget=function(t,e){return(e||"")+"."+c.target+this.getTargetSelectorSuffix(t)},l.selectorTargets=function(t,e){var n=this;return t=t||[],t.length?t.map(function(t){return n.selectorTarget(t,e)}):null},l.selectorLegend=function(t){return"."+c.legendItem+this.getTargetSelectorSuffix(t)},l.selectorLegends=function(t){var e=this;return t&&t.length?t.map(function(t){return e.selectorLegend(t)}):null};var f=l.isValue=function(t){return t||0===t},d=l.isFunction=function(t){return"function"==typeof t},p=l.isString=function(t){return"string"==typeof t},g=l.isUndefined=function(t){return"undefined"==typeof t},v=l.isDefined=function(t){return"undefined"!=typeof t},m=l.ceil10=function(t){return 10*Math.ceil(t/10)},x=l.asHalfPixel=function(t){return Math.ceil(t)+.5},y=l.diffDomain=function(t){return t[1]-t[0]},b=l.isEmpty=function(t){return"undefined"==typeof t||null===t||p(t)&&0===t.length||"object"==typeof t&&0===Object.keys(t).length},_=l.notEmpty=function(t){return!l.isEmpty(t)},w=l.getOption=function(t,e,n){return v(t[e])?t[e]:n},M=l.hasValue=function(t,e){var n=!1;return Object.keys(t).forEach(function(i){t[i]===e&&(n=!0)}),n},k=l.getPathBox=function(t){var e=t.getBoundingClientRect(),n=[t.pathSegList.getItem(0),t.pathSegList.getItem(1)],i=n[0].x,r=Math.min(n[0].y,n[1].y);return{x:i,y:r,width:e.width,height:e.height}};s.focus=function(t){var e,n=this.internal;t=n.mapToTargetIds(t),e=n.svg.selectAll(n.selectorTargets(t.filter(n.isTargetToShow,n))),this.revert(),this.defocus(),e.classed(c.focused,!0).classed(c.defocused,!1),n.hasArcType()&&n.expandArc(t),n.toggleFocusLegend(t,!0),n.focusedTargetIds=t,n.defocusedTargetIds=n.defocusedTargetIds.filter(function(e){return t.indexOf(e)<0})},s.defocus=function(t){var e,n=this.internal;t=n.mapToTargetIds(t),e=n.svg.selectAll(n.selectorTargets(t.filter(n.isTargetToShow,n))),e.classed(c.focused,!1).classed(c.defocused,!0),n.hasArcType()&&n.unexpandArc(t),n.toggleFocusLegend(t,!1),n.focusedTargetIds=n.focusedTargetIds.filter(function(e){return t.indexOf(e)<0}),n.defocusedTargetIds=t},s.revert=function(t){var e,n=this.internal;t=n.mapToTargetIds(t),e=n.svg.selectAll(n.selectorTargets(t)),e.classed(c.focused,!1).classed(c.defocused,!1),n.hasArcType()&&n.unexpandArc(t),n.config.legend_show&&(n.showLegend(t.filter(n.isLegendToShow.bind(n))),n.legend.selectAll(n.selectorLegends(t)).filter(function(){return n.d3.select(this).classed(c.legendItemFocused)}).classed(c.legendItemFocused,!1)),n.focusedTargetIds=[],n.defocusedTargetIds=[]},s.show=function(t,e){var n,i=this.internal;t=i.mapToTargetIds(t),e=e||{},i.removeHiddenTargetIds(t),n=i.svg.selectAll(i.selectorTargets(t)),n.transition().style("opacity",1,"important").call(i.endall,function(){n.style("opacity",null).style("opacity",1)}),e.withLegend&&i.showLegend(t),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},s.hide=function(t,e){var n,i=this.internal;t=i.mapToTargetIds(t),e=e||{},i.addHiddenTargetIds(t),n=i.svg.selectAll(i.selectorTargets(t)),n.transition().style("opacity",0,"important").call(i.endall,function(){n.style("opacity",null).style("opacity",0)}),e.withLegend&&i.hideLegend(t),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},s.toggle=function(t,e){var n=this,i=this.internal;i.mapToTargetIds(t).forEach(function(t){i.isTargetToShow(t)?n.hide(t,e):n.show(t,e)})},s.zoom=function(t){var e=this.internal;return t&&(e.isTimeSeries()&&(t=t.map(function(t){return e.parseDate(t)})),e.brush.extent(t),e.redraw({withUpdateXDomain:!0,withY:e.config.zoom_rescale}),e.config.zoom_onzoom.call(this,e.x.orgDomain())),e.brush.extent()},s.zoom.enable=function(t){var e=this.internal;e.config.zoom_enabled=t,e.updateAndRedraw()},s.unzoom=function(){var t=this.internal;t.brush.clear().update(),t.redraw({withUpdateXDomain:!0})},s.zoom.max=function(t){var e=this.internal,n=e.config,i=e.d3;return 0===t||t?void(n.zoom_x_max=i.max([e.orgXDomain[1],t])):n.zoom_x_max},s.zoom.min=function(t){var e=this.internal,n=e.config,i=e.d3;return 0===t||t?void(n.zoom_x_min=i.min([e.orgXDomain[0],t])):n.zoom_x_min},s.zoom.range=function(t){return arguments.length?(v(t.max)&&this.domain.max(t.max),void(v(t.min)&&this.domain.min(t.min))):{max:this.domain.max(),min:this.domain.min()}},s.load=function(t){var e=this.internal,n=e.config;return t.xs&&e.addXs(t.xs),"classes"in t&&Object.keys(t.classes).forEach(function(e){n.data_classes[e]=t.classes[e]}),"categories"in t&&e.isCategorized()&&(n.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach(function(e){n.data_axes[e]=t.axes[e]}),"colors"in t&&Object.keys(t.colors).forEach(function(e){n.data_colors[e]=t.colors[e]}),"cacheIds"in t&&e.hasCaches(t.cacheIds)?void e.load(e.getCaches(t.cacheIds),t.done):void("unload"in t?e.unload(e.mapToTargetIds("boolean"==typeof t.unload&&t.unload?null:t.unload),function(){e.loadFromArgs(t)}):e.loadFromArgs(t))},s.unload=function(t){var e=this.internal;t=t||{},t instanceof Array?t={ids:t}:"string"==typeof t&&(t={ids:[t]}),e.unload(e.mapToTargetIds(t.ids),function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.done&&t.done()})},s.flow=function(t){var e,n,i,r,a,o,s,l,u=this.internal,h=[],c=u.getMaxDataCount(),d=0,p=0;if(t.json)n=u.convertJsonToData(t.json,t.keys);else if(t.rows)n=u.convertRowsToData(t.rows);else{if(!t.columns)return;n=u.convertColumnsToData(t.columns)}e=u.convertDataToTargets(n,!0),u.data.targets.forEach(function(t){var n,i,r=!1;for(n=0;n<e.length;n++)if(t.id===e[n].id){for(r=!0,t.values[t.values.length-1]&&(p=t.values[t.values.length-1].index+1),d=e[n].values.length,i=0;d>i;i++)e[n].values[i].index=p+i,u.isTimeSeries()||(e[n].values[i].x=p+i);t.values=t.values.concat(e[n].values),e.splice(n,1);break}r||h.push(t.id)}),u.data.targets.forEach(function(t){var e,n;for(e=0;e<h.length;e++)if(t.id===h[e])for(p=t.values[t.values.length-1].index+1,n=0;d>n;n++)t.values.push({id:t.id,index:p+n,x:u.isTimeSeries()?u.getOtherTargetX(p+n):p+n,value:null})}),u.data.targets.length&&e.forEach(function(t){var e,n=[];for(e=u.data.targets[0].values[0].index;p>e;e++)n.push({id:t.id,index:e,x:u.isTimeSeries()?u.getOtherTargetX(e):e,value:null});t.values.forEach(function(t){t.index+=p,u.isTimeSeries()||(t.x+=p)}),t.values=n.concat(t.values)}),u.data.targets=u.data.targets.concat(e),i=u.getMaxDataCount(),a=u.data.targets[0],o=a.values[0],v(t.to)?(d=0,l=u.isTimeSeries()?u.parseDate(t.to):t.to,a.values.forEach(function(t){t.x<l&&d++})):v(t.length)&&(d=t.length),c?1===c&&u.isTimeSeries()&&(s=(a.values[a.values.length-1].x-o.x)/2,r=[new Date(+o.x-s),new Date(+o.x+s)],u.updateXDomain(null,!0,!0,!1,r)):(s=u.isTimeSeries()?a.values.length>1?a.values[a.values.length-1].x-o.x:o.x-u.getXDomain(u.data.targets)[0]:1,r=[o.x-s,o.x],u.updateXDomain(null,!0,!0,!1,r)),u.updateTargets(u.data.targets),u.redraw({flow:{index:o.index,length:d,duration:f(t.duration)?t.duration:u.config.transition_duration,done:t.done,orgDataCount:c},withLegend:!0,withTransition:c>1,withTrimXDomain:!1,withUpdateXAxis:!0})},l.generateFlow=function(t){var e=this,n=e.config,i=e.d3;return function(){var r,a,o,s=t.targets,l=t.flow,u=t.drawBar,h=t.drawLine,f=t.drawArea,d=t.cx,p=t.cy,g=t.xv,v=t.xForText,m=t.yForText,x=t.duration,b=1,_=l.index,w=l.length,M=e.getValueOnIndex(e.data.targets[0].values,_),k=e.getValueOnIndex(e.data.targets[0].values,_+w),S=e.x.domain(),T=l.duration||x,C=l.done||function(){},A=e.generateWait(),L=e.xgrid||i.selectAll([]),E=e.xgridLines||i.selectAll([]),F=e.mainRegion||i.selectAll([]),R=e.mainText||i.selectAll([]),P=e.mainBar||i.selectAll([]),z=e.mainLine||i.selectAll([]),D=e.mainArea||i.selectAll([]),I=e.mainCircle||i.selectAll([]);e.flowing=!0,e.data.targets.forEach(function(t){t.values.splice(0,w)}),o=e.updateXDomain(s,!0,!0),e.updateXGrid&&e.updateXGrid(!0),l.orgDataCount?r=1===l.orgDataCount||M.x===k.x?e.x(S[0])-e.x(o[0]):e.isTimeSeries()?e.x(S[0])-e.x(o[0]):e.x(M.x)-e.x(k.x):1!==e.data.targets[0].values.length?r=e.x(S[0])-e.x(o[0]):e.isTimeSeries()?(M=e.getValueOnIndex(e.data.targets[0].values,0),k=e.getValueOnIndex(e.data.targets[0].values,e.data.targets[0].values.length-1),r=e.x(M.x)-e.x(k.x)):r=y(o)/2,b=y(S)/y(o),a="translate("+r+",0) scale("+b+",1)",e.hideXGridFocus(),i.transition().ease("linear").duration(T).each(function(){A.add(e.axes.x.transition().call(e.xAxis)),A.add(P.transition().attr("transform",a)),A.add(z.transition().attr("transform",a)),A.add(D.transition().attr("transform",a)),A.add(I.transition().attr("transform",a)),A.add(R.transition().attr("transform",a)),A.add(F.filter(e.isRegionOnX).transition().attr("transform",a)),A.add(L.transition().attr("transform",a)),A.add(E.transition().attr("transform",a))}).call(A,function(){var t,i=[],r=[],a=[];if(w){for(t=0;w>t;t++)i.push("."+c.shape+"-"+(_+t)),r.push("."+c.text+"-"+(_+t)),a.push("."+c.eventRect+"-"+(_+t));e.svg.selectAll("."+c.shapes).selectAll(i).remove(),e.svg.selectAll("."+c.texts).selectAll(r).remove(),e.svg.selectAll("."+c.eventRects).selectAll(a).remove(),e.svg.select("."+c.xgrid).remove()}L.attr("transform",null).attr(e.xgridAttr),E.attr("transform",null),E.select("line").attr("x1",n.axis_rotated?0:g).attr("x2",n.axis_rotated?e.width:g),E.select("text").attr("x",n.axis_rotated?e.width:0).attr("y",g),P.attr("transform",null).attr("d",u),z.attr("transform",null).attr("d",h),D.attr("transform",null).attr("d",f),I.attr("transform",null).attr("cx",d).attr("cy",p),R.attr("transform",null).attr("x",v).attr("y",m).style("fill-opacity",e.opacityForText.bind(e)),F.attr("transform",null),F.select("rect").filter(e.isRegionOnX).attr("x",e.regionX.bind(e)).attr("width",e.regionWidth.bind(e)),n.interaction_enabled&&e.redrawEventRect(),C(),e.flowing=!1})}},s.selected=function(t){var e=this.internal,n=e.d3;return n.merge(e.main.selectAll("."+c.shapes+e.getTargetSelectorSuffix(t)).selectAll("."+c.shape).filter(function(){return n.select(this).classed(c.SELECTED)}).map(function(t){return t.map(function(t){var e=t.__data__;return e.data?e.data:e})}))},s.select=function(t,e,n){var i=this.internal,r=i.d3,a=i.config;a.data_selection_enabled&&i.main.selectAll("."+c.shapes).selectAll("."+c.shape).each(function(o,s){var l=r.select(this),u=o.data?o.data.id:o.id,h=i.getToggle(this,o).bind(i),f=a.data_selection_grouped||!t||t.indexOf(u)>=0,d=!e||e.indexOf(s)>=0,p=l.classed(c.SELECTED);l.classed(c.line)||l.classed(c.area)||(f&&d?a.data_selection_isselectable(o)&&!p&&h(!0,l.classed(c.SELECTED,!0),o,s):v(n)&&n&&p&&h(!1,l.classed(c.SELECTED,!1),o,s))})},s.unselect=function(t,e){var n=this.internal,i=n.d3,r=n.config;r.data_selection_enabled&&n.main.selectAll("."+c.shapes).selectAll("."+c.shape).each(function(a,o){var s=i.select(this),l=a.data?a.data.id:a.id,u=n.getToggle(this,a).bind(n),h=r.data_selection_grouped||!t||t.indexOf(l)>=0,f=!e||e.indexOf(o)>=0,d=s.classed(c.SELECTED);s.classed(c.line)||s.classed(c.area)||h&&f&&r.data_selection_isselectable(a)&&d&&u(!1,s.classed(c.SELECTED,!1),a,o)})},s.transform=function(t,e){var n=this.internal,i=["pie","donut"].indexOf(t)>=0?{withTransform:!0}:null;n.transformTo(e,t,i)},l.transformTo=function(t,e,n){var i=this,r=!i.hasArcType(),a=n||{withTransitionForAxis:r};a.withTransitionForTransform=!1,i.transiting=!1,i.setTargetType(t,e),i.updateTargets(i.data.targets),i.updateAndRedraw(a)},s.groups=function(t){var e=this.internal,n=e.config;return g(t)?n.data_groups:(n.data_groups=t,e.redraw(),n.data_groups)},s.xgrids=function(t){var e=this.internal,n=e.config;return t?(n.grid_x_lines=t,e.redrawWithoutRescale(),n.grid_x_lines):n.grid_x_lines},s.xgrids.add=function(t){var e=this.internal;return this.xgrids(e.config.grid_x_lines.concat(t?t:[]))},s.xgrids.remove=function(t){var e=this.internal;e.removeGridLines(t,!0)},s.ygrids=function(t){var e=this.internal,n=e.config;return t?(n.grid_y_lines=t,e.redrawWithoutRescale(),n.grid_y_lines):n.grid_y_lines},s.ygrids.add=function(t){var e=this.internal;return this.ygrids(e.config.grid_y_lines.concat(t?t:[]))},s.ygrids.remove=function(t){var e=this.internal;e.removeGridLines(t,!1)},s.regions=function(t){var e=this.internal,n=e.config;return t?(n.regions=t,e.redrawWithoutRescale(),n.regions):n.regions},s.regions.add=function(t){var e=this.internal,n=e.config;return t?(n.regions=n.regions.concat(t),e.redrawWithoutRescale(),n.regions):n.regions},s.regions.remove=function(t){var e,n,i,r=this.internal,a=r.config;return t=t||{},e=r.getOption(t,"duration",a.transition_duration),n=r.getOption(t,"classes",[c.region]),i=r.main.select("."+c.regions).selectAll(n.map(function(t){return"."+t})),(e?i.transition().duration(e):i).style("opacity",0).remove(),a.regions=a.regions.filter(function(t){var e=!1;return!t["class"]||(t["class"].split(" ").forEach(function(t){n.indexOf(t)>=0&&(e=!0)}),!e)}),a.regions},s.data=function(t){var e=this.internal.data.targets;return"undefined"==typeof t?e:e.filter(function(e){return[].concat(t).indexOf(e.id)>=0})},s.data.shown=function(t){return this.internal.filterTargetsToShow(this.data(t))},s.data.values=function(t){var e,n=null;return t&&(e=this.data(t),n=e[0]?e[0].values.map(function(t){return t.value}):null),n},s.data.names=function(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},s.data.colors=function(t){return this.internal.updateDataAttributes("colors",t)},s.data.axes=function(t){return this.internal.updateDataAttributes("axes",t)},s.category=function(t,e){var n=this.internal,i=n.config;return arguments.length>1&&(i.axis_x_categories[t]=e,n.redraw()),i.axis_x_categories[t]},s.categories=function(t){var e=this.internal,n=e.config;return arguments.length?(n.axis_x_categories=t,e.redraw(),n.axis_x_categories):n.axis_x_categories},s.color=function(t){var e=this.internal;return e.color(t)},s.x=function(t){var e=this.internal;return arguments.length&&(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},s.xs=function(t){var e=this.internal;return arguments.length&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},s.axis=function(){},s.axis.labels=function(t){var e=this.internal;arguments.length&&(Object.keys(t).forEach(function(n){e.axis.setLabelText(n,t[n])}),e.axis.updateLabels())},s.axis.max=function(t){var e=this.internal,n=e.config;return arguments.length?("object"==typeof t?(f(t.x)&&(n.axis_x_max=t.x),f(t.y)&&(n.axis_y_max=t.y),f(t.y2)&&(n.axis_y2_max=t.y2)):n.axis_y_max=n.axis_y2_max=t,void e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:n.axis_x_max,y:n.axis_y_max,y2:n.axis_y2_max}},s.axis.min=function(t){var e=this.internal,n=e.config;return arguments.length?("object"==typeof t?(f(t.x)&&(n.axis_x_min=t.x),f(t.y)&&(n.axis_y_min=t.y),f(t.y2)&&(n.axis_y2_min=t.y2)):n.axis_y_min=n.axis_y2_min=t,void e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:n.axis_x_min,y:n.axis_y_min,y2:n.axis_y2_min}},s.axis.range=function(t){return arguments.length?(v(t.max)&&this.axis.max(t.max),void(v(t.min)&&this.axis.min(t.min))):{max:this.axis.max(),min:this.axis.min()}},s.legend=function(){},s.legend.show=function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},s.legend.hide=function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},s.resize=function(t){var e=this.internal,n=e.config;n.size_width=t?t.width:null,n.size_height=t?t.height:null,this.flush()},s.flush=function(){var t=this.internal;t.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},s.destroy=function(){var e=this.internal;if(t.clearInterval(e.intervalForObserveInserted),void 0!==e.resizeTimeout&&t.clearTimeout(e.resizeTimeout),t.detachEvent)t.detachEvent("onresize",e.resizeFunction);else if(t.removeEventListener)t.removeEventListener("resize",e.resizeFunction);else{var n=t.onresize;n&&n.add&&n.remove&&n.remove(e.resizeFunction)}return e.selectChart.classed("c3",!1).html(""),Object.keys(e).forEach(function(t){e[t]=null}),null},s.tooltip=function(){},s.tooltip.show=function(t){var e,n,i=this.internal;t.mouse&&(n=t.mouse),t.data?i.isMultipleX()?(n=[i.x(t.data.x),i.getYScale(t.data.id)(t.data.value)],e=null):e=f(t.data.index)?t.data.index:i.getIndexByX(t.data.x):"undefined"!=typeof t.x?e=i.getIndexByX(t.x):"undefined"!=typeof t.index&&(e=t.index),i.dispatchEvent("mouseover",e,n),i.dispatchEvent("mousemove",e,n),i.config.tooltip_onshow.call(i,t.data)},s.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)};var S;l.isSafari=function(){var e=t.navigator.userAgent;return e.indexOf("Safari")>=0&&e.indexOf("Chrome")<0},l.isChrome=function(){var e=t.navigator.userAgent;return e.indexOf("Chrome")>=0},Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r}),"function"==typeof define&&define.amd?define("c3",["d3"],function(){return h}):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=h:t.c3=h}(window);